{"version":3,"file":"static/js/923.7fcc6b06.chunk.js","mappings":"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","sources":["components/OTA.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport '../App.css';\r\n\r\ninterface FirmwareVersion {\r\n  id: number;\r\n  name: string;\r\n  version: string;\r\n  deviceModel: string;\r\n  minBootloaderVersion: string;\r\n  file: File | null;\r\n  size: number;\r\n  checksum: string;\r\n  signatureValid: boolean;\r\n  releaseNotes: string;\r\n  status: 'draft' | 'stable';\r\n  uploadDate: string;\r\n}\r\n\r\ninterface DeviceStatus {\r\n  deviceId: string;\r\n  currentVersion: string;\r\n  targetVersion: string;\r\n  activeSlot: 'A' | 'B';\r\n  status: 'idle' | 'downloading' | 'flashing' | 'rebooting' | 'trial' | 'healthy' | 'failed' | 'rolledback';\r\n  bootCount: number;\r\n  lastError: string;\r\n  progress?: number;\r\n}\r\n\r\ninterface DeploymentConfig {\r\n  firmwareVersion: string;\r\n  targetDevices: string[];\r\n  mode: 'immediate' | 'canary';\r\n  autoRollback: boolean;\r\n  healthTimeout: number;\r\n  failureThreshold: number;\r\n}\r\n\r\ninterface DeploymentConfirmModal {\r\n  show: boolean;\r\n  firmware: string;\r\n  deviceCount: number;\r\n  dataTransfer: string;\r\n}\r\n\r\nexport const OTA: React.FC = () => {\r\n  const { isDark } = useTheme();\r\n  \r\n  // Section 1: Firmware Repository State\r\n  const [firmwares, setFirmwares] = useState<FirmwareVersion[]>([]);\r\n  const [uploadForm, setUploadForm] = useState({\r\n    name: '',\r\n    version: '',\r\n    deviceModel: 'ESP32-S3',\r\n    minBootloader: '1.0.0',\r\n    releaseNotes: '',\r\n    file: null as File | null,\r\n  });\r\n\r\n  // Section 2: Deployment Panel State\r\n  const [deploymentConfig, setDeploymentConfig] = useState<DeploymentConfig>({\r\n    firmwareVersion: '',\r\n    targetDevices: [],\r\n    mode: 'immediate',\r\n    autoRollback: true,\r\n    healthTimeout: 300,\r\n    failureThreshold: 10,\r\n  });\r\n  const [confirmModal, setConfirmModal] = useState<DeploymentConfirmModal>({\r\n    show: false,\r\n    firmware: '',\r\n    deviceCount: 0,\r\n    dataTransfer: '',\r\n  });\r\n  const [isDeploying, setIsDeploying] = useState(false);\r\n\r\n  // Section 3: Live Deployment Status State\r\n  const [devices, setDevices] = useState<DeviceStatus[]>([]);\r\n  const [statusFilter, setStatusFilter] = useState<'all' | DeviceStatus['status']>('all');\r\n  const [loadingDevices, setLoadingDevices] = useState(true);\r\n  const [loadingFirmwares, setLoadingFirmwares] = useState(true);\r\n  const [activeDeployment, setActiveDeployment] = useState<any>(null);\r\n\r\n  // Section 4: Emergency Rollback State\r\n  const [rollbackForm, setRollbackForm] = useState({\r\n    selectedDevices: [] as string[],\r\n    reason: '',\r\n  });\r\n  const [showRollbackModal, setShowRollbackModal] = useState(false);\r\n  const [rollbackFilters, setRollbackFilters] = useState({\r\n    currentVersion: 'all',\r\n    status: 'all',\r\n    deviceModel: 'all',\r\n  });\r\n\r\n  // Modern modal states\r\n  const [deleteFirmwareModal, setDeleteFirmwareModal] = useState<{ show: boolean; firmware: FirmwareVersion | null }>({ show: false, firmware: null });\r\n  const [deactivateFirmwareModal, setDeactivateFirmwareModal] = useState<{ show: boolean; firmware: FirmwareVersion | null }>({ show: false, firmware: null });\r\n  const [successModal, setSuccessModal] = useState<{ show: boolean; message: string }>({ show: false, message: '' });\r\n  const [errorModal, setErrorModal] = useState<{ show: boolean; message: string }>({ show: false, message: '' });\r\n\r\n  // Initial load - runs once on mount\r\n  useEffect(() => {\r\n    loadFirmwareData();\r\n    loadDevices();\r\n    loadDeployments();\r\n    \r\n    // Set up polling for deployment status updates\r\n    const interval = setInterval(() => {\r\n      loadDeployments(); // This will update activeDeployment and trigger status updates if needed\r\n    }, 10000);\r\n    \r\n    return () => clearInterval(interval);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const loadFirmwareData = async () => {\r\n    try {\r\n      setLoadingFirmwares(true);\r\n      const response = await apiService.getFirmwareVersions(false); // Get all firmware versions\r\n      \r\n      // Transform backend response to frontend FirmwareVersion interface\r\n      const transformedFirmwares: FirmwareVersion[] = (response.results || response || []).map((fw: any) => ({\r\n        id: fw.id,\r\n        name: fw.filename || `Firmware v${fw.version}`,\r\n        version: fw.version,\r\n        deviceModel: fw.description?.match(/(?:ESP32|STM32|[A-Z0-9-]+)/i)?.[0] || 'Unknown',\r\n        minBootloaderVersion: '1.0.0', // Default as backend doesn't provide this\r\n        file: null,\r\n        size: fw.size || 0,\r\n        checksum: fw.checksum || '',\r\n        signatureValid: fw.is_active !== false,\r\n        releaseNotes: fw.release_notes || fw.description || '',\r\n        status: fw.is_active ? 'stable' : 'draft',\r\n        uploadDate: fw.created_at || new Date().toISOString(),\r\n      }));\r\n      \r\n      setFirmwares(transformedFirmwares);\r\n    } catch (error) {\r\n      console.error('Failed to load firmware versions:', error);\r\n      // Set to empty on error - UI will show empty state\r\n      setFirmwares([]);\r\n    } finally {\r\n      setLoadingFirmwares(false);\r\n    }\r\n  };\r\n\r\n  const loadDevices = async () => {\r\n    try {\r\n      setLoadingDevices(true);\r\n      const response = await apiService.getDevices('', 1, 1000);\r\n      const realDevices = response.results || response;\r\n      \r\n      // Transform to simple device list - all start as 'idle'\r\n      const transformedDevices: DeviceStatus[] = (Array.isArray(realDevices) ? realDevices : []).map((device: any) => ({\r\n        deviceId: device.device_serial || device.serial || `DEV${device.id}`,\r\n        currentVersion: device.firmware_version || device.config_version || 'v1.0.0',\r\n        targetVersion: 'N/A',\r\n        activeSlot: Math.random() > 0.5 ? 'A' : 'B' as 'A' | 'B',\r\n        status: 'idle' as DeviceStatus['status'],\r\n        bootCount: device.boot_count || 0,\r\n        lastError: '',\r\n        progress: undefined,\r\n      }));\r\n      \r\n      setDevices(transformedDevices);\r\n    } catch (error) {\r\n      console.error('Failed to load devices:', error);\r\n      setDevices([]);\r\n    } finally {\r\n      setLoadingDevices(false);\r\n    }\r\n  };\r\n\r\n  const loadDeployments = async () => {\r\n    try {\r\n      const campaigns = await apiService.listTargetedUpdates();\r\n      \r\n      // Find the most recent in-progress deployment\r\n      const activeCampaign = campaigns.find((c: any) => \r\n        c.status === 'in_progress' || c.status === 'pending'\r\n      );\r\n      setActiveDeployment(activeCampaign || null);\r\n      \r\n      // If we have an active deployment, update status for those devices\r\n      if (activeCampaign) {\r\n        await updateDeployedDeviceStatuses(activeCampaign);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load deployments:', error);\r\n    }\r\n  };\r\n\r\n  const updateDeployedDeviceStatuses = async (deployment?: any) => {\r\n    try {\r\n      const activeDeploymentToUse = deployment || activeDeployment;\r\n      if (!activeDeploymentToUse) return;\r\n      \r\n      // Only fetch logs for devices in the active deployment\r\n      const targetedDevices = activeDeploymentToUse.device_targets || [];\r\n      const targetedDeviceIds = targetedDevices.map((dt: any) => dt.device?.device_serial).filter(Boolean);\r\n      \r\n      if (targetedDeviceIds.length === 0) return;\r\n      \r\n      // Fetch logs for all targeted devices in parallel\r\n      const logPromises = targetedDeviceIds.map(async (deviceId: string) => {\r\n        try {\r\n          const logs = await apiService.getDeviceUpdateLogs(deviceId);\r\n          const latestLog = logs && logs.length > 0 ? logs[0] : null;\r\n          \r\n          if (!latestLog) return { deviceId, status: 'idle' as DeviceStatus['status'] };\r\n          \r\n          const backendStatus = latestLog.status?.toLowerCase();\r\n          let status: DeviceStatus['status'] = 'idle';\r\n          \r\n          switch (backendStatus) {\r\n            case 'pending':\r\n            case 'checking':\r\n            case 'available':\r\n              status = 'trial';\r\n              break;\r\n            case 'downloading':\r\n              status = 'downloading';\r\n              break;\r\n            case 'completed':\r\n              status = 'healthy';\r\n              break;\r\n            case 'failed':\r\n              status = 'failed';\r\n              break;\r\n          }\r\n          \r\n          return {\r\n            deviceId,\r\n            status,\r\n            currentVersion: latestLog.current_firmware,\r\n            targetVersion: latestLog.firmware_version?.version,\r\n            lastError: status === 'failed' ? 'Update failed' : '',\r\n          };\r\n        } catch (error) {\r\n          console.error(`Failed to get logs for ${deviceId}:`, error);\r\n          return { deviceId, status: 'idle' as DeviceStatus['status'] };\r\n        }\r\n      });\r\n      \r\n      const deviceUpdates = await Promise.all(logPromises);\r\n      \r\n      // Create a map of device updates\r\n      const updateMap = new Map(deviceUpdates.map(u => [u.deviceId, u]));\r\n      \r\n      // Update devices state once with all changes\r\n      setDevices(prevDevices => \r\n        prevDevices.map(device => {\r\n          const update = updateMap.get(device.deviceId);\r\n          if (!update) return device;\r\n          \r\n          return {\r\n            ...device,\r\n            status: update.status,\r\n            currentVersion: update.currentVersion || device.currentVersion,\r\n            targetVersion: update.targetVersion || device.targetVersion,\r\n            lastError: update.lastError || device.lastError,\r\n          };\r\n        })\r\n      );\r\n    } catch (error) {\r\n      console.error('Failed to update deployed device statuses:', error);\r\n    }\r\n  };\r\n\r\n  // Section 1 handlers\r\n  const calculateSHA256 = async (file: File): Promise<string> => {\r\n    const buffer = await file.arrayBuffer();\r\n    const hashBuffer = await crypto.subtle.digest('SHA-256', buffer);\r\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\r\n    return hashHex;\r\n  };\r\n\r\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files?.[0]) {\r\n      const file = e.target.files[0];\r\n      setUploadForm({ ...uploadForm, file });\r\n      \r\n      // Calculate real SHA256 checksum\r\n      try {\r\n        const checksum = await calculateSHA256(file);\r\n        console.log('Calculated SHA-256 checksum:', checksum);\r\n      } catch (error) {\r\n        console.error('Failed to calculate checksum:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUploadFirmware = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!uploadForm.file) {\r\n      setErrorModal({ show: true, message: 'Please select a firmware file before uploading.' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Create FormData for multipart upload\r\n      const formData = new FormData();\r\n      formData.append('file', uploadForm.file);\r\n      formData.append('version', uploadForm.version);\r\n      formData.append('description', uploadForm.name);\r\n      formData.append('release_notes', uploadForm.releaseNotes);\r\n      formData.append('is_active', 'false'); // Uploaded as draft by default\r\n\r\n      // Call backend API to upload to S3\r\n      const response = await apiService.uploadFirmwareVersion(formData);\r\n      \r\n      setSuccessModal({ \r\n        show: true, \r\n        message: `Firmware uploaded successfully!\\n\\nVersion: ${response.version}\\nSize: ${(response.size / 1024).toFixed(2)} KB\\nChecksum: ${response.checksum?.substring(0, 16)}...\\nStored in: S3` \r\n      });\r\n      \r\n      // Reset form\r\n      setUploadForm({\r\n        name: '',\r\n        version: '',\r\n        deviceModel: 'ESP32-S3',\r\n        minBootloader: '1.0.0',\r\n        releaseNotes: '',\r\n        file: null,\r\n      });\r\n      \r\n      const fileInput = document.querySelector('input[type=\"file\"]') as HTMLInputElement;\r\n      if (fileInput) fileInput.value = '';\r\n      \r\n      // Reload firmware list from backend\r\n      await loadFirmwareData();\r\n    } catch (error: any) {\r\n      console.error('Firmware upload failed:', error);\r\n      setErrorModal({ \r\n        show: true, \r\n        message: `Upload failed: ${error.message || 'Unknown error'}\\n\\nPlease check:\\n- File size is reasonable\\n- S3 credentials are configured (USE_S3=True)\\n- You have admin permissions` \r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDeleteFirmware = async (firmware: FirmwareVersion) => {\r\n    setDeleteFirmwareModal({ show: true, firmware });\r\n  };\r\n\r\n  const confirmDeleteFirmware = async () => {\r\n    if (!deleteFirmwareModal.firmware) return;\r\n    \r\n    try {\r\n      await apiService.deleteFirmwareVersion(deleteFirmwareModal.firmware.id);\r\n      setDeleteFirmwareModal({ show: false, firmware: null });\r\n      setSuccessModal({ show: true, message: 'Firmware deleted successfully!' });\r\n      // Reload firmware list from backend\r\n      await loadFirmwareData();\r\n    } catch (error: any) {\r\n      console.error('Firmware deletion failed:', error);\r\n      setDeleteFirmwareModal({ show: false, firmware: null });\r\n      setErrorModal({ show: true, message: `Deletion failed: ${error.message || 'Unknown error'}` });\r\n    }\r\n  };\r\n\r\n  const handleMarkAsStable = async (id: number) => {\r\n    try {\r\n      await apiService.updateFirmwareVersion(id, { is_active: true });\r\n      setSuccessModal({ show: true, message: 'Firmware activated successfully!' });\r\n      // Reload firmware list from backend\r\n      await loadFirmwareData();\r\n    } catch (error: any) {\r\n      console.error('Firmware update failed:', error);\r\n      setErrorModal({ show: true, message: `Activation failed: ${error.message || 'Unknown error'}` });\r\n    }\r\n  };\r\n\r\n  const handleDeactivateFirmware = async (firmware: FirmwareVersion) => {\r\n    setDeactivateFirmwareModal({ show: true, firmware });\r\n  };\r\n\r\n  const confirmDeactivateFirmware = async () => {\r\n    if (!deactivateFirmwareModal.firmware) return;\r\n    \r\n    try {\r\n      await apiService.updateFirmwareVersion(deactivateFirmwareModal.firmware.id, { is_active: false });\r\n      setDeactivateFirmwareModal({ show: false, firmware: null });\r\n      setSuccessModal({ show: true, message: 'Firmware deactivated successfully!' });\r\n      // Reload firmware list from backend\r\n      await loadFirmwareData();\r\n    } catch (error: any) {\r\n      console.error('Firmware deactivation failed:', error);\r\n      setDeactivateFirmwareModal({ show: false, firmware: null });\r\n      setErrorModal({ show: true, message: `Deactivation failed: ${error.message || 'Unknown error'}` });\r\n    }\r\n  };\r\n\r\n  // Section 2 handlers\r\n  const handleDeployClick = () => {\r\n    if (!deploymentConfig.firmwareVersion) {\r\n      setErrorModal({ show: true, message: 'Please select a firmware version before deploying.' });\r\n      return;\r\n    }\r\n    if (deploymentConfig.targetDevices.length === 0) {\r\n      setErrorModal({ show: true, message: 'Please select at least one device to deploy to.' });\r\n      return;\r\n    }\r\n\r\n    const firmware = firmwares.find(f => f.version === deploymentConfig.firmwareVersion);\r\n    if (!firmware) return;\r\n\r\n    const totalBytes = firmware.size * deploymentConfig.targetDevices.length;\r\n    const dataTransfer = (totalBytes / (1024 * 1024)).toFixed(2) + ' MB';\r\n\r\n    setConfirmModal({\r\n      show: true,\r\n      firmware: firmware.version,\r\n      deviceCount: deploymentConfig.targetDevices.length,\r\n      dataTransfer,\r\n    });\r\n  };\r\n\r\n  const confirmDeployment = async () => {\r\n    setConfirmModal({ ...confirmModal, show: false });\r\n    setIsDeploying(true);\r\n    \r\n    try {\r\n      // Find the selected firmware object to get its ID\r\n      const firmware = firmwares.find(f => f.version === deploymentConfig.firmwareVersion);\r\n      if (!firmware) {\r\n        throw new Error('Selected firmware not found');\r\n      }\r\n      \r\n      // Call backend API to create deployment campaign\r\n      const response = await apiService.deployFirmware(\r\n        firmware.id,\r\n        deploymentConfig.targetDevices,\r\n        `Deployment: ${firmware.version} to ${deploymentConfig.targetDevices.length} device(s)`\r\n      );\r\n      \r\n      setIsDeploying(false);\r\n      alert(`Deployment initiated successfully!\\n\\nTargeted Update ID: ${response.id || 'N/A'}\\nDevices: ${response.devices_total || deploymentConfig.targetDevices.length}\\nFirmware: ${firmware.version}\\n\\nDevices will receive the update on their next check-in.`);\r\n      \r\n      // Refresh device status and deployments after deployment\r\n      await loadDeployments();\r\n    } catch (error: any) {\r\n      setIsDeploying(false);\r\n      console.error('Deployment failed:', error);\r\n      alert(`Deployment failed: ${error.message || 'Unknown error'}\\n\\nPlease check the console for details.`);\r\n    }\r\n  };\r\n\r\n  const handleSelectAllDevices = () => {\r\n    const idleDevices = devices.filter(d => d.status === 'idle');\r\n    setDeploymentConfig({\r\n      ...deploymentConfig,\r\n      targetDevices: idleDevices.map(d => d.deviceId),\r\n    });\r\n  };\r\n\r\n  // Section 3 helpers\r\n  const statusMetrics = {\r\n    total: devices.length,\r\n    inProgress: devices.filter(d => ['downloading', 'flashing', 'rebooting'].includes(d.status)).length,\r\n    healthy: devices.filter(d => d.status === 'healthy').length,\r\n    failed: devices.filter(d => d.status === 'failed').length,\r\n    rolledBack: devices.filter(d => d.status === 'rolledback').length,\r\n  };\r\n\r\n  const getStatusBadgeStyle = (status: DeviceStatus['status']) => {\r\n    const styles: Record<DeviceStatus['status'], string> = {\r\n      idle: '#6c757d',\r\n      downloading: '#17a2b8',\r\n      flashing: '#ffc107',\r\n      rebooting: '#fd7e14',\r\n      trial: '#007bff',\r\n      healthy: '#28a745',\r\n      failed: '#dc3545',\r\n      rolledback: '#6610f2',\r\n    };\r\n    return {\r\n      background: styles[status],\r\n      color: 'white',\r\n      padding: '0.25rem 0.75rem',\r\n      borderRadius: '12px',\r\n      fontSize: '0.75rem',\r\n      fontWeight: '600' as const,\r\n      textTransform: 'uppercase' as const,\r\n      whiteSpace: 'nowrap' as const,\r\n    };\r\n  };\r\n\r\n  // Section 4 handlers\r\n  const handleEmergencyRollback = () => {\r\n    setShowRollbackModal(true);\r\n  };\r\n\r\n  const confirmRollback = () => {\r\n    if (rollbackForm.selectedDevices.length === 0) {\r\n      alert('Please select devices to rollback');\r\n      return;\r\n    }\r\n    if (!rollbackForm.reason.trim()) {\r\n      alert('Please provide a reason for rollback');\r\n      return;\r\n    }\r\n\r\n    // TODO: Send updateConfig command with value 2 to trigger rollback on selected devices\r\n    // This will instruct devices to rollback to their previous firmware version\r\n    \r\n    setShowRollbackModal(false);\r\n    alert(`Sending rollback command (updateConfig=2) to ${rollbackForm.selectedDevices.length} device(s)`);\r\n    setRollbackForm({ selectedDevices: [], reason: '' });\r\n  };\r\n\r\n  const toggleRollbackDevice = (deviceId: string) => {\r\n    setRollbackForm(prev => ({\r\n      ...prev,\r\n      selectedDevices: prev.selectedDevices.includes(deviceId)\r\n        ? prev.selectedDevices.filter(id => id !== deviceId)\r\n        : [...prev.selectedDevices, deviceId]\r\n    }));\r\n  };\r\n\r\n  const getFilteredRollbackDevices = () => {\r\n    return devices.filter(device => {\r\n      if (rollbackFilters.currentVersion !== 'all' && device.currentVersion !== rollbackFilters.currentVersion) {\r\n        return false;\r\n      }\r\n      if (rollbackFilters.status !== 'all' && device.status !== rollbackFilters.status) {\r\n        return false;\r\n      }\r\n      // Add more filter conditions as needed\r\n      return true;\r\n    });\r\n  };\r\n\r\n  const selectAllFilteredDevices = () => {\r\n    const filtered = getFilteredRollbackDevices();\r\n    setRollbackForm(prev => ({\r\n      ...prev,\r\n      selectedDevices: filtered.map(d => d.deviceId)\r\n    }));\r\n  };\r\n\r\n  const deselectAllDevices = () => {\r\n    setRollbackForm(prev => ({ ...prev, selectedDevices: [] }));\r\n  };\r\n\r\n  const filteredDevices = statusFilter === 'all' \r\n    ? devices \r\n    : devices.filter(d => d.status === statusFilter);\r\n\r\n  return (\r\n    <div style={{ padding: '2rem', maxWidth: '1600px', margin: '0 auto', background: isDark ? '#1a1a1a' : '#f5f6fa', minHeight: '100vh' }}>\r\n      {/* Header */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h1 style={{ \r\n          fontSize: '2rem', \r\n          fontWeight: '700', \r\n          color: isDark ? '#e0e0e0' : '#2c3e50', \r\n          marginBottom: '0.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.75rem'\r\n        }}>\r\n          <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n            <path d=\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\"/>\r\n            <polyline points=\"3.27 6.96 12 12.01 20.73 6.96\"/>\r\n            <line x1=\"12\" y1=\"22.08\" x2=\"12\" y2=\"12\"/>\r\n          </svg>\r\n          OTA Firmware Management\r\n        </h1>\r\n        <p style={{ color: isDark ? '#a0a0a0' : '#7f8c8d', margin: 0 }}>\r\n          Upload, deploy, and monitor firmware updates across your device fleet\r\n        </p>\r\n      </div>\r\n\r\n      {/* SECTION 1: Firmware Repository */}\r\n      <div style={{ \r\n        background: isDark ? '#2d2d2d' : 'white', \r\n        borderRadius: '12px', \r\n        padding: '2rem',\r\n        marginBottom: '2rem',\r\n        boxShadow: isDark ? '0 2px 8px rgba(0,0,0,0.3)' : '0 2px 8px rgba(0,0,0,0.08)',\r\n        border: isDark ? '1px solid #404040' : '1px solid #e1e8ed'\r\n      }}>\r\n        <h2 style={{ \r\n          fontSize: '1.5rem', \r\n          fontWeight: '600', \r\n          color: isDark ? '#e0e0e0' : '#2c3e50',\r\n          marginBottom: '1.5rem',\r\n          paddingBottom: '0.75rem',\r\n          borderBottom: isDark ? '2px solid #404040' : '2px solid #e1e8ed',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem'\r\n        }}>\r\n          <span style={{ fontSize: '1.25rem' }}></span>\r\n          Firmware Repository\r\n        </h2>\r\n\r\n        {/* Upload Form */}\r\n        <form onSubmit={handleUploadFirmware} style={{ \r\n          background: isDark ? '#242424' : '#f8f9fa', \r\n          padding: '1.5rem', \r\n          borderRadius: '8px',\r\n          marginBottom: '2rem',\r\n          border: isDark ? '1px solid #404040' : '1px solid #dee2e6'\r\n        }}>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1rem' }}>\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n                Firmware Name *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={uploadForm.name}\r\n                onChange={(e) => setUploadForm({ ...uploadForm, name: e.target.value })}\r\n                placeholder=\"Solar Controller Firmware\"\r\n                required\r\n                style={{ \r\n                  width: '100%', \r\n                  padding: '0.75rem', \r\n                  borderRadius: '6px', \r\n                  border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                  fontSize: '0.95rem',\r\n                  background: isDark ? '#1a1a1a' : 'white',\r\n                  color: isDark ? '#e0e0e0' : 'inherit'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n                Version (semver) *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={uploadForm.version}\r\n                onChange={(e) => setUploadForm({ ...uploadForm, version: e.target.value })}\r\n                placeholder=\"1.4.0\"\r\n                required\r\n                pattern=\"\\d+\\.\\d+\\.\\d+\"\r\n                style={{ \r\n                  width: '100%', \r\n                  padding: '0.75rem', \r\n                  borderRadius: '6px', \r\n                  border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                  fontSize: '0.95rem',\r\n                  background: isDark ? '#1a1a1a' : 'white',\r\n                  color: isDark ? '#e0e0e0' : 'inherit'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n                Device Model\r\n              </label>\r\n              <select\r\n                value={uploadForm.deviceModel}\r\n                onChange={(e) => setUploadForm({ ...uploadForm, deviceModel: e.target.value })}\r\n                style={{ \r\n                  width: '100%', \r\n                  padding: '0.75rem', \r\n                  borderRadius: '6px', \r\n                  border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                  fontSize: '0.95rem',\r\n                  background: isDark ? '#1a1a1a' : 'white',\r\n                  color: isDark ? '#e0e0e0' : 'inherit'\r\n                }}\r\n              >\r\n                <option value=\"ESP32-S3\">ESP32-S3</option>\r\n                <option value=\"ESP32\">ESP32</option>\r\n                <option value=\"STM32\">STM32</option>\r\n                <option value=\"nRF52\">nRF52</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n                Min Bootloader Version\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={uploadForm.minBootloader}\r\n                onChange={(e) => setUploadForm({ ...uploadForm, minBootloader: e.target.value })}\r\n                placeholder=\"1.0.0\"\r\n                required\r\n                style={{ \r\n                  width: '100%', \r\n                  padding: '0.75rem', \r\n                  borderRadius: '6px', \r\n                  border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                  fontSize: '0.95rem',\r\n                  background: isDark ? '#1a1a1a' : 'white',\r\n                  color: isDark ? '#e0e0e0' : 'inherit'\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginTop: '1rem' }}>\r\n            <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n              Release Notes\r\n            </label>\r\n            <textarea\r\n              value={uploadForm.releaseNotes}\r\n              onChange={(e) => setUploadForm({ ...uploadForm, releaseNotes: e.target.value })}\r\n              placeholder=\"Bug fixes, new features, improvements...\"\r\n              rows={3}\r\n              style={{ \r\n                width: '100%', \r\n                padding: '0.75rem', \r\n                borderRadius: '6px', \r\n                border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                fontSize: '0.95rem',\r\n                fontFamily: 'inherit',\r\n                resize: 'vertical',\r\n                background: isDark ? '#1a1a1a' : 'white',\r\n                color: isDark ? '#e0e0e0' : 'inherit'\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginTop: '1rem', display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem', alignItems: 'end' }}>\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n                Firmware File (.bin) *\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                accept=\".bin\"\r\n                onChange={handleFileSelect}\r\n                required\r\n                style={{ \r\n                  width: '100%', \r\n                  padding: '0.5rem', \r\n                  borderRadius: '6px', \r\n                  border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                  fontSize: '0.9rem',\r\n                  background: isDark ? '#1a1a1a' : 'white',\r\n                  color: isDark ? '#e0e0e0' : 'inherit'\r\n                }}\r\n              />\r\n              {uploadForm.file && (\r\n                <small style={{ color: isDark ? '#a0a0a0' : '#6c757d', display: 'block', marginTop: '0.25rem' }}>\r\n                  {uploadForm.file.name} ({(uploadForm.file.size / 1024).toFixed(1)} KB)\r\n                </small>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n                SHA256 (auto-calculated)\r\n              </label>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                padding: '0.75rem',\r\n                background: isDark ? '#242424' : '#e9ecef',\r\n                borderRadius: '6px',\r\n                border: isDark ? '1px solid #404040' : '1px solid #ced4da'\r\n              }}>\r\n                <input\r\n                  type=\"text\"\r\n                  value=\"Calculating...\"\r\n                  disabled\r\n                  style={{ \r\n                    width: '100%',\r\n                    border: 'none',\r\n                    background: 'transparent',\r\n                    fontSize: '0.85rem',\r\n                    fontFamily: 'monospace',\r\n                    color: isDark ? '#a0a0a0' : '#6c757d'\r\n                  }}\r\n                />\r\n                <span style={{\r\n                  background: uploadForm.file ? '#28a745' : '#6c757d',\r\n                  color: 'white',\r\n                  padding: '0.25rem 0.5rem',\r\n                  borderRadius: '4px',\r\n                  fontSize: '0.7rem',\r\n                  fontWeight: '600',\r\n                  whiteSpace: 'nowrap'\r\n                }}>\r\n                  {uploadForm.file ? 'Valid' : 'Pending'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            style={{\r\n              marginTop: '1.5rem',\r\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n              color: 'white',\r\n              border: 'none',\r\n              padding: '0.875rem 2rem',\r\n              borderRadius: '8px',\r\n              fontSize: '1rem',\r\n              fontWeight: '600',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              boxShadow: '0 4px 12px rgba(102, 126, 234, 0.3)',\r\n            }}\r\n          >\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/>\r\n              <polyline points=\"17 8 12 3 7 8\"/>\r\n              <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"/>\r\n            </svg>\r\n            Upload Firmware\r\n          </button>\r\n        </form>\r\n\r\n        {/* Firmware List Table */}\r\n        <div>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: isDark ? '#e0e0e0' : '#495057' }}>\r\n            Available Firmware Versions\r\n          </h3>\r\n          <div style={{ overflowX: 'auto' }}>\r\n            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n              <thead>\r\n                <tr style={{ background: isDark ? '#242424' : '#f8f9fa', borderBottom: isDark ? '2px solid #404040' : '2px solid #dee2e6' }}>\r\n                  <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>Name</th>\r\n                  <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>Version</th>\r\n                  <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>Device Model</th>\r\n                  <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>File Size</th>\r\n                  <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>Upload Date</th>\r\n                  <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>Status</th>\r\n                  <th style={{ padding: '0.75rem', textAlign: 'center', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {loadingFirmwares ? (\r\n                  <tr>\r\n                    <td colSpan={7} style={{ padding: '2rem', textAlign: 'center', color: isDark ? '#a0a0a0' : '#6c757d', fontSize: '0.95rem' }}>\r\n                      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.5rem' }}>\r\n                        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ animation: 'spin 1s linear infinite' }}>\r\n                          <circle cx=\"12\" cy=\"12\" r=\"10\" opacity=\"0.25\"/>\r\n                          <path d=\"M12 2a10 10 0 0 1 10 10\" opacity=\"0.75\"/>\r\n                        </svg>\r\n                        Loading firmware versions...\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : firmwares.length === 0 ? (\r\n                  <tr>\r\n                    <td colSpan={7} style={{ padding: '2rem', textAlign: 'center', color: isDark ? '#a0a0a0' : '#6c757d', fontSize: '0.95rem' }}>\r\n                      No firmware versions uploaded yet. Use the form above to upload your first firmware.\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  firmwares.map(fw => (\r\n                  <tr key={fw.id} style={{ borderBottom: isDark ? '1px solid #404040' : '1px solid #e9ecef' }}>\r\n                    <td style={{ padding: '1rem 0.75rem' }}>\r\n                      <div style={{ fontWeight: '500', color: isDark ? '#e0e0e0' : '#2c3e50', marginBottom: '0.25rem' }}>{fw.name}</div>\r\n                      {fw.signatureValid && (\r\n                        <span style={{ fontSize: '0.75rem', color: '#28a745', display: 'flex', alignItems: 'center', gap: '0.25rem' }}>\r\n                          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\r\n                            <polyline points=\"20 6 9 17 4 12\"/>\r\n                          </svg>\r\n                          Signature Valid\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                    <td style={{ padding: '1rem 0.75rem', fontFamily: 'monospace', fontSize: '0.9rem', fontWeight: '500' }}>{fw.version}</td>\r\n                    <td style={{ padding: '1rem 0.75rem', fontSize: '0.9rem' }}>{fw.deviceModel}</td>\r\n                    <td style={{ padding: '1rem 0.75rem', fontSize: '0.9rem' }}>{(fw.size / 1024).toFixed(0)} KB</td>\r\n                    <td style={{ padding: '1rem 0.75rem', fontSize: '0.9rem' }}>\r\n                      {new Date(fw.uploadDate).toLocaleDateString()}\r\n                    </td>\r\n                    <td style={{ padding: '1rem 0.75rem' }}>\r\n                      <span style={{\r\n                        background: fw.status === 'stable' ? '#d4edda' : '#fff3cd',\r\n                        color: fw.status === 'stable' ? '#155724' : '#856404',\r\n                        padding: '0.25rem 0.75rem',\r\n                        borderRadius: '12px',\r\n                        fontSize: '0.75rem',\r\n                        fontWeight: '600',\r\n                        textTransform: 'uppercase'\r\n                      }}>\r\n                        {fw.status === 'stable' ? ' Production Stable' : 'Draft'}\r\n                      </span>\r\n                    </td>\r\n                    <td style={{ padding: '1rem 0.75rem', textAlign: 'center' }}>\r\n                      <div style={{ display: 'flex', gap: '0.5rem', justifyContent: 'center' }}>\r\n                        {fw.status === 'draft' ? (\r\n                          <button\r\n                            onClick={() => handleMarkAsStable(fw.id)}\r\n                            style={{\r\n                              background: '#28a745',\r\n                              color: 'white',\r\n                              border: 'none',\r\n                              padding: '0.5rem 0.75rem',\r\n                              borderRadius: '6px',\r\n                              fontSize: '0.8rem',\r\n                              cursor: 'pointer',\r\n                              fontWeight: '500'\r\n                            }}\r\n                          >\r\n                            Activate\r\n                          </button>\r\n                        ) : (\r\n                          <button\r\n                            onClick={() => handleDeactivateFirmware(fw)}\r\n                            style={{\r\n                              background: '#ffc107',\r\n                              color: '#000',\r\n                              border: 'none',\r\n                              padding: '0.5rem 0.75rem',\r\n                              borderRadius: '6px',\r\n                              fontSize: '0.8rem',\r\n                              cursor: 'pointer',\r\n                              fontWeight: '500'\r\n                            }}\r\n                          >\r\n                            Deactivate\r\n                          </button>\r\n                        )}\r\n                        <button\r\n                          onClick={() => handleDeleteFirmware(fw)}\r\n                          style={{\r\n                            background: '#dc3545',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            padding: '0.5rem 0.75rem',\r\n                            borderRadius: '6px',\r\n                            fontSize: '0.8rem',\r\n                            cursor: 'pointer',\r\n                            fontWeight: '500'\r\n                          }}\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* SECTION 2: Deployment Panel */}\r\n      <div style={{ \r\n        background: isDark ? '#2d2d2d' : 'white', \r\n        borderRadius: '12px', \r\n        padding: '2rem',\r\n        marginBottom: '2rem',\r\n        boxShadow: isDark ? '0 2px 8px rgba(0,0,0,0.3)' : '0 2px 8px rgba(0,0,0,0.08)',\r\n        border: isDark ? '2px solid #667eea' : '2px solid #667eea'\r\n      }}>\r\n        <h2 style={{ \r\n          fontSize: '1.5rem', \r\n          fontWeight: '600', \r\n          color: isDark ? '#e0e0e0' : '#2c3e50',\r\n          marginBottom: '1.5rem',\r\n          paddingBottom: '0.75rem',\r\n          borderBottom: isDark ? '2px solid #404040' : '2px solid #e1e8ed',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem'\r\n        }}>\r\n          <span style={{ fontSize: '1.25rem' }}></span>\r\n          Deployment Panel\r\n        </h2>\r\n\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1.5rem' }}>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n              Select Firmware Version *\r\n            </label>\r\n            <select\r\n              value={deploymentConfig.firmwareVersion}\r\n              onChange={(e) => setDeploymentConfig({ ...deploymentConfig, firmwareVersion: e.target.value })}\r\n              style={{ \r\n                width: '100%', \r\n                padding: '0.75rem', \r\n                borderRadius: '6px', \r\n                border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                fontSize: '0.95rem',\r\n                background: isDark ? '#1a1a1a' : 'white',\r\n                color: isDark ? '#e0e0e0' : 'inherit'\r\n              }}\r\n            >\r\n              <option value=\"\">-- Select Version --</option>\r\n              {firmwares.filter(f => f.status === 'stable').map(f => (\r\n                <option key={f.id} value={f.version}>\r\n                  {f.name} - v{f.version}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n              Deployment Mode\r\n            </label>\r\n            <select\r\n              value={deploymentConfig.mode}\r\n              onChange={(e) => setDeploymentConfig({ ...deploymentConfig, mode: e.target.value as 'immediate' | 'canary' })}\r\n              style={{ \r\n                width: '100%', \r\n                padding: '0.75rem', \r\n                borderRadius: '6px', \r\n                border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                fontSize: '0.95rem',\r\n                background: isDark ? '#1a1a1a' : 'white',\r\n                color: isDark ? '#e0e0e0' : 'inherit'\r\n              }}\r\n            >\r\n              <option value=\"immediate\">Immediate (Push to all devices)</option>\r\n              <option value=\"canary\">Canary (Gradual rollout)</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n              Health Confirmation Timeout (seconds)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={deploymentConfig.healthTimeout}\r\n              onChange={(e) => setDeploymentConfig({ ...deploymentConfig, healthTimeout: parseInt(e.target.value) })}\r\n              min=\"30\"\r\n              max=\"3600\"\r\n              style={{ \r\n                width: '100%', \r\n                padding: '0.75rem', \r\n                borderRadius: '6px', \r\n                border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                fontSize: '0.95rem',\r\n                background: isDark ? '#1a1a1a' : 'white',\r\n                color: isDark ? '#e0e0e0' : 'inherit'\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n              Failure Threshold (%)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={deploymentConfig.failureThreshold}\r\n              onChange={(e) => setDeploymentConfig({ ...deploymentConfig, failureThreshold: parseInt(e.target.value) })}\r\n              min=\"1\"\r\n              max=\"100\"\r\n              style={{ \r\n                width: '100%', \r\n                padding: '0.75rem', \r\n                borderRadius: '6px', \r\n                border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                fontSize: '0.95rem',\r\n                background: isDark ? '#1a1a1a' : 'white',\r\n                color: isDark ? '#e0e0e0' : 'inherit'\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: '1.5rem' }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', marginBottom: '0.5rem' }}>\r\n            <label style={{ fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n              Target Devices ({deploymentConfig.targetDevices.length} selected)\r\n            </label>\r\n            <button\r\n              onClick={handleSelectAllDevices}\r\n              style={{\r\n                background: 'transparent',\r\n                color: '#667eea',\r\n                border: '1px solid #667eea',\r\n                padding: '0.25rem 0.75rem',\r\n                borderRadius: '6px',\r\n                fontSize: '0.8rem',\r\n                cursor: 'pointer',\r\n                fontWeight: '500'\r\n              }}\r\n            >\r\n              Select All Idle ({devices.filter(d => d.status === 'idle').length})\r\n            </button>\r\n          </div>\r\n          <div style={{\r\n            maxHeight: '150px',\r\n            overflowY: 'auto',\r\n            border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n            borderRadius: '6px',\r\n            padding: '0.75rem',\r\n            background: isDark ? '#242424' : '#f8f9fa'\r\n          }}>\r\n            {loadingDevices ? (\r\n              <div style={{ textAlign: 'center', color: isDark ? '#a0a0a0' : '#6c757d', padding: '1rem' }}>\r\n                Loading devices...\r\n              </div>\r\n            ) : devices.filter(d => d.status === 'idle').length === 0 ? (\r\n              <div style={{ textAlign: 'center', color: isDark ? '#a0a0a0' : '#6c757d', padding: '1rem' }}>\r\n                No idle devices available for deployment\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {devices.filter(d => d.status === 'idle').map(device => (\r\n                  <label key={device.deviceId} style={{ \r\n                    display: 'block', \r\n                    marginBottom: '0.5rem',\r\n                    cursor: 'pointer',\r\n                    fontSize: '0.9rem'\r\n                  }}>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={deploymentConfig.targetDevices.includes(device.deviceId)}\r\n                      onChange={(e) => {\r\n                        const newTargets = e.target.checked\r\n                          ? [...deploymentConfig.targetDevices, device.deviceId]\r\n                          : deploymentConfig.targetDevices.filter(id => id !== device.deviceId);\r\n                        setDeploymentConfig({ ...deploymentConfig, targetDevices: newTargets });\r\n                      }}\r\n                      style={{ marginRight: '0.5rem' }}\r\n                    />\r\n                    {device.deviceId} (Current: {device.currentVersion})\r\n                  </label>\r\n                ))}\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: '1.5rem', display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\r\n          <label style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            cursor: 'pointer',\r\n            fontWeight: '500',\r\n            color: isDark ? '#b0b0b0' : '#495057'\r\n          }}>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={deploymentConfig.autoRollback}\r\n              onChange={(e) => setDeploymentConfig({ ...deploymentConfig, autoRollback: e.target.checked })}\r\n              style={{ width: '20px', height: '20px', cursor: 'pointer' }}\r\n            />\r\n            Enable Auto Rollback\r\n          </label>\r\n          <span style={{ fontSize: '0.85rem', color: isDark ? '#a0a0a0' : '#6c757d' }}>\r\n            (Automatically rollback on failure)\r\n          </span>\r\n        </div>\r\n\r\n        <div style={{ marginTop: '2rem', display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n          <button\r\n            onClick={handleDeployClick}\r\n            disabled={isDeploying}\r\n            style={{\r\n              background: isDeploying ? '#6c757d' : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n              color: 'white',\r\n              border: 'none',\r\n              padding: '1rem 2.5rem',\r\n              borderRadius: '8px',\r\n              fontSize: '1.125rem',\r\n              fontWeight: '600',\r\n              cursor: isDeploying ? 'not-allowed' : 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.75rem',\r\n              boxShadow: '0 4px 12px rgba(102, 126, 234, 0.3)',\r\n            }}\r\n          >\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <polygon points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"/>\r\n            </svg>\r\n            {isDeploying ? 'Deploying...' : 'Deploy Firmware'}\r\n          </button>\r\n\r\n          {isDeploying && (\r\n            <>\r\n              <button\r\n                style={{\r\n                  background: '#ffc107',\r\n                  color: '#000',\r\n                  border: 'none',\r\n                  padding: '1rem 2rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '1rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                }}\r\n              >\r\n                 Pause Deployment\r\n              </button>\r\n              <button\r\n                style={{\r\n                  background: '#dc3545',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '1rem 2rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '1rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                }}\r\n              >\r\n                 Abort Deployment\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Deployment Confirmation Modal */}\r\n      {confirmModal.show && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.6)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000\r\n        }}>\r\n          <div style={{\r\n            background: isDark ? '#2d2d2d' : 'white',\r\n            borderRadius: '12px',\r\n            padding: '2rem',\r\n            maxWidth: '500px',\r\n            width: '90%',\r\n            boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n            border: isDark ? '1px solid #404040' : 'none'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.5rem', fontWeight: '600', marginBottom: '1.5rem', color: isDark ? '#e0e0e0' : '#2c3e50' }}>\r\n              Confirm Deployment\r\n            </h3>\r\n            <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.8' }}>\r\n              <p><strong>Firmware Version:</strong> {confirmModal.firmware}</p>\r\n              <p><strong>Target Devices:</strong> {confirmModal.deviceCount}</p>\r\n              <p><strong>Estimated Data Transfer:</strong> {confirmModal.dataTransfer}</p>\r\n              <p><strong>Auto Rollback:</strong> {deploymentConfig.autoRollback ? 'Enabled ' : 'Disabled'}</p>\r\n              <p><strong>Failure Threshold:</strong> {deploymentConfig.failureThreshold}%</p>\r\n            </div>\r\n            <div style={{\r\n              background: isDark ? '#3a2a00' : '#fff3cd',\r\n              border: isDark ? '1px solid #6b5300' : '1px solid #ffc107',\r\n              borderRadius: '8px',\r\n              padding: '1rem',\r\n              marginBottom: '1.5rem',\r\n              color: isDark ? '#ffd966' : '#856404'\r\n            }}>\r\n              <strong> Warning:</strong> This will push firmware updates to {confirmModal.deviceCount} devices.\r\n            </div>\r\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\r\n              <button\r\n                onClick={() => setConfirmModal({ ...confirmModal, show: false })}\r\n                style={{\r\n                  background: '#6c757d',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '1rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={confirmDeployment}\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '1rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Confirm Deploy\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* SECTION 3: Live Deployment Status */}\r\n      <div style={{ \r\n        background: isDark ? '#2d2d2d' : 'white', \r\n        borderRadius: '12px', \r\n        padding: '2rem',\r\n        marginBottom: '2rem',\r\n        boxShadow: isDark ? '0 2px 8px rgba(0,0,0,0.3)' : '0 2px 8px rgba(0,0,0,0.08)',\r\n        border: isDark ? '1px solid #404040' : '1px solid #e1e8ed'\r\n      }}>\r\n        <h2 style={{ \r\n          fontSize: '1.5rem', \r\n          fontWeight: '600', \r\n          color: isDark ? '#e0e0e0' : '#2c3e50',\r\n          marginBottom: '1.5rem',\r\n          paddingBottom: '0.75rem',\r\n          borderBottom: isDark ? '2px solid #404040' : '2px solid #e1e8ed',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem'\r\n        }}>\r\n          <span style={{ fontSize: '1.25rem' }}></span>\r\n          Live Deployment Status\r\n          {loadingDevices && (\r\n            <span style={{ fontSize: '0.85rem', color: isDark ? '#a0a0a0' : '#6c757d', fontWeight: '400', marginLeft: 'auto' }}>\r\n              Loading devices...\r\n            </span>\r\n          )}\r\n        </h2>\r\n\r\n        {/* Loading or No Devices State */}\r\n        {loadingDevices ? (\r\n          <div style={{\r\n            textAlign: 'center',\r\n            padding: '3rem 1rem',\r\n            color: isDark ? '#a0a0a0' : '#6c757d'\r\n          }}>\r\n            <div style={{ fontSize: '2rem', marginBottom: '1rem' }}></div>\r\n            <p style={{ fontSize: '1.1rem' }}>Loading devices from backend...</p>\r\n          </div>\r\n        ) : devices.length === 0 ? (\r\n          <div style={{\r\n            textAlign: 'center',\r\n            padding: '3rem 1rem',\r\n            color: isDark ? '#a0a0a0' : '#6c757d'\r\n          }}>\r\n            <div style={{ fontSize: '3rem', marginBottom: '1rem' }}></div>\r\n            <p style={{ fontSize: '1.1rem', marginBottom: '0.5rem' }}>No devices registered yet</p>\r\n            <p style={{ fontSize: '0.9rem' }}>Register devices to see them here</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* Active Deployment Banner */}\r\n            {activeDeployment && (\r\n              <div style={{\r\n                background: activeDeployment.status === 'in_progress' \r\n                  ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' \r\n                  : isDark ? '#2a4a2a' : '#d4edda',\r\n                color: activeDeployment.status === 'in_progress' ? 'white' : isDark ? '#90ee90' : '#155724',\r\n                padding: '1.5rem',\r\n                borderRadius: '12px',\r\n                marginBottom: '2rem',\r\n                border: activeDeployment.status === 'in_progress' \r\n                  ? 'none' \r\n                  : isDark ? '1px solid #4a6a4a' : '1px solid #c3e6cb'\r\n              }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.75rem' }}>\r\n                  <h3 style={{ fontSize: '1.1rem', fontWeight: '600', margin: 0 }}>\r\n                    {activeDeployment.status === 'in_progress' ? ' Active Deployment' : ' Deployment Completed'}\r\n                  </h3>\r\n                  <span style={{ \r\n                    fontSize: '0.85rem', \r\n                    padding: '0.25rem 0.75rem', \r\n                    background: 'rgba(255,255,255,0.2)', \r\n                    borderRadius: '20px' \r\n                  }}>\r\n                    ID: {activeDeployment.id}\r\n                  </span>\r\n                </div>\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem', fontSize: '0.9rem' }}>\r\n                  <div>\r\n                    <strong>Firmware:</strong> {activeDeployment.target_firmware?.version || 'N/A'}\r\n                  </div>\r\n                  <div>\r\n                    <strong>Total Devices:</strong> {activeDeployment.devices_total || 0}\r\n                  </div>\r\n                  <div>\r\n                    <strong>Updated:</strong> {activeDeployment.devices_updated || 0}\r\n                  </div>\r\n                  <div>\r\n                    <strong>Failed:</strong> {activeDeployment.devices_failed || 0}\r\n                  </div>\r\n                  <div>\r\n                    <strong>Progress:</strong> {activeDeployment.devices_total > 0 \r\n                      ? `${Math.round((activeDeployment.devices_updated / activeDeployment.devices_total) * 100)}%`\r\n                      : '0%'}\r\n                  </div>\r\n                  <div>\r\n                    <strong>Started:</strong> {new Date(activeDeployment.created_at).toLocaleString()}\r\n                  </div>\r\n                </div>\r\n                {activeDeployment.notes && (\r\n                  <div style={{ marginTop: '1rem', fontSize: '0.85rem', opacity: 0.9 }}>\r\n                    <strong>Notes:</strong> {activeDeployment.notes}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n            \r\n            {/* Summary Metrics */}\r\n        <div style={{ \r\n          display: 'grid', \r\n          gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', \r\n          gap: '1rem',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n            color: 'white',\r\n            padding: '1.25rem',\r\n            borderRadius: '12px',\r\n            textAlign: 'center'\r\n          }}>\r\n            <div style={{ fontSize: '2rem', fontWeight: '700', marginBottom: '0.25rem' }}>{statusMetrics.total}</div>\r\n            <div style={{ fontSize: '0.85rem', opacity: 0.9 }}>Total Devices</div>\r\n          </div>\r\n          \r\n          <div style={{\r\n            background: '#17a2b8',\r\n            color: 'white',\r\n            padding: '1.25rem',\r\n            borderRadius: '12px',\r\n            textAlign: 'center'\r\n          }}>\r\n            <div style={{ fontSize: '2rem', fontWeight: '700', marginBottom: '0.25rem' }}>{statusMetrics.inProgress}</div>\r\n            <div style={{ fontSize: '0.85rem', opacity: 0.9 }}>In Progress</div>\r\n          </div>\r\n          \r\n          <div style={{\r\n            background: '#28a745',\r\n            color: 'white',\r\n            padding: '1.25rem',\r\n            borderRadius: '12px',\r\n            textAlign: 'center'\r\n          }}>\r\n            <div style={{ fontSize: '2rem', fontWeight: '700', marginBottom: '0.25rem' }}>{statusMetrics.healthy}</div>\r\n            <div style={{ fontSize: '0.85rem', opacity: 0.9 }}>Healthy</div>\r\n          </div>\r\n          \r\n          <div style={{\r\n            background: '#dc3545',\r\n            color: 'white',\r\n            padding: '1.25rem',\r\n            borderRadius: '12px',\r\n            textAlign: 'center'\r\n          }}>\r\n            <div style={{ fontSize: '2rem', fontWeight: '700', marginBottom: '0.25rem' }}>{statusMetrics.failed}</div>\r\n            <div style={{ fontSize: '0.85rem', opacity: 0.9 }}>Failed</div>\r\n          </div>\r\n          \r\n          <div style={{\r\n            background: '#6610f2',\r\n            color: 'white',\r\n            padding: '1.25rem',\r\n            borderRadius: '12px',\r\n            textAlign: 'center'\r\n          }}>\r\n            <div style={{ fontSize: '2rem', fontWeight: '700', marginBottom: '0.25rem' }}>{statusMetrics.rolledBack}</div>\r\n            <div style={{ fontSize: '0.85rem', opacity: 0.9 }}>Rolled Back</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Filter */}\r\n        <div style={{ marginBottom: '1rem', display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\r\n          {['all', 'idle', 'downloading', 'flashing', 'rebooting', 'trial', 'healthy', 'failed', 'rolledback'].map(status => (\r\n            <button\r\n              key={status}\r\n              onClick={() => setStatusFilter(status as any)}\r\n              style={{\r\n                background: statusFilter === status ? '#667eea' : (isDark ? '#242424' : '#f8f9fa'),\r\n                color: statusFilter === status ? 'white' : (isDark ? '#e0e0e0' : '#495057'),\r\n                border: isDark ? '1px solid #404040' : '1px solid #dee2e6',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '20px',\r\n                fontSize: '0.85rem',\r\n                fontWeight: '500',\r\n                cursor: 'pointer',\r\n                textTransform: 'capitalize'\r\n              }}\r\n            >\r\n              {status}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Device Status Table */}\r\n        <div style={{ overflowX: 'auto', maxHeight: '500px', overflowY: 'auto' }}>\r\n          <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '0.9rem' }}>\r\n            <thead style={{ position: 'sticky', top: 0, background: isDark ? '#242424' : '#f8f9fa', zIndex: 1 }}>\r\n              <tr style={{ borderBottom: isDark ? '2px solid #404040' : '2px solid #dee2e6' }}>\r\n                <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057' }}>Device ID</th>\r\n                <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057' }}>Current</th>\r\n                <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057' }}>Target</th>\r\n                <th style={{ padding: '0.75rem', textAlign: 'center', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057' }}>Slot</th>\r\n                <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057' }}>Status</th>\r\n                <th style={{ padding: '0.75rem', textAlign: 'center', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057' }}>Boot Count</th>\r\n                <th style={{ padding: '0.75rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : '#495057' }}>Last Error</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredDevices.map(device => (\r\n                <tr key={device.deviceId} style={{ borderBottom: isDark ? '1px solid #404040' : '1px solid #e9ecef' }}>\r\n                  <td style={{ padding: '0.75rem', fontFamily: 'monospace', fontWeight: '500' }}>{device.deviceId}</td>\r\n                  <td style={{ padding: '0.75rem', fontFamily: 'monospace', fontSize: '0.85rem' }}>{device.currentVersion}</td>\r\n                  <td style={{ padding: '0.75rem', fontFamily: 'monospace', fontSize: '0.85rem' }}>{device.targetVersion}</td>\r\n                  <td style={{ padding: '0.75rem', textAlign: 'center' }}>\r\n                    <span style={{\r\n                      background: device.activeSlot === 'A' ? '#e3f2fd' : '#fff3e0',\r\n                      color: device.activeSlot === 'A' ? '#1976d2' : '#f57c00',\r\n                      padding: '0.25rem 0.5rem',\r\n                      borderRadius: '6px',\r\n                      fontWeight: '600',\r\n                      fontSize: '0.75rem'\r\n                    }}>\r\n                      {device.activeSlot}\r\n                    </span>\r\n                  </td>\r\n                  <td style={{ padding: '0.75rem' }}>\r\n                    <span style={getStatusBadgeStyle(device.status)}>\r\n                      {device.status}\r\n                    </span>\r\n                    {device.progress !== undefined && (\r\n                      <div style={{ marginTop: '0.25rem', fontSize: '0.75rem', color: isDark ? '#a0a0a0' : '#6c757d' }}>\r\n                        {device.progress.toFixed(0)}%\r\n                      </div>\r\n                    )}\r\n                  </td>\r\n                  <td style={{ padding: '0.75rem', textAlign: 'center', fontSize: '0.9rem' }}>{device.bootCount}</td>\r\n                  <td style={{ padding: '0.75rem', fontSize: '0.85rem', color: device.lastError ? '#dc3545' : (isDark ? '#a0a0a0' : '#6c757d') }}>\r\n                    {device.lastError || '-'}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* SECTION 4: Emergency Rollback */}\r\n      <div style={{ \r\n        background: isDark ? '#2d2d2d' : 'white', \r\n        borderRadius: '12px', \r\n        padding: '2rem',\r\n        boxShadow: isDark ? '0 2px 8px rgba(0,0,0,0.3)' : '0 2px 8px rgba(0,0,0,0.08)',\r\n        border: isDark ? '2px solid #dc3545' : '2px solid #dc3545'\r\n      }}>\r\n        <h2 style={{ \r\n          fontSize: '1.5rem', \r\n          fontWeight: '600', \r\n          color: '#dc3545',\r\n          marginBottom: '1rem',\r\n          paddingBottom: '0.75rem',\r\n          borderBottom: isDark ? '2px solid #5a1f24' : '2px solid #f8d7da',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem'\r\n        }}>\r\n          <span style={{ fontSize: '1.25rem' }}></span>\r\n          Emergency Rollback\r\n        </h2>\r\n        \r\n        <div style={{\r\n          background: isDark ? '#3d1a1a' : '#f8d7da',\r\n          border: isDark ? '1px solid #5a1f24' : '1px solid #f5c6cb',\r\n          borderRadius: '8px',\r\n          padding: '1rem',\r\n          marginBottom: '1.5rem',\r\n          color: isDark ? '#ff9999' : '#721c24'\r\n        }}>\r\n          <strong> Warning:</strong> Use this feature only in emergency situations. Rollback command will revert devices to their previous firmware version automatically.\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '1.5rem', padding: '1rem', background: isDark ? '#1a2a3a' : '#e7f3ff', border: isDark ? '1px solid #2a4a6a' : '1px solid #b3d9ff', borderRadius: '8px', color: isDark ? '#66b2ff' : '#004085' }}>\r\n          <strong> How it works:</strong> The rollback sends an <code style={{ background: isDark ? '#0d1117' : '#fff', padding: '0.2rem 0.5rem', borderRadius: '4px', fontFamily: 'monospace', color: isDark ? '#e0e0e0' : 'inherit' }}>updateConfig</code> command with value <code style={{ background: isDark ? '#0d1117' : '#fff', padding: '0.2rem 0.5rem', borderRadius: '4px', fontFamily: 'monospace', color: isDark ? '#e0e0e0' : 'inherit' }}>2</code> to selected devices, triggering them to automatically revert to their previous firmware version.\r\n        </div>\r\n\r\n        <div>\r\n          <div>\r\n            <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.9rem' }}>\r\n              Rollback Reason *\r\n            </label>\r\n            <textarea\r\n              value={rollbackForm.reason}\r\n              onChange={(e) => setRollbackForm({ ...rollbackForm, reason: e.target.value })}\r\n              placeholder=\"Reason for emergency rollback...\"\r\n              rows={3}\r\n              style={{ \r\n                width: '100%', \r\n                padding: '0.75rem', \r\n                borderRadius: '6px', \r\n                border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                fontSize: '0.95rem',\r\n                fontFamily: 'inherit',\r\n                resize: 'vertical',\r\n                background: isDark ? '#1a1a1a' : 'white',\r\n                color: isDark ? '#e0e0e0' : 'inherit'\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Device Selection Filters */}\r\n        <div style={{ marginTop: '1.5rem' }}>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: isDark ? '#e0e0e0' : '#495057' }}>\r\n            Device Selection & Filters\r\n          </h3>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem', marginBottom: '1rem' }}>\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>\r\n                Filter by Current Version\r\n              </label>\r\n              <select\r\n                value={rollbackFilters.currentVersion}\r\n                onChange={(e) => setRollbackFilters({ ...rollbackFilters, currentVersion: e.target.value })}\r\n                style={{ \r\n                  width: '100%', \r\n                  padding: '0.5rem', \r\n                  borderRadius: '6px', \r\n                  border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                  fontSize: '0.9rem',\r\n                  background: isDark ? '#1a1a1a' : 'white',\r\n                  color: isDark ? '#e0e0e0' : 'inherit'\r\n                }}\r\n              >\r\n                <option value=\"all\">All Versions</option>\r\n                {Array.from(new Set(devices.map(d => d.currentVersion))).map(version => (\r\n                  <option key={version} value={version}>{version}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>\r\n                Filter by Status\r\n              </label>\r\n              <select\r\n                value={rollbackFilters.status}\r\n                onChange={(e) => setRollbackFilters({ ...rollbackFilters, status: e.target.value })}\r\n                style={{ \r\n                  width: '100%', \r\n                  padding: '0.5rem', \r\n                  borderRadius: '6px', \r\n                  border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                  fontSize: '0.9rem',\r\n                  background: isDark ? '#1a1a1a' : 'white',\r\n                  color: isDark ? '#e0e0e0' : 'inherit'\r\n                }}\r\n              >\r\n                <option value=\"all\">All Statuses</option>\r\n                <option value=\"failed\">Failed</option>\r\n                <option value=\"healthy\">Healthy</option>\r\n                <option value=\"trial\">Trial</option>\r\n                <option value=\"downloading\">Downloading</option>\r\n                <option value=\"flashing\">Flashing</option>\r\n                <option value=\"rebooting\">Rebooting</option>\r\n                <option value=\"rolledback\">Rolled Back</option>\r\n                <option value=\"idle\">Idle</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: isDark ? '#b0b0b0' : '#495057', fontSize: '0.85rem' }}>\r\n                Filter by Target Version\r\n              </label>\r\n              <select\r\n                value={rollbackFilters.deviceModel}\r\n                onChange={(e) => setRollbackFilters({ ...rollbackFilters, deviceModel: e.target.value })}\r\n                style={{ \r\n                  width: '100%', \r\n                  padding: '0.5rem', \r\n                  borderRadius: '6px', \r\n                  border: isDark ? '1px solid #404040' : '1px solid #ced4da',\r\n                  fontSize: '0.9rem',\r\n                  background: isDark ? '#1a1a1a' : 'white',\r\n                  color: isDark ? '#e0e0e0' : 'inherit'\r\n                }}\r\n              >\r\n                <option value=\"all\">All Target Versions</option>\r\n                {Array.from(new Set(devices.map(d => d.targetVersion))).map(version => (\r\n                  <option key={version} value={version}>{version}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Quick Selection Buttons */}\r\n          <div style={{ display: 'flex', gap: '0.75rem', flexWrap: 'wrap', marginBottom: '1rem' }}>\r\n            <button\r\n              onClick={selectAllFilteredDevices}\r\n              style={{\r\n                background: '#007bff',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '6px',\r\n                fontSize: '0.85rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Select All Filtered ({getFilteredRollbackDevices().length})\r\n            </button>\r\n\r\n            <button\r\n              onClick={deselectAllDevices}\r\n              style={{\r\n                background: '#6c757d',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '6px',\r\n                fontSize: '0.85rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Deselect All\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => {\r\n                const failedDevices = devices.filter(d => d.status === 'failed').map(d => d.deviceId);\r\n                setRollbackForm({ ...rollbackForm, selectedDevices: failedDevices });\r\n              }}\r\n              style={{\r\n                background: '#ffc107',\r\n                color: '#000',\r\n                border: 'none',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '6px',\r\n                fontSize: '0.85rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Select Failed Only ({devices.filter(d => d.status === 'failed').length})\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => {\r\n                const problemDevices = devices.filter(d => ['failed', 'rolledback'].includes(d.status)).map(d => d.deviceId);\r\n                setRollbackForm({ ...rollbackForm, selectedDevices: problemDevices });\r\n              }}\r\n              style={{\r\n                background: '#fd7e14',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '6px',\r\n                fontSize: '0.85rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Select Problem Devices ({devices.filter(d => ['failed', 'rolledback'].includes(d.status)).length})\r\n            </button>\r\n          </div>\r\n\r\n          {/* Device Selection Table */}\r\n          <div style={{ \r\n            background: isDark ? '#242424' : '#f8f9fa', \r\n            borderRadius: '8px', \r\n            padding: '1rem',\r\n            border: isDark ? '1px solid #404040' : '1px solid #dee2e6',\r\n            maxHeight: '400px',\r\n            overflowY: 'auto'\r\n          }}>\r\n            <div style={{ marginBottom: '0.75rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <strong style={{ fontSize: '0.95rem', color: isDark ? '#e0e0e0' : 'inherit' }}>\r\n                Devices List ({getFilteredRollbackDevices().length} available, {rollbackForm.selectedDevices.length} selected)\r\n              </strong>\r\n            </div>\r\n            \r\n            {loadingDevices ? (\r\n              <div style={{ padding: '2rem', textAlign: 'center', color: isDark ? '#a0a0a0' : '#6c757d' }}>\r\n                Loading devices...\r\n              </div>\r\n            ) : getFilteredRollbackDevices().length === 0 ? (\r\n              <div style={{ padding: '2rem', textAlign: 'center', color: isDark ? '#a0a0a0' : '#6c757d' }}>\r\n                No devices match the current filters\r\n              </div>\r\n            ) : (\r\n              <table style={{ width: '100%', fontSize: '0.85rem' }}>\r\n                <thead>\r\n                  <tr style={{ borderBottom: isDark ? '2px solid #404040' : '2px solid #dee2e6' }}>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left', fontWeight: '600', width: '50px', color: isDark ? '#b0b0b0' : 'inherit' }}>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={getFilteredRollbackDevices().length > 0 && getFilteredRollbackDevices().every(d => rollbackForm.selectedDevices.includes(d.deviceId))}\r\n                        onChange={(e) => {\r\n                          if (e.target.checked) {\r\n                            selectAllFilteredDevices();\r\n                          } else {\r\n                            deselectAllDevices();\r\n                          }\r\n                        }}\r\n                        style={{ cursor: 'pointer', width: '16px', height: '16px' }}\r\n                      />\r\n                    </th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : 'inherit' }}>Device ID</th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : 'inherit' }}>Current Version</th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : 'inherit' }}>Target Version</th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : 'inherit' }}>Status</th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : 'inherit' }}>Boot Count</th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left', fontWeight: '600', color: isDark ? '#b0b0b0' : 'inherit' }}>Last Error</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {getFilteredRollbackDevices().map(device => (\r\n                    <tr \r\n                      key={device.deviceId} \r\n                      style={{ \r\n                        borderBottom: isDark ? '1px solid #404040' : '1px solid #e9ecef',\r\n                        background: rollbackForm.selectedDevices.includes(device.deviceId) ? (isDark ? '#3a2a00' : '#fff3cd') : 'transparent',\r\n                        cursor: 'pointer'\r\n                      }}\r\n                      onClick={() => toggleRollbackDevice(device.deviceId)}\r\n                    >\r\n                      <td style={{ padding: '0.75rem 0.5rem' }}>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={rollbackForm.selectedDevices.includes(device.deviceId)}\r\n                          onChange={() => toggleRollbackDevice(device.deviceId)}\r\n                          onClick={(e) => e.stopPropagation()}\r\n                          style={{ cursor: 'pointer', width: '16px', height: '16px' }}\r\n                        />\r\n                      </td>\r\n                      <td style={{ padding: '0.75rem 0.5rem', fontFamily: 'monospace', fontWeight: '500' }}>{device.deviceId}</td>\r\n                      <td style={{ padding: '0.75rem 0.5rem', fontFamily: 'monospace' }}>{device.currentVersion}</td>\r\n                      <td style={{ padding: '0.75rem 0.5rem', fontFamily: 'monospace' }}>{device.targetVersion}</td>\r\n                      <td style={{ padding: '0.75rem 0.5rem' }}>\r\n                        <span style={{\r\n                          padding: '0.25rem 0.5rem',\r\n                          borderRadius: '4px',\r\n                          fontSize: '0.75rem',\r\n                          fontWeight: '600',\r\n                          background: device.status === 'failed' ? (isDark ? '#3d1a1a' : '#f8d7da') : \r\n                                     device.status === 'healthy' ? (isDark ? '#1a3d1a' : '#d4edda') : \r\n                                     device.status === 'downloading' || device.status === 'flashing' ? (isDark ? '#1a2a3a' : '#cce5ff') :\r\n                                     device.status === 'rolledback' ? (isDark ? '#3a2a00' : '#fff3cd') : (isDark ? '#2a2a2a' : '#e9ecef'),\r\n                          color: device.status === 'failed' ? (isDark ? '#ff9999' : '#721c24') : \r\n                                 device.status === 'healthy' ? (isDark ? '#99ff99' : '#155724') : \r\n                                 device.status === 'downloading' || device.status === 'flashing' ? (isDark ? '#66b2ff' : '#004085') :\r\n                                 device.status === 'rolledback' ? (isDark ? '#ffd966' : '#856404') : (isDark ? '#b0b0b0' : '#495057')\r\n                        }}>\r\n                          {device.status}\r\n                        </span>\r\n                      </td>\r\n                      <td style={{ padding: '0.75rem 0.5rem' }}>{device.bootCount}</td>\r\n                      <td style={{ padding: '0.75rem 0.5rem', color: device.lastError ? '#dc3545' : (isDark ? '#a0a0a0' : '#6c757d'), fontSize: '0.8rem' }}>\r\n                        {device.lastError || 'None'}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Rollback Action Button */}\r\n        <div style={{ marginTop: '1.5rem', display: 'flex', justifyContent: 'flex-end' }}>\r\n          <button\r\n            onClick={handleEmergencyRollback}\r\n            disabled={rollbackForm.selectedDevices.length === 0}\r\n            style={{\r\n              background: rollbackForm.selectedDevices.length === 0 ? '#6c757d' : '#dc3545',\r\n              color: 'white',\r\n              border: 'none',\r\n              padding: '0.75rem 2rem',\r\n              borderRadius: '8px',\r\n              fontSize: '1rem',\r\n              fontWeight: '600',\r\n              cursor: rollbackForm.selectedDevices.length === 0 ? 'not-allowed' : 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              opacity: rollbackForm.selectedDevices.length === 0 ? 0.6 : 1\r\n            }}\r\n          >\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <polyline points=\"1 4 1 10 7 10\"/>\r\n              <path d=\"M3.51 15a9 9 0 1 0 2.13-9.36L1 10\"/>\r\n            </svg>\r\n            Rollback {rollbackForm.selectedDevices.length} Device{rollbackForm.selectedDevices.length !== 1 ? 's' : ''}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Rollback Confirmation Modal */}\r\n      {showRollbackModal && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.6)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000\r\n        }}>\r\n          <div style={{\r\n            background: isDark ? '#2d2d2d' : 'white',\r\n            borderRadius: '12px',\r\n            padding: '2rem',\r\n            maxWidth: '500px',\r\n            width: '90%',\r\n            boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n            border: isDark ? '2px solid #dc3545' : '2px solid #dc3545'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.5rem', fontWeight: '600', marginBottom: '1rem', color: '#dc3545' }}>\r\n               Confirm Emergency Rollback\r\n            </h3>\r\n            <div style={{\r\n              background: isDark ? '#3d1a1a' : '#f8d7da',\r\n              border: isDark ? '1px solid #5a1f24' : '1px solid #f5c6cb',\r\n              borderRadius: '8px',\r\n              padding: '1rem',\r\n              marginBottom: '1.5rem',\r\n              color: isDark ? '#ff9999' : '#721c24',\r\n              fontSize: '0.95rem'\r\n            }}>\r\n              <strong>This action cannot be undone!</strong>\r\n              <p style={{ margin: '0.5rem 0 0 0' }}>\r\n                You are about to rollback devices to a previous firmware version.\r\n              </p>\r\n            </div>\r\n            <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.8' }}>\r\n              <p><strong>Command:</strong> <code style={{ background: isDark ? '#1a1a1a' : '#f8f9fa', padding: '0.2rem 0.5rem', borderRadius: '4px', fontFamily: 'monospace', color: isDark ? '#e0e0e0' : 'inherit' }}>updateConfig = 2</code> (automatic rollback to previous version)</p>\r\n              <p><strong>Devices to Rollback:</strong> {rollbackForm.selectedDevices.length}</p>\r\n              <p><strong>Reason:</strong> {rollbackForm.reason || 'Not provided'}</p>\r\n            </div>\r\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'flex-end' }}>\r\n              <button\r\n                onClick={() => setShowRollbackModal(false)}\r\n                style={{\r\n                  background: '#6c757d',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '1rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={confirmRollback}\r\n                style={{\r\n                  background: '#dc3545',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '1rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Confirm Rollback\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modern Delete Firmware Confirmation Modal */}\r\n      {deleteFirmwareModal.show && deleteFirmwareModal.firmware && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.6)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000,\r\n          backdropFilter: 'blur(4px)'\r\n        }}>\r\n          <div style={{\r\n            background: isDark ? '#2d2d2d' : 'white',\r\n            borderRadius: '16px',\r\n            padding: '2rem',\r\n            maxWidth: '500px',\r\n            width: '90%',\r\n            boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n            border: isDark ? '2px solid #7f1d1d' : '2px solid #7f1d1d',\r\n            animation: 'slideIn 0.2s ease-out'\r\n          }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n              <div style={{\r\n                width: '48px',\r\n                height: '48px',\r\n                borderRadius: '12px',\r\n                background: 'linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                fontSize: '1.5rem',\r\n                animation: 'pulse 2s infinite'\r\n              }}>\r\n                \r\n              </div>\r\n              <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: '#7f1d1d' }}>\r\n                Delete Firmware\r\n              </h3>\r\n            </div>\r\n            \r\n            <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n              <p style={{ marginBottom: '1rem' }}>\r\n                Are you sure you want to delete firmware version <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{deleteFirmwareModal.firmware.version}</strong>?\r\n              </p>\r\n              <div style={{\r\n                background: isDark ? 'rgba(127, 29, 29, 0.1)' : '#fee2e2',\r\n                border: isDark ? '1px solid rgba(127, 29, 29, 0.3)' : '1px solid #fecaca',\r\n                borderRadius: '8px',\r\n                padding: '0.75rem 1rem',\r\n                fontSize: '0.9rem',\r\n                color: isDark ? '#fca5a5' : '#991b1b'\r\n              }}>\r\n                <strong> Warning:</strong> This will permanently remove the firmware file from S3. This action cannot be undone.\r\n              </div>\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n              <button\r\n                onClick={() => setDeleteFirmwareModal({ show: false, firmware: null })}\r\n                style={{\r\n                  background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                  color: isDark ? '#e0e0e0' : '#495057',\r\n                  border: 'none',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '0.95rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s'\r\n                }}\r\n                onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n                onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={confirmDeleteFirmware}\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '0.95rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  boxShadow: '0 4px 12px rgba(127, 29, 29, 0.3)',\r\n                  transition: 'all 0.2s'\r\n                }}\r\n                onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n              >\r\n                Yes, Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modern Deactivate Firmware Confirmation Modal */}\r\n      {deactivateFirmwareModal.show && deactivateFirmwareModal.firmware && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.6)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000,\r\n          backdropFilter: 'blur(4px)'\r\n        }}>\r\n          <div style={{\r\n            background: isDark ? '#2d2d2d' : 'white',\r\n            borderRadius: '16px',\r\n            padding: '2rem',\r\n            maxWidth: '500px',\r\n            width: '90%',\r\n            boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n            border: isDark ? '2px solid #ffc107' : '2px solid #ffc107',\r\n            animation: 'slideIn 0.2s ease-out'\r\n          }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n              <div style={{\r\n                width: '48px',\r\n                height: '48px',\r\n                borderRadius: '12px',\r\n                background: 'linear-gradient(135deg, #ffc107 0%, #ff9800 100%)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                fontSize: '1.5rem',\r\n                animation: 'pulse 2s infinite'\r\n              }}>\r\n                \r\n              </div>\r\n              <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: '#ff9800' }}>\r\n                Deactivate Firmware\r\n              </h3>\r\n            </div>\r\n            \r\n            <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n              <p style={{ marginBottom: '1rem' }}>\r\n                Are you sure you want to deactivate firmware version <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{deactivateFirmwareModal.firmware.version}</strong>?\r\n              </p>\r\n              <div style={{\r\n                background: isDark ? 'rgba(255, 193, 7, 0.1)' : '#fff3cd',\r\n                border: isDark ? '1px solid rgba(255, 193, 7, 0.3)' : '1px solid #ffc107',\r\n                borderRadius: '8px',\r\n                padding: '0.75rem 1rem',\r\n                fontSize: '0.9rem',\r\n                color: isDark ? '#ffcc00' : '#856404'\r\n              }}>\r\n                <strong> Note:</strong> This firmware will no longer be available for OTA updates. You can reactivate it later.\r\n              </div>\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n              <button\r\n                onClick={() => setDeactivateFirmwareModal({ show: false, firmware: null })}\r\n                style={{\r\n                  background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                  color: isDark ? '#e0e0e0' : '#495057',\r\n                  border: 'none',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '0.95rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s'\r\n                }}\r\n                onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n                onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={confirmDeactivateFirmware}\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #ffc107 0%, #ff9800 100%)',\r\n                  color: '#000',\r\n                  border: 'none',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '0.95rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  boxShadow: '0 4px 12px rgba(255, 193, 7, 0.3)',\r\n                  transition: 'all 0.2s'\r\n                }}\r\n                onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n              >\r\n                Yes, Deactivate\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modern Success Notification Modal */}\r\n      {successModal.show && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.4)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000,\r\n          backdropFilter: 'blur(2px)'\r\n        }}>\r\n          <div style={{\r\n            background: isDark ? '#2d2d2d' : 'white',\r\n            borderRadius: '16px',\r\n            padding: '2rem',\r\n            maxWidth: '450px',\r\n            width: '90%',\r\n            boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n            border: isDark ? '1px solid #28a745' : '2px solid #28a745',\r\n            animation: 'slideIn 0.2s ease-out'\r\n          }}>\r\n            <div style={{ textAlign: 'center' }}>\r\n              <div style={{\r\n                width: '64px',\r\n                height: '64px',\r\n                borderRadius: '50%',\r\n                background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                fontSize: '2rem',\r\n                margin: '0 auto 1rem',\r\n                animation: 'scaleIn 0.3s ease-out'\r\n              }}>\r\n                \r\n              </div>\r\n              \r\n              <h3 style={{ fontSize: '1.5rem', fontWeight: '600', marginBottom: '1rem', color: isDark ? '#e0e0e0' : '#2c3e50' }}>\r\n                Success\r\n              </h3>\r\n              \r\n              <p style={{ color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6', marginBottom: '1.5rem', whiteSpace: 'pre-line' }}>\r\n                {successModal.message}\r\n              </p>\r\n              \r\n              <button\r\n                onClick={() => setSuccessModal({ show: false, message: '' })}\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '0.75rem 2rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '0.95rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  boxShadow: '0 4px 12px rgba(40, 167, 69, 0.3)',\r\n                  transition: 'all 0.2s'\r\n                }}\r\n                onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n              >\r\n                Got it!\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modern Error Notification Modal */}\r\n      {errorModal.show && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.4)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          zIndex: 1000,\r\n          backdropFilter: 'blur(2px)'\r\n        }}>\r\n          <div style={{\r\n            background: isDark ? '#2d2d2d' : 'white',\r\n            borderRadius: '16px',\r\n            padding: '2rem',\r\n            maxWidth: '450px',\r\n            width: '90%',\r\n            boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n            border: isDark ? '2px solid #dc3545' : '2px solid #dc3545',\r\n            animation: 'slideIn 0.2s ease-out'\r\n          }}>\r\n            <div style={{ textAlign: 'center' }}>\r\n              <div style={{\r\n                width: '64px',\r\n                height: '64px',\r\n                borderRadius: '50%',\r\n                background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                fontSize: '2rem',\r\n                margin: '0 auto 1rem',\r\n                animation: 'pulse 2s infinite'\r\n              }}>\r\n                \r\n              </div>\r\n              \r\n              <h3 style={{ fontSize: '1.5rem', fontWeight: '600', marginBottom: '1rem', color: '#dc3545' }}>\r\n                Error\r\n              </h3>\r\n              \r\n              <p style={{ color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6', marginBottom: '1.5rem', whiteSpace: 'pre-line' }}>\r\n                {errorModal.message}\r\n              </p>\r\n              \r\n              <button\r\n                onClick={() => setErrorModal({ show: false, message: '' })}\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '0.75rem 2rem',\r\n                  borderRadius: '8px',\r\n                  fontSize: '0.95rem',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  boxShadow: '0 4px 12px rgba(220, 53, 69, 0.3)',\r\n                  transition: 'all 0.2s'\r\n                }}\r\n                onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n              >\r\n                Dismiss\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OTA;\r\n","/**\r\n * Enhanced in-memory cache service for API responses\r\n * Features:\r\n * - TTL-based expiration\r\n * - Stale-while-revalidate pattern support\r\n * - Subscription system for real-time updates\r\n * - Pattern-based cache invalidation\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n  staleTime?: number; // Time after which data is considered stale but usable\r\n}\r\n\r\ninterface CacheSubscription {\r\n  callback: (data: any) => void;\r\n  pattern?: RegExp;\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private subscribers: Map<string, Set<CacheSubscription>> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n  private static readonly REALTIME_TTL = 10 * 1000; // 10 seconds for real-time data\r\n  private static readonly STALE_TIME = 30 * 1000; // 30 seconds before data is stale\r\n\r\n  /**\r\n   * Set a cache entry and notify subscribers\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL, staleTime?: number): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n      staleTime: staleTime ?? Math.min(ttlMs / 2, CacheService.STALE_TIME),\r\n    });\r\n    \r\n    // Notify subscribers\r\n    this.notifySubscribers(key, data);\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid (returns null if expired)\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Get cache entry even if stale (for stale-while-revalidate pattern)\r\n   * Returns { data, isStale } or null if no entry exists\r\n   */\r\n  getWithStaleStatus(key: string): { data: any; isStale: boolean; isExpired: boolean } | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    const isExpired = age > entry.expiresIn;\r\n    const isStale = age > (entry.staleTime ?? entry.expiresIn / 2);\r\n\r\n    // Remove if fully expired\r\n    if (isExpired) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      data: entry.data,\r\n      isStale,\r\n      isExpired: false,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if cached data is stale but usable\r\n   */\r\n  isStale(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return true;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    return age > (entry.staleTime ?? entry.expiresIn / 2);\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear cache entries matching a pattern\r\n   */\r\n  clearPattern(pattern: string | RegExp): void {\r\n    const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\r\n    const keysToDelete: string[] = [];\r\n    \r\n    this.cache.forEach((_, key) => {\r\n      if (regex.test(key)) {\r\n        keysToDelete.push(key);\r\n      }\r\n    });\r\n    \r\n    keysToDelete.forEach(key => this.cache.delete(key));\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates for a specific key\r\n   */\r\n  subscribe(key: string, callback: (data: any) => void): () => void {\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates matching a pattern\r\n   */\r\n  subscribePattern(pattern: RegExp, callback: (data: any) => void): () => void {\r\n    const key = `__pattern__${pattern.source}`;\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback, pattern };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Notify all subscribers of a cache update\r\n   */\r\n  private notifySubscribers(key: string, data: any): void {\r\n    // Direct key subscribers\r\n    const directSubs = this.subscribers.get(key);\r\n    if (directSubs) {\r\n      directSubs.forEach(sub => {\r\n        try {\r\n          sub.callback(data);\r\n        } catch (error) {\r\n          console.error(`Cache subscriber error for key ${key}:`, error);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Pattern subscribers\r\n    this.subscribers.forEach((subs, subKey) => {\r\n      if (subKey.startsWith('__pattern__')) {\r\n        subs.forEach(sub => {\r\n          if (sub.pattern && sub.pattern.test(key)) {\r\n            try {\r\n              sub.callback(data);\r\n            } catch (error) {\r\n              console.error(`Cache pattern subscriber error for key ${key}:`, error);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get all keys in cache\r\n   */\r\n  keys(): string[] {\r\n    return Array.from(this.cache.keys());\r\n  }\r\n\r\n  /**\r\n   * Get cache stats for debugging\r\n   */\r\n  getStats(): { size: number; keys: string[]; subscribers: number } {\r\n    return {\r\n      size: this.cache.size,\r\n      keys: this.keys(),\r\n      subscribers: Array.from(this.subscribers.values()).reduce((sum, set) => sum + set.size, 0),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' | 'realtime' = 'short'): number {\r\n    switch (type) {\r\n      case 'realtime':\r\n        return CacheService.REALTIME_TTL;\r\n      case 'long':\r\n        return CacheService.LONG_TTL;\r\n      default:\r\n        return CacheService.DEFAULT_TTL;\r\n    }\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\nexport const REALTIME_TTL = 10 * 1000; // 10 seconds\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    if (response.status === 204) return null;\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async getUserSite(userId: number): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`);\r\n  }\r\n\r\n  async createUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceSite(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`);\r\n  }\r\n\r\n  async createDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // DynamoDB site data\r\n  async getSiteTelemetry(siteId: string, params?: { start_date?: string; end_date?: string; days?: number }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    if (params?.days) query.append('days', params.days.toString());\r\n    const url = `/sites/${siteId}/telemetry/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  async getSiteForecast(siteId: string, params?: { date?: string; start_date?: string; end_date?: string }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.date) query.append('date', params.date);\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    const url = `/sites/${siteId}/forecast/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  /**\r\n   * Returns { current: WeatherObs | null, hourly_forecast: WeatherFcst[] }\r\n   *   current.obs_timestamp     ISO UTC of the observation\r\n   *   current.ghi_wm2           global horizontal irradiance (W/m)\r\n   *   current.temperature_c     air temperature (C)\r\n   *   current.humidity_pct      relative humidity (%)\r\n   *   current.wind_speed_ms     wind speed (m/s)\r\n   *   current.cloud_cover_pct   cloud cover (%)\r\n   *   hourly_forecast[n].forecast_for  ISO UTC of the forecast slot\r\n   *   hourly_forecast[n].ghi_wm2     same fields as current\r\n   */\r\n  async getSiteWeather(siteId: string): Promise<{ current: any | null; hourly_forecast: any[] } | null> {\r\n    return this.request(`/sites/${siteId}/weather/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async rebootDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/reboot/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async hardResetDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/hard-reset/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async getDeviceLogs(deviceId: number, limit: number = 100, offset: number = 0): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/?limit=${limit}&offset=${offset}`);\r\n  }\r\n\r\n  async toggleDeviceLogs(deviceId: number, enabled: boolean): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/toggle/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ enabled }),\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  async detachSlaveFromPreset(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/detach/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const url = `${API_BASE_URL}/ota/firmware/create/`;\r\n    const tokens = localStorage.getItem('authTokens');\r\n    \r\n    if (!tokens) {\r\n      throw new Error('Authentication required');\r\n    }\r\n    \r\n    const parsedTokens = JSON.parse(tokens);\r\n    let headers: HeadersInit = {\r\n      'Authorization': `Bearer ${parsedTokens.access}`,\r\n    };\r\n    // Don't set Content-Type - let browser set it with boundary for multipart/form-data\r\n    \r\n    let response = await fetch(url, {\r\n      method: 'POST',\r\n      headers,\r\n      body: formData,\r\n    });\r\n\r\n    // Handle 401 with token refresh\r\n    if (response.status === 401) {\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        const newTokens = JSON.parse(localStorage.getItem('authTokens') || '{}');\r\n        headers = {\r\n          'Authorization': `Bearer ${newTokens.access}`,\r\n        };\r\n        response = await fetch(url, {\r\n          method: 'POST',\r\n          headers,\r\n          body: formData,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Upload failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteFirmwareVersion(firmwareId: number): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n\r\n  async triggerRollback(deviceSerial: string, notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/rollback/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        device_serial: deviceSerial,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n\r\n  async deployFirmware(firmwareId: number, deviceSerials: string[], notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/multiple/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        firmware_id: firmwareId,\r\n        device_serials: deviceSerials,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n\r\n  async listTargetedUpdates(): Promise<any> {\r\n    return this.request(`/ota/updates/`);\r\n  }\r\n\r\n  async getTargetedUpdate(updateId: number): Promise<any> {\r\n    return this.request(`/ota/updates/${updateId}/`);\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["OTA","_activeDeployment$tar","isDark","useTheme","firmwares","setFirmwares","useState","uploadForm","setUploadForm","name","version","deviceModel","minBootloader","releaseNotes","file","deploymentConfig","setDeploymentConfig","firmwareVersion","targetDevices","mode","autoRollback","healthTimeout","failureThreshold","confirmModal","setConfirmModal","show","firmware","deviceCount","dataTransfer","isDeploying","setIsDeploying","devices","setDevices","statusFilter","setStatusFilter","loadingDevices","setLoadingDevices","loadingFirmwares","setLoadingFirmwares","activeDeployment","setActiveDeployment","rollbackForm","setRollbackForm","selectedDevices","reason","showRollbackModal","setShowRollbackModal","rollbackFilters","setRollbackFilters","currentVersion","status","deleteFirmwareModal","setDeleteFirmwareModal","deactivateFirmwareModal","setDeactivateFirmwareModal","successModal","setSuccessModal","message","errorModal","setErrorModal","useEffect","loadFirmwareData","loadDevices","loadDeployments","interval","setInterval","clearInterval","async","response","apiService","getFirmwareVersions","transformedFirmwares","results","map","fw","_fw$description","_fw$description$match","id","filename","concat","description","match","minBootloaderVersion","size","checksum","signatureValid","is_active","release_notes","uploadDate","created_at","Date","toISOString","error","console","getDevices","realDevices","transformedDevices","Array","isArray","device","deviceId","device_serial","serial","firmware_version","config_version","targetVersion","activeSlot","Math","random","bootCount","boot_count","lastError","progress","undefined","activeCampaign","listTargetedUpdates","find","c","updateDeployedDeviceStatuses","activeDeploymentToUse","deployment","targetedDeviceIds","device_targets","dt","_dt$device","filter","Boolean","length","logPromises","_latestLog$status","_latestLog$firmware_v","logs","getDeviceUpdateLogs","latestLog","backendStatus","toLowerCase","current_firmware","deviceUpdates","Promise","all","updateMap","Map","u","prevDevices","update","get","_objectSpread","statusMetrics","total","inProgress","d","includes","healthy","failed","rolledBack","toggleRollbackDevice","prev","getFilteredRollbackDevices","selectAllFilteredDevices","filtered","deselectAllDevices","filteredDevices","_jsxs","style","padding","maxWidth","margin","background","minHeight","children","marginBottom","fontSize","fontWeight","color","display","alignItems","gap","width","height","viewBox","fill","stroke","strokeWidth","_jsx","points","x1","y1","x2","y2","borderRadius","boxShadow","border","paddingBottom","borderBottom","onSubmit","e","preventDefault","_response$checksum","formData","FormData","append","uploadFirmwareVersion","toFixed","substring","fileInput","document","querySelector","value","gridTemplateColumns","type","onChange","target","placeholder","required","pattern","marginTop","rows","fontFamily","resize","accept","_e$target$files","files","buffer","arrayBuffer","hashBuffer","crypto","subtle","digest","from","Uint8Array","b","toString","padStart","join","calculateSHA256","log","disabled","whiteSpace","cursor","overflowX","borderCollapse","textAlign","colSpan","justifyContent","animation","cx","cy","r","opacity","toLocaleDateString","textTransform","onClick","updateFirmwareVersion","handleMarkAsStable","handleDeactivateFirmware","handleDeleteFirmware","f","parseInt","min","max","handleSelectAllDevices","idleDevices","maxHeight","overflowY","_Fragment","checked","newTargets","marginRight","flexWrap","handleDeployClick","position","top","left","right","bottom","zIndex","lineHeight","Error","deployFirmware","alert","devices_total","marginLeft","target_firmware","devices_updated","devices_failed","round","toLocaleString","notes","idle","downloading","flashing","rebooting","trial","rolledback","Set","failedDevices","problemDevices","every","stopPropagation","handleEmergencyRollback","confirmRollback","trim","backdropFilter","transition","onMouseOver","currentTarget","onMouseOut","deleteFirmwareVersion","transform","CacheService","constructor","cache","subscribers","set","key","data","ttlMs","arguments","DEFAULT_TTL","staleTime","this","timestamp","now","expiresIn","STALE_TIME","notifySubscribers","entry","delete","getWithStaleStatus","_entry$staleTime","age","isExpired","isStale","has","_entry$staleTime2","clear","clearPattern","regex","RegExp","keysToDelete","forEach","_","test","push","clearAll","subscribe","callback","subscription","add","subs","subscribePattern","source","directSubs","sub","subKey","startsWith","keys","getStats","values","reduce","sum","getTTL","REALTIME_TTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","fetch","refreshToken","removeItem","window","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","is_staff","getUserDevices","userId","getUserSite","createUserSite","updateUserSite","getDeviceSite","createDeviceSite","updateDeviceSite","getSiteTelemetry","siteId","query","URLSearchParams","start_date","end_date","days","getSiteForecast","date","getSiteWeather","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","deletePreset","getGlobalSlaves","createGlobalSlave","slaveData","updateGlobalSlave","slaveId","deleteGlobalSlave","page","pageSize","queryString","createDevice","deviceData","updateDevice","deleteDevice","rebootDevice","hardResetDevice","getDeviceLogs","limit","offset","toggleDeviceLogs","enabled","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","updateSlave","deleteSlave","addSlavesToPreset","slaveIds","slave_ids","detachSlaveFromPreset","activeOnly","firmwareId","getOTAConfig","updateOTAConfig","config","getOTAHealth","triggerRollback","deviceSerial","deviceSerials","firmware_id","device_serials","getTargetedUpdate","updateId"],"sourceRoot":""}