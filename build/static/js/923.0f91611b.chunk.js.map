{"version":3,"file":"static/js/923.0f91611b.chunk.js","mappings":"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","sources":["components/OTA.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api';\r\nimport '../App.css';\r\n\r\ninterface FirmwareVersion {\r\n  id: number;\r\n  version: string;\r\n  filename: string;\r\n  size: number;\r\n  checksum?: string;\r\n  description?: string;\r\n  release_notes?: string;\r\n  is_active: boolean;\r\n  created_at: string;\r\n}\r\n\r\ninterface OTAConfig {\r\n  enable_auto_update: boolean;\r\n  update_strategy: 'immediate' | 'scheduled' | 'manual';\r\n  max_concurrent_updates: number;\r\n  firmware_retention_days: number;\r\n}\r\n\r\ninterface OTAHealth {\r\n  status: string;\r\n  service: string;\r\n  firmware_versions: number;\r\n  active_firmware: number;\r\n  timestamp: string;\r\n}\r\n\r\nexport const OTA: React.FC = () => {\r\n  const [firmwares, setFirmwares] = useState<FirmwareVersion[]>([]);\r\n  const [config, setConfig] = useState<OTAConfig | null>(null);\r\n  const [health, setHealth] = useState<OTAHealth | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [uploadingFile, setUploadingFile] = useState<File | null>(null);\r\n  const [uploadingMetadata, setUploadingMetadata] = useState({\r\n    version: '',\r\n    description: '',\r\n    release_notes: '',\r\n  });\r\n  const [configForm, setConfigForm] = useState<OTAConfig | null>(null);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [rollbackForm, setRollbackForm] = useState({\r\n    deviceSerial: '',\r\n    notes: '',\r\n  });\r\n  const [activeTab, setActiveTab] = useState<'upload' | 'versions' | 'config' | 'docs'>('upload');\r\n\r\n  useEffect(() => {\r\n    loadOTAData();\r\n  }, []);\r\n\r\n  const loadOTAData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [fwRes, configRes, healthRes] = await Promise.all([\r\n        apiService.getFirmwareVersions(false),\r\n        apiService.getOTAConfig(),\r\n        apiService.getOTAHealth(),\r\n      ]);\r\n\r\n      setFirmwares(fwRes);\r\n      setConfig(configRes);\r\n      setConfigForm(configRes);\r\n      setHealth(healthRes);\r\n    } catch (error: any) {\r\n      setErrorMessage(error.message || 'Failed to load OTA data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files?.[0]) {\r\n      setUploadingFile(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleUploadFirmware = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!uploadingFile || !uploadingMetadata.version) {\r\n      setErrorMessage('Please select a file and enter version number');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setErrorMessage('');\r\n      setSuccessMessage('');\r\n      \r\n      const formData = new FormData();\r\n      formData.append('file', uploadingFile);\r\n      formData.append('version', uploadingMetadata.version);\r\n      formData.append('description', uploadingMetadata.description || '');\r\n      formData.append('release_notes', uploadingMetadata.release_notes || '');\r\n      formData.append('is_active', 'false');\r\n\r\n      await apiService.uploadFirmwareVersion(formData);\r\n      setSuccessMessage('Firmware uploaded successfully');\r\n      setUploadingFile(null);\r\n      setUploadingMetadata({ version: '', description: '', release_notes: '' });\r\n      \r\n      // Reset file input\r\n      const fileInput = document.querySelector('.ota-file-input') as HTMLInputElement;\r\n      if (fileInput) fileInput.value = '';\r\n      \r\n      loadOTAData();\r\n    } catch (error: any) {\r\n      console.error('Upload error:', error);\r\n      setErrorMessage(error.message || 'Failed to upload firmware');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleFirmwareActive = async (firmware: FirmwareVersion) => {\r\n    try {\r\n      setLoading(true);\r\n      await apiService.updateFirmwareVersion(firmware.id, {\r\n        is_active: !firmware.is_active,\r\n      });\r\n      setSuccessMessage(`Firmware ${!firmware.is_active ? 'activated' : 'deactivated'} successfully`);\r\n      loadOTAData();\r\n    } catch (error: any) {\r\n      setErrorMessage(error.message || 'Failed to update firmware status');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteFirmware = async (firmware: FirmwareVersion) => {\r\n    if (firmware.is_active) {\r\n      setErrorMessage('Cannot delete active firmware. Deactivate it first.');\r\n      return;\r\n    }\r\n\r\n    const confirmed = window.confirm(\r\n      `Are you sure you want to delete firmware version ${firmware.version}?\\n\\n` +\r\n      `This will permanently delete the firmware file from storage.\\n\\n` +\r\n      `This action cannot be undone.`\r\n    );\r\n\r\n    if (!confirmed) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      setErrorMessage('');\r\n      setSuccessMessage('');\r\n      \r\n      await apiService.deleteFirmwareVersion(firmware.id);\r\n      setSuccessMessage(`Firmware version ${firmware.version} deleted successfully`);\r\n      loadOTAData();\r\n    } catch (error: any) {\r\n      setErrorMessage(error.message || 'Failed to delete firmware');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveConfig = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!configForm) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      await apiService.updateOTAConfig(configForm);\r\n      setSuccessMessage('OTA configuration updated successfully');\r\n      setConfig(configForm);\r\n    } catch (error: any) {\r\n      setErrorMessage(error.message || 'Failed to update configuration');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRollback = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!rollbackForm.deviceSerial) {\r\n      setErrorMessage('Please enter a device serial for rollback');\r\n      return;\r\n    }\r\n\r\n    const confirmed = window.confirm(\r\n      `Are you sure you want to rollback device ${rollbackForm.deviceSerial}?\\n\\n` +\r\n      `This will trigger a firmware rollback command to the device.\\n` +\r\n      `The device must already have the previous firmware stored locally.\\n\\n` +\r\n      `The device will receive updateFirmware flag = 2 in the heartbeat response.`\r\n    );\r\n\r\n    if (!confirmed) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      setErrorMessage('');\r\n      setSuccessMessage('');\r\n      \r\n      await apiService.triggerRollback(\r\n        rollbackForm.deviceSerial,\r\n        rollbackForm.notes\r\n      );\r\n      setSuccessMessage(`Rollback command sent to device ${rollbackForm.deviceSerial}. Device will receive the command on next heartbeat.`);\r\n      setRollbackForm({ deviceSerial: '', notes: '' });\r\n    } catch (error: any) {\r\n      console.error('Rollback error:', error);\r\n      setErrorMessage(error.message || 'Failed to trigger rollback');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-container\">\r\n      <div className=\"admin-header\" style={{ marginBottom: '2rem' }}>\r\n        <div>\r\n          <h1 style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', marginBottom: '0.5rem' }}>\r\n            <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n              <path d=\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\"/>\r\n              <polyline points=\"3.27 6.96 12 12.01 20.73 6.96\"/>\r\n              <line x1=\"12\" y1=\"22.08\" x2=\"12\" y2=\"12\"/>\r\n            </svg>\r\n            Over-The-Air (OTA) Updates\r\n          </h1>\r\n          <p style={{ color: 'var(--text-secondary)', margin: 0 }}>\r\n            Manage firmware versions and deploy updates to your devices\r\n          </p>\r\n        </div>\r\n        <div className=\"health-status\">\r\n          {health && (\r\n            <>\r\n              <span className={`status-badge status-badge-${health.status === 'ok' ? 'success' : 'danger'}`}>\r\n                {health.status.toUpperCase()}\r\n              </span>\r\n              <span className=\"ml-2\">\r\n                {health.firmware_versions} versions ({health.active_firmware} active)\r\n              </span>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {successMessage && (\r\n        <div className=\"alert alert-success mt-3 fade-in\">\r\n          {successMessage}\r\n          <button\r\n            className=\"alert-close\"\r\n            onClick={() => setSuccessMessage('')}\r\n          >\r\n            √ó\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {errorMessage && (\r\n        <div className=\"alert alert-danger mt-3 fade-in\">\r\n          {errorMessage}\r\n          <button\r\n            className=\"alert-close\"\r\n            onClick={() => setErrorMessage('')}\r\n          >\r\n            √ó\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {loading && <div className=\"loading-spinner\">Loading OTA data...</div>}\r\n\r\n      {/* Modern Tab Navigation */}\r\n      <div style={{ \r\n        display: 'flex', \r\n        gap: '0.5rem', \r\n        marginBottom: '1.5rem',\r\n        borderBottom: '2px solid var(--border-color)',\r\n        paddingBottom: '0'\r\n      }}>\r\n        <button\r\n          onClick={() => setActiveTab('upload')}\r\n          style={{\r\n            background: activeTab === 'upload' ? 'var(--primary-gradient)' : 'transparent',\r\n            color: activeTab === 'upload' ? 'var(--text-primary)' : 'var(--text-secondary)',\r\n            border: 'none',\r\n            padding: '0.75rem 1.5rem',\r\n            cursor: 'pointer',\r\n            fontSize: '0.95rem',\r\n            fontWeight: activeTab === 'upload' ? '600' : '500',\r\n            borderRadius: '8px 8px 0 0',\r\n            transition: 'all 0.2s',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem'\r\n          }}\r\n        >\r\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n            <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/>\r\n            <polyline points=\"17 8 12 3 7 8\"/>\r\n            <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"/>\r\n          </svg>\r\n          Upload & Rollback\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('versions')}\r\n          style={{\r\n            background: activeTab === 'versions' ? 'var(--primary-gradient)' : 'transparent',\r\n            color: activeTab === 'versions' ? 'var(--text-primary)' : 'var(--text-secondary)',\r\n            border: 'none',\r\n            padding: '0.75rem 1.5rem',\r\n            cursor: 'pointer',\r\n            fontSize: '0.95rem',\r\n            fontWeight: activeTab === 'versions' ? '600' : '500',\r\n            borderRadius: '8px 8px 0 0',\r\n            transition: 'all 0.2s',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem'\r\n          }}\r\n        >\r\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n            <path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"/>\r\n            <rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"/>\r\n          </svg>\r\n          Firmware Versions ({firmwares.length})\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('config')}\r\n          style={{\r\n            background: activeTab === 'config' ? 'var(--primary-gradient)' : 'transparent',\r\n            color: activeTab === 'config' ? 'var(--text-primary)' : 'var(--text-secondary)',\r\n            border: 'none',\r\n            padding: '0.75rem 1.5rem',\r\n            cursor: 'pointer',\r\n            fontSize: '0.95rem',\r\n            fontWeight: activeTab === 'config' ? '600' : '500',\r\n            borderRadius: '8px 8px 0 0',\r\n            transition: 'all 0.2s',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem'\r\n          }}\r\n        >\r\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n            <circle cx=\"12\" cy=\"12\" r=\"3\"/>\r\n            <path d=\"M12 1v6m0 6v6m-7-7h6m6 0h6\"/>\r\n          </svg>\r\n          Configuration\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('docs')}\r\n          style={{\r\n            background: activeTab === 'docs' ? 'var(--primary-gradient)' : 'transparent',\r\n            color: activeTab === 'docs' ? 'var(--text-primary)' : 'var(--text-secondary)',\r\n            border: 'none',\r\n            padding: '0.75rem 1.5rem',\r\n            cursor: 'pointer',\r\n            fontSize: '0.95rem',\r\n            fontWeight: activeTab === 'docs' ? '600' : '500',\r\n            borderRadius: '8px 8px 0 0',\r\n            transition: 'all 0.2s',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem'\r\n          }}\r\n        >\r\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n            <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/>\r\n            <polyline points=\"14 2 14 8 20 8\"/>\r\n            <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"/>\r\n            <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"/>\r\n            <polyline points=\"10 9 9 9 8 9\"/>\r\n          </svg>\r\n          Documentation\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === 'upload' && (\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(400px, 1fr))', gap: '1.5rem' }}>\r\n          {/* Upload Section */}\r\n          <div className=\"admin-card\" style={{ height: 'fit-content' }}>\r\n            <h2 style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '1.5rem' }}>\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/>\r\n                <polyline points=\"17 8 12 3 7 8\"/>\r\n                <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"/>\r\n              </svg>\r\n              Upload New Firmware\r\n            </h2>\r\n            <form onSubmit={handleUploadFirmware} className=\"form\">\r\n              <div className=\"form-group\">\r\n                <label>Version (e.g., 0x00020000)</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"0x00020000\"\r\n                  value={uploadingMetadata.version}\r\n                  onChange={(e) =>\r\n                    setUploadingMetadata({ ...uploadingMetadata, version: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Firmware File</label>\r\n                <input\r\n                  type=\"file\"\r\n                  className=\"form-control ota-file-input\"\r\n                  accept=\".bin,.hex,.elf\"\r\n                  onChange={handleFileSelect}\r\n                />\r\n                {uploadingFile && <small className=\"form-text\">üì¶ {uploadingFile.name}</small>}\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <textarea\r\n                  className=\"form-control\"\r\n                  placeholder=\"Brief description of this firmware version\"\r\n                  rows={2}\r\n                  value={uploadingMetadata.description}\r\n                  onChange={(e) =>\r\n                    setUploadingMetadata({ ...uploadingMetadata, description: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Release Notes</label>\r\n                <textarea\r\n                  className=\"form-control\"\r\n                  placeholder=\"Detailed release notes and changelog\"\r\n                  rows={3}\r\n                  value={uploadingMetadata.release_notes}\r\n                  onChange={(e) =>\r\n                    setUploadingMetadata({ ...uploadingMetadata, release_notes: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              <button type=\"submit\" className=\"btn btn-primary\" disabled={loading} style={{ width: '100%' }}>\r\n                {loading ? 'Uploading...' : '‚¨ÜÔ∏è Upload Firmware'}\r\n              </button>\r\n            </form>\r\n          </div>\r\n\r\n          {/* Rollback Section */}\r\n          <div className=\"admin-card\" style={{ height: 'fit-content' }}>\r\n            <h2 style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '1.5rem' }}>\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                <polyline points=\"1 4 1 10 7 10\"/>\r\n                <path d=\"M3.51 15a9 9 0 1 0 2.13-9.36L1 10\"/>\r\n              </svg>\r\n              Rollback Device Firmware\r\n            </h2>\r\n            <div style={{\r\n              background: 'rgba(255, 193, 7, 0.1)',\r\n              border: '1px solid rgba(255, 193, 7, 0.3)',\r\n              borderRadius: '8px',\r\n              padding: '0.75rem 1rem',\r\n              marginBottom: '1.5rem',\r\n              display: 'flex',\r\n              gap: '0.75rem'\r\n            }}>\r\n              <span style={{ fontSize: '1.25rem' }}>‚ö†Ô∏è</span>\r\n              <div>\r\n                <strong>Important:</strong> Device must have previous firmware stored locally\r\n              </div>\r\n            </div>\r\n            <form onSubmit={handleRollback} className=\"form\">\r\n              <div className=\"form-group\">\r\n                <label>Device Serial</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Enter device serial (e.g., STM32-001)\"\r\n                  value={rollbackForm.deviceSerial}\r\n                  onChange={(e) =>\r\n                    setRollbackForm({ ...rollbackForm, deviceSerial: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Notes (Optional)</label>\r\n                <textarea\r\n                  className=\"form-control\"\r\n                  placeholder=\"Reason for rollback...\"\r\n                  rows={2}\r\n                  value={rollbackForm.notes}\r\n                  onChange={(e) =>\r\n                    setRollbackForm({ ...rollbackForm, notes: e.target.value })\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              <button type=\"submit\" className=\"btn btn-warning\" disabled={loading} style={{ width: '100%' }}>\r\n                {loading ? 'Processing...' : '‚è™ Trigger Rollback'}\r\n              </button>\r\n              <small className=\"form-text mt-2\" style={{ display: 'block', textAlign: 'center' }}>\r\n                Device will receive <strong>updateFirmware: 2</strong> flag on next heartbeat\r\n              </small>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'versions' && (\r\n        <div className=\"admin-card\">\r\n          <h2 style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '1.5rem' }}>\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n              <path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"/>\r\n              <rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"/>\r\n            </svg>\r\n            Firmware Versions\r\n          </h2>\r\n          {firmwares.length === 0 ? (\r\n            <div style={{\r\n              textAlign: 'center',\r\n              padding: '3rem 1rem',\r\n              color: 'var(--text-secondary)'\r\n            }}>\r\n              <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" style={{ margin: '0 auto 1rem', opacity: 0.3 }}>\r\n                <path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"/>\r\n                <rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"/>\r\n              </svg>\r\n              <p style={{ fontSize: '1.1rem', marginBottom: '0.5rem' }}>No firmware versions uploaded yet</p>\r\n              <p style={{ fontSize: '0.9rem' }}>Upload your first firmware to get started</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"firmware-list\">\r\n              {firmwares.map((fw) => (\r\n                <div key={fw.id} className={`firmware-item ${fw.is_active ? 'active' : ''}`} style={{\r\n                  border: fw.is_active ? '2px solid var(--success-color)' : '1px solid var(--border-color)',\r\n                  borderRadius: '12px',\r\n                  padding: '1.25rem',\r\n                  marginBottom: '1rem',\r\n                  background: fw.is_active ? 'rgba(40, 167, 69, 0.05)' : 'var(--bg-secondary)',\r\n                  transition: 'all 0.2s',\r\n                  position: 'relative'\r\n                }}>\r\n                  {fw.is_active && (\r\n                    <div style={{\r\n                      position: 'absolute',\r\n                      top: '-10px',\r\n                      right: '20px',\r\n                      background: 'var(--success-color)',\r\n                      color: 'white',\r\n                      padding: '0.25rem 0.75rem',\r\n                      borderRadius: '12px',\r\n                      fontSize: '0.75rem',\r\n                      fontWeight: '600',\r\n                      boxShadow: '0 2px 8px rgba(40, 167, 69, 0.3)'\r\n                    }}>\r\n                      ‚úì ACTIVE\r\n                    </div>\r\n                  )}\r\n                  <div className=\"firmware-header\" style={{ \r\n                    display: 'flex', \r\n                    alignItems: 'center', \r\n                    gap: '0.75rem',\r\n                    marginBottom: '0.75rem',\r\n                    flexWrap: 'wrap'\r\n                  }}>\r\n                    <span style={{\r\n                      background: fw.is_active ? 'var(--primary-gradient)' : 'var(--bg-tertiary)',\r\n                      color: fw.is_active ? 'var(--text-primary)' : 'var(--text-secondary)',\r\n                      padding: '0.5rem 1rem',\r\n                      borderRadius: '8px',\r\n                      fontWeight: '600',\r\n                      fontSize: '1rem',\r\n                      fontFamily: 'monospace'\r\n                    }}>\r\n                      {fw.version}\r\n                    </span>\r\n                    <span style={{ color: 'var(--text-secondary)', fontSize: '0.9rem' }}>\r\n                      üì¶ {fw.filename}\r\n                    </span>\r\n                    <span style={{\r\n                      marginLeft: 'auto',\r\n                      background: 'var(--bg-tertiary)',\r\n                      padding: '0.25rem 0.75rem',\r\n                      borderRadius: '6px',\r\n                      fontSize: '0.85rem',\r\n                      color: 'var(--text-secondary)'\r\n                    }}>\r\n                      {(fw.size / 1024 / 1024).toFixed(2)} MB\r\n                    </span>\r\n                  </div>\r\n                  {fw.description && (\r\n                    <p style={{\r\n                      color: 'var(--text-secondary)',\r\n                      margin: '0.5rem 0',\r\n                      fontSize: '0.9rem'\r\n                    }}>\r\n                      {fw.description}\r\n                    </p>\r\n                  )}\r\n                  <div className=\"firmware-footer\" style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    marginTop: '1rem',\r\n                    paddingTop: '1rem',\r\n                    borderTop: '1px solid var(--border-color)'\r\n                  }}>\r\n                    <small style={{ color: 'var(--text-secondary)' }}>\r\n                      üìÖ {new Date(fw.created_at).toLocaleDateString('en-US', { \r\n                        year: 'numeric', \r\n                        month: 'short', \r\n                        day: 'numeric' \r\n                      })}\r\n                    </small>\r\n                    <div className=\"firmware-actions\" style={{ display: 'flex', gap: '0.5rem' }}>\r\n                      <button\r\n                        className={`btn btn-sm ${fw.is_active ? 'btn-danger' : 'btn-success'}`}\r\n                        onClick={() => handleToggleFirmwareActive(fw)}\r\n                        disabled={loading}\r\n                        style={{ minWidth: '100px' }}\r\n                      >\r\n                        {fw.is_active ? 'üî¥ Deactivate' : '‚úì Activate'}\r\n                      </button>\r\n                      <button\r\n                        className=\"btn btn-sm btn-danger\"\r\n                        onClick={() => handleDeleteFirmware(fw)}\r\n                        disabled={loading || fw.is_active}\r\n                        title={fw.is_active ? 'Deactivate firmware before deleting' : 'Delete firmware'}\r\n                      >\r\n                        üóëÔ∏è Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  {fw.release_notes && (\r\n                    <details style={{ marginTop: '1rem' }}>\r\n                      <summary style={{ \r\n                        cursor: 'pointer', \r\n                        fontWeight: '500',\r\n                        color: 'var(--primary-color)',\r\n                        padding: '0.5rem',\r\n                        borderRadius: '6px',\r\n                        transition: 'background 0.2s'\r\n                      }}>\r\n                        üìù Release Notes\r\n                      </summary>\r\n                      <p style={{\r\n                        marginTop: '0.75rem',\r\n                        padding: '1rem',\r\n                        background: 'var(--bg-tertiary)',\r\n                        borderRadius: '8px',\r\n                        color: 'var(--text-secondary)',\r\n                        fontSize: '0.9rem',\r\n                        whiteSpace: 'pre-wrap'\r\n                      }}>\r\n                        {fw.release_notes}\r\n                      </p>\r\n                    </details>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'config' && (\r\n        <div className=\"admin-card\">\r\n          <h2 style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '1.5rem' }}>\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n              <circle cx=\"12\" cy=\"12\" r=\"3\"/>\r\n              <path d=\"M12 1v6m0 6v6m-7-7h6m6 0h6\"/>\r\n            </svg>\r\n            OTA Configuration\r\n          </h2>\r\n          {configForm && (\r\n            <form onSubmit={handleSaveConfig} className=\"form\" style={{ maxWidth: '800px' }}>\r\n              <div className=\"form-group\">\r\n                <label>Update Strategy</label>\r\n                <select\r\n                  className=\"form-control\"\r\n                  value={configForm.update_strategy}\r\n                  onChange={(e) =>\r\n                    setConfigForm({\r\n                      ...configForm,\r\n                      update_strategy: e.target.value as any,\r\n                    })\r\n                  }\r\n                  style={{\r\n                    padding: '0.75rem',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid var(--border-color)',\r\n                    background: 'var(--bg-secondary)'\r\n                  }}\r\n                >\r\n                  <option value=\"immediate\">üöÄ Immediate - Push updates immediately</option>\r\n                  <option value=\"scheduled\">üìÖ Scheduled - Push during maintenance window</option>\r\n                  <option value=\"manual\">üë§ Manual - Wait for device to request</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Max Concurrent Updates</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  min=\"1\"\r\n                  max=\"50\"\r\n                  value={configForm.max_concurrent_updates}\r\n                  onChange={(e) =>\r\n                    setConfigForm({\r\n                      ...configForm,\r\n                      max_concurrent_updates: parseInt(e.target.value),\r\n                    })\r\n                  }\r\n                  style={{\r\n                    padding: '0.75rem',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid var(--border-color)',\r\n                    background: 'var(--bg-secondary)'\r\n                  }}\r\n                />\r\n                <small className=\"form-text\" style={{ display: 'block', marginTop: '0.5rem', color: 'var(--text-secondary)' }}>\r\n                  Maximum number of devices updating simultaneously\r\n                </small>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Firmware Retention (days)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  min=\"1\"\r\n                  max=\"365\"\r\n                  value={configForm.firmware_retention_days}\r\n                  onChange={(e) =>\r\n                    setConfigForm({\r\n                      ...configForm,\r\n                      firmware_retention_days: parseInt(e.target.value),\r\n                    })\r\n                  }\r\n                  style={{\r\n                    padding: '0.75rem',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid var(--border-color)',\r\n                    background: 'var(--bg-secondary)'\r\n                  }}\r\n                />\r\n                <small className=\"form-text\" style={{ display: 'block', marginTop: '0.5rem', color: 'var(--text-secondary)' }}>\r\n                  Keep old firmware files for this many days before cleanup\r\n                </small>\r\n              </div>\r\n\r\n              <button type=\"submit\" className=\"btn btn-primary\" disabled={loading} style={{ marginTop: '1rem' }}>\r\n                {loading ? 'Saving...' : 'üíæ Save Configuration'}\r\n              </button>\r\n            </form>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'docs' && (\r\n        <div className=\"admin-card\">\r\n          <h2 style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '1.5rem' }}>\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n              <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/>\r\n              <polyline points=\"14 2 14 8 20 8\"/>\r\n              <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"/>\r\n              <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"/>\r\n            </svg>\r\n            API Documentation\r\n          </h2>\r\n\r\n          <div style={{ display: 'grid', gap: '1.5rem' }}>\r\n            {/* Update Strategy Info */}\r\n            <div style={{\r\n              background: 'var(--bg-secondary)',\r\n              borderRadius: '12px',\r\n              padding: '1.5rem',\r\n              border: '1px solid var(--border-color)'\r\n            }}>\r\n              <h3 style={{ marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <circle cx=\"12\" cy=\"12\" r=\"3\"/>\r\n                  <path d=\"M12 1v6m0 6v6m-7-7h6m6 0h6\"/>\r\n                </svg>\r\n                OTA Update Strategy\r\n              </h3>\r\n              <div style={{ marginBottom: '1rem' }}>\r\n                <strong style={{ color: 'var(--primary-color)' }}>\r\n                  Current: {config?.update_strategy.toUpperCase()}\r\n                </strong>\r\n              </div>\r\n              <ul style={{ paddingLeft: '1.5rem', color: 'var(--text-secondary)' }}>\r\n                <li style={{ marginBottom: '0.5rem' }}>\r\n                  <strong>Immediate:</strong> Updates offered to devices immediately when activated\r\n                </li>\r\n                <li style={{ marginBottom: '0.5rem' }}>\r\n                  <strong>Scheduled:</strong> Updates offered during configured maintenance windows\r\n                </li>\r\n                <li style={{ marginBottom: '0.5rem' }}>\r\n                  <strong>Manual:</strong> Devices must explicitly request updates via API\r\n                </li>\r\n              </ul>\r\n            </div>\r\n\r\n            {/* Heartbeat Flags */}\r\n            <div style={{\r\n              background: 'var(--bg-secondary)',\r\n              borderRadius: '12px',\r\n              padding: '1.5rem',\r\n              border: '1px solid var(--border-color)'\r\n            }}>\r\n              <h3 style={{ marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"/>\r\n                </svg>\r\n                Heartbeat updateFirmware Flags\r\n              </h3>\r\n              <div style={{\r\n                display: 'grid',\r\n                gap: '0.75rem',\r\n                fontFamily: 'monospace',\r\n                fontSize: '0.9rem'\r\n              }}>\r\n                <div style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '1rem',\r\n                  padding: '0.75rem',\r\n                  background: 'var(--bg-tertiary)',\r\n                  borderRadius: '8px'\r\n                }}>\r\n                  <span style={{\r\n                    background: 'var(--bg-primary)',\r\n                    padding: '0.25rem 0.75rem',\r\n                    borderRadius: '6px',\r\n                    fontWeight: '600',\r\n                    minWidth: '40px',\r\n                    textAlign: 'center'\r\n                  }}>0</span>\r\n                  <span style={{ color: 'var(--text-secondary)' }}>No firmware update needed (default)</span>\r\n                </div>\r\n                <div style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '1rem',\r\n                  padding: '0.75rem',\r\n                  background: 'var(--bg-tertiary)',\r\n                  borderRadius: '8px'\r\n                }}>\r\n                  <span style={{\r\n                    background: 'var(--primary-color)',\r\n                    color: 'white',\r\n                    padding: '0.25rem 0.75rem',\r\n                    borderRadius: '6px',\r\n                    fontWeight: '600',\r\n                    minWidth: '40px',\r\n                    textAlign: 'center'\r\n                  }}>1</span>\r\n                  <span style={{ color: 'var(--text-secondary)' }}>New firmware update available (device should update)</span>\r\n                </div>\r\n                <div style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '1rem',\r\n                  padding: '0.75rem',\r\n                  background: 'var(--bg-tertiary)',\r\n                  borderRadius: '8px'\r\n                }}>\r\n                  <span style={{\r\n                    background: 'var(--warning-color)',\r\n                    color: 'white',\r\n                    padding: '0.25rem 0.75rem',\r\n                    borderRadius: '6px',\r\n                    fontWeight: '600',\r\n                    minWidth: '40px',\r\n                    textAlign: 'center'\r\n                  }}>2</span>\r\n                  <span style={{ color: 'var(--text-secondary)' }}>Rollback triggered (device should rollback to previous version)</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* API Endpoints */}\r\n            <div style={{\r\n              background: 'var(--bg-secondary)',\r\n              borderRadius: '12px',\r\n              padding: '1.5rem',\r\n              border: '1px solid var(--border-color)'\r\n            }}>\r\n              <h3 style={{ marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <polyline points=\"16 18 22 12 16 6\"/>\r\n                  <polyline points=\"8 6 2 12 8 18\"/>\r\n                </svg>\r\n                Device API Endpoints\r\n              </h3>\r\n              <div style={{ display: 'grid', gap: '1rem' }}>\r\n                <div>\r\n                  <strong style={{ color: 'var(--primary-color)' }}>Check for Updates (STM32)</strong>\r\n                  <pre style={{\r\n                    background: 'var(--bg-tertiary)',\r\n                    padding: '1rem',\r\n                    borderRadius: '8px',\r\n                    overflow: 'auto',\r\n                    fontSize: '0.85rem',\r\n                    marginTop: '0.5rem',\r\n                    border: '1px solid var(--border-color)'\r\n                  }}>\r\n{`POST /ota/devices/{device_id}/check\r\nContent-Type: application/json\r\n\r\n{\r\n  \"device_id\": \"STM32-001\",\r\n  \"firmware_version\": \"0x00010000\"\r\n}`}\r\n                  </pre>\r\n                </div>\r\n\r\n                <div>\r\n                  <strong style={{ color: 'var(--primary-color)' }}>Response Format</strong>\r\n                  <pre style={{\r\n                    background: 'var(--bg-tertiary)',\r\n                    padding: '1rem',\r\n                    borderRadius: '8px',\r\n                    overflow: 'auto',\r\n                    fontSize: '0.85rem',\r\n                    marginTop: '0.5rem',\r\n                    border: '1px solid var(--border-color)'\r\n                  }}>\r\n{JSON.stringify(\r\n  {\r\n    id: 'fw_1',\r\n    version: '0x00020000',\r\n    size: 1048576,\r\n    url: 'https://api.../ota/firmware/1/download',\r\n    checksum: 'sha256_hash',\r\n    status: 1\r\n  },\r\n  null,\r\n  2\r\n)}\r\n                  </pre>\r\n                </div>\r\n\r\n                <div>\r\n                  <strong style={{ color: 'var(--primary-color)' }}>Heartbeat Endpoint</strong>\r\n                  <pre style={{\r\n                    background: 'var(--bg-tertiary)',\r\n                    padding: '1rem',\r\n                    borderRadius: '8px',\r\n                    overflow: 'auto',\r\n                    fontSize: '0.85rem',\r\n                    marginTop: '0.5rem',\r\n                    border: '1px solid var(--border-color)'\r\n                  }}>\r\n{`POST /api/devices/{device_id}/heartbeat/\r\n\r\nResponse includes:\r\n{\r\n  \"updateFirmware\": 0,  // 0=none, 1=update, 2=rollback\r\n  \"pendingReboot\": false,\r\n  \"hardReset\": false\r\n}`}\r\n                  </pre>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OTA;","/**\r\n * Enhanced in-memory cache service for API responses\r\n * Features:\r\n * - TTL-based expiration\r\n * - Stale-while-revalidate pattern support\r\n * - Subscription system for real-time updates\r\n * - Pattern-based cache invalidation\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n  staleTime?: number; // Time after which data is considered stale but usable\r\n}\r\n\r\ninterface CacheSubscription {\r\n  callback: (data: any) => void;\r\n  pattern?: RegExp;\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private subscribers: Map<string, Set<CacheSubscription>> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n  private static readonly REALTIME_TTL = 10 * 1000; // 10 seconds for real-time data\r\n  private static readonly STALE_TIME = 30 * 1000; // 30 seconds before data is stale\r\n\r\n  /**\r\n   * Set a cache entry and notify subscribers\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL, staleTime?: number): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n      staleTime: staleTime ?? Math.min(ttlMs / 2, CacheService.STALE_TIME),\r\n    });\r\n    \r\n    // Notify subscribers\r\n    this.notifySubscribers(key, data);\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid (returns null if expired)\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Get cache entry even if stale (for stale-while-revalidate pattern)\r\n   * Returns { data, isStale } or null if no entry exists\r\n   */\r\n  getWithStaleStatus(key: string): { data: any; isStale: boolean; isExpired: boolean } | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    const isExpired = age > entry.expiresIn;\r\n    const isStale = age > (entry.staleTime ?? entry.expiresIn / 2);\r\n\r\n    // Remove if fully expired\r\n    if (isExpired) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      data: entry.data,\r\n      isStale,\r\n      isExpired: false,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if cached data is stale but usable\r\n   */\r\n  isStale(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return true;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    return age > (entry.staleTime ?? entry.expiresIn / 2);\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear cache entries matching a pattern\r\n   */\r\n  clearPattern(pattern: string | RegExp): void {\r\n    const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\r\n    const keysToDelete: string[] = [];\r\n    \r\n    this.cache.forEach((_, key) => {\r\n      if (regex.test(key)) {\r\n        keysToDelete.push(key);\r\n      }\r\n    });\r\n    \r\n    keysToDelete.forEach(key => this.cache.delete(key));\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates for a specific key\r\n   */\r\n  subscribe(key: string, callback: (data: any) => void): () => void {\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates matching a pattern\r\n   */\r\n  subscribePattern(pattern: RegExp, callback: (data: any) => void): () => void {\r\n    const key = `__pattern__${pattern.source}`;\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback, pattern };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Notify all subscribers of a cache update\r\n   */\r\n  private notifySubscribers(key: string, data: any): void {\r\n    // Direct key subscribers\r\n    const directSubs = this.subscribers.get(key);\r\n    if (directSubs) {\r\n      directSubs.forEach(sub => {\r\n        try {\r\n          sub.callback(data);\r\n        } catch (error) {\r\n          console.error(`Cache subscriber error for key ${key}:`, error);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Pattern subscribers\r\n    this.subscribers.forEach((subs, subKey) => {\r\n      if (subKey.startsWith('__pattern__')) {\r\n        subs.forEach(sub => {\r\n          if (sub.pattern && sub.pattern.test(key)) {\r\n            try {\r\n              sub.callback(data);\r\n            } catch (error) {\r\n              console.error(`Cache pattern subscriber error for key ${key}:`, error);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get all keys in cache\r\n   */\r\n  keys(): string[] {\r\n    return Array.from(this.cache.keys());\r\n  }\r\n\r\n  /**\r\n   * Get cache stats for debugging\r\n   */\r\n  getStats(): { size: number; keys: string[]; subscribers: number } {\r\n    return {\r\n      size: this.cache.size,\r\n      keys: this.keys(),\r\n      subscribers: Array.from(this.subscribers.values()).reduce((sum, set) => sum + set.size, 0),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' | 'realtime' = 'short'): number {\r\n    switch (type) {\r\n      case 'realtime':\r\n        return CacheService.REALTIME_TTL;\r\n      case 'long':\r\n        return CacheService.LONG_TTL;\r\n      default:\r\n        return CacheService.DEFAULT_TTL;\r\n    }\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\nexport const REALTIME_TTL = 10 * 1000; // 10 seconds\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    if (response.status === 204) return null;\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async getUserSite(userId: number): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`);\r\n  }\r\n\r\n  async createUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceSite(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`);\r\n  }\r\n\r\n  async createDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // DynamoDB site data\r\n  async getSiteTelemetry(siteId: string, params?: { start_date?: string; end_date?: string; days?: number }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    if (params?.days) query.append('days', params.days.toString());\r\n    const url = `/sites/${siteId}/telemetry/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  async getSiteForecast(siteId: string, params?: { date?: string; start_date?: string; end_date?: string }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.date) query.append('date', params.date);\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    const url = `/sites/${siteId}/forecast/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  async getSiteWeather(siteId: string): Promise<any> {\r\n    return this.request(`/sites/${siteId}/weather/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async rebootDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/reboot/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async hardResetDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/hard-reset/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async getDeviceLogs(deviceId: number, limit: number = 100, offset: number = 0): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/?limit=${limit}&offset=${offset}`);\r\n  }\r\n\r\n  async toggleDeviceLogs(deviceId: number, enabled: boolean): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/toggle/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ enabled }),\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  async detachSlaveFromPreset(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/detach/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const url = `${API_BASE_URL}/ota/firmware/create/`;\r\n    const tokens = localStorage.getItem('authTokens');\r\n    \r\n    if (!tokens) {\r\n      throw new Error('Authentication required');\r\n    }\r\n    \r\n    const parsedTokens = JSON.parse(tokens);\r\n    let headers: HeadersInit = {\r\n      'Authorization': `Bearer ${parsedTokens.access}`,\r\n    };\r\n    // Don't set Content-Type - let browser set it with boundary for multipart/form-data\r\n    \r\n    let response = await fetch(url, {\r\n      method: 'POST',\r\n      headers,\r\n      body: formData,\r\n    });\r\n\r\n    // Handle 401 with token refresh\r\n    if (response.status === 401) {\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        const newTokens = JSON.parse(localStorage.getItem('authTokens') || '{}');\r\n        headers = {\r\n          'Authorization': `Bearer ${newTokens.access}`,\r\n        };\r\n        response = await fetch(url, {\r\n          method: 'POST',\r\n          headers,\r\n          body: formData,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Upload failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteFirmwareVersion(firmwareId: number): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n\r\n  async triggerRollback(deviceSerial: string, notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/rollback/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        device_serial: deviceSerial,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["OTA","firmwares","setFirmwares","useState","config","setConfig","health","setHealth","loading","setLoading","uploadingFile","setUploadingFile","uploadingMetadata","setUploadingMetadata","version","description","release_notes","configForm","setConfigForm","successMessage","setSuccessMessage","errorMessage","setErrorMessage","rollbackForm","setRollbackForm","deviceSerial","notes","activeTab","setActiveTab","useEffect","loadOTAData","async","fwRes","configRes","healthRes","Promise","all","apiService","getFirmwareVersions","getOTAConfig","getOTAHealth","error","message","_jsxs","className","children","style","marginBottom","display","alignItems","gap","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","_jsx","d","points","x1","y1","x2","y2","color","margin","_Fragment","concat","status","toUpperCase","firmware_versions","active_firmware","onClick","borderBottom","paddingBottom","background","border","padding","cursor","fontSize","fontWeight","borderRadius","transition","x","y","rx","ry","length","cx","cy","r","gridTemplateColumns","onSubmit","e","preventDefault","formData","FormData","append","uploadFirmwareVersion","fileInput","document","querySelector","value","console","type","placeholder","onChange","_objectSpread","target","accept","_e$target$files","files","name","rows","disabled","window","confirm","triggerRollback","textAlign","opacity","map","fw","is_active","position","top","right","boxShadow","flexWrap","fontFamily","filename","marginLeft","size","toFixed","justifyContent","marginTop","paddingTop","borderTop","Date","created_at","toLocaleDateString","year","month","day","updateFirmwareVersion","firmware","id","handleToggleFirmwareActive","minWidth","deleteFirmwareVersion","handleDeleteFirmware","title","whiteSpace","updateOTAConfig","maxWidth","update_strategy","min","max","max_concurrent_updates","parseInt","firmware_retention_days","paddingLeft","overflow","JSON","stringify","url","checksum","CacheService","constructor","cache","Map","subscribers","set","key","data","ttlMs","arguments","undefined","DEFAULT_TTL","staleTime","this","timestamp","now","expiresIn","Math","STALE_TIME","notifySubscribers","get","entry","delete","getWithStaleStatus","_entry$staleTime","age","isExpired","isStale","has","_entry$staleTime2","clear","clearPattern","pattern","regex","RegExp","keysToDelete","forEach","_","test","push","clearAll","subscribe","callback","Set","subscription","add","subs","subscribePattern","source","directSubs","sub","subKey","startsWith","keys","Array","from","getStats","values","reduce","sum","getTTL","REALTIME_TTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","parse","access","request","endpoint","options","headers","response","fetch","refreshToken","removeItem","location","href","Error","ok","errorText","text","statusText","json","method","body","refresh","newTokens","setItem","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","is_staff","getUserDevices","userId","getUserSite","createUserSite","updateUserSite","getDeviceSite","deviceId","createDeviceSite","updateDeviceSite","getSiteTelemetry","siteId","query","URLSearchParams","start_date","end_date","days","toString","getSiteForecast","date","getSiteWeather","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","deletePreset","getGlobalSlaves","createGlobalSlave","slaveData","updateGlobalSlave","slaveId","deleteGlobalSlave","getDevices","page","pageSize","queryString","createDevice","deviceData","updateDevice","deleteDevice","rebootDevice","hardResetDevice","getDeviceLogs","limit","offset","toggleDeviceLogs","enabled","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","updateSlave","deleteSlave","addSlavesToPreset","slaveIds","slave_ids","detachSlaveFromPreset","activeOnly","firmwareId","getDeviceUpdateLogs","device_serial"],"sourceRoot":""}