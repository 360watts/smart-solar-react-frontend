{"version":3,"file":"static/js/35.dc66ea6c.chunk.js","mappings":"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","sources":["services/cacheService.ts","services/api.ts","components/DevicePresets.tsx"],"sourcesContent":["/**\r\n * Simple in-memory cache service for API responses\r\n * Reduces unnecessary API calls and speeds up page loads\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n\r\n  /**\r\n   * Set a cache entry\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' = 'short'): number {\r\n    return type === 'long' ? CacheService.LONG_TTL : CacheService.DEFAULT_TTL;\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Generic HTTP methods\r\n  async get(endpoint: string): Promise<any> {\r\n    const response = await this.request(endpoint, {\r\n      method: 'GET',\r\n    });\r\n    return response;\r\n  }\r\n\r\n  async post(endpoint: string, data?: any, options: RequestInit = {}): Promise<any> {\r\n    const requestOptions: RequestInit = {\r\n      method: 'POST',\r\n      ...options,\r\n    };\r\n\r\n    if (data && !(data instanceof FormData)) {\r\n      requestOptions.body = JSON.stringify(data);\r\n    } else if (data instanceof FormData) {\r\n      requestOptions.body = data;\r\n      // Remove Content-Type header for FormData to let browser set it with boundary\r\n      const headers = { ...this.getAuthHeaders() };\r\n      delete (headers as any)['Content-Type'];\r\n      requestOptions.headers = {\r\n        ...headers,\r\n        ...options.headers,\r\n      };\r\n    }\r\n\r\n    return this.request(endpoint, requestOptions);\r\n  }\r\n\r\n  async put(endpoint: string, data?: any): Promise<any> {\r\n    return this.request(endpoint, {\r\n      method: 'PUT',\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  async delete(endpoint: string): Promise<any> {\r\n    return this.request(endpoint, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();","import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface Preset {\r\n  id: number;\r\n  config_id: string;\r\n  name: string;\r\n  description: string;\r\n  gateway_configuration: {\r\n    general_settings: {\r\n      config_id: string;\r\n      schema_version: number;\r\n      last_updated: string;\r\n    };\r\n    uart_configuration: {\r\n      baud_rate: number;\r\n      data_bits: number;\r\n      stop_bits: number;\r\n      parity: string;\r\n    };\r\n  };\r\n  slaves_count: number;\r\n}\r\n\r\ninterface SlaveDevice {\r\n  id: number;\r\n  slaveId: number;\r\n  deviceName: string;\r\n  pollingIntervalMs: number;\r\n  timeoutMs: number;\r\n  enabled: boolean;\r\n  registers: RegisterMapping[];\r\n}\r\n\r\ninterface RegisterMapping {\r\n  id: number;\r\n  label: string;\r\n  address: number;\r\n  numRegisters: number;\r\n  functionCode: number;\r\n  dataType: number;\r\n  scaleFactor: number;\r\n  offset: number;\r\n  enabled: boolean;\r\n}\r\n\r\nconst DevicePresets: React.FC = () => {\r\n  const [presets, setPresets] = useState<Preset[]>([]);\r\n  const [filteredPresets, setFilteredPresets] = useState<Preset[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [editingPreset, setEditingPreset] = useState<Preset | null>(null);\r\n  const [creatingPreset, setCreatingPreset] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedPreset, setSelectedPreset] = useState<Preset | null>(null);\r\n  const [configuringSlaves, setConfiguringSlaves] = useState<Preset | null>(null);\r\n  const [slaves, setSlaves] = useState<SlaveDevice[]>([]);\r\n  const [creatingSlave, setCreatingSlave] = useState(false);\r\n  const [editingSlave, setEditingSlave] = useState<SlaveDevice | null>(null);\r\n  const [editForm, setEditForm] = useState({\r\n    config_id: '',\r\n    name: '',\r\n    description: '',\r\n    baud_rate: 9600,\r\n    data_bits: 8,\r\n    stop_bits: 1,\r\n    parity: 0,\r\n  });\r\n  const [createForm, setCreateForm] = useState({\r\n    name: '',\r\n    description: '',\r\n    baud_rate: 9600,\r\n    data_bits: 8,\r\n    stop_bits: 1,\r\n    parity: 0,\r\n  });\r\n  const [slaveForm, setSlaveForm] = useState({\r\n    slave_id: '',\r\n    device_name: '',\r\n    polling_interval_ms: 5000,\r\n    timeout_ms: 1000,\r\n    enabled: true,\r\n    registers: [] as RegisterMapping[]\r\n  });\r\n  const [registerForm, setRegisterForm] = useState({\r\n    label: '',\r\n    address: 0,\r\n    num_registers: 1,\r\n    function_code: 3,\r\n    data_type: 0,\r\n    scale_factor: 1.0,\r\n    offset: 0.0,\r\n    enabled: true\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchPresets();\r\n  }, []);\r\n\r\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedSearchTerm(searchTerm);\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [searchTerm]);\r\n\r\n  useEffect(() => {\r\n    fetchPresets(debouncedSearchTerm);\r\n  }, [debouncedSearchTerm]);\r\n\r\n  const fetchPresets = async (search?: string) => {\r\n    try {\r\n      const data = await apiService.getPresets();\r\n      // Filter presets based on search term\r\n      let filteredData = data;\r\n      if (search) {\r\n        const searchLower = search.toLowerCase();\r\n        filteredData = data.filter((preset: Preset) =>\r\n          preset.name.toLowerCase().includes(searchLower) ||\r\n          preset.config_id.toLowerCase().includes(searchLower) ||\r\n          preset.description.toLowerCase().includes(searchLower)\r\n        );\r\n      }\r\n      setPresets(data);\r\n      setFilteredPresets(filteredData);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  const handleEdit = (preset: Preset) => {\r\n    setEditingPreset(preset);\r\n    setEditForm({\r\n      config_id: preset.gateway_configuration.general_settings.config_id,\r\n      name: preset.name,\r\n      description: preset.description,\r\n      baud_rate: preset.gateway_configuration.uart_configuration.baud_rate,\r\n      data_bits: preset.gateway_configuration.uart_configuration.data_bits,\r\n      stop_bits: preset.gateway_configuration.uart_configuration.stop_bits,\r\n      parity: preset.gateway_configuration.uart_configuration.parity === 'None' ? 0 : \r\n              preset.gateway_configuration.uart_configuration.parity === 'Odd' ? 1 : 2,\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editingPreset) return;\r\n\r\n    try {\r\n      await apiService.updatePreset(editingPreset.id, editForm);\r\n      setEditingPreset(null);\r\n      // Refetch to get the updated preset with all fields\r\n      await fetchPresets(searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update preset');\r\n    }\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    try {\r\n      await apiService.createPreset(createForm);\r\n      setCreatingPreset(false);\r\n      setCreateForm({\r\n        name: '',\r\n        description: '',\r\n        baud_rate: 9600,\r\n        data_bits: 8,\r\n        stop_bits: 1,\r\n        parity: 0,\r\n      });\r\n      // Refetch to get the new preset with all fields\r\n      await fetchPresets(searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to create preset');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (preset: any) => {\r\n    if (window.confirm(`Are you sure you want to delete preset ${preset.name}?`)) {\r\n      try {\r\n        await apiService.deletePreset(preset.id);\r\n        // Refetch to update the list\r\n        await fetchPresets(searchTerm);\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Failed to delete preset');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleViewDetails = (preset: Preset) => {\r\n    setSelectedPreset(preset);\r\n  };\r\n\r\n  const handleCloseDetails = () => {\r\n    setSelectedPreset(null);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingPreset(null);\r\n    setCreatingPreset(false);\r\n  };\r\n\r\n  const getDataTypeName = (dataType: number): string => {\r\n    const types = ['UINT16', 'INT16', 'UINT32', 'INT32', 'FLOAT32', 'FLOAT64'];\r\n    return types[dataType] || 'UNKNOWN';\r\n  };\r\n\r\n  const handleConfigureSlaves = async (preset: Preset) => {\r\n    setConfiguringSlaves(preset);\r\n    await fetchSlavesForPreset(preset.config_id);\r\n  };\r\n\r\n  const fetchSlavesForPreset = async (configId: string) => {\r\n    try {\r\n      const slavesData = await apiService.getSlaves(configId);\r\n      // Map API response to match interface\r\n      const mappedSlaves = slavesData.map((slave: any) => ({\r\n        id: slave.id,\r\n        slaveId: slave.slave_id,\r\n        deviceName: slave.device_name,\r\n        pollingIntervalMs: slave.polling_interval_ms,\r\n        timeoutMs: slave.timeout_ms,\r\n        enabled: slave.enabled,\r\n        registers: slave.registers.map((reg: any) => ({\r\n          id: reg.id,\r\n          label: reg.label,\r\n          address: reg.address,\r\n          numRegisters: reg.num_registers,\r\n          functionCode: reg.function_code,\r\n          dataType: reg.data_type,\r\n          scaleFactor: reg.scale_factor,\r\n          offset: reg.offset,\r\n          enabled: reg.enabled,\r\n        }))\r\n      }));\r\n      setSlaves(mappedSlaves);\r\n    } catch (err) {\r\n      console.error('Failed to fetch slaves:', err);\r\n      setError('Failed to load slaves for this preset');\r\n    }\r\n  };\r\n\r\n  const updatePresetSlaveCount = (configId: string, count: number) => {\r\n    // Update presets state\r\n    const updatedPresets = presets.map(p => \r\n      p.config_id === configId ? { ...p, slaves_count: count } : p\r\n    );\r\n    setPresets(updatedPresets);\r\n    \r\n    // Update filtered presets\r\n    const searchLower = searchTerm.toLowerCase();\r\n    const updatedFiltered = updatedPresets.filter((preset: Preset) =>\r\n      preset.name.toLowerCase().includes(searchLower) ||\r\n      preset.config_id.toLowerCase().includes(searchLower) ||\r\n      preset.description.toLowerCase().includes(searchLower)\r\n    );\r\n    setFilteredPresets(updatedFiltered);\r\n    \r\n    // Update configuringSlaves if it's the same preset\r\n    if (configuringSlaves && configuringSlaves.config_id === configId) {\r\n      setConfiguringSlaves({ ...configuringSlaves, slaves_count: count });\r\n    }\r\n  };\r\n\r\n  const handleCancelSlaveConfig = () => {\r\n    setConfiguringSlaves(null);\r\n    setSlaves([]);\r\n    setCreatingSlave(false);\r\n    setEditingSlave(null);\r\n    setSlaveForm({\r\n      slave_id: '',\r\n      device_name: '',\r\n      polling_interval_ms: 5000,\r\n      timeout_ms: 1000,\r\n      enabled: true,\r\n      registers: []\r\n    });\r\n  };\r\n\r\n  const handleCreateSlave = () => {\r\n    setSlaveForm({\r\n      slave_id: '',\r\n      device_name: '',\r\n      polling_interval_ms: 5000,\r\n      timeout_ms: 1000,\r\n      enabled: true,\r\n      registers: []\r\n    });\r\n    setCreatingSlave(true);\r\n  };\r\n\r\n  const handleEditSlave = (slave: SlaveDevice) => {\r\n    setSlaveForm({\r\n      slave_id: slave.slaveId.toString(),\r\n      device_name: slave.deviceName,\r\n      polling_interval_ms: slave.pollingIntervalMs,\r\n      timeout_ms: slave.timeoutMs,\r\n      enabled: slave.enabled,\r\n      registers: [...slave.registers]\r\n    });\r\n    setEditingSlave(slave);\r\n  };\r\n\r\n  const handleSaveSlave = async () => {\r\n    if (!configuringSlaves) return;\r\n\r\n    // Validate slave ID uniqueness for new slaves\r\n    if (!editingSlave) {\r\n      const slaveId = parseInt(slaveForm.slave_id);\r\n      const existingSlave = slaves.find(s => s.slaveId === slaveId);\r\n      if (existingSlave) {\r\n        setError(`Slave ID ${slaveId} already exists for this configuration. Please choose a different ID.`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const slaveData = {\r\n        slave_id: parseInt(slaveForm.slave_id),\r\n        device_name: slaveForm.device_name,\r\n        polling_interval_ms: slaveForm.polling_interval_ms,\r\n        timeout_ms: slaveForm.timeout_ms,\r\n        enabled: slaveForm.enabled,\r\n        registers: slaveForm.registers\r\n      };\r\n\r\n      if (editingSlave) {\r\n        await apiService.updateSlave(configuringSlaves.config_id, editingSlave.slaveId, slaveData);\r\n        setEditingSlave(null);\r\n      } else {\r\n        await apiService.createSlave(configuringSlaves.config_id, slaveData);\r\n        setCreatingSlave(false);\r\n      }\r\n\r\n      setSlaveForm({\r\n        slave_id: '',\r\n        device_name: '',\r\n        polling_interval_ms: 5000,\r\n        timeout_ms: 1000,\r\n        enabled: true,\r\n        registers: []\r\n      });\r\n      \r\n      // Refetch to get updated slave list and count\r\n      await fetchSlavesForPreset(configuringSlaves.config_id);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to save slave');\r\n    }\r\n  };\r\n\r\n  const handleDeleteSlave = async (slave: SlaveDevice) => {\r\n    if (!configuringSlaves) return;\r\n\r\n    if (window.confirm(`Are you sure you want to delete slave ${slave.deviceName}?`)) {\r\n      try {\r\n        await apiService.deleteSlave(configuringSlaves.config_id, slave.slaveId);\r\n        // Refetch slaves to update the list and count\r\n        await fetchSlavesForPreset(configuringSlaves.config_id);\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Failed to delete slave');\r\n      }\r\n    }\r\n  };\r\n\r\n  const addRegister = () => {\r\n    const newRegister: RegisterMapping = {\r\n      id: Date.now(), // Temporary ID for form management\r\n      label: registerForm.label,\r\n      address: registerForm.address,\r\n      numRegisters: registerForm.num_registers,\r\n      functionCode: registerForm.function_code,\r\n      dataType: registerForm.data_type,\r\n      scaleFactor: registerForm.scale_factor,\r\n      offset: registerForm.offset,\r\n      enabled: registerForm.enabled\r\n    };\r\n\r\n    setSlaveForm({\r\n      ...slaveForm,\r\n      registers: [...slaveForm.registers, newRegister]\r\n    });\r\n\r\n    // Reset register form\r\n    setRegisterForm({\r\n      label: '',\r\n      address: 0,\r\n      num_registers: 1,\r\n      function_code: 3,\r\n      data_type: 0,\r\n      scale_factor: 1.0,\r\n      offset: 0.0,\r\n      enabled: true\r\n    });\r\n  };\r\n\r\n  const removeRegister = (index: number) => {\r\n    setSlaveForm({\r\n      ...slaveForm,\r\n      registers: slaveForm.registers.filter((_, i) => i !== index)\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading presets...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Device Presets</h1>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>Presets ({filteredPresets.length})</h2>\r\n          <div className=\"card-actions\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search presets...\"\r\n              value={searchTerm}\r\n              onChange={handleSearch}\r\n              className=\"search-input\"\r\n            />\r\n            <button onClick={() => setCreatingPreset(true)} className=\"btn\">\r\n              Create New Preset\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'center' }}>Name</th>\r\n              <th style={{ textAlign: 'center' }}>Config ID</th>\r\n              <th style={{ textAlign: 'center' }}>Description</th>\r\n              <th style={{ textAlign: 'center' }}>Slaves</th>\r\n              <th style={{ textAlign: 'center' }}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredPresets.map((preset) => (\r\n              <tr key={preset.id}>\r\n                <td>{preset.name}</td>\r\n                <td>{preset.config_id}</td>\r\n                <td>{preset.description}</td>\r\n                <td>{preset.slaves_count || 0}</td>\r\n                <td>\r\n                  <button onClick={() => handleViewDetails(preset)} style={{ background: 'none', border: 'none', cursor: 'pointer' }} title=\"View Details\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                      <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                    </svg>\r\n                  </button>\r\n                  <button onClick={() => handleConfigureSlaves(preset)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#007bff' }} title=\"Configure Slaves\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n                      <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\r\n                      <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\r\n                      <line x1=\"21\" y1=\"3\" x2=\"3\" y2=\"21\"></line>\r\n                    </svg>\r\n                  </button>\r\n                  <button onClick={() => handleEdit(preset)} style={{ background: 'none', border: 'none', cursor: 'pointer' }} title=\"Edit\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                      <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                    </svg>\r\n                  </button>\r\n                  <button onClick={() => handleDelete(preset)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'red' }} title=\"Delete\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                      <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                      <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                      <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                    </svg>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {(editingPreset || creatingPreset) && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <h3>{editingPreset ? `Edit Preset: ${editingPreset.name}` : 'Create New Preset'}</h3>\r\n            <div className=\"modal-body\">\r\n              <form onSubmit={(e) => { e.preventDefault(); editingPreset ? handleSave() : handleCreate(); }}>\r\n                {editingPreset && (\r\n                  <div className=\"form-group\">\r\n                    <label>Config ID:</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={editForm.config_id}\r\n                      onChange={(e) => setEditForm({...editForm, config_id: e.target.value})}\r\n                      required\r\n                      autoComplete=\"off\"\r\n                    />\r\n                  </div>\r\n                )}\r\n                <div className=\"form-group\">\r\n                  <label>Name:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editingPreset ? editForm.name : createForm.name}\r\n                    onChange={(e) => editingPreset ? setEditForm({...editForm, name: e.target.value}) : setCreateForm({...createForm, name: e.target.value})}\r\n                    required\r\n                    autoComplete=\"off\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Description:</label>\r\n                  <textarea\r\n                    value={editingPreset ? editForm.description : createForm.description}\r\n                    onChange={(e) => editingPreset ? setEditForm({...editForm, description: e.target.value}) : setCreateForm({...createForm, description: e.target.value})}\r\n                    autoComplete=\"off\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Baud Rate:</label>\r\n                  <select\r\n                    value={editingPreset ? editForm.baud_rate : createForm.baud_rate}\r\n                  onChange={(e) => editingPreset ? setEditForm({...editForm, baud_rate: parseInt(e.target.value)}) : setCreateForm({...createForm, baud_rate: parseInt(e.target.value)})}\r\n                >\r\n                  <option value={9600}>9600</option>\r\n                  <option value={19200}>19200</option>\r\n                  <option value={38400}>38400</option>\r\n                  <option value={57600}>57600</option>\r\n                  <option value={115200}>115200</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Data Bits:</label>\r\n                <select\r\n                  value={editingPreset ? editForm.data_bits : createForm.data_bits}\r\n                  onChange={(e) => editingPreset ? setEditForm({...editForm, data_bits: parseInt(e.target.value)}) : setCreateForm({...createForm, data_bits: parseInt(e.target.value)})}\r\n                >\r\n                  <option value={7}>7</option>\r\n                  <option value={8}>8</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Stop Bits:</label>\r\n                <select\r\n                  value={editingPreset ? editForm.stop_bits : createForm.stop_bits}\r\n                  onChange={(e) => editingPreset ? setEditForm({...editForm, stop_bits: parseInt(e.target.value)}) : setCreateForm({...createForm, stop_bits: parseInt(e.target.value)})}\r\n                >\r\n                  <option value={1}>1</option>\r\n                  <option value={2}>2</option>\r\n                </select>\r\n              </div>\r\n                <div className=\"form-group\">\r\n                  <label>Parity:</label>\r\n                  <select\r\n                    value={editingPreset ? editForm.parity : createForm.parity}\r\n                    onChange={(e) => editingPreset ? setEditForm({...editForm, parity: parseInt(e.target.value)}) : setCreateForm({...createForm, parity: parseInt(e.target.value)})}\r\n                  >\r\n                    <option value={0}>None</option>\r\n                    <option value={1}>Odd</option>\r\n                    <option value={2}>Even</option>\r\n                  </select>\r\n                </div>\r\n              </form>\r\n            </div>\r\n            <div className=\"form-actions\">\r\n              <button type=\"submit\" className=\"btn\" onClick={(e) => { e.preventDefault(); editingPreset ? handleSave() : handleCreate(); }}>{editingPreset ? 'Save' : 'Create'}</button>\r\n              <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {selectedPreset && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\" style={{ maxWidth: '600px' }}>\r\n            <h3>Gateway Configuration: {selectedPreset.name}</h3>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <h4>General Settings</h4>\r\n              <div style={{ marginLeft: '20px' }}>\r\n                <p><strong>Config ID:</strong> {selectedPreset.gateway_configuration.general_settings.config_id}</p>\r\n                <p><strong>Schema Version:</strong> {selectedPreset.gateway_configuration.general_settings.schema_version}</p>\r\n                <p><strong>Last Updated:</strong> {selectedPreset.gateway_configuration.general_settings.last_updated}</p>\r\n              </div>\r\n            </div>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <h4>UART Configuration</h4>\r\n              <div style={{ marginLeft: '20px' }}>\r\n                <p><strong>Baud Rate:</strong> {selectedPreset.gateway_configuration.uart_configuration.baud_rate}</p>\r\n                <p><strong>Data Bits:</strong> {selectedPreset.gateway_configuration.uart_configuration.data_bits}</p>\r\n                <p><strong>Stop Bits:</strong> {selectedPreset.gateway_configuration.uart_configuration.stop_bits}</p>\r\n                <p><strong>Parity:</strong> {selectedPreset.gateway_configuration.uart_configuration.parity}</p>\r\n              </div>\r\n            </div>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <p><strong>Description:</strong> {selectedPreset.description}</p>\r\n              <p><strong>Slave Devices:</strong> {selectedPreset.slaves_count}</p>\r\n            </div>\r\n            <div className=\"form-actions\">\r\n              <button onClick={handleCloseDetails} className=\"btn btn-secondary\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {configuringSlaves && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\" style={{ maxWidth: '1200px', maxHeight: '90vh', overflow: 'auto' }}>\r\n            <h3>Configure Slaves: {configuringSlaves.name}</h3>\r\n\r\n            {error && (\r\n              <div className=\"error\" style={{ marginBottom: '20px', padding: '10px', backgroundColor: '#f8d7da', border: '1px solid #f5c6cb', borderRadius: '4px', color: '#721c24' }}>\r\n                <strong>Error:</strong> {error}\r\n                <button\r\n                  onClick={() => setError(null)}\r\n                  style={{ float: 'right', background: 'none', border: 'none', color: '#721c24', cursor: 'pointer', fontSize: '16px' }}\r\n                  title=\"Close error\"\r\n                >\r\n                  \r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"card\" style={{ marginBottom: '20px' }}>\r\n              <div className=\"card-header\">\r\n                <h4>Slave Devices ({slaves.length})</h4>\r\n                <button onClick={handleCreateSlave} className=\"btn\">Add Slave</button>\r\n              </div>\r\n\r\n              {slaves.length === 0 ? (\r\n                <div style={{ textAlign: 'center', padding: '40px 20px', color: '#666' }}>\r\n                  <p>No slave devices configured yet.</p>\r\n                  <p>Click \"Add Slave\" to configure your first slave device.</p>\r\n                </div>\r\n              ) : (\r\n                <table className=\"table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th style={{ textAlign: 'center' }}>Slave ID</th>\r\n                      <th style={{ textAlign: 'center' }}>Device Name</th>\r\n                      <th style={{ textAlign: 'center' }}>Polling Interval</th>\r\n                      <th style={{ textAlign: 'center' }}>Timeout</th>\r\n                      <th style={{ textAlign: 'center' }}>Status</th>\r\n                      <th style={{ textAlign: 'center' }}>Registers</th>\r\n                      <th style={{ textAlign: 'center' }}>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {slaves.map((slave) => (\r\n                      <tr key={slave.id}>\r\n                        <td style={{ textAlign: 'center' }}>{slave.slaveId}</td>\r\n                        <td>{slave.deviceName}</td>\r\n                        <td style={{ textAlign: 'center' }}>{slave.pollingIntervalMs}ms</td>\r\n                        <td style={{ textAlign: 'center' }}>{slave.timeoutMs}ms</td>\r\n                        <td style={{ textAlign: 'center' }}>\r\n                          <span className={slave.enabled ? 'status-online' : 'status-offline'}>\r\n                            {slave.enabled ? 'Enabled' : 'Disabled'}\r\n                          </span>\r\n                        </td>\r\n                        <td style={{ textAlign: 'center' }}>{slave.registers.length}</td>\r\n                        <td style={{ textAlign: 'center' }}>\r\n                          <button onClick={() => handleEditSlave(slave)} style={{ background: 'none', border: 'none', cursor: 'pointer', marginRight: '10px' }} title=\"Edit\">\r\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                              <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                              <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                            </svg>\r\n                          </button>\r\n                          <button onClick={() => handleDeleteSlave(slave)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'red' }} title=\"Delete\">\r\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                              <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                              <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                              <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                              <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                            </svg>\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-actions\">\r\n              <button onClick={handleCancelSlaveConfig} className=\"btn btn-secondary\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Slave Configuration Modal */}\r\n      {(creatingSlave || editingSlave) && configuringSlaves && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content large-modal\">\r\n            <h3>{editingSlave ? `Edit Slave: ${editingSlave.deviceName}` : 'Configure New Slave'}</h3>\r\n            \r\n            <div className=\"modal-body\">\r\n              <form onSubmit={(e) => { e.preventDefault(); handleSaveSlave(); }}>\r\n                \r\n                {/* Section 1: Basic Information */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Basic Information</h4>\r\n                  <div className=\"form-grid form-grid-2\">\r\n                    <div className=\"form-group\">\r\n                      <label>Slave ID</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.slave_id}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, slave_id: e.target.value})}\r\n                        required\r\n                        min=\"1\"\r\n                        max=\"247\"\r\n                        placeholder=\"1-247\"\r\n                      />\r\n                      <small className=\"form-hint\">\r\n                        Unique identifier (1-247)\r\n                        {slaves.length > 0 && (\r\n                          <span className=\"form-hint-accent\">\r\n                            Existing: {slaves.map(s => s.slaveId).join(', ')}\r\n                          </span>\r\n                        )}\r\n                      </small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Device Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={slaveForm.device_name}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, device_name: e.target.value})}\r\n                        required\r\n                        placeholder=\"e.g., Solar Inverter\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 2: Communication Settings */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Communication Settings</h4>\r\n                  <div className=\"form-grid form-grid-3\">\r\n                    <div className=\"form-group\">\r\n                      <label>Polling Interval (ms)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.polling_interval_ms}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, polling_interval_ms: parseInt(e.target.value)})}\r\n                        min=\"100\"\r\n                        placeholder=\"5000\"\r\n                      />\r\n                      <small className=\"form-hint\">How often to poll</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Timeout (ms)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.timeout_ms}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, timeout_ms: parseInt(e.target.value)})}\r\n                        min=\"100\"\r\n                        placeholder=\"1000\"\r\n                      />\r\n                      <small className=\"form-hint\">Response timeout</small>\r\n                    </div>\r\n                    <div className=\"form-group checkbox-group\">\r\n                      <label>Status</label>\r\n                      <label className=\"checkbox-label checkbox-vertical\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={slaveForm.enabled}\r\n                          onChange={(e) => setSlaveForm({...slaveForm, enabled: e.target.checked})}\r\n                        />\r\n                        <span className={slaveForm.enabled ? 'status-text-enabled' : 'status-text-disabled'}>\r\n                          {slaveForm.enabled ? 'Enabled' : 'Disabled'}\r\n                        </span>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 3: Register Mappings */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Register Mappings</h4>\r\n                  <p className=\"form-section-desc\">Configure the Modbus registers to read from this slave device.</p>\r\n\r\n                  {/* Add Register Sub-form */}\r\n                  <div className=\"form-subsection\">\r\n                    <h5 className=\"form-subsection-title\">Add New Register</h5>\r\n                    <div className=\"form-grid form-grid-auto\">\r\n                      <div className=\"form-group\">\r\n                        <label>Label</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"e.g., voltage\"\r\n                          value={registerForm.label}\r\n                          onChange={(e) => setRegisterForm({...registerForm, label: e.target.value})}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Address</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"0\"\r\n                          value={registerForm.address}\r\n                          onChange={(e) => setRegisterForm({...registerForm, address: parseInt(e.target.value)})}\r\n                          min=\"0\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Data Type</label>\r\n                        <select\r\n                          value={registerForm.data_type}\r\n                          onChange={(e) => setRegisterForm({...registerForm, data_type: parseInt(e.target.value)})}\r\n                        >\r\n                          <option value={0}>UINT16</option>\r\n                          <option value={1}>INT16</option>\r\n                          <option value={2}>UINT32</option>\r\n                          <option value={3}>INT32</option>\r\n                          <option value={4}>FLOAT32</option>\r\n                          <option value={5}>FLOAT64</option>\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Scale</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"1.0\"\r\n                          value={registerForm.scale_factor}\r\n                          onChange={(e) => setRegisterForm({...registerForm, scale_factor: parseFloat(e.target.value)})}\r\n                          step=\"0.01\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Offset</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"0.0\"\r\n                          value={registerForm.offset}\r\n                          onChange={(e) => setRegisterForm({...registerForm, offset: parseFloat(e.target.value)})}\r\n                          step=\"0.01\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group checkbox-group\">\r\n                        <label>Active</label>\r\n                        <label className=\"checkbox-label checkbox-vertical\">\r\n                          <input\r\n                          type=\"checkbox\"\r\n                          checked={registerForm.enabled}\r\n                            onChange={(e) => setRegisterForm({...registerForm, enabled: e.target.checked})}\r\n                          />\r\n                          <span>{registerForm.enabled ? 'Yes' : 'No'}</span>\r\n                        </label>\r\n                      </div>\r\n                      <div className=\"form-group form-group-btn\">\r\n                        <button type=\"button\" onClick={addRegister} className=\"btn btn-sm\">\r\n                          Add Register\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Registers Table */}\r\n                  {slaveForm.registers.length > 0 ? (\r\n                    <div className=\"registers-table-wrapper\">\r\n                      <h5 className=\"form-subsection-title\">Configured Registers ({slaveForm.registers.length})</h5>\r\n                      <table className=\"table registers-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th>Label</th>\r\n                            <th>Address</th>\r\n                            <th>Data Type</th>\r\n                            <th>Scale</th>\r\n                            <th>Offset</th>\r\n                            <th>Status</th>\r\n                            <th>Actions</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {slaveForm.registers.map((reg, index) => (\r\n                            <tr key={index}>\r\n                              <td>{reg.label}</td>\r\n                              <td>{reg.address}</td>\r\n                              <td>{getDataTypeName(reg.dataType)}</td>\r\n                              <td>{reg.scaleFactor}</td>\r\n                              <td>{reg.offset}</td>\r\n                              <td>\r\n                                <span className={`status-badge ${reg.enabled ? 'status-badge-success' : 'status-badge-danger'}`}>\r\n                                  {reg.enabled ? 'Enabled' : 'Disabled'}\r\n                                </span>\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => removeRegister(index)}\r\n                                  className=\"btn-icon btn-icon-danger\"\r\n                                  title=\"Remove\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"empty-state\">\r\n                      No registers configured yet. Add registers above to define what data to read from this slave device.\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n              </form>\r\n            </div>\r\n\r\n            {/* Modal Footer */}\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-primary\" onClick={(e) => { e.preventDefault(); handleSaveSlave(); }}>\r\n                {editingSlave ? 'Save Changes' : 'Create Slave'}\r\n              </button>\r\n              <button type=\"button\" onClick={() => { setCreatingSlave(false); setEditingSlave(null); }} className=\"btn btn-secondary\">\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DevicePresets;\r\n"],"names":["CacheService","constructor","cache","Map","set","key","data","ttlMs","arguments","length","undefined","DEFAULT_TTL","this","timestamp","Date","now","expiresIn","get","entry","delete","has","clear","clearAll","size","getTTL","LONG_TTL","cacheService","API_BASE_URL","process","apiService","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","concat","access","error","console","request","endpoint","options","url","headers","response","fetch","_objectSpread","status","refreshToken","removeItem","window","location","href","Error","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","post","requestOptions","FormData","put","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","is_staff","getUserDevices","userId","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","id","deletePreset","getDevices","page","pageSize","URLSearchParams","append","toString","queryString","createDevice","deviceData","updateDevice","deviceId","deleteDevice","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","slaveData","updateSlave","slaveId","deleteSlave","DevicePresets","presets","setPresets","useState","filteredPresets","setFilteredPresets","loading","setLoading","setError","editingPreset","setEditingPreset","creatingPreset","setCreatingPreset","searchTerm","setSearchTerm","selectedPreset","setSelectedPreset","configuringSlaves","setConfiguringSlaves","slaves","setSlaves","creatingSlave","setCreatingSlave","editingSlave","setEditingSlave","editForm","setEditForm","config_id","name","description","baud_rate","data_bits","stop_bits","parity","createForm","setCreateForm","slaveForm","setSlaveForm","slave_id","device_name","polling_interval_ms","timeout_ms","enabled","registers","registerForm","setRegisterForm","label","address","num_registers","function_code","data_type","scale_factor","offset","useEffect","fetchPresets","debouncedSearchTerm","setDebouncedSearchTerm","timer","setTimeout","clearTimeout","async","filteredData","searchLower","toLowerCase","filter","preset","includes","err","message","handleSave","handleCreate","fetchSlavesForPreset","mappedSlaves","map","slave","deviceName","pollingIntervalMs","timeoutMs","reg","numRegisters","functionCode","dataType","scaleFactor","handleSaveSlave","parseInt","find","s","_jsx","className","children","_jsxs","type","placeholder","value","onChange","e","target","onClick","style","textAlign","slaves_count","handleViewDetails","background","border","cursor","title","width","height","viewBox","fill","stroke","strokeWidth","d","cx","cy","r","handleConfigureSlaves","color","x","y","rx","ry","x1","y1","x2","y2","gateway_configuration","general_settings","uart_configuration","handleEdit","confirm","handleDelete","points","onSubmit","preventDefault","required","autoComplete","handleCancel","maxWidth","marginBottom","marginLeft","schema_version","last_updated","handleCloseDetails","maxHeight","overflow","padding","backgroundColor","borderRadius","float","fontSize","handleCreateSlave","handleEditSlave","marginRight","handleDeleteSlave","handleCancelSlaveConfig","min","max","join","checked","parseFloat","step","addRegister","newRegister","index","_","i","removeRegister"],"ignoreList":[],"sourceRoot":""}