{"version":3,"file":"static/js/578.1c171166.chunk.js","mappings":"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","sources":["components/Profile.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface ProfileData {\r\n  id: number;\r\n  username: string;\r\n  email: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  mobile_number?: string;\r\n  address?: string;\r\n  is_staff: boolean;\r\n  is_superuser: boolean;\r\n  date_joined: string;\r\n}\r\n\r\nconst Profile: React.FC = () => {\r\n  const { user, updateUser } = useAuth();\r\n  const [profile, setProfile] = useState<ProfileData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isChangingPassword, setIsChangingPassword] = useState(false);\r\n\r\n  const [editForm, setEditForm] = useState({\r\n    first_name: '',\r\n    last_name: '',\r\n    email: '',\r\n    mobile_number: '',\r\n    address: '',\r\n  });\r\n\r\n  const [passwordForm, setPasswordForm] = useState({\r\n    current_password: '',\r\n    new_password: '',\r\n    confirm_password: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  const fetchProfile = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await apiService.getProfile();\r\n      setProfile(data);\r\n      setEditForm({\r\n        first_name: data.first_name || '',\r\n        last_name: data.last_name || '',\r\n        email: data.email || '',\r\n        mobile_number: data.mobile_number || '',\r\n        address: data.address || '',\r\n      });\r\n      setError(null);\r\n    } catch (err) {\r\n      console.error('Profile fetch error:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to load profile');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEditSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      const updatedProfile = await apiService.updateProfile(editForm);\r\n      setProfile(updatedProfile);\r\n      setIsEditing(false);\r\n      setSuccess('Profile updated successfully!');\r\n      \r\n      // Update the auth context with new user data\r\n      if (updateUser) {\r\n        updateUser({\r\n          ...user,\r\n          first_name: updatedProfile.first_name,\r\n          last_name: updatedProfile.last_name,\r\n          email: updatedProfile.email,\r\n        });\r\n      }\r\n      \r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update profile');\r\n    }\r\n  };\r\n\r\n  const handlePasswordSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (passwordForm.new_password !== passwordForm.confirm_password) {\r\n      setError('New passwords do not match');\r\n      return;\r\n    }\r\n\r\n    if (passwordForm.new_password.length < 8) {\r\n      setError('Password must be at least 8 characters long');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await apiService.changePassword({\r\n        current_password: passwordForm.current_password,\r\n        new_password: passwordForm.new_password,\r\n      });\r\n      setIsChangingPassword(false);\r\n      setPasswordForm({\r\n        current_password: '',\r\n        new_password: '',\r\n        confirm_password: '',\r\n      });\r\n      setSuccess('Password changed successfully!');\r\n      setTimeout(() => setSuccess(null), 3000);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to change password');\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setIsEditing(false);\r\n    if (profile) {\r\n      setEditForm({\r\n        first_name: profile.first_name || '',\r\n        last_name: profile.last_name || '',\r\n        email: profile.email || '',\r\n        mobile_number: profile.mobile_number || '',\r\n        address: profile.address || '',\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCancelPassword = () => {\r\n    setIsChangingPassword(false);\r\n    setPasswordForm({\r\n      current_password: '',\r\n      new_password: '',\r\n      confirm_password: '',\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading profile...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>My Profile</h1>\r\n\r\n      {error && (\r\n        <div className=\"alert alert-error\" style={{ marginBottom: '20px', padding: '10px', backgroundColor: '#ffebee', color: '#c62828', borderRadius: '4px' }}>\r\n          {error}\r\n          <button onClick={() => setError(null)} style={{ float: 'right', background: 'none', border: 'none', cursor: 'pointer' }}>Ã—</button>\r\n        </div>\r\n      )}\r\n\r\n      {success && (\r\n        <div className=\"alert alert-success\" style={{ marginBottom: '20px', padding: '10px', backgroundColor: '#e8f5e9', color: '#2e7d32', borderRadius: '4px' }}>\r\n          {success}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"card\" style={{ marginBottom: '20px' }}>\r\n        <div className=\"card-header\">\r\n          <h2>Account Information</h2>\r\n          {!isEditing && (\r\n            <button onClick={() => setIsEditing(true)} className=\"btn\">\r\n              Edit Profile\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {isEditing ? (\r\n          <form onSubmit={handleEditSubmit} style={{ padding: '20px' }}>\r\n            \r\n            {/* Account Information */}\r\n            <div className=\"form-section\">\r\n              <h4 className=\"form-section-title\">Account Information</h4>\r\n              <div className=\"form-grid\">\r\n                <div className=\"form-group\">\r\n                  <label>Username</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={profile?.username || ''}\r\n                    disabled\r\n                    className=\"input-disabled\"\r\n                  />\r\n                  <small className=\"form-hint\">Username cannot be changed</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Personal Details */}\r\n            <div className=\"form-section\">\r\n              <h4 className=\"form-section-title\">Personal Details</h4>\r\n              <div className=\"form-grid form-grid-2\">\r\n                <div className=\"form-group\">\r\n                  <label>First Name</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editForm.first_name}\r\n                    onChange={(e) => setEditForm({ ...editForm, first_name: e.target.value })}\r\n                    required\r\n                    placeholder=\"John\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Last Name</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editForm.last_name}\r\n                    onChange={(e) => setEditForm({ ...editForm, last_name: e.target.value })}\r\n                    required\r\n                    placeholder=\"Doe\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Contact Information */}\r\n            <div className=\"form-section\">\r\n              <h4 className=\"form-section-title\">Contact Information</h4>\r\n              <div className=\"form-grid form-grid-2\">\r\n                <div className=\"form-group\">\r\n                  <label>Email Address</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={editForm.email}\r\n                    onChange={(e) => setEditForm({ ...editForm, email: e.target.value })}\r\n                    required\r\n                    placeholder=\"john.doe@example.com\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Mobile Number</label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    value={editForm.mobile_number}\r\n                    onChange={(e) => setEditForm({ ...editForm, mobile_number: e.target.value })}\r\n                    placeholder=\"+1 (555) 000-0000\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group full-width\">\r\n                  <label>Address</label>\r\n                  <textarea\r\n                    value={editForm.address}\r\n                    onChange={(e) => setEditForm({ ...editForm, address: e.target.value })}\r\n                    rows={3}\r\n                    placeholder=\"123 Solar Street...\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-actions\">\r\n              <button type=\"submit\" className=\"btn\">Save Changes</button>\r\n              <button type=\"button\" onClick={handleCancelEdit} className=\"btn btn-secondary\">Cancel</button>\r\n            </div>\r\n          </form>\r\n        ) : (\r\n          <div style={{ padding: '20px' }}>\r\n            <table className=\"profile-table\" style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n              <tbody>\r\n                <tr>\r\n                  <td style={{ padding: '10px', fontWeight: 'bold', width: '150px' }}>Username:</td>\r\n                  <td style={{ padding: '10px' }}>{profile?.username}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td style={{ padding: '10px', fontWeight: 'bold' }}>Name:</td>\r\n                  <td style={{ padding: '10px' }}>{profile?.first_name} {profile?.last_name}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td style={{ padding: '10px', fontWeight: 'bold' }}>Email:</td>\r\n                  <td style={{ padding: '10px' }}>{profile?.email}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td style={{ padding: '10px', fontWeight: 'bold' }}>Mobile:</td>\r\n                  <td style={{ padding: '10px' }}>{profile?.mobile_number || '-'}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td style={{ padding: '10px', fontWeight: 'bold' }}>Address:</td>\r\n                  <td style={{ padding: '10px' }}>{profile?.address || '-'}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td style={{ padding: '10px', fontWeight: 'bold' }}>Role:</td>\r\n                  <td style={{ padding: '10px' }}>\r\n                    {profile?.is_superuser ? 'Administrator' : profile?.is_staff ? 'Employee' : 'User'}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td style={{ padding: '10px', fontWeight: 'bold' }}>Member Since:</td>\r\n                  <td style={{ padding: '10px' }}>\r\n                    {profile?.date_joined ? new Date(profile.date_joined).toLocaleDateString() : '-'}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>Security</h2>\r\n          {!isChangingPassword && (\r\n            <button onClick={() => setIsChangingPassword(true)} className=\"btn\">\r\n              Change Password\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {isChangingPassword ? (\r\n          <form onSubmit={handlePasswordSubmit} style={{ padding: '20px' }}>\r\n            <div className=\"form-group\" style={{ marginBottom: '15px' }}>\r\n              <label>Current Password:</label>\r\n              <input\r\n                type=\"password\"\r\n                value={passwordForm.current_password}\r\n                onChange={(e) => setPasswordForm({ ...passwordForm, current_password: e.target.value })}\r\n                required\r\n                autoComplete=\"current-password\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group\" style={{ marginBottom: '15px' }}>\r\n              <label>New Password:</label>\r\n              <input\r\n                type=\"password\"\r\n                value={passwordForm.new_password}\r\n                onChange={(e) => setPasswordForm({ ...passwordForm, new_password: e.target.value })}\r\n                required\r\n                autoComplete=\"new-password\"\r\n                minLength={8}\r\n              />\r\n              <small style={{ color: '#666' }}>Must be at least 8 characters</small>\r\n            </div>\r\n            <div className=\"form-group\" style={{ marginBottom: '15px' }}>\r\n              <label>Confirm New Password:</label>\r\n              <input\r\n                type=\"password\"\r\n                value={passwordForm.confirm_password}\r\n                onChange={(e) => setPasswordForm({ ...passwordForm, confirm_password: e.target.value })}\r\n                required\r\n                autoComplete=\"new-password\"\r\n              />\r\n            </div>\r\n            <div className=\"form-actions\">\r\n              <button type=\"submit\" className=\"btn\">Change Password</button>\r\n              <button type=\"button\" onClick={handleCancelPassword} className=\"btn btn-secondary\">Cancel</button>\r\n            </div>\r\n          </form>\r\n        ) : (\r\n          <div style={{ padding: '20px' }}>\r\n            <p>You can change your password here for security purposes.</p>\r\n            <p style={{ color: '#666', fontSize: '14px' }}>\r\n              It's recommended to use a strong password that you don't use on other websites.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","/**\r\n * Enhanced in-memory cache service for API responses\r\n * Features:\r\n * - TTL-based expiration\r\n * - Stale-while-revalidate pattern support\r\n * - Subscription system for real-time updates\r\n * - Pattern-based cache invalidation\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n  staleTime?: number; // Time after which data is considered stale but usable\r\n}\r\n\r\ninterface CacheSubscription {\r\n  callback: (data: any) => void;\r\n  pattern?: RegExp;\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private subscribers: Map<string, Set<CacheSubscription>> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n  private static readonly REALTIME_TTL = 10 * 1000; // 10 seconds for real-time data\r\n  private static readonly STALE_TIME = 30 * 1000; // 30 seconds before data is stale\r\n\r\n  /**\r\n   * Set a cache entry and notify subscribers\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL, staleTime?: number): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n      staleTime: staleTime ?? Math.min(ttlMs / 2, CacheService.STALE_TIME),\r\n    });\r\n    \r\n    // Notify subscribers\r\n    this.notifySubscribers(key, data);\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid (returns null if expired)\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Get cache entry even if stale (for stale-while-revalidate pattern)\r\n   * Returns { data, isStale } or null if no entry exists\r\n   */\r\n  getWithStaleStatus(key: string): { data: any; isStale: boolean; isExpired: boolean } | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    const isExpired = age > entry.expiresIn;\r\n    const isStale = age > (entry.staleTime ?? entry.expiresIn / 2);\r\n\r\n    // Remove if fully expired\r\n    if (isExpired) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      data: entry.data,\r\n      isStale,\r\n      isExpired: false,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if cached data is stale but usable\r\n   */\r\n  isStale(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return true;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    return age > (entry.staleTime ?? entry.expiresIn / 2);\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear cache entries matching a pattern\r\n   */\r\n  clearPattern(pattern: string | RegExp): void {\r\n    const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\r\n    const keysToDelete: string[] = [];\r\n    \r\n    this.cache.forEach((_, key) => {\r\n      if (regex.test(key)) {\r\n        keysToDelete.push(key);\r\n      }\r\n    });\r\n    \r\n    keysToDelete.forEach(key => this.cache.delete(key));\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates for a specific key\r\n   */\r\n  subscribe(key: string, callback: (data: any) => void): () => void {\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates matching a pattern\r\n   */\r\n  subscribePattern(pattern: RegExp, callback: (data: any) => void): () => void {\r\n    const key = `__pattern__${pattern.source}`;\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback, pattern };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Notify all subscribers of a cache update\r\n   */\r\n  private notifySubscribers(key: string, data: any): void {\r\n    // Direct key subscribers\r\n    const directSubs = this.subscribers.get(key);\r\n    if (directSubs) {\r\n      directSubs.forEach(sub => {\r\n        try {\r\n          sub.callback(data);\r\n        } catch (error) {\r\n          console.error(`Cache subscriber error for key ${key}:`, error);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Pattern subscribers\r\n    this.subscribers.forEach((subs, subKey) => {\r\n      if (subKey.startsWith('__pattern__')) {\r\n        subs.forEach(sub => {\r\n          if (sub.pattern && sub.pattern.test(key)) {\r\n            try {\r\n              sub.callback(data);\r\n            } catch (error) {\r\n              console.error(`Cache pattern subscriber error for key ${key}:`, error);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get all keys in cache\r\n   */\r\n  keys(): string[] {\r\n    return Array.from(this.cache.keys());\r\n  }\r\n\r\n  /**\r\n   * Get cache stats for debugging\r\n   */\r\n  getStats(): { size: number; keys: string[]; subscribers: number } {\r\n    return {\r\n      size: this.cache.size,\r\n      keys: this.keys(),\r\n      subscribers: Array.from(this.subscribers.values()).reduce((sum, set) => sum + set.size, 0),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' | 'realtime' = 'short'): number {\r\n    switch (type) {\r\n      case 'realtime':\r\n        return CacheService.REALTIME_TTL;\r\n      case 'long':\r\n        return CacheService.LONG_TTL;\r\n      default:\r\n        return CacheService.DEFAULT_TTL;\r\n    }\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\nexport const REALTIME_TTL = 10 * 1000; // 10 seconds\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    if (response.status === 204) return null;\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async getUserSite(userId: number): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`);\r\n  }\r\n\r\n  async createUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceSite(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`);\r\n  }\r\n\r\n  async createDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // DynamoDB site data\r\n  async getSiteTelemetry(siteId: string, params?: { start_date?: string; end_date?: string; days?: number }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    if (params?.days) query.append('days', params.days.toString());\r\n    const url = `/sites/${siteId}/telemetry/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  async getSiteForecast(siteId: string, params?: { date?: string; start_date?: string; end_date?: string }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.date) query.append('date', params.date);\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    const url = `/sites/${siteId}/forecast/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  async getSiteWeather(siteId: string): Promise<any> {\r\n    return this.request(`/sites/${siteId}/weather/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async rebootDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/reboot/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async hardResetDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/hard-reset/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async getDeviceLogs(deviceId: number, limit: number = 100, offset: number = 0): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/?limit=${limit}&offset=${offset}`);\r\n  }\r\n\r\n  async toggleDeviceLogs(deviceId: number, enabled: boolean): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/toggle/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ enabled }),\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  async detachSlaveFromPreset(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/detach/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const url = `${API_BASE_URL}/ota/firmware/create/`;\r\n    const tokens = localStorage.getItem('authTokens');\r\n    \r\n    if (!tokens) {\r\n      throw new Error('Authentication required');\r\n    }\r\n    \r\n    const parsedTokens = JSON.parse(tokens);\r\n    let headers: HeadersInit = {\r\n      'Authorization': `Bearer ${parsedTokens.access}`,\r\n    };\r\n    // Don't set Content-Type - let browser set it with boundary for multipart/form-data\r\n    \r\n    let response = await fetch(url, {\r\n      method: 'POST',\r\n      headers,\r\n      body: formData,\r\n    });\r\n\r\n    // Handle 401 with token refresh\r\n    if (response.status === 401) {\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        const newTokens = JSON.parse(localStorage.getItem('authTokens') || '{}');\r\n        headers = {\r\n          'Authorization': `Bearer ${newTokens.access}`,\r\n        };\r\n        response = await fetch(url, {\r\n          method: 'POST',\r\n          headers,\r\n          body: formData,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Upload failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteFirmwareVersion(firmwareId: number): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n\r\n  async triggerRollback(deviceSerial: string, notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/rollback/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        device_serial: deviceSerial,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["Profile","user","updateUser","useAuth","profile","setProfile","useState","loading","setLoading","error","setError","success","setSuccess","isEditing","setIsEditing","isChangingPassword","setIsChangingPassword","editForm","setEditForm","first_name","last_name","email","mobile_number","address","passwordForm","setPasswordForm","current_password","new_password","confirm_password","useEffect","fetchProfile","async","data","apiService","getProfile","err","console","Error","message","_jsx","className","children","_jsxs","style","marginBottom","padding","backgroundColor","color","borderRadius","onClick","float","background","border","cursor","onSubmit","e","preventDefault","updatedProfile","updateProfile","_objectSpread","setTimeout","type","value","username","disabled","onChange","target","required","placeholder","rows","handleCancelEdit","width","borderCollapse","fontWeight","is_superuser","is_staff","date_joined","Date","toLocaleDateString","length","changePassword","autoComplete","minLength","handleCancelPassword","fontSize","CacheService","constructor","cache","Map","subscribers","set","key","ttlMs","arguments","undefined","DEFAULT_TTL","staleTime","this","timestamp","now","expiresIn","Math","min","STALE_TIME","notifySubscribers","get","entry","delete","getWithStaleStatus","_entry$staleTime","age","isExpired","isStale","has","_entry$staleTime2","clear","clearPattern","pattern","regex","RegExp","keysToDelete","forEach","_","test","push","clearAll","size","subscribe","callback","Set","subscription","add","subs","subscribePattern","concat","source","directSubs","sub","subKey","startsWith","keys","Array","from","getStats","values","reduce","sum","getTTL","REALTIME_TTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","response","fetch","status","refreshToken","removeItem","window","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","getUserDevices","userId","getUserSite","createUserSite","updateUserSite","getDeviceSite","deviceId","createDeviceSite","updateDeviceSite","getSiteTelemetry","siteId","query","URLSearchParams","start_date","append","end_date","days","toString","getSiteForecast","date","getSiteWeather","deleteUser","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","id","deletePreset","getGlobalSlaves","createGlobalSlave","slaveData","updateGlobalSlave","slaveId","deleteGlobalSlave","getDevices","page","pageSize","queryString","createDevice","deviceData","updateDevice","deleteDevice","rebootDevice","hardResetDevice","getDeviceLogs","limit","offset","toggleDeviceLogs","enabled","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","updateSlave","deleteSlave","addSlavesToPreset","slaveIds","slave_ids","detachSlaveFromPreset","getFirmwareVersions","activeOnly","uploadFirmwareVersion","formData","updateFirmwareVersion","firmwareId","deleteFirmwareVersion","getDeviceUpdateLogs","getOTAConfig","updateOTAConfig","config","getOTAHealth","triggerRollback","deviceSerial","notes","device_serial"],"sourceRoot":""}