{"version":3,"file":"static/js/275.1bd0d1fe.chunk.js","mappings":"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","sources":["components/Configuration.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface GatewayConfig {\r\n  configId: string;\r\n  updatedAt: string;\r\n  configSchemaVer: number;\r\n  uartConfig: {\r\n    baudRate: number;\r\n    dataBits: number;\r\n    stopBits: number;\r\n    parity: number;\r\n  };\r\n  slaves: SlaveDevice[];\r\n}\r\n\r\ninterface SlaveDevice {\r\n  id: number;\r\n  slaveId: number;\r\n  deviceName: string;\r\n  pollingIntervalMs: number;\r\n  timeoutMs: number;\r\n  priority?: number;\r\n  enabled: boolean;\r\n  configId?: number | null;\r\n  configName?: string;\r\n  registers: RegisterMapping[];\r\n}\r\n\r\ninterface RegisterMapping {\r\n  id: number;\r\n  label: string;\r\n  address: number;\r\n  numRegisters: number;\r\n  functionCode: number;\r\n  registerType?: number;\r\n  dataType: number;\r\n  byteOrder?: number;\r\n  wordOrder?: number;\r\n  accessMode?: number;\r\n  scaleFactor: number;\r\n  offset: number;\r\n  unit?: string;\r\n  decimalPlaces?: number;\r\n  category?: string;\r\n  highAlarmThreshold?: number | null;\r\n  lowAlarmThreshold?: number | null;\r\n  description?: string;\r\n  enabled: boolean;\r\n}\r\n\r\nconst Configuration: React.FC = () => {\r\n  const [config, setConfig] = useState<GatewayConfig | null>(null);\r\n  const [slaves, setSlaves] = useState<SlaveDevice[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [creatingSlave, setCreatingSlave] = useState(false);\r\n  const [editingSlave, setEditingSlave] = useState<SlaveDevice | null>(null);\r\n  const [globalMode, setGlobalMode] = useState(false);\r\n  const [selectedPresetId, setSelectedPresetId] = useState<number | ''>('');\r\n  const [slaveForm, setSlaveForm] = useState({\r\n    slave_id: '',\r\n    device_name: '',\r\n    polling_interval_ms: 5000,\r\n    timeout_ms: 1000,\r\n    priority: 1,\r\n    enabled: true,\r\n    registers: [] as RegisterMapping[]\r\n  });\r\n  const [registerForm, setRegisterForm] = useState({\r\n    label: '',\r\n    address: 0,\r\n    num_registers: 1,\r\n    function_code: 3,\r\n    register_type: 3,\r\n    data_type: 0,\r\n    byte_order: 0,\r\n    word_order: 0,\r\n    access_mode: 0,\r\n    scale_factor: 1.0,\r\n    offset: 0.0,\r\n    unit: '',\r\n    decimal_places: 2,\r\n    category: 'Electrical',\r\n    high_alarm_threshold: null as number | null,\r\n    low_alarm_threshold: null as number | null,\r\n    description: '',\r\n    enabled: true\r\n  });\r\n\r\n  const mapSlave = (slave: any): SlaveDevice => ({\r\n    id: slave.id,\r\n    slaveId: slave.slave_id,\r\n    deviceName: slave.device_name,\r\n    pollingIntervalMs: slave.polling_interval_ms,\r\n    timeoutMs: slave.timeout_ms,\r\n    priority: slave.priority,\r\n    enabled: slave.enabled,\r\n    configId: slave.config_id ?? null,\r\n    configName: slave.config_name ?? 'global',\r\n    registers: (slave.registers || []).map((reg: any) => ({\r\n      id: reg.id,\r\n      label: reg.label,\r\n      address: reg.address,\r\n      numRegisters: reg.num_registers,\r\n      functionCode: reg.function_code,\r\n      dataType: reg.data_type,\r\n      scaleFactor: reg.scale_factor,\r\n      offset: reg.offset,\r\n      enabled: reg.enabled,\r\n    }))\r\n  });\r\n\r\n  useEffect(() => {\r\n    const loadAllSlaves = async () => {\r\n      try {\r\n        // Default to listing all slaves across presets\r\n        const slavesResult = await apiService.getGlobalSlaves();\r\n        setSlaves(slavesResult.map(mapSlave));\r\n        setConfig(null);\r\n        setGlobalMode(true);\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'An error occurred');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    loadAllSlaves();\r\n  }, []);\r\n\r\n  \r\n\r\n  const handleCreateSlave = () => {\r\n    setSlaveForm({\r\n      slave_id: '',\r\n      device_name: '',\r\n      polling_interval_ms: 5000,\r\n      timeout_ms: 1000,\r\n      priority: 1,\r\n      enabled: true,\r\n      registers: []\r\n    });\r\n    setCreatingSlave(true);\r\n  };\r\n\r\n  const handleEditSlave = (slave: SlaveDevice) => {\r\n    setSlaveForm({\r\n      slave_id: slave.slaveId.toString(),\r\n      device_name: slave.deviceName,\r\n      polling_interval_ms: slave.pollingIntervalMs,\r\n      timeout_ms: slave.timeoutMs,\r\n      priority: slave.priority || 1,\r\n      enabled: slave.enabled,\r\n      registers: [...slave.registers]\r\n    });\r\n    setEditingSlave(slave);\r\n  };\r\n\r\n  const handleSaveSlave = async () => {\r\n    // Treat missing preset selection as global: allow creating slaves without any config\r\n    const isGlobal = globalMode || !config || (!editingSlave && !selectedPresetId);\r\n\r\n    // In global mode, allow creating a slave without attaching to a preset (global slave)\r\n\r\n    // Validate slave ID uniqueness for new slaves\r\n    if (!editingSlave) {\r\n      const slaveId = parseInt(slaveForm.slave_id);\r\n      const existingSlave = slaves.find(s => s.slaveId === slaveId);\r\n      if (existingSlave) {\r\n        setError(`Slave ID ${slaveId} already exists for this configuration. Please choose a different ID.`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const slaveData = {\r\n        slave_id: parseInt(slaveForm.slave_id),\r\n        device_name: slaveForm.device_name,\r\n        polling_interval_ms: slaveForm.polling_interval_ms,\r\n        timeout_ms: slaveForm.timeout_ms,\r\n        enabled: slaveForm.enabled,\r\n        registers: slaveForm.registers\r\n      };\r\n\r\n      if (editingSlave) {\r\n        const updatedSlave = isGlobal\r\n          ? await apiService.updateGlobalSlave(editingSlave.id, slaveData)\r\n          : await apiService.updateSlave(config!.configId, editingSlave.slaveId, slaveData);\r\n        const mappedSlave = mapSlave(updatedSlave);\r\n        setSlaves(slaves.map(s => s.id === editingSlave.id ? mappedSlave : s));\r\n        setEditingSlave(null);\r\n      } else {\r\n        const newSlave = isGlobal\r\n          ? await apiService.createGlobalSlave(selectedPresetId ? { ...slaveData, config_id: selectedPresetId } : slaveData)\r\n          : await apiService.createSlave(config!.configId, slaveData);\r\n        const mappedSlave = mapSlave(newSlave);\r\n        setSlaves([...slaves, mappedSlave]);\r\n      }\r\n\r\n      setCreatingSlave(false);\r\n      setSelectedPresetId('');\r\n      setSlaveForm({\r\n        slave_id: '',\r\n        device_name: '',\r\n        polling_interval_ms: 5000,\r\n        timeout_ms: 1000,\r\n        priority: 1,\r\n        enabled: true,\r\n        registers: []\r\n      });\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to save slave');\r\n    }\r\n  };\r\n\r\n  const handleDeleteSlave = async (slave: SlaveDevice) => {\r\n    const isGlobal = globalMode || !config;\r\n\r\n    if (window.confirm(`Are you sure you want to delete slave ${slave.deviceName}?`)) {\r\n      try {\r\n        if (isGlobal) {\r\n          await apiService.deleteGlobalSlave(slave.id);\r\n        } else {\r\n          await apiService.deleteSlave(config.configId, slave.slaveId);\r\n        }\r\n        setSlaves(slaves.filter(s => s.id !== slave.id));\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Failed to delete slave');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setCreatingSlave(false);\r\n    setEditingSlave(null);\r\n    setSelectedPresetId('');\r\n    setSlaveForm({\r\n      slave_id: '',\r\n      device_name: '',\r\n      polling_interval_ms: 5000,\r\n      timeout_ms: 1000,\r\n      priority: 1,\r\n      enabled: true,\r\n      registers: []\r\n    });\r\n  };\r\n\r\n  const addRegister = () => {\r\n    const newRegister: RegisterMapping = {\r\n      id: Date.now(), // Temporary ID for form management\r\n      label: registerForm.label,\r\n      address: registerForm.address,\r\n      numRegisters: registerForm.num_registers,\r\n      functionCode: registerForm.function_code,\r\n      registerType: registerForm.register_type,\r\n      dataType: registerForm.data_type,\r\n      byteOrder: registerForm.byte_order,\r\n      wordOrder: registerForm.word_order,\r\n      accessMode: registerForm.access_mode,\r\n      scaleFactor: registerForm.scale_factor,\r\n      offset: registerForm.offset,\r\n      unit: registerForm.unit,\r\n      decimalPlaces: registerForm.decimal_places,\r\n      category: registerForm.category,\r\n      highAlarmThreshold: registerForm.high_alarm_threshold,\r\n      lowAlarmThreshold: registerForm.low_alarm_threshold,\r\n      description: registerForm.description,\r\n      enabled: registerForm.enabled\r\n    };\r\n\r\n    setSlaveForm({\r\n      ...slaveForm,\r\n      registers: [...slaveForm.registers, newRegister]\r\n    });\r\n\r\n    // Reset register form\r\n    setRegisterForm({\r\n      label: '',\r\n      address: 0,\r\n      num_registers: 1,\r\n      function_code: 3,\r\n      register_type: 3,\r\n      data_type: 0,\r\n      byte_order: 0,\r\n      word_order: 0,\r\n      access_mode: 0,\r\n      scale_factor: 1.0,\r\n      offset: 0.0,\r\n      unit: '',\r\n      decimal_places: 2,\r\n      category: 'Electrical',\r\n      high_alarm_threshold: null,\r\n      low_alarm_threshold: null,\r\n      description: '',\r\n      enabled: true\r\n    });\r\n  };\r\n\r\n  const removeRegister = (index: number) => {\r\n    setSlaveForm({\r\n      ...slaveForm,\r\n      registers: slaveForm.registers.filter((_, i) => i !== index)\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading configuration...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Slave Configuration</h1>\r\n\r\n      {/* Show global error banner only when modal is not open */}\r\n      {!creatingSlave && !editingSlave && error && (\r\n        <div className=\"error\" style={{ marginBottom: '20px', padding: '10px', backgroundColor: '#f8d7da', border: '1px solid #f5c6cb', borderRadius: '4px', color: '#721c24' }}>\r\n          <strong>Error:</strong> {error}\r\n          <button\r\n            onClick={() => setError(null)}\r\n            style={{ float: 'right', background: 'none', border: 'none', color: '#721c24', cursor: 'pointer', fontSize: '16px' }}\r\n            title=\"Close error\"\r\n          >\r\n            ×\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>All Slave Devices ({slaves.length})</h2>\r\n          <button onClick={handleCreateSlave} className=\"btn\">Configure New Slave</button>\r\n        </div>\r\n\r\n        {slaves.length === 0 ? (\r\n          <div style={{ textAlign: 'center', padding: '40px 20px', color: '#666' }}>\r\n            <p>No slave devices configured yet.</p>\r\n            <p>Click \"Configure New Slave\" to add your first slave device.</p>\r\n          </div>\r\n        ) : (\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th style={{ textAlign: 'center' }}>Slave ID</th>\r\n                <th style={{ textAlign: 'center' }}>Device Name</th>\r\n                <th style={{ textAlign: 'center' }}>Config</th>\r\n                <th style={{ textAlign: 'center' }}>Polling Interval</th>\r\n                <th style={{ textAlign: 'center' }}>Timeout</th>\r\n                <th style={{ textAlign: 'center' }}>Status</th>\r\n                <th style={{ textAlign: 'center' }}>Registers</th>\r\n                <th style={{ textAlign: 'center' }}>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {slaves.map((slave) => (\r\n                <tr key={slave.id}>\r\n                  <td style={{ textAlign: 'center' }}>{slave.slaveId}</td>\r\n                  <td style={{ textAlign: 'center' }}>{slave.deviceName}</td>\r\n                  <td style={{ textAlign: 'center' }}>{(slave as any).configName || 'global'}</td>\r\n                  <td style={{ textAlign: 'center' }}>{slave.pollingIntervalMs}ms</td>\r\n                  <td style={{ textAlign: 'center' }}>{slave.timeoutMs}ms</td>\r\n                  <td style={{ textAlign: 'center' }}>\r\n                    <span className={slave.enabled ? 'status-online' : 'status-offline'}>\r\n                      {slave.enabled ? 'Enabled' : 'Disabled'}\r\n                    </span>\r\n                  </td>\r\n                  <td style={{ textAlign: 'center' }}>{slave.registers.length}</td>\r\n                  <td style={{ textAlign: 'center' }}>\r\n                    <button onClick={() => handleEditSlave(slave)} style={{ background: 'none', border: 'none', cursor: 'pointer', margin: '0 6px', color: '#6366f1' }} title=\"Edit\">\r\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                      </svg>\r\n                    </button>\r\n                    <button onClick={() => handleDeleteSlave(slave)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#ef4444', margin: '0 6px' }} title=\"Delete\">\r\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                        <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                        <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                        <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                        <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                      </svg>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n\r\n      {/* Slave Configuration Modal */}\r\n      {(creatingSlave || editingSlave) && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content large-modal slave-config-modal\">\r\n            <h3>{editingSlave ? `Edit Slave: ${editingSlave.deviceName}` : 'Configure New Slave'}</h3>\r\n            \r\n            <div className=\"modal-body\">\r\n              {/* Show errors inside modal when configuring/creating a slave */}\r\n              {error && (\r\n                <div className=\"error\" style={{ marginBottom: '12px', padding: '8px', backgroundColor: '#f8d7da', border: '1px solid #f5c6cb', borderRadius: '4px', color: '#721c24' }}>\r\n                  <strong>Error:</strong> {error}\r\n                  <button\r\n                    onClick={() => setError(null)}\r\n                    style={{ float: 'right', background: 'none', border: 'none', color: '#721c24', cursor: 'pointer', fontSize: '14px' }}\r\n                    title=\"Close error\"\r\n                  >\r\n                    ×\r\n                  </button>\r\n                </div>\r\n              )}\r\n              <form onSubmit={(e) => { e.preventDefault(); handleSaveSlave(); }}>\r\n                \r\n                {/* Config selector removed: creating a new slave no longer requires selecting a preset */}\r\n\r\n                {/* Section 1: Basic Information */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Basic Information</h4>\r\n                  <div className=\"form-grid form-grid-2\">\r\n                    <div className=\"form-group\">\r\n                      <label>Slave ID</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.slave_id}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, slave_id: e.target.value})}\r\n                        required\r\n                        min=\"1\"\r\n                        max=\"247\"\r\n                        placeholder=\"1-247\"\r\n                      />\r\n                      <small className=\"form-hint\">\r\n                        Unique identifier (1-247)\r\n                        {slaves.length > 0 && (\r\n                          <span className=\"form-hint-accent\">\r\n                            Existing: {slaves.map(s => s.slaveId).join(', ')}\r\n                          </span>\r\n                        )}\r\n                      </small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Device Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={slaveForm.device_name}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, device_name: e.target.value})}\r\n                        required\r\n                        placeholder=\"e.g., Solar Inverter\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 2: Communication Settings */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Communication Settings</h4>\r\n                  <div className=\"form-grid form-grid-4\">\r\n                    <div className=\"form-group\">\r\n                      <label>Polling Interval (ms)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.polling_interval_ms}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, polling_interval_ms: parseInt(e.target.value)})}\r\n                        min=\"100\"\r\n                        placeholder=\"10000\"\r\n                      />\r\n                      <small className=\"form-hint\">How often to poll this device</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Response Timeout (ms)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.timeout_ms}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, timeout_ms: parseInt(e.target.value)})}\r\n                        min=\"100\"\r\n                        placeholder=\"1000\"\r\n                      />\r\n                      <small className=\"form-hint\">Max wait for response</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Priority</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.priority || 1}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, priority: parseInt(e.target.value)})}\r\n                        min=\"1\"\r\n                        max=\"10\"\r\n                        placeholder=\"1\"\r\n                      />\r\n                      <small className=\"form-hint\">1=Highest, 10=Lowest</small>\r\n                    </div>\r\n                    <div className=\"form-group checkbox-group\">\r\n                      <label>Status</label>\r\n                      <label className=\"checkbox-label checkbox-vertical\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={slaveForm.enabled}\r\n                          onChange={(e) => setSlaveForm({...slaveForm, enabled: e.target.checked})}\r\n                        />\r\n                        <span className={slaveForm.enabled ? 'status-text-enabled' : 'status-text-disabled'}>\r\n                          {slaveForm.enabled ? 'Enabled' : 'Disabled'}\r\n                        </span>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 3: Register Mappings */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Register Mappings</h4>\r\n                  <p className=\"form-section-desc\">Configure the Modbus registers to read from this slave device.</p>\r\n\r\n                  {/* Add Register Sub-form */}\r\n                  <div className=\"form-subsection\">\r\n                    <h5 className=\"form-subsection-title\">Add New Register</h5>\r\n                    <div className=\"form-grid form-grid-auto\">\r\n                      {/* Row 1: Basic Info */}\r\n                      <div className=\"form-group\">\r\n                        <label>Label *</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"e.g., Battery_Voltage\"\r\n                          value={registerForm.label}\r\n                          onChange={(e) => setRegisterForm({...registerForm, label: e.target.value})}\r\n                          required\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Address *</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"40001\"\r\n                          value={registerForm.address}\r\n                          onChange={(e) => setRegisterForm({...registerForm, address: parseInt(e.target.value)})}\r\n                          min=\"1\"\r\n                          required\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Num Registers</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"1\"\r\n                          value={registerForm.num_registers || 1}\r\n                          onChange={(e) => setRegisterForm({...registerForm, num_registers: parseInt(e.target.value)})}\r\n                          min=\"1\"\r\n                          max=\"125\"\r\n                        />\r\n                        <small className=\"form-hint\">Count (1-125)</small>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Function Code *</label>\r\n                        <select\r\n                          value={registerForm.function_code || 3}\r\n                          onChange={(e) => setRegisterForm({...registerForm, function_code: parseInt(e.target.value)})}\r\n                        >\r\n                          <option value={0x01}>0x01 - Read Coils</option>\r\n                          <option value={0x02}>0x02 - Read Discrete Inputs</option>\r\n                          <option value={0x03}>0x03 - Read Holding Registers</option>\r\n                          <option value={0x04}>0x04 - Read Input Registers</option>\r\n                          <option value={0x05}>0x05 - Write Single Coil</option>\r\n                          <option value={0x06}>0x06 - Write Single Register</option>\r\n                          <option value={0x0F}>0x0F - Write Multiple Coils</option>\r\n                          <option value={0x10}>0x10 - Write Multiple Registers</option>\r\n                        </select>\r\n                      </div>\r\n                      \r\n                      {/* Row 2: Data Type & Format */}\r\n                      <div className=\"form-group\">\r\n                        <label>Data Type *</label>\r\n                        <select\r\n                          value={registerForm.data_type}\r\n                          onChange={(e) => setRegisterForm({...registerForm, data_type: parseInt(e.target.value)})}\r\n                        >\r\n                          <option value={0}>UINT16 (16-bit Unsigned)</option>\r\n                          <option value={1}>INT16 (16-bit Signed)</option>\r\n                          <option value={2}>UINT32 (32-bit Unsigned)</option>\r\n                          <option value={3}>INT32 (32-bit Signed)</option>\r\n                          <option value={4}>FLOAT32 (32-bit Float)</option>\r\n                          <option value={5}>UINT64 (64-bit Unsigned)</option>\r\n                          <option value={6}>INT64 (64-bit Signed)</option>\r\n                          <option value={7}>FLOAT64 (64-bit Float)</option>\r\n                          <option value={8}>BOOL (Single Bit)</option>\r\n                          <option value={9}>STRING (ASCII)</option>\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Byte Order</label>\r\n                        <select\r\n                          value={registerForm.byte_order || 0}\r\n                          onChange={(e) => setRegisterForm({...registerForm, byte_order: parseInt(e.target.value)})}\r\n                        >\r\n                          <option value={0}>Big Endian (ABCD)</option>\r\n                          <option value={1}>Little Endian (DCBA)</option>\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Word Order</label>\r\n                        <select\r\n                          value={registerForm.word_order || 0}\r\n                          onChange={(e) => setRegisterForm({...registerForm, word_order: parseInt(e.target.value)})}\r\n                        >\r\n                          <option value={0}>Big Endian (AB CD)</option>\r\n                          <option value={1}>Little Endian (CD AB)</option>\r\n                          <option value={2}>Mid-Big Endian (BA DC)</option>\r\n                          <option value={3}>Mid-Little Endian (DC BA)</option>\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Decimal Places</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"2\"\r\n                          value={registerForm.decimal_places || 2}\r\n                          onChange={(e) => setRegisterForm({...registerForm, decimal_places: parseInt(e.target.value)})}\r\n                          min=\"0\"\r\n                          max=\"6\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Access Mode</label>\r\n                        <select\r\n                          value={registerForm.access_mode || 0}\r\n                          onChange={(e) => setRegisterForm({...registerForm, access_mode: parseInt(e.target.value)})}\r\n                        >\r\n                          <option value={0}>Read Only</option>\r\n                          <option value={1}>Read/Write</option>\r\n                          <option value={2}>Write Only</option>\r\n                        </select>\r\n                      </div>\r\n                      \r\n                      {/* Row 3: Scaling & Units */}\r\n                      <div className=\"form-group\">\r\n                        <label>Scale Factor</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"1.0\"\r\n                          value={registerForm.scale_factor}\r\n                          onChange={(e) => setRegisterForm({...registerForm, scale_factor: parseFloat(e.target.value)})}\r\n                          step=\"0.001\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Offset</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"0.0\"\r\n                          value={registerForm.offset}\r\n                          onChange={(e) => setRegisterForm({...registerForm, offset: parseFloat(e.target.value)})}\r\n                          step=\"0.01\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Unit</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"V, A, W, °C, etc.\"\r\n                          value={registerForm.unit || ''}\r\n                          onChange={(e) => setRegisterForm({...registerForm, unit: e.target.value})}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Category</label>\r\n                        <select\r\n                          value={registerForm.category || 'Grid'}\r\n                          onChange={(e) => setRegisterForm({...registerForm, category: e.target.value})}\r\n                        >\r\n                          <option value=\"Grid\">Grid</option>\r\n                          <option value=\"BMS\">BMS</option>\r\n                          <option value=\"Status\">Status</option>\r\n                          <option value=\"Energy\">Energy</option>\r\n                          <option value=\"Temperature\">Temperature</option>\r\n                          <option value=\"Battery\">Battery</option>\r\n                          <option value=\"Load\">Load</option>\r\n                          <option value=\"PV\">PV</option>\r\n                        </select>\r\n                      </div>\r\n                      \r\n                      {/* Row 4: Alarms & Status */}\r\n                      <div className=\"form-group\">\r\n                        <label>High Alarm</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"Optional\"\r\n                          value={registerForm.high_alarm_threshold || ''}\r\n                          onChange={(e) => setRegisterForm({...registerForm, high_alarm_threshold: parseFloat(e.target.value) || null})}\r\n                          step=\"0.01\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Low Alarm</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"Optional\"\r\n                          value={registerForm.low_alarm_threshold || ''}\r\n                          onChange={(e) => setRegisterForm({...registerForm, low_alarm_threshold: parseFloat(e.target.value) || null})}\r\n                          step=\"0.01\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group checkbox-group\">\r\n                        <label>Enabled</label>\r\n                        <label className=\"checkbox-label checkbox-vertical\">\r\n                          <input\r\n                          type=\"checkbox\"\r\n                          checked={registerForm.enabled}\r\n                            onChange={(e) => setRegisterForm({...registerForm, enabled: e.target.checked})}\r\n                          />\r\n                          <span>{registerForm.enabled ? 'Yes' : 'No'}</span>\r\n                        </label>\r\n                      </div>\r\n                      <div className=\"form-group form-group-btn\">\r\n                        <button type=\"button\" onClick={addRegister} className=\"btn btn-sm\">\r\n                          Add Register\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Description Field - Full Width */}\r\n                    <div className=\"form-group\" style={{marginTop: '10px'}}>\r\n                      <label>Description</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        placeholder=\"e.g., 0=Off, 1=On, 2=Standby\"\r\n                        value={registerForm.description || ''}\r\n                        onChange={(e) => setRegisterForm({...registerForm, description: e.target.value})}\r\n                        style={{width: '100%'}}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Registers Table */}\r\n                  {slaveForm.registers.length > 0 ? (\r\n                    <div className=\"registers-table-wrapper\">\r\n                      <h5 className=\"form-subsection-title\">Configured Registers ({slaveForm.registers.length})</h5>\r\n                      <table className=\"table registers-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th>Label</th>\r\n                            <th>Address</th>\r\n                            <th>Function</th>\r\n                            <th>Data Type</th>\r\n                            <th>Unit</th>\r\n                            <th>Scale</th>\r\n                            <th>Offset</th>\r\n                            <th>Category</th>\r\n                            <th>Alarms</th>\r\n                            <th>Status</th>\r\n                            <th>Actions</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {slaveForm.registers.map((reg, index) => (\r\n                            <tr key={index}>\r\n                              <td>{reg.label}</td>\r\n                              <td>{reg.address}</td>\r\n                              <td>{reg.functionCode || 3}</td>\r\n                              <td>{getDataTypeName(reg.dataType)}</td>\r\n                              <td>{reg.unit || '-'}</td>\r\n                              <td>{reg.scaleFactor}</td>\r\n                              <td>{reg.offset}</td>\r\n                              <td>{reg.category || '-'}</td>\r\n                              <td>\r\n                                {reg.highAlarmThreshold || reg.lowAlarmThreshold ? (\r\n                                  <small>\r\n                                    {reg.highAlarmThreshold && `H:${reg.highAlarmThreshold}`}\r\n                                    {reg.highAlarmThreshold && reg.lowAlarmThreshold && ' / '}\r\n                                    {reg.lowAlarmThreshold && `L:${reg.lowAlarmThreshold}`}\r\n                                  </small>\r\n                                ) : '-'}\r\n                              </td>\r\n                              <td>\r\n                                <span className={`status-badge ${reg.enabled ? 'status-badge-success' : 'status-badge-danger'}`}>\r\n                                  {reg.enabled ? 'Enabled' : 'Disabled'}\r\n                                </span>\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => removeRegister(index)}\r\n                                  className=\"btn-icon btn-icon-danger\"\r\n                                  title=\"Remove\"\r\n                                >\r\n                                  ✕\r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"empty-state\">\r\n                      No registers configured yet. Add registers above to define what data to read from this slave device.\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n              </form>\r\n            </div>\r\n\r\n            {/* Modal Footer */}\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-primary\" onClick={(e) => { e.preventDefault(); handleSaveSlave(); }}>\r\n                {editingSlave ? 'Save Changes' : 'Create Slave'}\r\n              </button>\r\n              <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst getDataTypeName = (dataType: number): string => {\r\n  const types = {\r\n    0: 'UINT16',\r\n    1: 'INT16',\r\n    2: 'UINT32',\r\n    3: 'INT32',\r\n    4: 'FLOAT32',\r\n    5: 'UINT64',\r\n    6: 'INT64',\r\n    7: 'FLOAT64',\r\n    8: 'BOOL',\r\n    9: 'STRING'\r\n  };\r\n  return types[dataType as keyof typeof types] || `Unknown (${dataType})`;\r\n};\r\n\r\nexport default Configuration;\r\n","/**\r\n * Enhanced in-memory cache service for API responses\r\n * Features:\r\n * - TTL-based expiration\r\n * - Stale-while-revalidate pattern support\r\n * - Subscription system for real-time updates\r\n * - Pattern-based cache invalidation\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n  staleTime?: number; // Time after which data is considered stale but usable\r\n}\r\n\r\ninterface CacheSubscription {\r\n  callback: (data: any) => void;\r\n  pattern?: RegExp;\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private subscribers: Map<string, Set<CacheSubscription>> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n  private static readonly REALTIME_TTL = 10 * 1000; // 10 seconds for real-time data\r\n  private static readonly STALE_TIME = 30 * 1000; // 30 seconds before data is stale\r\n\r\n  /**\r\n   * Set a cache entry and notify subscribers\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL, staleTime?: number): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n      staleTime: staleTime ?? Math.min(ttlMs / 2, CacheService.STALE_TIME),\r\n    });\r\n    \r\n    // Notify subscribers\r\n    this.notifySubscribers(key, data);\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid (returns null if expired)\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Get cache entry even if stale (for stale-while-revalidate pattern)\r\n   * Returns { data, isStale } or null if no entry exists\r\n   */\r\n  getWithStaleStatus(key: string): { data: any; isStale: boolean; isExpired: boolean } | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    const isExpired = age > entry.expiresIn;\r\n    const isStale = age > (entry.staleTime ?? entry.expiresIn / 2);\r\n\r\n    // Remove if fully expired\r\n    if (isExpired) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      data: entry.data,\r\n      isStale,\r\n      isExpired: false,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if cached data is stale but usable\r\n   */\r\n  isStale(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return true;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    return age > (entry.staleTime ?? entry.expiresIn / 2);\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear cache entries matching a pattern\r\n   */\r\n  clearPattern(pattern: string | RegExp): void {\r\n    const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\r\n    const keysToDelete: string[] = [];\r\n    \r\n    this.cache.forEach((_, key) => {\r\n      if (regex.test(key)) {\r\n        keysToDelete.push(key);\r\n      }\r\n    });\r\n    \r\n    keysToDelete.forEach(key => this.cache.delete(key));\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates for a specific key\r\n   */\r\n  subscribe(key: string, callback: (data: any) => void): () => void {\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates matching a pattern\r\n   */\r\n  subscribePattern(pattern: RegExp, callback: (data: any) => void): () => void {\r\n    const key = `__pattern__${pattern.source}`;\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback, pattern };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Notify all subscribers of a cache update\r\n   */\r\n  private notifySubscribers(key: string, data: any): void {\r\n    // Direct key subscribers\r\n    const directSubs = this.subscribers.get(key);\r\n    if (directSubs) {\r\n      directSubs.forEach(sub => {\r\n        try {\r\n          sub.callback(data);\r\n        } catch (error) {\r\n          console.error(`Cache subscriber error for key ${key}:`, error);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Pattern subscribers\r\n    this.subscribers.forEach((subs, subKey) => {\r\n      if (subKey.startsWith('__pattern__')) {\r\n        subs.forEach(sub => {\r\n          if (sub.pattern && sub.pattern.test(key)) {\r\n            try {\r\n              sub.callback(data);\r\n            } catch (error) {\r\n              console.error(`Cache pattern subscriber error for key ${key}:`, error);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get all keys in cache\r\n   */\r\n  keys(): string[] {\r\n    return Array.from(this.cache.keys());\r\n  }\r\n\r\n  /**\r\n   * Get cache stats for debugging\r\n   */\r\n  getStats(): { size: number; keys: string[]; subscribers: number } {\r\n    return {\r\n      size: this.cache.size,\r\n      keys: this.keys(),\r\n      subscribers: Array.from(this.subscribers.values()).reduce((sum, set) => sum + set.size, 0),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' | 'realtime' = 'short'): number {\r\n    switch (type) {\r\n      case 'realtime':\r\n        return CacheService.REALTIME_TTL;\r\n      case 'long':\r\n        return CacheService.LONG_TTL;\r\n      default:\r\n        return CacheService.DEFAULT_TTL;\r\n    }\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\nexport const REALTIME_TTL = 10 * 1000; // 10 seconds\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    if (response.status === 204) return null;\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async getUserSite(userId: number): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`);\r\n  }\r\n\r\n  async createUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceSite(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`);\r\n  }\r\n\r\n  async createDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // DynamoDB site data\r\n  async getSiteTelemetry(siteId: string, params?: { start_date?: string; end_date?: string; days?: number }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    if (params?.days) query.append('days', params.days.toString());\r\n    const url = `/sites/${siteId}/telemetry/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  async getSiteForecast(siteId: string, params?: { date?: string; start_date?: string; end_date?: string }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.date) query.append('date', params.date);\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    const url = `/sites/${siteId}/forecast/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  /**\r\n   * Returns { current: WeatherObs | null, hourly_forecast: WeatherFcst[] }\r\n   *   current.obs_timestamp    — ISO UTC of the observation\r\n   *   current.ghi_wm2          — global horizontal irradiance (W/m²)\r\n   *   current.temperature_c    — air temperature (°C)\r\n   *   current.humidity_pct     — relative humidity (%)\r\n   *   current.wind_speed_ms    — wind speed (m/s)\r\n   *   current.cloud_cover_pct  — cloud cover (%)\r\n   *   hourly_forecast[n].forecast_for — ISO UTC of the forecast slot\r\n   *   hourly_forecast[n].ghi_wm2 …   — same fields as current\r\n   */\r\n  async getSiteWeather(siteId: string): Promise<{ current: any | null; hourly_forecast: any[] } | null> {\r\n    return this.request(`/sites/${siteId}/weather/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async rebootDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/reboot/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async hardResetDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/hard-reset/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async getDeviceLogs(deviceId: number, limit: number = 100, offset: number = 0): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/?limit=${limit}&offset=${offset}`);\r\n  }\r\n\r\n  async toggleDeviceLogs(deviceId: number, enabled: boolean): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/toggle/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ enabled }),\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  async detachSlaveFromPreset(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/detach/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const url = `${API_BASE_URL}/ota/firmware/create/`;\r\n    const tokens = localStorage.getItem('authTokens');\r\n    \r\n    if (!tokens) {\r\n      throw new Error('Authentication required');\r\n    }\r\n    \r\n    const parsedTokens = JSON.parse(tokens);\r\n    let headers: HeadersInit = {\r\n      'Authorization': `Bearer ${parsedTokens.access}`,\r\n    };\r\n    // Don't set Content-Type - let browser set it with boundary for multipart/form-data\r\n    \r\n    let response = await fetch(url, {\r\n      method: 'POST',\r\n      headers,\r\n      body: formData,\r\n    });\r\n\r\n    // Handle 401 with token refresh\r\n    if (response.status === 401) {\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        const newTokens = JSON.parse(localStorage.getItem('authTokens') || '{}');\r\n        headers = {\r\n          'Authorization': `Bearer ${newTokens.access}`,\r\n        };\r\n        response = await fetch(url, {\r\n          method: 'POST',\r\n          headers,\r\n          body: formData,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Upload failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteFirmwareVersion(firmwareId: number): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n\r\n  async triggerRollback(deviceSerial: string, notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/rollback/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        device_serial: deviceSerial,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n\r\n  async deployFirmware(firmwareId: number, deviceSerials: string[], notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/multiple/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        firmware_id: firmwareId,\r\n        device_serials: deviceSerials,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n\r\n  async listTargetedUpdates(): Promise<any> {\r\n    return this.request(`/ota/updates/`);\r\n  }\r\n\r\n  async getTargetedUpdate(updateId: number): Promise<any> {\r\n    return this.request(`/ota/updates/${updateId}/`);\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["getDataTypeName","dataType","concat","Configuration","config","setConfig","useState","slaves","setSlaves","loading","setLoading","error","setError","creatingSlave","setCreatingSlave","editingSlave","setEditingSlave","globalMode","setGlobalMode","selectedPresetId","setSelectedPresetId","slaveForm","setSlaveForm","slave_id","device_name","polling_interval_ms","timeout_ms","priority","enabled","registers","registerForm","setRegisterForm","label","address","num_registers","function_code","register_type","data_type","byte_order","word_order","access_mode","scale_factor","offset","unit","decimal_places","category","high_alarm_threshold","low_alarm_threshold","description","mapSlave","slave","_slave$config_id","_slave$config_name","id","slaveId","deviceName","pollingIntervalMs","timeoutMs","configId","config_id","configName","config_name","map","reg","numRegisters","functionCode","scaleFactor","useEffect","async","slavesResult","apiService","getGlobalSlaves","err","Error","message","loadAllSlaves","handleSaveSlave","isGlobal","parseInt","find","s","slaveData","updatedSlave","updateGlobalSlave","updateSlave","mappedSlave","newSlave","createGlobalSlave","_objectSpread","createSlave","_jsx","className","children","_jsxs","style","marginBottom","padding","backgroundColor","border","borderRadius","color","onClick","float","background","cursor","fontSize","title","length","handleCreateSlave","textAlign","toString","handleEditSlave","margin","width","height","viewBox","fill","stroke","strokeWidth","d","window","confirm","deleteGlobalSlave","deleteSlave","filter","handleDeleteSlave","points","x1","y1","x2","y2","onSubmit","e","preventDefault","type","value","onChange","target","required","min","max","placeholder","join","checked","parseFloat","step","addRegister","newRegister","Date","now","registerType","byteOrder","wordOrder","accessMode","decimalPlaces","highAlarmThreshold","lowAlarmThreshold","marginTop","index","_","i","removeRegister","handleCancel","CacheService","constructor","cache","Map","subscribers","set","key","data","ttlMs","arguments","undefined","DEFAULT_TTL","staleTime","this","timestamp","expiresIn","Math","STALE_TIME","notifySubscribers","get","entry","delete","getWithStaleStatus","_entry$staleTime","age","isExpired","isStale","has","_entry$staleTime2","clear","clearPattern","pattern","regex","RegExp","keysToDelete","forEach","test","push","clearAll","size","subscribe","callback","Set","subscription","add","subs","subscribePattern","source","directSubs","sub","console","subKey","startsWith","keys","Array","from","getStats","values","reduce","sum","getTTL","REALTIME_TTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","response","fetch","status","refreshToken","removeItem","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","is_staff","getUserDevices","userId","getUserSite","createUserSite","updateUserSite","getDeviceSite","deviceId","createDeviceSite","updateDeviceSite","getSiteTelemetry","siteId","query","URLSearchParams","start_date","append","end_date","days","getSiteForecast","date","getSiteWeather","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","deletePreset","getDevices","page","pageSize","queryString","createDevice","deviceData","updateDevice","deleteDevice","rebootDevice","hardResetDevice","getDeviceLogs","limit","toggleDeviceLogs","deleteDevicesBulk","deviceIds","device_ids","getSlaves","addSlavesToPreset","slaveIds","slave_ids","detachSlaveFromPreset","getFirmwareVersions","activeOnly","uploadFirmwareVersion","formData","updateFirmwareVersion","firmwareId","deleteFirmwareVersion","getDeviceUpdateLogs","getOTAConfig","updateOTAConfig","getOTAHealth","triggerRollback","deviceSerial","notes","device_serial","deployFirmware","deviceSerials","firmware_id","device_serials","listTargetedUpdates","getTargetedUpdate","updateId"],"sourceRoot":""}