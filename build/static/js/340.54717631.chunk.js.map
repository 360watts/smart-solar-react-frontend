{"version":3,"file":"static/js/340.54717631.chunk.js","mappings":"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","sources":["components/DeviceDetail.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface Device {\r\n  id: number;\r\n  device_serial: string;\r\n  customer?: string;\r\n  provisioned_at: string;\r\n  config_version?: string;\r\n  last_heartbeat?: string;\r\n  is_online: boolean;\r\n  uptime_seconds?: number;\r\n  firmware_version?: string;\r\n  memory_usage?: number;\r\n  wifi_rssi?: number;\r\n  status: string;\r\n  uptime_formatted: string;\r\n  created_by_username?: string;\r\n  created_at?: string;\r\n  updated_by_username?: string;\r\n  updated_at?: string;\r\n}\r\n\r\ninterface OTAUpdate {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  version: string;\r\n  status: string;\r\n  target_type: string;\r\n  created_at: string;\r\n  progress_percentage: number;\r\n}\r\n\r\ninterface DeviceOTAStatus {\r\n  id: number;\r\n  ota_update: OTAUpdate;\r\n  status: string;\r\n  progress_percentage: number;\r\n  error_message?: string;\r\n  started_at?: string;\r\n  completed_at?: string;\r\n  previous_version?: string;\r\n  target_version?: string;\r\n}\r\n\r\ninterface HeartbeatData {\r\n  timestamp: string;\r\n  uptime_seconds: number;\r\n  memory_usage: number;\r\n  wifi_rssi: number;\r\n}\r\n\r\nconst DeviceDetail: React.FC = () => {\r\n  const { deviceId } = useParams<{ deviceId: string }>();\r\n  const navigate = useNavigate();\r\n  const [device, setDevice] = useState<Device | null>(null);\r\n  const [otaStatuses, setOtaStatuses] = useState<DeviceOTAStatus[]>([]);\r\n  const [heartbeatHistory, setHeartbeatHistory] = useState<HeartbeatData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [actionLoading, setActionLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'ota' | 'heartbeat'>('overview');\r\n\r\n  useEffect(() => {\r\n    if (deviceId) {\r\n      fetchDeviceDetail();\r\n    }\r\n  }, [deviceId]);\r\n\r\n  const fetchDeviceDetail = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await apiService.get(`/devices/${deviceId}/detail`);\r\n      setDevice(response.data.device);\r\n      setOtaStatuses(response.data.ota_statuses || []);\r\n      setHeartbeatHistory(response.data.heartbeat_history || []);\r\n      setError(null);\r\n    } catch (err: any) {\r\n      console.error('Error fetching device detail:', err);\r\n      setError(err.response?.data?.message || 'Failed to fetch device details');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeviceAction = async (action: string) => {\r\n    if (!deviceId) return;\r\n    \r\n    try {\r\n      setActionLoading(true);\r\n      await apiService.post(`/devices/${deviceId}/action`, { action });\r\n      \r\n      // Show success message\r\n      alert(`${action.charAt(0).toUpperCase() + action.slice(1)} command sent successfully`);\r\n      \r\n      // Refresh device data\r\n      setTimeout(() => {\r\n        fetchDeviceDetail();\r\n      }, 1000);\r\n    } catch (err: any) {\r\n      console.error(`Error executing ${action}:`, err);\r\n      alert(err.response?.data?.message || `Failed to execute ${action}`);\r\n    } finally {\r\n      setActionLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatLastHeartbeat = (timestamp: string | undefined): string => {\r\n    if (!timestamp) return 'Never';\r\n    const now = new Date();\r\n    const heartbeatTime = new Date(timestamp);\r\n    const diffMs = now.getTime() - heartbeatTime.getTime();\r\n    const diffMinutes = Math.floor(diffMs / (1000 * 60));\r\n    \r\n    if (diffMinutes < 1) return 'Just now';\r\n    if (diffMinutes < 60) return `${diffMinutes} minutes ago`;\r\n    \r\n    const diffHours = Math.floor(diffMinutes / 60);\r\n    if (diffHours < 24) return `${diffHours} hours ago`;\r\n    \r\n    const diffDays = Math.floor(diffHours / 24);\r\n    return `${diffDays} days ago`;\r\n  };\r\n\r\n  const getStatusColor = (status: string): string => {\r\n    switch (status.toLowerCase()) {\r\n      case 'online': return 'text-green-600 bg-green-100';\r\n      case 'offline': return 'text-red-600 bg-red-100';\r\n      case 'success': return 'text-green-600 bg-green-100';\r\n      case 'failed': return 'text-red-600 bg-red-100';\r\n      case 'pending': return 'text-yellow-600 bg-yellow-100';\r\n      case 'downloading': return 'text-blue-600 bg-blue-100';\r\n      case 'installing': return 'text-purple-600 bg-purple-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getSignalStrength = (rssi: number | undefined): { strength: string; color: string } => {\r\n    if (rssi === undefined) return { strength: 'Unknown', color: 'text-gray-600' };\r\n    \r\n    if (rssi >= -50) return { strength: 'Excellent', color: 'text-green-600' };\r\n    if (rssi >= -60) return { strength: 'Good', color: 'text-green-500' };\r\n    if (rssi >= -70) return { strength: 'Fair', color: 'text-yellow-600' };\r\n    return { strength: 'Poor', color: 'text-red-600' };\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\">\r\n        <strong className=\"font-bold\">Error: </strong>\r\n        <span className=\"block sm:inline\">{error}</span>\r\n        <button \r\n          onClick={() => navigate('/devices')}\r\n          className=\"mt-2 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\r\n        >\r\n          Back to Devices\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!device) {\r\n    return (\r\n      <div className=\"text-center py-8\">\r\n        <p className=\"text-gray-600\">Device not found</p>\r\n        <button \r\n          onClick={() => navigate('/devices')}\r\n          className=\"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n        >\r\n          Back to Devices\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const signalInfo = getSignalStrength(device.wifi_rssi);\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button\r\n              onClick={() => navigate('/devices')}\r\n              className=\"text-blue-600 hover:text-blue-800 flex items-center\"\r\n            >\r\n              <svg className=\"w-5 h-5 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n              </svg>\r\n              Back to Devices\r\n            </button>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(device.status)}`}>\r\n              {device.status}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mt-4\">Device: {device.device_serial}</h1>\r\n      </div>\r\n\r\n      {/* Device Actions */}\r\n      <div className=\"mb-6 bg-white p-4 rounded-lg shadow\">\r\n        <h2 className=\"text-lg font-semibold mb-3\">Device Actions</h2>\r\n        <div className=\"flex space-x-2\">\r\n          <button\r\n            onClick={() => handleDeviceAction('reboot')}\r\n            disabled={actionLoading || device.status === 'offline'}\r\n            className=\"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n          >\r\n            {actionLoading ? 'Sending...' : 'Reboot'}\r\n          </button>\r\n          <button\r\n            onClick={() => handleDeviceAction('factory_reset')}\r\n            disabled={actionLoading || device.status === 'offline'}\r\n            className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n          >\r\n            {actionLoading ? 'Sending...' : 'Factory Reset'}\r\n          </button>\r\n          <button\r\n            onClick={() => handleDeviceAction('sync_config')}\r\n            disabled={actionLoading || device.status === 'offline'}\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed\"\r\n          >\r\n            {actionLoading ? 'Sending...' : 'Sync Config'}\r\n          </button>\r\n        </div>\r\n        {device.status === 'offline' && (\r\n          <p className=\"text-sm text-gray-600 mt-2\">Device actions are disabled when the device is offline.</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"border-b border-gray-200\">\r\n          <nav className=\"-mb-px flex space-x-8\">\r\n            {['overview', 'ota', 'heartbeat'].map((tab) => (\r\n              <button\r\n                key={tab}\r\n                onClick={() => setActiveTab(tab as any)}\r\n                className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                  activeTab === tab\r\n                    ? 'border-blue-500 text-blue-600'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                {tab.charAt(0).toUpperCase() + tab.slice(1)}\r\n              </button>\r\n            ))}\r\n          </nav>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === 'overview' && (\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* Basic Information */}\r\n          <div className=\"bg-white p-6 rounded-lg shadow\">\r\n            <h2 className=\"text-lg font-semibold mb-4\">Basic Information</h2>\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Device Serial:</span>\r\n                <span className=\"font-mono\">{device.device_serial}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Customer:</span>\r\n                <span>{device.customer || 'N/A'}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Provisioned:</span>\r\n                <span>{new Date(device.provisioned_at).toLocaleDateString()}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Config Version:</span>\r\n                <span>{device.config_version || 'N/A'}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Firmware Version:</span>\r\n                <span>{device.firmware_version || 'N/A'}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Connectivity Status */}\r\n          <div className=\"bg-white p-6 rounded-lg shadow\">\r\n            <h2 className=\"text-lg font-semibold mb-4\">Connectivity Status</h2>\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Status:</span>\r\n                <span className={`px-2 py-1 rounded text-sm ${getStatusColor(device.status)}`}>\r\n                  {device.status}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Last Heartbeat:</span>\r\n                <span>{formatLastHeartbeat(device.last_heartbeat)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Uptime:</span>\r\n                <span>{device.uptime_formatted}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">WiFi Signal:</span>\r\n                <span className={`${signalInfo.color}`}>\r\n                  {device.wifi_rssi ? `${device.wifi_rssi} dBm (${signalInfo.strength})` : 'N/A'}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-600\">Memory Usage:</span>\r\n                <span>{device.memory_usage ? `${device.memory_usage.toFixed(1)}%` : 'N/A'}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'ota' && (\r\n        <div className=\"bg-white p-6 rounded-lg shadow\">\r\n          <h2 className=\"text-lg font-semibold mb-4\">OTA Update History</h2>\r\n          {otaStatuses.length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              {otaStatuses.map((otaStatus) => (\r\n                <div key={otaStatus.id} className=\"border rounded-lg p-4\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"font-medium\">{otaStatus.ota_update.name}</h3>\r\n                    <span className={`px-2 py-1 rounded text-sm ${getStatusColor(otaStatus.status)}`}>\r\n                      {otaStatus.status}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-600 space-y-1\">\r\n                    <p>Version: {otaStatus.target_version || otaStatus.ota_update.version}</p>\r\n                    <p>Progress: {otaStatus.progress_percentage}%</p>\r\n                    {otaStatus.previous_version && (\r\n                      <p>Previous Version: {otaStatus.previous_version}</p>\r\n                    )}\r\n                    {otaStatus.started_at && (\r\n                      <p>Started: {new Date(otaStatus.started_at).toLocaleString()}</p>\r\n                    )}\r\n                    {otaStatus.completed_at && (\r\n                      <p>Completed: {new Date(otaStatus.completed_at).toLocaleString()}</p>\r\n                    )}\r\n                    {otaStatus.error_message && (\r\n                      <p className=\"text-red-600\">Error: {otaStatus.error_message}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-600\">No OTA updates available for this device.</p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'heartbeat' && (\r\n        <div className=\"bg-white p-6 rounded-lg shadow\">\r\n          <h2 className=\"text-lg font-semibold mb-4\">Heartbeat History</h2>\r\n          {heartbeatHistory.length > 0 ? (\r\n            <div className=\"space-y-3\">\r\n              {heartbeatHistory.map((heartbeat, index) => (\r\n                <div key={index} className=\"flex items-center justify-between p-3 border rounded\">\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium\">\r\n                      {new Date(heartbeat.timestamp).toLocaleString()}\r\n                    </p>\r\n                    <div className=\"text-xs text-gray-600 mt-1 space-x-4\">\r\n                      <span>Uptime: {Math.floor(heartbeat.uptime_seconds / 3600)}h {Math.floor((heartbeat.uptime_seconds % 3600) / 60)}m</span>\r\n                      <span>Memory: {heartbeat.memory_usage.toFixed(1)}%</span>\r\n                      <span>WiFi: {heartbeat.wifi_rssi} dBm</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-600\">No heartbeat history available for this device.</p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeviceDetail;","/**\r\n * Simple in-memory cache service for API responses\r\n * Reduces unnecessary API calls and speeds up page loads\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n\r\n  /**\r\n   * Set a cache entry\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' = 'short'): number {\r\n    return type === 'long' ? CacheService.LONG_TTL : CacheService.DEFAULT_TTL;\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Generic HTTP methods\r\n  async get(endpoint: string): Promise<any> {\r\n    const response = await this.request(endpoint, {\r\n      method: 'GET',\r\n    });\r\n    return response;\r\n  }\r\n\r\n  async post(endpoint: string, data?: any, options: RequestInit = {}): Promise<any> {\r\n    const requestOptions: RequestInit = {\r\n      method: 'POST',\r\n      ...options,\r\n    };\r\n\r\n    if (data && !(data instanceof FormData)) {\r\n      requestOptions.body = JSON.stringify(data);\r\n    } else if (data instanceof FormData) {\r\n      requestOptions.body = data;\r\n      // Remove Content-Type header for FormData to let browser set it with boundary\r\n      const headers = { ...this.getAuthHeaders() };\r\n      delete (headers as any)['Content-Type'];\r\n      requestOptions.headers = {\r\n        ...headers,\r\n        ...options.headers,\r\n      };\r\n    }\r\n\r\n    return this.request(endpoint, requestOptions);\r\n  }\r\n\r\n  async put(endpoint: string, data?: any): Promise<any> {\r\n    return this.request(endpoint, {\r\n      method: 'PUT',\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  async delete(endpoint: string): Promise<any> {\r\n    return this.request(endpoint, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["DeviceDetail","deviceId","useParams","navigate","useNavigate","device","setDevice","useState","otaStatuses","setOtaStatuses","heartbeatHistory","setHeartbeatHistory","loading","setLoading","actionLoading","setActionLoading","error","setError","activeTab","setActiveTab","useEffect","fetchDeviceDetail","async","response","apiService","get","concat","data","ota_statuses","heartbeat_history","err","_err$response","_err$response$data","console","message","handleDeviceAction","post","action","alert","charAt","toUpperCase","slice","setTimeout","_err$response2","_err$response2$data","getStatusColor","status","toLowerCase","_jsx","className","children","_jsxs","onClick","signalInfo","undefined","rssi","wifi_rssi","strength","color","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","device_serial","disabled","map","tab","customer","Date","provisioned_at","toLocaleDateString","config_version","firmware_version","timestamp","now","heartbeatTime","diffMs","getTime","diffMinutes","Math","floor","diffHours","diffDays","formatLastHeartbeat","last_heartbeat","uptime_formatted","memory_usage","toFixed","length","otaStatus","ota_update","name","target_version","version","progress_percentage","previous_version","started_at","toLocaleString","completed_at","error_message","id","heartbeat","index","uptime_seconds","CacheService","constructor","cache","Map","set","key","ttlMs","arguments","DEFAULT_TTL","this","expiresIn","entry","delete","has","clear","clearAll","size","getTTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","fetch","_objectSpread","refreshToken","removeItem","window","location","href","Error","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","requestOptions","FormData","put","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","is_staff","getUserDevices","userId","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","deletePreset","getDevices","page","pageSize","URLSearchParams","append","toString","queryString","createDevice","deviceData","updateDevice","deleteDevice","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","slaveData","updateSlave","slaveId","deleteSlave"],"ignoreList":[],"sourceRoot":""}