{"version":3,"file":"static/js/524.0491e023.chunk.js","mappings":"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","sources":["components/SystemHealth.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface SystemHealthData {\r\n  total_devices: number;\r\n  active_devices: number;\r\n  total_telemetry_points: number;\r\n  uptime_seconds: number;\r\n  database_status: string;\r\n  mqtt_status: string;\r\n  overall_health: string;\r\n}\r\n\r\nconst SystemHealth: React.FC = () => {\r\n  const [health, setHealth] = useState<SystemHealthData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchSystemHealth();\r\n    // Refresh health data every 60 seconds\r\n    const interval = setInterval(fetchSystemHealth, 60000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchSystemHealth = async () => {\r\n    try {\r\n      const data = await apiService.getSystemHealth();\r\n      setHealth(data);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatUptime = (seconds: number) => {\r\n    const days = Math.floor(seconds / 86400);\r\n    const hours = Math.floor((seconds % 86400) / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    return `${days}d ${hours}h ${minutes}m`;\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status.toLowerCase()) {\r\n      case 'healthy': return 'status-online';\r\n      case 'warning': return 'status-warning';\r\n      case 'critical': return 'status-critical';\r\n      default: return 'status-offline';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status.toLowerCase()) {\r\n      case 'healthy': return '‚úÖ';\r\n      case 'warning': return '‚ö†Ô∏è';\r\n      case 'critical': return 'üö®';\r\n      default: return '‚ùì';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading system health...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  if (!health) {\r\n    return <div className=\"error\">No health data available</div>;\r\n  }\r\n\r\n  const deviceUptime = (health.active_devices / health.total_devices) * 100;\r\n\r\n  return (\r\n    <div>\r\n      <h1>System Health Dashboard</h1>\r\n\r\n      <div className=\"grid grid-cols-2\">\r\n        <div className=\"card\">\r\n          <h3>Overall System Status</h3>\r\n          <div className={`status-indicator ${getStatusColor(health.overall_health)}`}>\r\n            {getStatusIcon(health.overall_health)} {health.overall_health.toUpperCase()}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <h3>System Uptime</h3>\r\n          <p className=\"metric-large\">{formatUptime(health.uptime_seconds)}</p>\r\n          <p className=\"metric-label\">Since first telemetry</p>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <h3>Device Connectivity</h3>\r\n          <p className=\"metric-large\">{health.active_devices}/{health.total_devices}</p>\r\n          <p className=\"metric-label\">Active/Total Devices</p>\r\n          <div className=\"progress-bar\">\r\n            <div\r\n              className=\"progress-fill\"\r\n              style={{ width: `${deviceUptime}%` }}\r\n            ></div>\r\n          </div>\r\n          <p className=\"metric-small\">{deviceUptime.toFixed(1)}% uptime</p>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <h3>Data Collection</h3>\r\n          <p className=\"metric-large\">{health.total_telemetry_points.toLocaleString()}</p>\r\n          <p className=\"metric-label\">Total Data Points</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2\">\r\n        <div className=\"card\">\r\n          <h3>Service Status</h3>\r\n          <div className=\"service-status\">\r\n            <div className=\"service-item\">\r\n              <span className=\"service-name\">Database</span>\r\n              <span className={`service-status ${getStatusColor(health.database_status)}`}>\r\n                {getStatusIcon(health.database_status)} {health.database_status}\r\n              </span>\r\n            </div>\r\n            <div className=\"service-item\">\r\n              <span className=\"service-name\">MQTT Broker</span>\r\n              <span className={`service-status ${getStatusColor(health.mqtt_status)}`}>\r\n                {getStatusIcon(health.mqtt_status)} {health.mqtt_status}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <h3>Performance Metrics</h3>\r\n          <div className=\"metrics-list\">\r\n            <div className=\"metric-item\">\r\n              <span>Data Points/Hour:</span>\r\n              <span>{(health.total_telemetry_points / (health.uptime_seconds / 3600)).toFixed(1)}</span>\r\n            </div>\r\n            <div className=\"metric-item\">\r\n              <span>Avg Data/Device:</span>\r\n              <span>{health.total_devices > 0 ? (health.total_telemetry_points / health.total_devices).toFixed(0) : '0'}</span>\r\n            </div>\r\n            <div className=\"metric-item\">\r\n              <span>Active Device Ratio:</span>\r\n              <span>{deviceUptime.toFixed(1)}%</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <h3>System Information</h3>\r\n        <div className=\"system-info\">\r\n          <p><strong>Last Updated:</strong> {new Date().toLocaleString()}</p>\r\n          <p><strong>Monitoring Since:</strong> {new Date(Date.now() - health.uptime_seconds * 1000).toLocaleString()}</p>\r\n          <p><strong>API Status:</strong> <span className=\"status-online\">Connected</span></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SystemHealth;"],"names":["SystemHealth","health","setHealth","useState","loading","setLoading","error","setError","useEffect","fetchSystemHealth","interval","setInterval","clearInterval","async","data","apiService","getSystemHealth","err","Error","message","getStatusColor","status","toLowerCase","getStatusIcon","_jsx","className","children","_jsxs","deviceUptime","active_devices","total_devices","concat","overall_health","toUpperCase","seconds","days","Math","floor","hours","minutes","formatUptime","uptime_seconds","style","width","toFixed","total_telemetry_points","toLocaleString","database_status","mqtt_status","Date","now"],"sourceRoot":""}