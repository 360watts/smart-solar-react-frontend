{"version":3,"file":"static/js/681.50684a2d.chunk.js","mappings":"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","sources":["components/Users.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface User {\r\n  id: number;\r\n  username: string;\r\n  email: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  mobile_number?: string;\r\n  address?: string;\r\n  is_staff: boolean;\r\n  is_superuser: boolean;\r\n  date_joined: string;\r\n}\r\n\r\ninterface Device {\r\n  id: number;\r\n  device_serial: string;\r\n  provisioned_at?: string;\r\n  config_version?: string;\r\n}\r\n\r\nconst Users: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [filteredUsers, setFilteredUsers] = useState<User[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [editingUser, setEditingUser] = useState<User | null>(null);\r\n  const [creatingUser, setCreatingUser] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\r\n  const [userDevices, setUserDevices] = useState<Device[]>([]);\r\n  const [loadingDevices, setLoadingDevices] = useState(false);\r\n  const [editForm, setEditForm] = useState({\r\n    first_name: '',\r\n    last_name: '',\r\n    email: '',\r\n    mobile_number: '',\r\n    address: '',\r\n  });\r\n  const [createForm, setCreateForm] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    first_name: '',\r\n    last_name: '',\r\n    mobile_number: '',\r\n    address: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedSearchTerm(searchTerm);\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [searchTerm]);\r\n\r\n  useEffect(() => {\r\n    fetchUsers(debouncedSearchTerm);\r\n  }, [debouncedSearchTerm]);\r\n\r\n  const fetchUsers = async (search?: string) => {\r\n    try {\r\n      const data = await apiService.getUsers(search);\r\n      const filteredData = data.filter((user: any) => !user.is_staff);\r\n      setUsers(filteredData);\r\n      setFilteredUsers(filteredData);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  const handleEdit = (user: User) => {\r\n    setEditingUser(user);\r\n    setEditForm({\r\n      first_name: user.first_name,\r\n      last_name: user.last_name,\r\n      email: user.email,\r\n      mobile_number: user.mobile_number || '',\r\n      address: user.address || '',\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editingUser) return;\r\n\r\n    try {\r\n      await apiService.updateUser(editingUser.id, editForm);\r\n      setEditingUser(null);\r\n      // Refetch to get the updated user with all fields\r\n      await fetchUsers(searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update user');\r\n    }\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    try {\r\n      await apiService.createUser(createForm);\r\n      setCreatingUser(false);\r\n      setCreateForm({\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        first_name: '',\r\n        last_name: '',\r\n        mobile_number: '',\r\n        address: '',\r\n      });\r\n      // Refetch to get the new user with all fields\r\n      await fetchUsers(searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to create user');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (user: any) => {\r\n    if (window.confirm(`Are you sure you want to delete user ${user.username}?`)) {\r\n      try {\r\n        await apiService.deleteUser(user.id);\r\n        setUsers(users.filter(u => u.id !== user.id));\r\n        setFilteredUsers(filteredUsers.filter(u => u.id !== user.id));\r\n        if (selectedUser?.id === user.id) {\r\n          setSelectedUser(null);\r\n          setUserDevices([]);\r\n        }\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Failed to delete user');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleViewUser = async (user: User) => {\r\n    setSelectedUser(user);\r\n    setLoadingDevices(true);\r\n    try {\r\n      const devices = await apiService.getUserDevices(user.id);\r\n      setUserDevices(devices);\r\n    } catch (err) {\r\n      console.error('Error fetching user devices:', err);\r\n      // If no devices endpoint or error, just show empty\r\n      setUserDevices([]);\r\n    } finally {\r\n      setLoadingDevices(false);\r\n    }\r\n  };\r\n\r\n  const handleBackToList = () => {\r\n    setSelectedUser(null);\r\n    setUserDevices([]);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingUser(null);\r\n    setCreatingUser(false);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading users...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  // Show user dashboard when a user is selected\r\n  if (selectedUser) {\r\n    return (\r\n      <div>\r\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '20px' }}>\r\n          <button \r\n            onClick={handleBackToList} \r\n            className=\"btn btn-secondary\"\r\n            style={{ marginRight: '15px' }}\r\n          >\r\n            ← Back to Users\r\n          </button>\r\n          <h1 style={{ margin: 0 }}>{selectedUser.first_name} {selectedUser.last_name}'s Dashboard</h1>\r\n        </div>\r\n\r\n        <div className=\"card\" style={{ marginBottom: '20px' }}>\r\n          <div className=\"card-header\">\r\n            <h2>User Information</h2>\r\n            <button onClick={() => handleEdit(selectedUser)} className=\"btn\">\r\n              Edit User\r\n            </button>\r\n          </div>\r\n          <div style={{ padding: '20px' }}>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '15px' }}>\r\n              <div>\r\n                <strong>Username:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedUser.username}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Email:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedUser.email}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Mobile:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedUser.mobile_number || '-'}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Address:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedUser.address || '-'}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Joined:</strong>\r\n                <p style={{ margin: '5px 0' }}>\r\n                  {selectedUser.date_joined \r\n                    ? new Date(selectedUser.date_joined).toLocaleDateString() \r\n                    : 'N/A'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <h2>Assigned Devices ({userDevices.length})</h2>\r\n          </div>\r\n          {loadingDevices ? (\r\n            <div style={{ padding: '24px', textAlign: 'center', color: 'var(--text-secondary, #94a3b8)' }}>Loading devices...</div>\r\n          ) : userDevices.length > 0 ? (\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th style={{ textAlign: 'center' }}>Device Serial</th>\r\n                  <th style={{ textAlign: 'center' }}>Config Version</th>\r\n                  <th style={{ textAlign: 'center' }}>Provisioned At</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {userDevices.map((device) => (\r\n                  <tr \r\n                    key={device.id} \r\n                    className=\"clickable-row\"\r\n                    onClick={() => navigate(`/devices?deviceId=${device.id}`)}\r\n                    style={{ cursor: 'pointer' }}\r\n                  >\r\n                    <td style={{ textAlign: 'center' }}>{device.device_serial}</td>\r\n                    <td style={{ textAlign: 'center' }}>{device.config_version || '-'}</td>\r\n                    <td style={{ textAlign: 'center' }}>\r\n                      {device.provisioned_at \r\n                        ? new Date(device.provisioned_at).toLocaleDateString() \r\n                        : '-'}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          ) : (\r\n            <div style={{ padding: '32px', textAlign: 'center', color: 'var(--text-muted, #64748b)', fontSize: '0.9375rem' }}>\r\n              No devices assigned to this user yet.\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {editingUser && (\r\n          <div className=\"modal\">\r\n            <div className=\"modal-content\">\r\n              <h3>Edit User: {editingUser.username}</h3>\r\n              <form onSubmit={(e) => { e.preventDefault(); handleSave(); }}>\r\n                <div className=\"modal-body\">\r\n                  \r\n                  {/* Account Information */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Account Information</h4>\r\n                    <div className=\"form-grid\">\r\n                      <div className=\"form-group\">\r\n                        <label>Email Address</label>\r\n                        <input\r\n                          type=\"email\"\r\n                          value={editForm.email}\r\n                          onChange={(e) => setEditForm({...editForm, email: e.target.value})}\r\n                          required\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"john.doe@example.com\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Personal Details */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Personal Details</h4>\r\n                    <div className=\"form-grid form-grid-2\">\r\n                      <div className=\"form-group\">\r\n                        <label>First Name</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editForm.first_name}\r\n                          onChange={(e) => setEditForm({...editForm, first_name: e.target.value})}\r\n                          required\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"John\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Last Name</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editForm.last_name}\r\n                          onChange={(e) => setEditForm({...editForm, last_name: e.target.value})}\r\n                          required\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"Doe\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Contact Information */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Contact Information</h4>\r\n                    <div className=\"form-grid\">\r\n                      <div className=\"form-group\">\r\n                        <label>Mobile Number</label>\r\n                        <input\r\n                          type=\"tel\"\r\n                          value={editForm.mobile_number}\r\n                          onChange={(e) => setEditForm({...editForm, mobile_number: e.target.value})}\r\n                          required\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"+1 (555) 000-0000\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Address</label>\r\n                        <textarea\r\n                          value={editForm.address}\r\n                          onChange={(e) => setEditForm({...editForm, address: e.target.value})}\r\n                          autoComplete=\"off\"\r\n                          rows={3}\r\n                          placeholder=\"123 Solar Street...\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                <div className=\"form-actions\" style={{ padding: '0 24px 24px 24px' }}>\r\n                  <button type=\"submit\" className=\"btn\">Save Changes</button>\r\n                  <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>User Management</h1>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>Users ({filteredUsers.length})</h2>\r\n          <div className=\"card-actions\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search users...\"\r\n              value={searchTerm}\r\n              onChange={handleSearch}\r\n              className=\"search-input\"\r\n            />\r\n            <button onClick={() => setCreatingUser(true)} className=\"btn\">\r\n              Register New User\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'center' }}>Name</th>\r\n              <th style={{ textAlign: 'center' }}>Email</th>\r\n              <th style={{ textAlign: 'center' }}>Mobile</th>\r\n              <th style={{ textAlign: 'center' }}>Address</th>\r\n              <th style={{ textAlign: 'center' }}>Joined</th>\r\n              <th style={{ textAlign: 'center' }}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredUsers.map((user) => (\r\n              <tr \r\n                key={user.id} \r\n                onClick={() => handleViewUser(user)}\r\n                style={{ cursor: 'pointer' }}\r\n                className=\"clickable-row\"\r\n              >\r\n                <td>{user.first_name} {user.last_name}</td>\r\n                <td>{user.email}</td>\r\n                <td>{user.mobile_number || '-'}</td>\r\n                <td>{user.address || '-'}</td>\r\n                <td>\r\n                  {(() => {\r\n                    if (!user.date_joined) return 'N/A';\r\n                    const date = new Date(user.date_joined);\r\n                    return isNaN(date.getTime()) ? 'Invalid Date' : date.toLocaleDateString();\r\n                  })()}\r\n                </td>\r\n                <td onClick={(e) => e.stopPropagation()}>\r\n                  <button onClick={() => handleEdit(user)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'var(--text-secondary, #94a3b8)' }} title=\"Edit\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                      <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                    </svg>\r\n                  </button>\r\n                  <button onClick={() => handleDelete(user)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'var(--danger-color, #ef4444)' }} title=\"Delete\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                      <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                      <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                      <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                    </svg>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {(editingUser || creatingUser) && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <h3>{editingUser ? `Edit User: ${editingUser.username}` : 'Register New User'}</h3>\r\n            <form onSubmit={(e) => { e.preventDefault(); editingUser ? handleSave() : handleCreate(); }}>\r\n              <div className=\"modal-body\">\r\n                \r\n                {/* Account Information */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Account Information</h4>\r\n                  <div className=\"form-grid\">\r\n                    {creatingUser && (\r\n                      <>\r\n                        {/* Hidden inputs to prevent autofill */}\r\n                        <input type=\"text\" autoComplete=\"username\" style={{display: 'none'}} />\r\n                        <input type=\"password\" autoComplete=\"current-password\" style={{display: 'none'}} />\r\n                        \r\n                        <div className=\"form-group\">\r\n                          <label>Username</label>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={createForm.username}\r\n                            onChange={(e) => setCreateForm({...createForm, username: e.target.value})}\r\n                            required\r\n                            autoComplete=\"off\"\r\n                            placeholder=\"jdoe\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                          <label>Password</label>\r\n                          <input\r\n                            type=\"password\"\r\n                            value={createForm.password}\r\n                            onChange={(e) => setCreateForm({...createForm, password: e.target.value})}\r\n                            required\r\n                            autoComplete=\"new-password\"\r\n                            placeholder=\"••••••••\"\r\n                          />\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                    <div className=\"form-group\">\r\n                      <label>Email Address</label>\r\n                      <input\r\n                        type=\"email\"\r\n                        value={editingUser ? editForm.email : createForm.email}\r\n                        onChange={(e) => editingUser ? setEditForm({...editForm, email: e.target.value}) : setCreateForm({...createForm, email: e.target.value})}\r\n                        required\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"john.doe@example.com\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Personal Details */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Personal Details</h4>\r\n                  <div className=\"form-grid form-grid-2\">\r\n                    <div className=\"form-group\">\r\n                      <label>First Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingUser ? editForm.first_name : createForm.first_name}\r\n                        onChange={(e) => editingUser ? setEditForm({...editForm, first_name: e.target.value}) : setCreateForm({...createForm, first_name: e.target.value})}\r\n                        required\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"John\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Last Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingUser ? editForm.last_name : createForm.last_name}\r\n                        onChange={(e) => editingUser ? setEditForm({...editForm, last_name: e.target.value}) : setCreateForm({...createForm, last_name: e.target.value})}\r\n                        required\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"Doe\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Contact Information */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Contact Information</h4>\r\n                  <div className=\"form-grid\">\r\n                    <div className=\"form-group\">\r\n                      <label>Mobile Number</label>\r\n                      <input\r\n                        type=\"tel\"\r\n                        value={editingUser ? editForm.mobile_number : createForm.mobile_number}\r\n                        onChange={(e) => editingUser ? setEditForm({...editForm, mobile_number: e.target.value}) : setCreateForm({...createForm, mobile_number: e.target.value})}\r\n                        required\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"+1 (555) 000-0000\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Address</label>\r\n                      <textarea\r\n                        value={editingUser ? editForm.address : createForm.address}\r\n                        onChange={(e) => editingUser ? setEditForm({...editForm, address: e.target.value}) : setCreateForm({...createForm, address: e.target.value})}\r\n                        autoComplete=\"off\"\r\n                        rows={3}\r\n                        placeholder=\"123 Solar Street...\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              <div className=\"form-actions\" style={{ padding: '0 24px 24px 24px' }}>\r\n                <button type=\"submit\" className=\"btn\">{editingUser ? 'Save Changes' : 'Create Customer'}</button>\r\n                <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n","/**\r\n * Simple in-memory cache service for API responses\r\n * Reduces unnecessary API calls and speeds up page loads\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n\r\n  /**\r\n   * Set a cache entry\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' = 'short'): number {\r\n    return type === 'long' ? CacheService.LONG_TTL : CacheService.DEFAULT_TTL;\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend-git-dev0-360watts-projects.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const headers = this.getAuthHeaders();\r\n    delete (headers as any)['Content-Type']; // Let browser set it for FormData\r\n    \r\n    return fetch(`${API_BASE_URL}/ota/firmware/create/`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Authorization': `Bearer ${JSON.parse(localStorage.getItem('authTokens') || '{}').access}`,\r\n      },\r\n      body: formData,\r\n    }).then(res => res.json());\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["Users","navigate","useNavigate","users","setUsers","useState","filteredUsers","setFilteredUsers","loading","setLoading","error","setError","editingUser","setEditingUser","creatingUser","setCreatingUser","searchTerm","setSearchTerm","selectedUser","setSelectedUser","userDevices","setUserDevices","loadingDevices","setLoadingDevices","editForm","setEditForm","first_name","last_name","email","mobile_number","address","createForm","setCreateForm","username","password","useEffect","fetchUsers","debouncedSearchTerm","setDebouncedSearchTerm","timer","setTimeout","clearTimeout","async","filteredData","apiService","getUsers","search","filter","user","is_staff","err","Error","message","handleEdit","handleSave","updateUser","id","handleBackToList","handleCancel","_jsx","className","children","_jsxs","style","display","alignItems","marginBottom","onClick","marginRight","margin","padding","gridTemplateColumns","gap","date_joined","Date","toLocaleDateString","length","textAlign","color","map","device","concat","cursor","device_serial","config_version","provisioned_at","fontSize","onSubmit","e","preventDefault","type","value","onChange","_objectSpread","target","required","autoComplete","placeholder","rows","devices","getUserDevices","console","handleViewUser","date","isNaN","getTime","stopPropagation","background","border","title","width","height","viewBox","fill","stroke","strokeWidth","d","window","confirm","deleteUser","u","handleDelete","points","x1","y1","x2","y2","createUser","handleCreate","_Fragment","CacheService","constructor","cache","Map","set","key","data","ttlMs","arguments","undefined","DEFAULT_TTL","this","timestamp","now","expiresIn","get","entry","delete","has","clear","clearAll","size","getTTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","response","fetch","status","refreshToken","removeItem","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","params","encodeURIComponent","userData","result","createEmployee","employeeData","userId","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","deletePreset","getGlobalSlaves","createGlobalSlave","slaveData","updateGlobalSlave","slaveId","deleteGlobalSlave","getDevices","page","pageSize","URLSearchParams","append","toString","queryString","createDevice","deviceData","updateDevice","deviceId","deleteDevice","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","updateSlave","deleteSlave","addSlavesToPreset","slaveIds","slave_ids","getFirmwareVersions","activeOnly","uploadFirmwareVersion","formData","then","res","updateFirmwareVersion","firmwareId","getDeviceUpdateLogs","getOTAConfig","updateOTAConfig","config","getOTAHealth"],"sourceRoot":""}