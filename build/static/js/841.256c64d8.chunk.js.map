{"version":3,"file":"static/js/841.256c64d8.chunk.js","mappings":"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","sources":["components/AuditTrail.tsx","hooks/useDebounce.ts","components/SiteDataPanel.tsx","components/AccessibleModal.tsx","hooks/useModal.ts","components/Devices.tsx","components/EmptyState.tsx"],"sourcesContent":["import React from 'react';\r\n\r\ninterface AuditTrailProps {\r\n  createdBy?: string | null;\r\n  createdAt?: string;\r\n  updatedBy?: string | null;\r\n  updatedAt?: string;\r\n  className?: string;\r\n}\r\n\r\nconst AuditTrail: React.FC<AuditTrailProps> = ({\r\n  createdBy,\r\n  createdAt,\r\n  updatedBy,\r\n  updatedAt,\r\n  className = 'audit-trail',\r\n}) => {\r\n  const formatDate = (dateString?: string) => {\r\n    if (!dateString) return 'N/A';\r\n    try {\r\n      return new Date(dateString).toLocaleString();\r\n    } catch {\r\n      return dateString;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"audit-row\">\r\n        <span className=\"audit-label\">Created:</span>\r\n        {createdBy ? (\r\n          <span className=\"audit-value\">\r\n            by <strong>{createdBy}</strong> on {formatDate(createdAt)}\r\n          </span>\r\n        ) : (\r\n          <span className=\"audit-value\">System</span>\r\n        )}\r\n      </div>\r\n\r\n      {updatedBy && (\r\n        <div className=\"audit-row\">\r\n          <span className=\"audit-label\">Last Updated:</span>\r\n          <span className=\"audit-value\">\r\n            by <strong>{updatedBy}</strong> on {formatDate(updatedAt)}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(AuditTrail);\r\n","import { useState, useEffect, useCallback, useRef } from 'react';\r\n\r\ninterface UseDebouncedValueOptions {\r\n  delay?: number;\r\n}\r\n\r\n/**\r\n * Custom hook to debounce a value with a delay\r\n * Useful for search inputs and other frequent updates\r\n */\r\nexport function useDebouncedValue<T>(\r\n  value: T,\r\n  options: UseDebouncedValueOptions = {}\r\n): T {\r\n  const { delay = 300 } = options;\r\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n\r\n/**\r\n * Custom hook to debounce a callback function.\r\n * Uses a ref for the timeout ID so the returned function is stable\r\n * (does not re-create on every invocation, which would defeat debouncing).\r\n */\r\nexport function useDebouncedCallback<T extends (...args: any[]) => any>(\r\n  callback: T,\r\n  delay: number = 300\r\n): (...args: Parameters<T>) => void {\r\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  const callbackRef = useRef<T>(callback);\r\n\r\n  // Keep callbackRef current so the latest callback is always used\r\n  useEffect(() => {\r\n    callbackRef.current = callback;\r\n  }, [callback]);\r\n\r\n  // Stable debounced function  never recreated\r\n  const debouncedCallback = useCallback(\r\n    (...args: Parameters<T>) => {\r\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n      timeoutRef.current = setTimeout(() => {\r\n        callbackRef.current(...args);\r\n      }, delay);\r\n    },\r\n    [delay] // only delay changes recreate the wrapper\r\n  );\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n    };\r\n  }, []);\r\n\r\n  return debouncedCallback;\r\n}\r\n\r\n/**\r\n * Custom hook for search input with debouncing\r\n * Returns a hook that handles search input changes with built-in debouncing\r\n */\r\nexport function useDebouncedSearch(\r\n  onSearch: (query: string) => void,\r\n  delay: number = 300\r\n) {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const debouncedCallback = useDebouncedCallback(onSearch, delay);\r\n\r\n  const handleSearch = useCallback(\r\n    (query: string) => {\r\n      setSearchQuery(query);\r\n      debouncedCallback(query);\r\n    },\r\n    [debouncedCallback]\r\n  );\r\n\r\n  return {\r\n    searchQuery,\r\n    setSearchQuery,\r\n    handleSearch,\r\n  };\r\n}\r\n","/**\n * SiteDataPanel  solar site intelligence panel\n *\n * Tabs:\n *  - Overview: 6 live KPI cards + energy breakdown + insights\n *  - Weather:  current conditions + 24 h hourly outlook strip\n *  - History:  power area chart with Battery SOC on secondary axis\n *  - Forecast: P10/P50/P90 + physics baseline, regime tags, % achieved\n */\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport {\n  AreaChart, Area, Line,\n  XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend, ReferenceLine, ReferenceArea,\n} from 'recharts';\nimport { apiService } from '../services/api';\nimport { useTheme } from '../contexts/ThemeContext';\nimport { IST_TIMEZONE } from '../constants';\n\n//  Tabs \n\nconst TABS = [\n  { id: 'overview',  label: 'Overview',  icon: '' },\n  { id: 'weather',   label: 'Weather',   icon: '' },\n  { id: 'history',   label: 'History',   icon: '' },\n  { id: 'forecast',  label: 'Forecast',  icon: '' },\n] as const;\ntype TabId = typeof TABS[number]['id'];\n\n//  Custom forecast tooltip \n\nconst ForecastTooltip = ({ active, payload, label }: any) => {\n  const { isDark } = useTheme();\n  if (!active || !payload || !payload.length) return null;\n  return (\n    <div style={{\n      background: isDark ? 'rgba(30,41,59,0.97)' : 'rgba(255,255,255,0.97)',\n      backdropFilter: 'blur(8px)',\n      border: `1px solid ${isDark ? 'rgba(148,163,184,0.12)' : '#f3f4f6'}`,\n      borderRadius: 12,\n      padding: '0.75rem 1rem',\n      boxShadow: '0 10px 15px -3px rgba(0,0,0,0.1)',\n      minWidth: 175,\n    }}>\n      <div style={{ fontFamily: 'Urbanist, sans-serif', fontWeight: 700, color: isDark ? '#f1f5f9' : '#111827', fontSize: '0.85rem', marginBottom: '0.4rem', borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.12)' : '#f3f4f6'}`, paddingBottom: '0.25rem' }}>\n        {label}\n      </div>\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '0.2rem' }}>\n        {payload.map((entry: any) => {\n          const unit = entry.name?.includes('Temp') ? 'C' : entry.name?.includes('GHI') ? 'W/m' : 'kW';\n          return (\n            <div key={entry.name} style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: '1rem', fontSize: '0.78rem', fontFamily: 'Inter, sans-serif', color: isDark ? '#94a3b8' : '#374151' }}>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '0.4rem' }}>\n                <span style={{ width: 7, height: 7, borderRadius: '50%', background: entry.color || entry.stroke || entry.fill, flexShrink: 0 }} />\n                <span style={{ fontWeight: 600 }}>{entry.name?.split(' ')[0]}</span>\n              </div>\n              <span style={{ fontFamily: 'JetBrains Mono, monospace', fontWeight: 600, color: isDark ? '#f1f5f9' : '#111827' }}>\n                {Number(entry.value).toFixed(3)} {unit}\n              </span>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\n//  Helpers \n\n// All time displays use IST (Asia/Kolkata, UTC+5:30)  the site is in India.\nconst IST = IST_TIMEZONE;\n\n/** Returns the ISO date string (YYYY-MM-DD) for a Date in IST, e.g. \"2026-02-26\" */\nfunction istDate(d: Date): string {\n  return d.toLocaleDateString('en-CA', { timeZone: IST }); // en-CA locale  YYYY-MM-DD\n}\n\n/**\n * Returns the YYYY-MM-DD string in IST that is N calendar days after today IST.\n * n=0  today IST, n=1  tomorrow IST, n=3  3 days from today IST.\n * Uses IST midnight as the reference so the result is always a clean calendar day.\n */\nfunction istDateOffset(n: number): string {\n  const IST_MS = 5.5 * 60 * 60 * 1000;               // UTC+5:30 in ms\n  const nowIST = Date.now() + IST_MS;\n  const istMidnightMS = Math.floor(nowIST / 86400000) * 86400000;  // floor to IST midnight\n  return istDate(new Date(istMidnightMS + n * 86400000 - IST_MS)); // back to UTC Date\n}\n\nfunction fmt(ts: string, range: string): string {\n  try {\n    const d = new Date(ts);\n    if (range === '24h') return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', timeZone: IST });\n    if (range === '7d')  return d.toLocaleDateString([], { weekday: 'short', timeZone: IST }) + ' ' + d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', timeZone: IST });\n    return d.toLocaleDateString([], { month: 'short', day: 'numeric', timeZone: IST });\n  } catch { return ts; }\n}\n\n\nfunction aggregateByPeriod(data: any[], range: string): any[] {\n  if (!data.length) return [];\n  if (range === '24h') return data.filter((_, i) => i % 2 === 0 || i === data.length - 1);\n\n  const isDay = range !== '7d';\n  const buckets = new Map<string, any[]>();\n  data.forEach(row => {\n    const d = new Date(row.timestamp);\n    const key = isDay\n      ? `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`\n      : `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}-${d.getHours()}`;\n    if (!buckets.has(key)) buckets.set(key, []);\n    buckets.get(key)!.push(row);\n  });\n\n  return Array.from(buckets.values()).map(bucket => {\n    const avg = (field: string) => bucket.reduce((s, r) => s + (r[field] ?? 0), 0) / bucket.length;\n    const first = bucket[0];\n    return {\n      timestamp:            first.timestamp,\n      pv1_power_w:          avg('pv1_power_w'),\n      pv2_power_w:          avg('pv2_power_w'),\n      load_power_w:         avg('load_power_w'),\n      grid_power_w:         avg('grid_power_w'),\n      battery_soc_percent:  avg('battery_soc_percent'),\n      battery_power_w:      avg('battery_power_w'),\n      pv_today_kwh:         isDay ? Math.max(...bucket.map(r => r.pv_today_kwh ?? 0)) : first.pv_today_kwh,\n    };\n  });\n}\n\n//  Icons \n\nconst IconSun = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#F07522\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <circle cx=\"12\" cy=\"12\" r=\"5\" fill=\"#FFD600\" stroke=\"#F07522\" strokeWidth=\"1.5\"/>\n    <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"/><line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"/>\n    <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"/><line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"/>\n    <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"/><line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"/>\n  </svg>\n);\nconst IconBattery = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <rect x=\"1\" y=\"6\" width=\"18\" height=\"12\" rx=\"2\"/>\n    <line x1=\"23\" y1=\"13\" x2=\"23\" y2=\"11\"/>\n    <rect x=\"3\" y=\"8\" width=\"10\" height=\"8\" fill=\"currentColor\" rx=\"1\"/>\n  </svg>\n);\nconst IconLoad = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z\"/>\n    <polyline points=\"9 22 9 12 15 12 15 22\"/>\n  </svg>\n);\nconst IconEnergy = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M13 2L3 14h9l-1 8 10-12h-9l1-8z\"/>\n  </svg>\n);\nconst IconCloud = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z\"/>\n  </svg>\n);\nconst IconGrid = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"/>\n  </svg>\n);\nconst IconThermometer = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z\"/>\n  </svg>\n);\n\n//  KPI Card \n\ninterface KpiCardProps {\n  label: string; value: string; unit?: string; sub?: string;\n  accent: string; icon: React.ReactNode; badge?: React.ReactNode;\n}\nconst KpiCard: React.FC<KpiCardProps> = ({ label, value, unit, sub, accent, icon, badge }) => (\n  <div className=\"card\" style={{ padding: '1.1rem', flex: 1, minWidth: 140 }}>\n    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.4rem' }}>\n      <span style={{ fontSize: '0.7rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{label}</span>\n      <span style={{ width: 28, height: 28, borderRadius: '50%', background: `${accent}18`, display: 'flex', alignItems: 'center', justifyContent: 'center', color: accent, flexShrink: 0 }}>{icon}</span>\n    </div>\n    <p style={{ margin: 0, fontFamily: 'JetBrains Mono, monospace', fontSize: '1.5rem', fontWeight: 800, color: 'var(--text-primary)', lineHeight: 1 }}>\n      {value}{unit && <span style={{ fontSize: '0.78rem', fontWeight: 500, color: 'var(--text-muted)', marginLeft: 4 }}>{unit}</span>}\n    </p>\n    {sub   && <p style={{ margin: '0.2rem 0 0', fontSize: '0.7rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{sub}</p>}\n    {badge && <div style={{ marginTop: '0.3rem' }}>{badge}</div>}\n  </div>\n);\n\n//  Weather Hourly Forecast Strip \n\nconst WeatherHourlyStrip = ({ hourly }: { hourly: any[] }) => {\n  if (!hourly || hourly.length === 0) return null;\n  const icon = (cloud: number, ghi: number, precip: number | null) =>\n    ghi < 10  ? '' :\n    precip != null && precip > 60 ? '' :\n    precip != null && precip > 30 ? (cloud > 40 ? '' : '') :\n    cloud > 75 ? '' : cloud > 40 ? '' : '';\n\n  return (\n    <div className=\"card\" style={{ padding: '1rem 1.25rem', marginBottom: '1rem' }}>\n      <p style={{ margin: '0 0 0.65rem', fontSize: '0.68rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.07em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>\n        24 h Weather Outlook\n      </p>\n      <div style={{ overflowX: 'auto', paddingTop: 14, paddingBottom: 2 }}>\n        <div style={{ display: 'flex', gap: '0.45rem', minWidth: 'max-content' }}>\n          {hourly.map((h, i) => {\n            const time = (() => { try { return new Date(h.forecast_for).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', timeZone: IST }); } catch { return ''; } })();\n            const cloud    = h.cloud_cover_pct ?? 0;\n            const ghi      = h.ghi_wm2 ?? 0;\n            const temp     = Number(h.temperature_c ?? 0);\n            const wind     = Number(h.wind_speed_ms ?? 0);\n            const humidity = h.humidity_pct != null ? Number(h.humidity_pct) : null;\n            const precip   = h.precip_prob_pct != null ? Number(h.precip_prob_pct) : null;\n            const ghiPct   = Math.min(100, (ghi / 900) * 100);\n            const humPct   = humidity != null ? Math.min(100, humidity) : null;\n            const isNow    = i === 0;\n            const wi       = icon(cloud, ghi, precip);\n            const ghiColor = ghi > 600 ? '#F07522' : ghi > 200 ? '#f59e0b' : '#d1d5db';\n            const humColor = humidity == null ? '#d1d5db'\n              : humidity > 80 ? '#3b82f6'\n              : humidity > 50 ? '#60a5fa'\n              : '#93c5fd';\n            const precipColor = precip == null ? '#d1d5db'\n              : precip > 60 ? '#1d4ed8'\n              : precip > 30 ? '#3b82f6'\n              : '#93c5fd';\n            return (\n              <div key={i} style={{\n                display: 'flex', flexDirection: 'column', alignItems: 'center',\n                background: isNow ? 'rgba(0,166,62,0.09)' : 'rgba(0,0,0,0.025)',\n                border: `1px solid ${isNow ? 'rgba(0,166,62,0.28)' : 'rgba(0,0,0,0.07)'}`,\n                borderRadius: 10, padding: '0.45rem 0.65rem', minWidth: 64, gap: '0.1rem',\n                position: 'relative',\n              }}>\n                {isNow && (\n                  <span style={{ position: 'absolute', top: -9, fontSize: '0.55rem', fontWeight: 700, background: '#00a63e', color: '#fff', padding: '1px 5px', borderRadius: 4, fontFamily: 'Poppins, sans-serif' }}>NOW</span>\n                )}\n                <span style={{ fontSize: '0.65rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}>{time}</span>\n                <span style={{ fontSize: '1.1rem', lineHeight: 1.4 }}>{wi}</span>\n                <span style={{ fontSize: '0.8rem', fontFamily: 'JetBrains Mono, monospace', fontWeight: 700, color: 'var(--text-primary)' }}>{temp.toFixed(1)}</span>\n                {/* GHI mini-bar */}\n                <div title={`GHI ${Math.round(ghi)} W/m`} style={{ width: '100%', height: 3, background: 'rgba(0,0,0,0.08)', borderRadius: 2, overflow: 'hidden', margin: '2px 0' }}>\n                  <div style={{ width: `${ghiPct}%`, height: '100%', background: ghiColor, borderRadius: 2 }} />\n                </div>\n                <span style={{ fontSize: '0.6rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{Math.round(ghi)} W/m</span>\n                {/* Humidity bar */}\n                {humPct != null && (\n                  <>\n                    <div title={`Humidity ${Math.round(humPct)}%`} style={{ width: '100%', height: 3, background: 'rgba(0,0,0,0.06)', borderRadius: 2, overflow: 'hidden', margin: '2px 0' }}>\n                      <div style={{ width: `${humPct}%`, height: '100%', background: humColor, borderRadius: 2 }} />\n                    </div>\n                    <span style={{ fontSize: '0.6rem', color: humColor, fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}>{Math.round(humPct)}%</span>\n                  </>\n                )}\n                {/* Precipitation probability bar */}\n                {precip != null && (\n                  <>\n                    <div title={`Rain ${Math.round(precip)}%`} style={{ width: '100%', height: 3, background: 'rgba(0,0,0,0.06)', borderRadius: 2, overflow: 'hidden', margin: '2px 0' }}>\n                      <div style={{ width: `${precip}%`, height: '100%', background: precipColor, borderRadius: 2 }} />\n                    </div>\n                    <span style={{ fontSize: '0.6rem', color: precipColor, fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}>{Math.round(precip)}%</span>\n                  </>\n                )}\n                <span style={{ fontSize: '0.6rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{wind.toFixed(1)} m/s</span>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n//  Daily Energy Breakdown \n\nconst EnergyBreakdownRow = ({ latest }: { latest: any }) => {\n  if (!latest) return null;\n  const items = [\n    { label: 'PV Yield',    value: latest.pv_today_kwh,              color: '#F07522', bg: '#F0752212', icon: '' },\n    { label: 'Grid In',     value: latest.grid_buy_today_kwh,         color: '#3b82f6', bg: '#3b82f612', icon: '' },\n    { label: 'Grid Out',    value: latest.grid_sell_today_kwh,        color: '#10b981', bg: '#10b98112', icon: '' },\n    { label: 'Batt Chg',    value: latest.batt_charge_today_kwh,      color: '#8b5cf6', bg: '#8b5cf612', icon: '' },\n    { label: 'Batt Dchg',   value: latest.batt_discharge_today_kwh,   color: '#ec4899', bg: '#ec489912', icon: '' },\n    { label: 'Consumption', value: latest.load_today_kwh,             color: '#6b7280', bg: '#6b728012', icon: '' },\n  ].filter(e => e.value != null);\n  if (!items.length) return null;\n\n  return (\n    <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap', marginBottom: '1rem', alignItems: 'center' }}>\n      <span style={{ fontSize: '0.65rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif', alignSelf: 'center', minWidth: 40 }}>Today</span>\n      {items.map(e => (\n        <span key={e.label} style={{\n          fontSize: '0.72rem', fontWeight: 600, fontFamily: 'Poppins, sans-serif',\n          padding: '0.2rem 0.65rem', borderRadius: 99,\n          background: e.bg, border: `1px solid ${e.color}28`,\n          color: e.color, display: 'flex', alignItems: 'center', gap: '0.3rem',\n        }}>\n          <span style={{ opacity: 0.85 }}>{e.icon}</span>\n          {e.label}:&nbsp;\n          <span style={{ fontFamily: 'JetBrains Mono, monospace', color: 'var(--text-primary)' }}>{Number(e.value).toFixed(2)}</span>\n          <span style={{ fontSize: '0.6rem', color: 'var(--text-muted)' }}>kWh</span>\n        </span>\n      ))}\n    </div>\n  );\n};\n\n//  Solar Insights Row \n\nconst InsightsRow = ({ latest }: { latest: any }) => {\n  if (!latest) return null;\n\n  const pvKwh    = Number(latest.pv_today_kwh      ?? 0);\n  const loadKwh  = Number(latest.load_today_kwh    ?? 0);\n  const gridBuy  = Number(latest.grid_buy_today_kwh ?? 0);\n\n  // Only render if we have at least PV data\n  if (pvKwh === 0 && loadKwh === 0) return null;\n\n  const co2Kg       = pvKwh * 0.82;  // India grid factor ~0.82 kg CO/kWh\n  // Self-sufficiency = portion of load met by solar+battery (not from grid)\n  const selfSufPct = loadKwh > 0\n    ? Math.max(0, Math.min(100, Math.round(((loadKwh - gridBuy) / loadKwh) * 100)))\n    : null;\n  const gridDepPct  = loadKwh > 0\n    ? Math.max(0, Math.min(100, Math.round((gridBuy / loadKwh) * 100)))\n    : null;\n\n  const items: { icon: string; label: string; value: string; sub?: string; color: string; bg: string }[] = [];\n\n  if (pvKwh > 0) {\n    items.push({\n      icon: '', label: 'CO Avoided',\n      value: co2Kg >= 1 ? `${co2Kg.toFixed(2)} kg` : `${(co2Kg * 1000).toFixed(0)} g`,\n      sub: 'vs grid (0.82 kg/kWh)',\n      color: '#10b981', bg: '#10b98110',\n    });\n  }\n  if (selfSufPct != null) {\n    const color = selfSufPct >= 70 ? '#00a63e' : selfSufPct >= 40 ? '#f59e0b' : '#ef4444';\n    items.push({\n      icon: '', label: 'Self-Sufficiency',\n      value: `${selfSufPct}%`,\n      sub: 'load met by solar+battery',\n      color, bg: `${color}10`,\n    });\n  }\n  if (gridDepPct != null) {\n    const color = gridDepPct <= 20 ? '#10b981' : gridDepPct <= 50 ? '#f59e0b' : '#ef4444';\n    items.push({\n      icon: '', label: 'Grid Dependency',\n      value: `${gridDepPct}%`,\n      sub: 'portion from grid',\n      color, bg: `${color}10`,\n    });\n  }\n\n  if (!items.length) return null;\n\n  return (\n    <div style={{ display: 'flex', gap: '0.6rem', flexWrap: 'wrap', marginBottom: '1rem' }}>\n      <span style={{ fontSize: '0.65rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif', alignSelf: 'center', minWidth: 40 }}>\n        Insights\n      </span>\n      {items.map(item => (\n        <div key={item.label} style={{\n          display: 'flex', alignItems: 'center', gap: '0.55rem',\n          padding: '0.35rem 0.85rem', borderRadius: 10,\n          background: item.bg, border: `1px solid ${item.color}28`,\n          flexShrink: 0,\n        }}>\n          <span style={{ fontSize: '1rem', lineHeight: 1 }}>{item.icon}</span>\n          <div style={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\n            <span style={{ fontSize: '0.62rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif', fontWeight: 600, textTransform: 'uppercase', letterSpacing: '0.04em' }}>{item.label}</span>\n            <span style={{ fontFamily: 'JetBrains Mono, monospace', fontWeight: 800, color: item.color, fontSize: '0.88rem', lineHeight: 1 }}>{item.value}</span>\n            {item.sub && <span style={{ fontSize: '0.58rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{item.sub}</span>}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\n//  Forecast Table \n\nconst REGIME_STYLE: Record<string, { bg: string; color: string }> = {\n  night:  { bg: '#1e293b1a', color: '#475569' },\n  ramp:   { bg: '#f59e0b18', color: '#d97706' },\n  midday: { bg: '#F0752218', color: '#c2410c' },\n};\n\n// XAxis tick for the forecast chart.\n// 'today' view: time on line 1 (green bold), no line 2.\n// '3d'/'7d' view: date on line 1 (green bold), time on line 2 (muted).\nconst ForecastXAxisTick = ({ x, y, payload, forecastWindow: fw }: any) => {\n  const val: string = payload?.value ?? '';\n  if (!val) return null;\n  const isToday = fw === 'today';\n  const line1 = isToday ? val : (val.split('||')[0] ?? val);\n  const line2 = isToday ? '' : (val.split('||')[1] ?? '');\n\n  return (\n    <g transform={`translate(${x},${y})`}>\n      <text x={0} y={0} dy={13} textAnchor=\"middle\" fill=\"#00a63e\" fontSize={10} fontWeight={700} fontFamily=\"Inter, sans-serif\">\n        {line1}\n      </text>\n      {!isToday && line2 && (\n        <text x={0} y={0} dy={25} textAnchor=\"middle\" fill=\"var(--text-muted)\" fontSize={9} fontFamily=\"Inter, sans-serif\">\n          {line2}\n        </text>\n      )}\n    </g>\n  );\n};\n\nconst ForecastTable = ({ data }: { data: any[] }) => {\n  const { isDark } = useTheme();\n  const theadBg  = isDark ? 'rgba(15,23,42,0.9)'  : '#f9fafb';\n  const rowBorder = isDark ? '1px solid rgba(148,163,184,0.07)' : '1px solid #f3f4f6';\n  return (\n    <div style={{ maxHeight: 300, overflowY: 'auto' }}>\n      <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '0.8rem', fontFamily: 'Inter, sans-serif' }}>\n        <thead style={{ position: 'sticky', top: 0, background: theadBg, zIndex: 1 }}>\n          <tr>\n            <th style={{ padding: '0.7rem 1rem', textAlign: 'left',   fontWeight: 600, color: 'var(--text-secondary)',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>Time</th>\n            <th style={{ padding: '0.7rem 0.6rem', textAlign: 'center', fontWeight: 600, color: 'var(--text-muted)',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>Regime</th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: '#f59e0b',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>P10 </th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: '#00a63e',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>P50</th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: '#3b82f6',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>P90 </th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: 'var(--text-muted)',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>Physics</th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: '#eab308',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>GHI W/m</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data.map((row, i) => {\n            const rc = row.regime ? (REGIME_STYLE[row.regime] ?? { bg: 'transparent', color: 'var(--text-muted)' }) : null;\n            return (\n              <tr key={i} style={{ borderBottom: rowBorder }}>\n                <td style={{ padding: '0.55rem 1rem', color: 'var(--text-primary)', fontFamily: 'JetBrains Mono, monospace' }}>\n                  {row.dateLabel ? <span style={{ marginRight: '0.5rem', color: '#00a63e', fontWeight: 700 }}>{row.dateLabel}</span> : null}\n                  {row.timeLabel ?? row.time}\n                </td>\n                <td style={{ padding: '0.4rem 0.6rem', textAlign: 'center' }}>\n                  {row.regime && rc && (\n                    <span style={{ fontSize: '0.62rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.04em', background: rc.bg, color: rc.color, padding: '2px 6px', borderRadius: 4, fontFamily: 'Poppins, sans-serif' }}>\n                      {row.regime}\n                    </span>\n                  )}\n                </td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', color: 'var(--text-secondary)' }}>{row.p10?.toFixed(3) ?? ''}</td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', fontWeight: 600, color: 'var(--text-primary)' }}>{row.p50?.toFixed(3) ?? ''}</td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', color: 'var(--text-secondary)' }}>{row.p90?.toFixed(3) ?? ''}</td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', color: 'var(--text-muted)', fontStyle: 'italic' }}>{row.physics?.toFixed(3) ?? ''}</td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', color: 'var(--text-secondary)' }}>{row.ghi?.toFixed(0) ?? ''}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\n//  Main component \n\ninterface Props {\n  siteId: string;\n  autoRefresh?: boolean;\n}\n\nconst SiteDataPanel: React.FC<Props> = ({ siteId, autoRefresh = false }) => {\n  const { isDark } = useTheme();\n\n  const [telemetry,  setTelemetry]  = useState<any[]>([]);\n  const [forecast,   setForecast]   = useState<any[]>([]);\n  const [weather,    setWeather]    = useState<any>(null);\n  const [loading,    setLoading]    = useState(true);\n  const [error,      setError]      = useState<string | null>(null);\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\n\n  const [activeTab,       setActiveTab]       = useState<TabId>('overview');\n  const [showBands,       setShowBands]       = useState<Record<string, boolean>>({ P10: true, P50: true, P90: true });\n  const [dateRange,       setDateRange]       = useState('24h');\n  const [customStartDate, setCustomStartDate] = useState('');\n  const [customEndDate,   setCustomEndDate]   = useState('');\n  // Debounced versions used as fetchAll deps  avoids a fetch on every keystroke\n  const [debouncedStart,  setDebouncedStart]  = useState('');\n  const [debouncedEnd,    setDebouncedEnd]    = useState('');\n  useEffect(() => { const t = setTimeout(() => setDebouncedStart(customStartDate), 600); return () => clearTimeout(t); }, [customStartDate]);\n  useEffect(() => { const t = setTimeout(() => setDebouncedEnd(customEndDate),     600); return () => clearTimeout(t); }, [customEndDate]);\n  const [forecastView,    setForecastView]    = useState<'chart' | 'table'>('chart');\n  const [forecastWindow,  setForecastWindow]  = useState<'today' | '3d' | '7d'>('7d');\n\n  // Drag-to-zoom state (stock-chart style)\n  const [refAreaLeft,  setRefAreaLeft]  = useState('');\n  const [refAreaRight, setRefAreaRight] = useState('');\n  const [isSelecting,  setIsSelecting]  = useState(false);\n  const [zoomStart,    setZoomStart]    = useState<string | null>(null);\n  const [zoomEnd,      setZoomEnd]      = useState<string | null>(null);\n\n  // Dark-mode-aware tooltip style for recharts  memoized so recharts never gets a new object ref\n  const tooltipStyle = useMemo(() => ({\n    background: isDark ? 'rgba(30,41,59,0.97)' : 'rgba(255,255,255,0.97)',\n    border: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : 'rgba(0,166,62,0.15)'}`,\n    borderRadius: 10,\n    color: isDark ? '#f1f5f9' : '#0a0a0a',\n    boxShadow: '0 8px 24px rgba(0,0,0,0.1)',\n    fontSize: 12,\n  }), [isDark]);\n\n  const fetchAll = useCallback(async () => {\n    try {\n      // Forecast: always next 7 days from today (independent of history dateRange)\n      const now = new Date();\n      const forecastStart = now.toISOString().split('T')[0] + 'T00:00:00Z';\n      const forecastEndDt = new Date(now.getTime() + 7 * 24 * 3600 * 1000);\n      const forecastEnd   = forecastEndDt.toISOString().split('T')[0] + 'T23:59:59Z';\n\n      // Telemetry from DynamoDB based on selected date range\n      let telemetryParams: any = {};\n      if      (dateRange === 'custom' && debouncedStart && debouncedEnd) telemetryParams = { start_date: new Date(debouncedStart).toISOString(), end_date: new Date(debouncedEnd).toISOString() };\n      else if (dateRange === '7d')  telemetryParams = { days: 7 };\n      else if (dateRange === '30d') telemetryParams = { days: 30 };\n\n      // DynamoDB telemetry TTL is 24 h  fetch S3 history for any range > 24 h\n      // so there is no gap between DynamoDB's recent 24 h and older S3 records.\n      let historyParams: { start_date: string; end_date: string } | null = null;\n      const sevenDaysAgo   = new Date(now.getTime() -  7 * 24 * 3600 * 1000);\n      const thirtyDaysAgo  = new Date(now.getTime() - 30 * 24 * 3600 * 1000);\n      if (dateRange === '7d') {\n        historyParams = { start_date: sevenDaysAgo.toISOString(), end_date: now.toISOString() };\n      } else if (dateRange === '30d') {\n        historyParams = { start_date: thirtyDaysAgo.toISOString(), end_date: now.toISOString() };\n      } else if (dateRange === 'custom' && debouncedStart && debouncedEnd) {\n        const customStart = new Date(debouncedStart);\n        const customEnd   = new Date(debouncedEnd);\n        // Always fetch S3 for the full custom range; DynamoDB + dedup handles the recent overlap\n        historyParams = { start_date: customStart.toISOString(), end_date: customEnd.toISOString() };\n      }\n\n      const results = await Promise.all([\n        apiService.getSiteTelemetry(siteId, telemetryParams),\n        apiService.getSiteForecast(siteId, { start_date: forecastStart, end_date: forecastEnd }),\n        apiService.getSiteWeather(siteId),\n        historyParams ? apiService.getSiteHistory(siteId, historyParams) : Promise.resolve(null),\n      ] as Promise<any>[]);\n      const [tel, fcst, wth, hist] = results;\n\n      // Merge DynamoDB telemetry + S3 history, deduplicate by timestamp\n      let merged: any[] = Array.isArray(tel) ? tel : [];\n      if (Array.isArray(hist) && hist.length > 0) {\n        const tsSet = new Set(merged.map((r: any) => r.timestamp));\n        const older = (hist as any[]).filter(r => !tsSet.has(r.timestamp));\n        merged = [...older, ...merged].sort((a: any, b: any) => a.timestamp.localeCompare(b.timestamp));\n      }\n\n      setTelemetry(merged);\n      setForecast(Array.isArray(fcst) ? fcst : []);\n      setWeather(wth || null);\n      setLastUpdated(new Date());\n      setError(null);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load site data');\n    } finally {\n      setLoading(false);\n    }\n  }, [siteId, dateRange, debouncedStart, debouncedEnd]);\n\n  useEffect(() => {\n    setLoading(true);\n    fetchAll();\n    if (!autoRefresh) return;\n    const id = setInterval(fetchAll, 60_000);\n    return () => clearInterval(id);\n  }, [fetchAll, autoRefresh]);\n\n  // Reset zoom when forecast window changes\n  useEffect(() => {\n    setZoomStart(null);\n    setZoomEnd(null);\n  }, [forecastWindow]);\n\n  //  Derived values \n  const latest = telemetry.length > 0 ? telemetry[telemetry.length - 1] : null;\n\n  const pvKw       = latest ? ((latest.pv1_power_w ?? 0) + (latest.pv2_power_w ?? 0)) / 1000 : null;\n  const batSoc     = latest?.battery_soc_percent ?? null;\n  const loadKw     = latest ? (latest.load_power_w    ?? 0) / 1000 : null;\n  const todayKwh   = latest?.pv_today_kwh ?? null;\n  const gridKw     = latest ? (latest.grid_power_w    ?? 0) / 1000 : null;\n  const batPowerKw = latest ? (latest.battery_power_w ?? 0) / 1000 : null;\n  const invTemp    = latest?.inverter_temp_c   ?? null;\n  const batVoltage = latest?.battery_voltage_v ?? null;\n  const runState   = latest?.run_state;\n\n  const gridImporting  = gridKw     != null && gridKw     > 0.01;\n  const gridExporting  = gridKw     != null && gridKw     < -0.01;\n  const batCharging    = batPowerKw != null && batPowerKw > 0.01;\n\n  const runStateBadge = runState != null ? (\n    runState === 0 ? { label: 'Standby', color: '#9ca3af' } :\n    runState === 1 ? { label: 'Online',  color: '#00a63e' } :\n    runState === 2 ? { label: 'Warning', color: '#f59e0b' } :\n    runState === 3 ? { label: 'Fault',   color: '#ef4444' } :\n                     { label: `State ${runState}`, color: '#6b7280' }\n  ) : null;\n\n  const invTempColor = invTemp == null ? '#9ca3af'\n    : invTemp > 60 ? '#ef4444'\n    : invTemp > 45 ? '#f59e0b'\n    : '#10b981';\n\n  //  Chart data \n  const historyData = useMemo(() => {\n    const aggregated = aggregateByPeriod(telemetry, dateRange);\n    return aggregated.map(row => ({\n      time:           fmt(row.timestamp, dateRange),\n      'PV (kW)':      +((( row.pv1_power_w ?? 0) + (row.pv2_power_w ?? 0)) / 1000).toFixed(2),\n      'Load (kW)':    +((row.load_power_w ?? 0) / 1000).toFixed(2),\n      'Grid (kW)':    +((row.grid_power_w ?? 0) / 1000).toFixed(2),\n      'Batt SOC (%)': row.battery_soc_percent ?? null,\n    }));\n  }, [telemetry, dateRange]);\n\n  // Filter + map forecast  memoized on forecast array and window selection\n  const { forecastFiltered, forecastData } = useMemo(() => {\n    const todayIST = istDate(new Date());\n    const filtered = forecast.filter(row => {\n      const clean = row.forecast_for || row.timestamp.replace('FORECAST#', '');\n      const forecastIST = istDate(new Date(clean));\n      if (forecastWindow === 'today') return forecastIST === todayIST;\n      if (forecastWindow === '3d')    return forecastIST > istDateOffset(0) && forecastIST <= istDateOffset(3);\n      // 7d: next 7 IST calendar days (today excluded)\n      return forecastIST > istDateOffset(0) && forecastIST <= istDateOffset(7);\n    });\n    const mapped = filtered.map(row => {\n      const clean = row.forecast_for || row.timestamp.replace('FORECAST#', '');\n      const d = new Date(clean);\n      const timeLabel = d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', timeZone: IST });\n      const dateLabel = forecastWindow === '3d'\n        ? d.toLocaleDateString([], { weekday: 'short', day: 'numeric', timeZone: IST })\n        : d.toLocaleDateString([], { weekday: 'short', month: 'short', day: 'numeric', timeZone: IST });\n      const rawDate = istDate(d);\n      const rawTs   = d.getTime();\n      const time    = forecastWindow === 'today' ? timeLabel : `${dateLabel}||${timeLabel}`;\n      return {\n        time, dateLabel, timeLabel, rawDate, rawTs,\n        p50:     row.p50_kw             != null ? +Number(row.p50_kw).toFixed(3)             : null,\n        p10:     row.p10_kw             != null ? +Number(row.p10_kw).toFixed(3)             : null,\n        p90:     row.p90_kw             != null ? +Number(row.p90_kw).toFixed(3)             : null,\n        physics: row.physics_baseline_kw != null ? +Number(row.physics_baseline_kw).toFixed(3) : null,\n        ghi:     row.ghi_input_wm2      != null ? +row.ghi_input_wm2                        : null,\n        temp:    row.temperature_c      != null ? +row.temperature_c                         : null,\n        regime:  row.regime             ?? null,\n      };\n    });\n    return { forecastFiltered: filtered, forecastData: mapped };\n  }, [forecast, forecastWindow]);\n\n  // Zoom-sliced data for the chart (stock-market drag-to-zoom)\n  const zoomedForecastData = useMemo(() => {\n    if (!zoomStart || !zoomEnd) return forecastData;\n    const li = forecastData.findIndex(d => d.time === zoomStart);\n    const ri = forecastData.findIndex(d => d.time === zoomEnd);\n    if (li === -1 || ri === -1 || li === ri) return forecastData;\n    const [s, e] = li < ri ? [li, ri] : [ri, li];\n    return forecastData.slice(s, e + 1);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [forecastData, zoomStart, zoomEnd]);\n\n  // Pre-computed tick list for XAxis.\n  // For today: one tick per even IST hour (every 2h = UTC minutes=30, UTC hours even).\n  // For 3d/7d: one tick per IST calendar day, placed at 12:00 PM IST (06:30 UTC).\n  // Falls back to the first slot of that day if the noon slot isn't in the data.\n  const forecastTickObjects = useMemo(() => {\n    if (forecastWindow === 'today') {\n      // Pick slots at even IST hours (00:00, 02:00, 04:00, ... 22:00 IST)\n      // Even IST hours  UTC minutes=30 and UTC hours even\n      return zoomedForecastData.filter(d => {\n        const t = new Date(d.rawTs);\n        return t.getUTCMinutes() === 30 && t.getUTCHours() % 2 === 0;\n      });\n    }\n    // Build a map: rawDate  best tick (noon preferred, else first of day)\n    const dayMap = new Map<string, (typeof zoomedForecastData)[0]>();\n    for (const d of zoomedForecastData) {\n      if (!dayMap.has(d.rawDate)) dayMap.set(d.rawDate, d); // first = fallback\n      // 12:00 PM IST = 06:30 UTC\n      const t = new Date(d.rawTs);\n      if (t.getUTCHours() === 6 && t.getUTCMinutes() === 30) {\n        dayMap.set(d.rawDate, d); // overwrite with noon slot\n      }\n    }\n    return Array.from(dayMap.values());\n  }, [zoomedForecastData, forecastWindow]);\n  const forecastTickValues = forecastTickObjects?.map(d => d.time);\n\n  // \"Last updated\" = most recent generated_at across ALL fetched records  memoized on forecast array\n  const forecastGeneratedAt = useMemo<Date | null>(() => {\n    if (forecast.length === 0) return null;\n    let maxGenAt = '';\n    for (const row of forecast) {\n      if (row.generated_at && row.generated_at > maxGenAt) maxGenAt = row.generated_at;\n    }\n    if (maxGenAt) return new Date(maxGenAt);\n    if (forecast[0].timestamp) {\n      return new Date(forecast[0].timestamp.replace('FORECAST#', '').split('T')[0] + 'T00:00:00Z');\n    }\n    return null;\n  }, [forecast]);\n\n  // Trapezoidal energy integration over the selected forecast window  memoized on filtered data\n  const { fcastP10, fcastP50, fcastP90 } = useMemo(() => {\n    let p10 = 0, p50 = 0, p90 = 0;\n    if (forecastFiltered.length > 1) {\n      for (let i = 0; i < forecastFiltered.length - 1; i++) {\n        const h = Math.abs(\n          new Date(forecastFiltered[i+1].timestamp.replace('FORECAST#', '')).getTime() -\n          new Date(forecastFiltered[i].timestamp.replace('FORECAST#', '')).getTime()\n        ) / 3_600_000;\n        if (forecastFiltered[i].p10_kw != null && forecastFiltered[i+1].p10_kw != null) p10 += (forecastFiltered[i].p10_kw + forecastFiltered[i+1].p10_kw) / 2 * h;\n        if (forecastFiltered[i].p50_kw != null && forecastFiltered[i+1].p50_kw != null) p50 += (forecastFiltered[i].p50_kw + forecastFiltered[i+1].p50_kw) / 2 * h;\n        if (forecastFiltered[i].p90_kw != null && forecastFiltered[i+1].p90_kw != null) p90 += (forecastFiltered[i].p90_kw + forecastFiltered[i+1].p90_kw) / 2 * h;\n      }\n    }\n    return { fcastP10: p10, fcastP50: p50, fcastP90: p90 };\n  }, [forecastFiltered]);\n\n  // achievedPct: today's actual kWh vs today's P50 forecast  memoized on forecast + todayKwh\n  const achievedPct = useMemo(() => {\n    const todayISTStr = istDate(new Date());\n    const todayForecast = forecast.filter(row => {\n      const clean = row.forecast_for || row.timestamp.replace('FORECAST#', '');\n      return istDate(new Date(clean)) === todayISTStr;\n    });\n    let todayFcastP50 = 0;\n    if (todayForecast.length > 1) {\n      for (let i = 0; i < todayForecast.length - 1; i++) {\n        const h = Math.abs(\n          new Date(todayForecast[i+1].timestamp.replace('FORECAST#', '')).getTime() -\n          new Date(todayForecast[i].timestamp.replace('FORECAST#', '')).getTime()\n        ) / 3_600_000;\n        if (todayForecast[i].p50_kw != null && todayForecast[i+1].p50_kw != null)\n          todayFcastP50 += (todayForecast[i].p50_kw + todayForecast[i+1].p50_kw) / 2 * h;\n      }\n    }\n    return todayKwh != null && todayFcastP50 > 0\n      ? Math.min(999, Math.round((todayKwh / todayFcastP50) * 100))\n      : null;\n  }, [forecast, todayKwh]);\n\n  //  Derived dark-mode colours \n  const cardBg     = isDark ? 'rgba(30,41,59,0.85)'   : '#ffffff';\n  const headerGrad = isDark ? 'rgba(30,41,59,0.6)'    : 'linear-gradient(to right,#ffffff,#f9fafb)';\n  const toggleBg   = isDark ? 'rgba(15,23,42,0.6)'    : '#f3f4f6';\n  const toggleActive = isDark ? 'rgba(30,41,59,0.95)' : '#fff';\n  const borderClr  = isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb';\n\n  //  Render \n  if (loading) {\n    return (\n      <div style={{ padding: '1.5rem 0' }}>\n        <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem', flexWrap: 'wrap' }}>\n          {[...Array(6)].map((_, i) => <div key={i} className=\"card skeleton\" style={{ flex: 1, minWidth: 140, height: 100 }} />)}\n        </div>\n        <div className=\"card skeleton\" style={{ height: 52, marginBottom: '0.75rem' }} />\n        <div className=\"card skeleton\" style={{ height: 130, marginBottom: '1rem' }} />\n        <div className=\"card skeleton\" style={{ height: 240, marginBottom: '1rem' }} />\n        <div className=\"card skeleton\" style={{ height: 200 }} />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ padding: '1.5rem', color: '#ef4444', fontSize: '0.85rem', background: 'rgba(239,68,68,0.06)', borderRadius: 10, marginTop: '1rem' }}>\n        Failed to load DynamoDB data for <strong>{siteId}</strong>: {error}\n      </div>\n    );\n  }\n\n  const noData = telemetry.length === 0 && forecast.length === 0 && !weather;\n\n  return (\n    <div style={{ marginTop: '1.5rem' }}>\n\n      {/*  Section header  */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.75rem', gap: '1rem', flexWrap: 'wrap' }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', flexWrap: 'wrap' }}>\n          <p className=\"dash-section-label\" style={{ margin: 0 }}>\n            Live Site Intelligence  <span style={{ fontFamily: 'JetBrains Mono, monospace', color: '#00a63e' }}>{siteId}</span>\n          </p>\n          {runStateBadge && (\n            <span style={{\n              fontSize: '0.65rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em',\n              background: `${runStateBadge.color}18`, color: runStateBadge.color,\n              padding: '2px 8px', borderRadius: 99, fontFamily: 'Poppins, sans-serif',\n              border: `1px solid ${runStateBadge.color}30`,\n            }}>\n               {runStateBadge.label}\n            </span>\n          )}\n        </div>\n\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', flexWrap: 'wrap' }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n            {/* History range  shown on Overview and History tabs */}\n            {(activeTab === 'overview' || activeTab === 'history') && (<>\n              <select\n                value={dateRange}\n                onChange={e => setDateRange(e.target.value)}\n                style={{ background: 'var(--bg-card,#fff)', border: '1px solid rgba(0,166,62,0.2)', borderRadius: 8, padding: '0.3rem 0.6rem', fontSize: '0.72rem', color: 'var(--text-primary,#0a0a0a)', cursor: 'pointer', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}\n              >\n                <option value=\"24h\">Today</option>\n                <option value=\"7d\">Last 7 days</option>\n                <option value=\"30d\">Last 30 days</option>\n                <option value=\"custom\">Custom range</option>\n              </select>\n              {dateRange === 'custom' && (<>\n                <input type=\"date\" value={customStartDate} onChange={e => setCustomStartDate(e.target.value)}\n                  style={{ background: 'var(--bg-card,#fff)', border: '1px solid rgba(0,166,62,0.2)', borderRadius: 8, padding: '0.3rem 0.6rem', fontSize: '0.72rem', color: 'var(--text-primary,#0a0a0a)', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }} />\n                <span style={{ color: 'var(--text-muted)', fontSize: '0.7rem' }}>to</span>\n                <input type=\"date\" value={customEndDate} onChange={e => setCustomEndDate(e.target.value)}\n                  style={{ background: 'var(--bg-card,#fff)', border: '1px solid rgba(0,166,62,0.2)', borderRadius: 8, padding: '0.3rem 0.6rem', fontSize: '0.72rem', color: 'var(--text-primary,#0a0a0a)', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }} />\n              </>)}\n            </>)}\n            {/* Forecast window  shown on Forecast tab */}\n            {activeTab === 'forecast' && (\n              <select\n                value={forecastWindow}\n                onChange={e => setForecastWindow(e.target.value as 'today' | '3d' | '7d')}\n                style={{ background: 'var(--bg-card,#fff)', border: '1px solid rgba(0,166,62,0.2)', borderRadius: 8, padding: '0.3rem 0.6rem', fontSize: '0.72rem', color: 'var(--text-primary,#0a0a0a)', cursor: 'pointer', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}\n              >\n                <option value=\"today\">Today</option>\n                <option value=\"3d\">Next 3 days</option>\n                <option value=\"7d\">Next 7 days</option>\n              </select>\n            )}\n          </div>\n          {lastUpdated && (\n            <span style={{ fontSize: '0.7rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>\n              Updated {lastUpdated.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', timeZone: IST })} IST\n            </span>\n          )}\n          <button\n            onClick={() => { setLoading(true); fetchAll(); }}\n            style={{ background: 'none', border: '1px solid rgba(0,166,62,0.2)', borderRadius: 8, padding: '0.2rem 0.6rem', fontSize: '0.72rem', color: '#00a63e', cursor: 'pointer', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}\n          > Refresh</button>\n        </div>\n      </div>\n\n      {noData ? (\n        <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)', fontSize: '0.875rem', background: 'rgba(0,166,62,0.03)', borderRadius: 12, border: '1px dashed rgba(0,166,62,0.15)' }}>\n          No DynamoDB data found for site <strong style={{ color: '#00a63e' }}>{siteId}</strong> in the {\n            dateRange === '24h' ? 'today' : dateRange === '7d' ? 'last 7 days' : dateRange === '30d' ? 'last 30 days' : 'selected date range'\n          }.<br />\n          <span style={{ fontSize: '0.78rem' }}>Data is written by the ML forecast scheduler when the device is actively posting telemetry.</span>\n        </div>\n      ) : (<>\n\n        {/*  Tab Bar  */}\n        <div style={{ display: 'flex', borderBottom: `2px solid ${isDark ? 'rgba(148,163,184,0.12)' : '#f3f4f6'}`, marginBottom: '1rem', gap: 0 }}>\n          {TABS.map(tab => {\n            const isActive = activeTab === tab.id;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                style={{\n                  border: 'none', background: 'transparent', cursor: 'pointer',\n                  padding: '0.5rem 1rem',\n                  fontSize: '0.78rem', fontWeight: isActive ? 700 : 600,\n                  fontFamily: 'Poppins, sans-serif',\n                  color: isActive ? '#00a63e' : 'var(--text-muted)',\n                  borderBottom: `2px solid ${isActive ? '#00a63e' : 'transparent'}`,\n                  marginBottom: -2,\n                  display: 'flex', alignItems: 'center', gap: '0.35rem',\n                  transition: 'color 0.15s',\n                  letterSpacing: '0.01em',\n                }}\n              >\n                <span>{tab.icon}</span>\n                <span>{tab.label}</span>\n              </button>\n            );\n          })}\n        </div>\n\n        {/*  OVERVIEW TAB  */}\n        {activeTab === 'overview' && (<>\n\n          {/* 6-card KPI strip */}\n          <div style={{ display: 'flex', gap: '0.75rem', flexWrap: 'wrap', marginBottom: '0.75rem' }}>\n            <KpiCard\n              label=\"PV Power\" value={pvKw != null ? pvKw.toFixed(2) : ''} unit=\"kW\"\n              sub={latest?.pv1_power_w != null && latest?.pv2_power_w != null\n                ? `S1: ${(latest.pv1_power_w/1000).toFixed(2)}  S2: ${(latest.pv2_power_w/1000).toFixed(2)} kW`\n                : 'Current generation'}\n              accent=\"#F07522\" icon={<IconSun />}\n            />\n            <KpiCard\n              label=\"Battery\" value={batSoc != null ? batSoc.toFixed(1) : ''} unit=\"%\"\n              sub={batVoltage != null ? `${batVoltage.toFixed(1)} V` : 'State of charge'}\n              accent=\"#00a63e\" icon={<IconBattery />}\n              badge={batPowerKw != null && Math.abs(batPowerKw) > 0.01 ? (\n                <span style={{ fontSize: '0.65rem', fontWeight: 700, color: batCharging ? '#00a63e' : '#ec4899', fontFamily: 'Poppins, sans-serif' }}>\n                  {batCharging ? ' Charging' : ' Discharging'} {Math.abs(batPowerKw).toFixed(2)} kW\n                </span>\n              ) : <span style={{ fontSize: '0.65rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>Idle</span>}\n            />\n            <KpiCard\n              label=\"Load\" value={loadKw != null ? loadKw.toFixed(2) : ''} unit=\"kW\"\n              sub=\"Current consumption\" accent=\"#8b5cf6\" icon={<IconLoad />}\n            />\n            <KpiCard\n              label=\"Energy Today\" value={todayKwh != null ? todayKwh.toFixed(2) : ''} unit=\"kWh\"\n              sub=\"Solar yield today\" accent=\"#10b981\" icon={<IconEnergy />}\n            />\n            <KpiCard\n              label=\"Grid\" value={gridKw != null ? Math.abs(gridKw).toFixed(2) : ''} unit=\"kW\"\n              sub={latest?.grid_voltage_v != null\n                ? `${Number(latest.grid_voltage_v).toFixed(0)} V  ${Number(latest.grid_frequency_hz ?? 0).toFixed(1)} Hz`\n                : 'Grid power'}\n              accent=\"#3b82f6\" icon={<IconGrid />}\n              badge={gridKw != null ? (\n                <span style={{ fontSize: '0.65rem', fontWeight: 700, color: gridImporting ? '#3b82f6' : gridExporting ? '#10b981' : 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>\n                  {gridImporting ? ' Importing' : gridExporting ? ' Exporting' : ' Standby'}\n                </span>\n              ) : undefined}\n            />\n            <KpiCard\n              label=\"Inv. Temp\" value={invTemp != null ? invTemp.toFixed(1) : ''} unit=\"C\"\n              sub={invTemp != null\n                ? invTemp > 60 ? ' Hot  check cooling' : invTemp > 45 ? ' Warm' : ' Normal'\n                : 'No data'}\n              accent={invTempColor} icon={<IconThermometer />}\n            />\n          </div>\n\n          {/* Daily energy breakdown */}\n          <EnergyBreakdownRow latest={latest} />\n          <InsightsRow latest={latest} />\n\n        </>)}\n\n        {/*  WEATHER TAB  */}\n        {activeTab === 'weather' && (<>\n\n          {/* Current weather pills */}\n          {weather?.current ? (\n            <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap', marginBottom: '0.75rem', alignItems: 'center' }}>\n              <span style={{ fontSize: '0.65rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>Now</span>\n              {[\n                { label: 'Temp',     value: weather.current.temperature_c  != null ? `${Number(weather.current.temperature_c).toFixed(1)} C`  : null },\n                { label: 'Humidity', value: weather.current.humidity_pct   != null ? `${weather.current.humidity_pct} %`                        : null },\n                { label: 'Cloud',    value: weather.current.cloud_cover_pct != null ? `${weather.current.cloud_cover_pct} %`                    : null, icon: <IconCloud /> },\n                { label: 'Wind',     value: weather.current.wind_speed_ms  != null ? `${Number(weather.current.wind_speed_ms).toFixed(1)} m/s`  : null },\n                { label: 'GHI',      value: weather.current.ghi_wm2        != null ? `${Math.round(weather.current.ghi_wm2)} W/m`              : null },\n              ].filter(p => p.value).map(p => (\n                <span key={p.label} style={{\n                  fontSize: '0.72rem', fontWeight: 600, fontFamily: 'Poppins, sans-serif',\n                  padding: '0.2rem 0.65rem', borderRadius: 99,\n                  background: 'rgba(0,166,62,0.07)', border: '1px solid rgba(0,166,62,0.12)',\n                  color: '#007a55', display: 'flex', alignItems: 'center', gap: '0.3rem',\n                }}>\n                  {(p as any).icon}{p.label}: <span style={{ fontFamily: 'JetBrains Mono, monospace', color: 'var(--text-primary)' }}>{p.value}</span>\n                </span>\n              ))}\n            </div>\n          ) : (\n            <div style={{ padding: '1.5rem', textAlign: 'center', color: 'var(--text-muted)', fontSize: '0.85rem', background: isDark ? 'rgba(0,0,0,0.15)' : 'rgba(0,166,62,0.03)', borderRadius: 12, border: '1px dashed rgba(0,166,62,0.15)', marginBottom: '1rem' }}>\n              No current weather data available.\n            </div>\n          )}\n\n          {/* 24 h weather outlook */}\n          {weather?.hourly_forecast && weather.hourly_forecast.length > 0\n            ? <WeatherHourlyStrip hourly={weather.hourly_forecast} />\n            : !weather?.current && null\n          }\n\n        </>)}\n\n        {/*  HISTORY TAB  */}\n        {activeTab === 'history' && (\n          historyData.length > 0 ? (\n            <div className=\"card\" style={{ padding: '1.25rem', marginBottom: '1rem' }}>\n              <div style={{ marginBottom: '0.75rem' }}>\n                <h3 style={{ margin: '0 0 0.2rem', fontSize: '0.9rem', fontFamily: 'Urbanist, sans-serif', color: 'var(--text-primary)' }}>\n                  Power History  {\n                    dateRange === '24h'   ? 'Today' :\n                    dateRange === '7d'    ? 'Last 7 days' :\n                    dateRange === '30d'   ? 'Last 30 days' :\n                    customStartDate && customEndDate\n                      ? `${new Date(customStartDate).toLocaleDateString([], { timeZone: IST })}  ${new Date(customEndDate).toLocaleDateString([], { timeZone: IST })}`\n                      : 'Custom range'\n                  }\n                </h3>\n                <p style={{ margin: 0, fontSize: '0.68rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>\n                  {dateRange === '7d' ? 'Hourly aggregates' : dateRange !== '24h' ? 'Daily aggregates' : '30-min samples'}  Battery SOC on right axis\n                </p>\n              </div>\n              <div style={{ height: 240 }}>\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <AreaChart data={historyData} margin={{ top: 4, right: 44, left: 0, bottom: dateRange === '7d' || dateRange === '30d' ? 20 : 0 }}>\n                    <defs>\n                      <linearGradient id=\"pvGrad\"   x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"5%\"  stopColor=\"#F07522\" stopOpacity={0.22}/>\n                        <stop offset=\"95%\" stopColor=\"#F07522\" stopOpacity={0}/>\n                      </linearGradient>\n                      <linearGradient id=\"loadGrad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"5%\"  stopColor=\"#8b5cf6\" stopOpacity={0.18}/>\n                        <stop offset=\"95%\" stopColor=\"#8b5cf6\" stopOpacity={0}/>\n                      </linearGradient>\n                    </defs>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke={isDark ? 'rgba(148,163,184,0.07)' : 'rgba(0,166,62,0.08)'} />\n                    <XAxis\n                      dataKey=\"time\" stroke=\"var(--text-muted)\"\n                      interval={dateRange === '24h' ? 'preserveStartEnd' : Math.ceil(historyData.length / 10)}\n                      angle={dateRange === '7d' || dateRange === '30d' ? -15 : 0}\n                      textAnchor={dateRange === '7d' || dateRange === '30d' ? 'end' : 'middle'}\n                      tick={{ fontSize: dateRange === '30d' ? 9 : 10, fill: 'var(--text-muted)' }}\n                    />\n                    <YAxis yAxisId=\"power\" stroke=\"var(--text-muted)\" tickFormatter={(v: number) => `${v}kW`} tick={{ fontSize: 10, fill: 'var(--text-muted)' }} />\n                    <YAxis yAxisId=\"soc\" orientation=\"right\" stroke=\"var(--text-muted)\" domain={[0, 100]} tickFormatter={(v: number) => `${v}%`} width={36} tick={{ fontSize: 10, fill: 'var(--text-muted)' }} />\n                    <Tooltip contentStyle={tooltipStyle} formatter={(v: any, name: any) => [`${v} ${String(name).includes('%') ? '%' : 'kW'}`, name]} />\n                    <Legend iconType=\"circle\" iconSize={8} wrapperStyle={{ fontSize: 11, fontFamily: 'Poppins, sans-serif', color: 'var(--text-secondary)' }} />\n                    <Area yAxisId=\"power\" type=\"monotone\" dataKey=\"PV (kW)\"   stroke=\"#F07522\" strokeWidth={2} fill=\"url(#pvGrad)\"   dot={false} />\n                    <Area yAxisId=\"power\" type=\"monotone\" dataKey=\"Load (kW)\" stroke=\"#8b5cf6\" strokeWidth={2} fill=\"url(#loadGrad)\" dot={false} />\n                    <Line  yAxisId=\"power\" type=\"monotone\" dataKey=\"Grid (kW)\"     stroke=\"#3b82f6\" strokeWidth={1.5} dot={false} strokeDasharray=\"4 3\" />\n                    <Line  yAxisId=\"soc\"   type=\"monotone\" dataKey=\"Batt SOC (%)\"  stroke=\"#00a63e\" strokeWidth={1.5} dot={false} strokeDasharray=\"2 3\" />\n                  </AreaChart>\n                </ResponsiveContainer>\n              </div>\n            </div>\n          ) : (\n            <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)', fontSize: '0.875rem', background: isDark ? 'rgba(0,0,0,0.15)' : 'rgba(0,166,62,0.03)', borderRadius: 12, border: '1px dashed rgba(0,166,62,0.15)' }}>\n              No telemetry history data available for the selected range.\n            </div>\n          )\n        )}\n\n        {/*  FORECAST TAB  */}\n        {activeTab === 'forecast' && (\n          forecastData.length > 0 ? (\n            <div className=\"card\" style={{ padding: 0, boxShadow: '0 10px 30px -5px rgba(0,0,0,0.1)', border: `1px solid ${borderClr}`, borderRadius: 16, background: cardBg, overflow: 'hidden' }}>\n\n              {/* Header */}\n              <div style={{ padding: '1.25rem 1.5rem', borderBottom: `1px solid ${borderClr}`, display: 'flex', flexWrap: 'wrap', gap: '1rem', alignItems: 'center', justifyContent: 'space-between', background: headerGrad }}>\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '0.25rem' }}>\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                    <div style={{ width: 32, height: 32, borderRadius: 8, background: 'rgba(0,166,62,0.1)', color: '#00a63e', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '1.1rem' }}></div>\n                    <h3 style={{ margin: 0, fontSize: '1.1rem', fontFamily: 'Urbanist, sans-serif', color: 'var(--text-primary)', fontWeight: 700 }}>Solar Forecast</h3>\n                  </div>\n                  {fcastP50 > 0 && (\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.6rem', marginLeft: '2.5rem', flexWrap: 'wrap' }}>\n                      <span style={{ fontSize: '0.82rem', color: 'var(--text-muted)', fontFamily: 'Inter, sans-serif' }}>\n                      {forecastWindow === 'today' ? 'Today' : forecastWindow === '3d' ? '3-day' : '7-day'} Est. Yield:\n                    </span>\n                      <span style={{ fontFamily: 'JetBrains Mono, monospace', fontSize: '0.82rem', fontWeight: 600, color: 'var(--text-primary)', background: isDark ? 'rgba(148,163,184,0.1)' : '#f3f4f6', padding: '2px 7px', borderRadius: 4 }}>\n                        {fcastP10.toFixed(1)} <span style={{ color: 'var(--text-muted)' }}>/</span> <span style={{ color: '#00a63e' }}>{fcastP50.toFixed(1)}</span> <span style={{ color: 'var(--text-muted)' }}>/</span> {fcastP90.toFixed(1)} kWh\n                      </span>\n                      {achievedPct != null && (\n                        <span style={{\n                          fontSize: '0.72rem', fontWeight: 700, fontFamily: 'Poppins, sans-serif',\n                          padding: '2px 8px', borderRadius: 99,\n                          background: achievedPct >= 80 ? '#10b98118' : achievedPct >= 40 ? '#f59e0b18' : isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb',\n                          color:      achievedPct >= 80 ? '#059669'  : achievedPct >= 40 ? '#d97706'  : 'var(--text-muted)',\n                          border:     `1px solid ${achievedPct >= 80 ? '#10b98128' : achievedPct >= 40 ? '#f59e0b28' : borderClr}`,\n                        }}>\n                          {achievedPct}% achieved\n                        </span>\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                {/* Controls */}\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', flexWrap: 'wrap' }}>\n                  {/* Chart / Table toggle */}\n                  <div style={{ display: 'flex', background: toggleBg, borderRadius: 8, padding: 3 }}>\n                    {(['chart', 'table'] as const).map(v => (\n                      <button key={v} onClick={() => setForecastView(v)} style={{ border: 'none', background: forecastView === v ? toggleActive : 'transparent', color: forecastView === v ? '#00a63e' : 'var(--text-muted)', borderRadius: 6, padding: '0.35rem 0.75rem', fontSize: '0.75rem', fontWeight: 600, cursor: 'pointer', boxShadow: forecastView === v ? '0 1px 3px rgba(0,0,0,0.1)' : 'none', textTransform: 'capitalize' }}>\n                        {v}\n                      </button>\n                    ))}\n                  </div>\n\n                  {/* Band toggles */}\n                  {forecastView === 'chart' && (\n                    <div style={{ display: 'flex', background: toggleBg, padding: 3, borderRadius: 8 }}>\n                      {[{ label: 'P10', color: '#f59e0b', desc: 'Conservative' }, { label: 'P50', color: '#00a63e', desc: 'Median' }, { label: 'P90', color: '#3b82f6', desc: 'Optimistic' }].map(b => (\n                        <button key={b.label} onClick={() => setShowBands(s => ({ ...s, [b.label]: !s[b.label] }))} style={{ border: 'none', background: showBands[b.label] ? toggleActive : 'transparent', color: showBands[b.label] ? b.color : 'var(--text-muted)', boxShadow: showBands[b.label] ? '0 2px 4px rgba(0,0,0,0.05)' : 'none', borderRadius: 6, padding: '0.35rem 0.75rem', fontSize: '0.75rem', fontWeight: 600, cursor: 'pointer', transition: 'all 0.2s', display: 'flex', alignItems: 'center', gap: 4 }} title={b.desc}>\n                          <span style={{ width: 6, height: 6, borderRadius: '50%', background: showBands[b.label] ? b.color : isDark ? '#475569' : '#d1d5db' }} />\n                          {b.label}\n                        </button>\n                      ))}\n                    </div>\n                  )}\n\n                  {/* Export */}\n                  <button\n                    onClick={async () => {\n                      const el = document.getElementById('forecast-chart-container');\n                      if (el) {\n                        const { default: html2canvas } = await import('html2canvas');\n                        const canvas = await html2canvas(el, { background: '#ffffff', scale: 2 } as any);\n                        const a = document.createElement('a');\n                        a.download = `solar-forecast-${new Date().toISOString().slice(0,10)}.png`;\n                        a.href = canvas.toDataURL(); a.click();\n                      }\n                    }}\n                    style={{ background: 'transparent', border: `1px solid ${borderClr}`, color: 'var(--text-secondary)', borderRadius: 8, padding: '0.4rem 0.8rem', fontSize: '0.8rem', fontWeight: 600, cursor: 'pointer', transition: 'all 0.2s', display: 'flex', alignItems: 'center', gap: 6 }}\n                    onMouseOver={e => e.currentTarget.style.background = isDark ? 'rgba(148,163,184,0.07)' : '#f9fafb'}\n                    onMouseOut={e  => e.currentTarget.style.background = 'transparent'}\n                  >\n                    <span></span><span>Save</span>\n                  </button>\n\n                  {/* CSV Export */}\n                  <button\n                    onClick={() => {\n                      if (!forecastData || forecastData.length === 0) return;\n                      // Get all keys from the first row\n                      const keys = Object.keys(forecastData[0]);\n                      // Build CSV header\n                      const header = keys.join(',');\n                      // Build CSV rows\n                      const rows = forecastData.map(row => keys.map(k => JSON.stringify((row as Record<string, any>)[k] ?? '')).join(','));\n                      const csv = [header, ...rows].join('\\n');\n                      // Download\n                      const blob = new Blob([csv], { type: 'text/csv' });\n                      const url = URL.createObjectURL(blob);\n                      const a = document.createElement('a');\n                      a.href = url;\n                      a.download = `solar-forecast-${new Date().toISOString().slice(0,10)}.csv`;\n                      document.body.appendChild(a);\n                      a.click();\n                      document.body.removeChild(a);\n                      URL.revokeObjectURL(url);\n                    }}\n                    style={{ background: 'transparent', border: `1px solid ${borderClr}`, color: '#00a63e', borderRadius: 8, padding: '0.4rem 0.8rem', fontSize: '0.8rem', fontWeight: 600, cursor: 'pointer', transition: 'all 0.2s', display: 'flex', alignItems: 'center', gap: 6 }}\n                    onMouseOver={e => e.currentTarget.style.background = isDark ? 'rgba(148,163,184,0.07)' : '#f9fafb'}\n                    onMouseOut={e  => e.currentTarget.style.background = 'transparent'}\n                  >\n                    <span></span><span>CSV</span>\n                  </button>\n                </div>\n              </div>\n\n              {/* Chart / Table area */}\n              <div id=\"forecast-chart-container\" style={{ padding: '0 1.5rem 1.5rem 0.5rem', background: cardBg, position: 'relative' }}>\n                {forecastView === 'chart' ? (\n                  <div style={{ height: forecastWindow === '7d' ? 360 : 300, width: '100%', userSelect: 'none', cursor: isSelecting ? 'crosshair' : 'default' }}>\n                    <ResponsiveContainer>\n                      <AreaChart\n                        data={zoomedForecastData}\n                        margin={{ top: 20, right: 10, left: 0, bottom: forecastWindow !== 'today' ? 10 : 0 }}\n                        onMouseDown={(e: any) => {\n                          if (e?.activeLabel) { setRefAreaLeft(e.activeLabel); setIsSelecting(true); }\n                        }}\n                        onMouseMove={(e: any) => {\n                          if (isSelecting && e?.activeLabel) setRefAreaRight(e.activeLabel);\n                        }}\n                        onMouseUp={() => {\n                          if (refAreaLeft && refAreaRight && refAreaLeft !== refAreaRight) {\n                            setZoomStart(refAreaLeft);\n                            setZoomEnd(refAreaRight);\n                          }\n                          setIsSelecting(false);\n                          setRefAreaLeft('');\n                          setRefAreaRight('');\n                        }}\n                      >\n                        <defs>\n                          <linearGradient id=\"p50Grad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"5%\"  stopColor=\"#00a63e\" stopOpacity={0.2}/>\n                            <stop offset=\"95%\" stopColor=\"#00a63e\" stopOpacity={0}/>\n                          </linearGradient>\n                          <linearGradient id=\"p90Grad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"5%\"  stopColor=\"#3b82f6\" stopOpacity={0.14}/>\n                            <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0}/>\n                          </linearGradient>\n                          <linearGradient id=\"p10Grad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"5%\"  stopColor=\"#f59e0b\" stopOpacity={0.14}/>\n                            <stop offset=\"95%\" stopColor=\"#f59e0b\" stopOpacity={0}/>\n                          </linearGradient>\n                        </defs>\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke={isDark ? 'rgba(148,163,184,0.07)' : '#f3f4f6'} vertical={false} />\n                        <XAxis\n                          dataKey=\"time\" stroke=\"var(--text-muted)\"\n                          tickLine={false} axisLine={false}\n                          height={42}\n                          allowDataOverflow type=\"category\"\n                          ticks={forecastTickValues}\n                          minTickGap={-1}\n                          tick={(props: any) => (\n                            <ForecastXAxisTick\n                              {...props}\n                              forecastWindow={forecastWindow}\n                            />\n                          )}\n                        />\n                        <YAxis\n                          stroke=\"var(--text-muted)\"\n                          tickLine={false} axisLine={false} width={40} allowDataOverflow\n                          tick={{ fontSize: 11, fontFamily: 'Inter, sans-serif', fill: 'var(--text-muted)' }}\n                          label={{ value: 'kW', angle: -90, position: 'insideLeft', fill: 'var(--text-muted)', fontSize: 10 }}\n                        />\n                        <Tooltip content={<ForecastTooltip />} cursor={{ stroke: '#00a63e', strokeWidth: 1, strokeDasharray: '4 4' }} animationDuration={300} wrapperStyle={{ pointerEvents: 'none' }} />\n                        <Legend verticalAlign=\"top\" height={36} iconType=\"circle\" iconSize={8} wrapperStyle={{ right: 0, top: 0, fontSize: 12, color: 'var(--text-muted)', fontFamily: 'Inter, sans-serif' }} />\n\n                        {showBands['P90'] && <Area type=\"monotone\" dataKey=\"p90\" stroke=\"#3b82f6\" strokeWidth={1} strokeDasharray=\"3 3\" fill=\"url(#p90Grad)\" activeDot={false} name=\"P90 (Optimistic)\" animationDuration={500} />}\n                        {showBands['P10'] && <Area type=\"monotone\" dataKey=\"p10\" stroke=\"#f59e0b\" strokeWidth={1} strokeDasharray=\"3 3\" fill=\"url(#p10Grad)\" activeDot={false} name=\"P10 (Conservative)\" animationDuration={500} />}\n                        {showBands['P50'] && <Area type=\"monotone\" dataKey=\"p50\" stroke=\"#00a63e\" strokeWidth={2.5} fill=\"url(#p50Grad)\" activeDot={{ r: 4, strokeWidth: 0 }} name=\"P50 (Median)\" animationDuration={800} />}\n                        <Line type=\"monotone\" dataKey=\"physics\" stroke={isDark ? '#475569' : '#d1d5db'} strokeWidth={1.5} strokeDasharray=\"5 3\" dot={false} name=\"Physics Baseline\" activeDot={false} />\n\n                        <ReferenceLine\n                          x={(() => {\n                            const n = new Date();\n                            const t = n.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', timeZone: IST });\n                            if (forecastWindow === 'today') return t;\n                            const dateL = forecastWindow === '3d'\n                              ? n.toLocaleDateString([], { weekday: 'short', day: 'numeric', timeZone: IST })\n                              : n.toLocaleDateString([], { weekday: 'short', month: 'short', day: 'numeric', timeZone: IST });\n                            return `${dateL} || ${t}`;\n                          })()}\n                          stroke=\"#ef4444\" strokeWidth={1.5} strokeDasharray=\"3 3\"\n                          label={{ value: 'NOW', position: 'top', fill: '#ef4444', fontSize: 9, fontWeight: 700 }}\n                        />\n\n                        {/* Drag-selection highlight */}\n                        {isSelecting && refAreaLeft && refAreaRight && (\n                          <ReferenceArea x1={refAreaLeft} x2={refAreaRight} fill=\"#00a63e\" fillOpacity={0.08} stroke=\"#00a63e\" strokeOpacity={0.3} strokeDasharray=\"3 3\" />\n                        )}\n                      </AreaChart>\n                    </ResponsiveContainer>\n                    {/* Reset zoom button */}\n                    {(zoomStart || zoomEnd) && (\n                      <button\n                        onClick={() => { setZoomStart(null); setZoomEnd(null); }}\n                        style={{\n                          position: 'absolute', top: 10, right: 10,\n                          background: isDark ? 'rgba(30,41,59,0.9)' : 'rgba(255,255,255,0.92)',\n                          border: `1px solid ${isDark ? 'rgba(148,163,184,0.2)' : 'rgba(0,166,62,0.2)'}`,\n                          borderRadius: 6, padding: '3px 10px', fontSize: '0.72rem',\n                          color: '#00a63e', cursor: 'pointer', fontFamily: 'Poppins, sans-serif', fontWeight: 600,\n                          backdropFilter: 'blur(4px)',\n                        }}\n                      >\n                         Reset Zoom\n                      </button>\n                    )}\n                    <div style={{ position: 'absolute', bottom: 10, left: 24, fontSize: '0.62rem', color: 'var(--text-muted)', background: isDark ? 'rgba(30,41,59,0.85)' : 'rgba(255,255,255,0.85)', padding: '2px 6px', borderRadius: 4, pointerEvents: 'none' }}>\n                      {zoomStart ? 'Drag to select  Click  to reset' : 'Drag on chart to zoom'}\n                    </div>\n                  </div>\n                ) : (\n                  <ForecastTable data={zoomedForecastData} />\n                )}\n                {forecastGeneratedAt && (\n                  <div style={{ textAlign: 'right', fontSize: '0.7rem', color: 'var(--text-muted)', marginTop: '0.5rem', fontFamily: 'Inter, sans-serif', padding: '0 1rem 1rem' }}>\n                    last updated: {forecastGeneratedAt.toLocaleString([], { timeZone: IST, day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' })} IST\n                  </div>\n                )}\n              </div>\n            </div>\n          ) : (\n            <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)', fontSize: '0.875rem', background: isDark ? 'rgba(0,0,0,0.15)' : 'rgba(0,166,62,0.03)', borderRadius: 12, border: '1px dashed rgba(0,166,62,0.15)' }}>\n              No forecast data available for the selected range.\n            </div>\n          )\n        )}\n\n      </>)}\n    </div>\n  );\n};\n\nexport default SiteDataPanel;\n","import React, { useEffect, useRef } from 'react';\n\ninterface AccessibleModalProps {\n  open: boolean;\n  onClose: () => void;\n  title: string;\n  children: React.ReactNode;\n  /** Optional id for aria-labelledby; defaults to auto-generated from title. */\n  id?: string;\n}\n\n/**\n * Modal wrapper with ARIA attributes, focus trap, and ESC to close.\n * Use for dialogs so screen readers and keyboard users get correct behavior.\n */\nexport const AccessibleModal: React.FC<AccessibleModalProps> = ({\n  open,\n  onClose,\n  title,\n  children,\n  id = 'modal-title',\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!open) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    const previousActive = document.activeElement as HTMLElement | null;\n    containerRef.current?.focus();\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n      previousActive?.focus();\n    };\n  }, [open, onClose]);\n\n  if (!open) return null;\n\n  return (\n    <div\n      className=\"modal\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby={id}\n      ref={containerRef}\n      tabIndex={-1}\n      onClick={(e) => e.target === e.currentTarget && onClose()}\n    >\n      <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n        <h3 id={id}>{title}</h3>\n        {children}\n      </div>\n    </div>\n  );\n};\n","import { useState, useCallback } from 'react';\n\n/**\n * Generic modal state hook. Use one per modal type to avoid multiple\n * separate { show, data } state objects.\n */\nexport function useModal<T = unknown>() {\n  const [open, setOpen] = useState(false);\n  const [data, setData] = useState<T | null>(null);\n\n  const openModal = useCallback((payload?: T | null) => {\n    setData(payload ?? null);\n    setOpen(true);\n  }, []);\n\n  const closeModal = useCallback(() => {\n    setOpen(false);\n    setData(null);\n  }, []);\n\n  return { open, data, openModal, closeModal };\n}\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { apiService } from '../services/api';\r\nimport { useDebouncedCallback } from '../hooks/useDebounce';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport AuditTrail from './AuditTrail';\r\nimport SiteDataPanel from './SiteDataPanel';\r\nimport { EmptyState } from './EmptyState';\r\nimport { SkeletonDeviceList } from './SkeletonLoader';\r\nimport { AccessibleModal } from './AccessibleModal';\r\nimport { useModal } from '../hooks';\r\nimport { IST_TIMEZONE, DEFAULT_PAGE_SIZE } from '../constants';\r\n\r\ninterface User {\r\n  id: number;\r\n  username: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  is_staff: boolean;\r\n  is_superuser: boolean;\r\n}\r\n\r\ninterface Device {\r\n  id: number;\r\n  device_serial: string;\r\n  hw_id?: string;\r\n  model?: string;\r\n  user?: string;\r\n  provisioned_at: string;\r\n  config_version?: string;\r\n  is_online?: boolean;\r\n  last_heartbeat?: string;\r\n  logs_enabled?: boolean;\r\n  pending_config_update?: boolean;\r\n  config_ack_ver?: number | null;\r\n  config_downloaded_at?: string | null;\r\n  config_acked_at?: string | null;\r\n  created_by_username?: string;\r\n  created_at?: string;\r\n  updated_by_username?: string;\r\n  updated_at?: string;\r\n}\r\n\r\ninterface Preset {\r\n  id: number;\r\n  config_id?: string;\r\n  name: string;\r\n  description?: string;\r\n  slaves_count?: number;\r\n  version?: number;\r\n  updated_at?: string;\r\n  gateway_configuration?: {\r\n    general_settings?: {\r\n      config_id?: string;\r\n      last_updated?: string;\r\n    };\r\n  };\r\n}\r\n\r\ninterface SystemHealthData {\r\n  total_devices: number;\r\n  active_devices: number;\r\n  total_telemetry_points: number;\r\n  uptime_seconds: number;\r\n  database_status: string;\r\n  mqtt_status: string;\r\n  overall_health: string;\r\n}\r\n\r\ninterface TelemetryData {\r\n  deviceId: string;\r\n  timestamp: string;\r\n  data_type: string;\r\n  value: number;\r\n  unit: string;\r\n}\r\n\r\ninterface TelemetrySummary {\r\n  totalPoints: number;\r\n  deviceCount: number;\r\n  latestTimestamp: string | null;\r\n}\r\n\r\ninterface SolarSite {\r\n  id: number;\r\n  device_id: number;\r\n  site_id: string;\r\n  display_name: string;\r\n  latitude: number;\r\n  longitude: number;\r\n  capacity_kw: number;\r\n  tilt_deg: number;\r\n  azimuth_deg: number;\r\n  timezone: string;\r\n  is_active: boolean;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\ninterface SolarSiteForm {\r\n  site_id: string;\r\n  display_name: string;\r\n  latitude: string;\r\n  longitude: string;\r\n  capacity_kw: string;\r\n  tilt_deg: string;\r\n  azimuth_deg: string;\r\n  timezone: string;\r\n  is_active: boolean;\r\n}\r\n\r\nconst Devices: React.FC = () => {\r\n  const { isDark } = useTheme();\r\n  const [searchParams] = useSearchParams();\r\n  const [devices, setDevices] = useState<Device[]>([]);\r\n  const [filteredDevices, setFilteredDevices] = useState<Device[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [editingDevice, setEditingDevice] = useState<Device | null>(null);\r\n  const [creatingDevice, setCreatingDevice] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [userSearchTerm, setUserSearchTerm] = useState('');\r\n  const [filteredUsers, setFilteredUsers] = useState<User[]>([]);\r\n  const [showUserDropdown, setShowUserDropdown] = useState(false);\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [selectedDevices, setSelectedDevices] = useState<Set<number>>(new Set());\r\n  const [bulkDeleteLoading, setBulkDeleteLoading] = useState(false);\r\n  // Pagination state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(DEFAULT_PAGE_SIZE);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [presets, setPresets] = useState<Preset[]>([]);\r\n  const [presetsLoading, setPresetsLoading] = useState(true);\r\n  const [health, setHealth] = useState<SystemHealthData | null>(null);\r\n  const [telemetrySummary, setTelemetrySummary] = useState<TelemetrySummary | null>(null);\r\n  const [telemetryData, setTelemetryData] = useState<TelemetryData[]>([]);\r\n  const [dashboardError, setDashboardError] = useState<string | null>(null);\r\n  const [selectedDevice, setSelectedDevice] = useState<Device | null>(null);\r\n  const [deviceLogs, setDeviceLogs] = useState<any[]>([]);\r\n  const [logsLoading, setLogsLoading] = useState(false);\r\n  const [editForm, setEditForm] = useState({\r\n    device_serial: '',\r\n    user: '',\r\n    config_version: '',\r\n  });\r\n  const [createForm, setCreateForm] = useState({\r\n    device_serial: '',\r\n    user: '',\r\n    config_version: '',\r\n  });\r\n\r\n  // Site management state\r\n  const [siteDetails, setSiteDetails] = useState<SolarSite | null>(null);\r\n  const [siteLoading, setSiteLoading] = useState(false);\r\n  const [editingSite, setEditingSite] = useState(false);\r\n  const [siteForm, setSiteForm] = useState<SolarSiteForm>({\r\n    site_id: '', display_name: '', latitude: '', longitude: '',\r\n    capacity_kw: '', tilt_deg: '18', azimuth_deg: '180',\r\n    timezone: IST_TIMEZONE, is_active: true,\r\n  });\r\n  const [siteSaving, setSiteSaving] = useState(false);\r\n  const [siteError, setSiteError] = useState<string | null>(null);\r\n  const [devicePreset, setDevicePreset] = useState<Preset | null>(null);\r\n  \r\n  // Modern modal states\r\n  const rebootModal = useModal<Device>();\r\n  const deleteModal = useModal<Device>();\r\n  const [hardResetModal, setHardResetModal] = useState<{ show: boolean; device: Device | null }>({ show: false, device: null });\r\n  const [bulkDeleteModal, setBulkDeleteModal] = useState<{ show: boolean; deviceList: Device[] }>({ show: false, deviceList: [] });\r\n  const [successModal, setSuccessModal] = useState<{ show: boolean; message: string }>({ show: false, message: '' });\r\n\r\n  const fetchDevices = useCallback(async (page: number = 1, search: string = '') => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await apiService.getDevices(search || undefined, page, pageSize);\r\n      \r\n      // Handle paginated response\r\n      if (response.results) {\r\n        setDevices(response.results);\r\n        setFilteredDevices(response.results);\r\n        setTotalCount(response.count);\r\n        setTotalPages(response.total_pages);\r\n        setCurrentPage(response.current_page);\r\n      } else {\r\n        // Fallback for non-paginated response\r\n        setDevices(Array.isArray(response) ? response : []);\r\n        setFilteredDevices(Array.isArray(response) ? response : []);\r\n        setTotalCount(Array.isArray(response) ? response.length : 0);\r\n        setTotalPages(1);\r\n        setCurrentPage(1);\r\n      }\r\n      \r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  }, [pageSize]);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const data: User[] = await apiService.getUsers();\r\n      // Filter out staff and superusers, only showing regular customers\r\n      const customers = data.filter(user => !user.is_staff && !user.is_superuser);\r\n      setUsers(customers);\r\n    } catch (err) {\r\n      console.error('Failed to fetch users:', err);\r\n      setError('Failed to load users for device assignment');\r\n    }\r\n  };\r\n\r\n  const fetchPresets = async () => {\r\n    try {\r\n      const data = await apiService.getPresets();\r\n      setPresets(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      console.error('Failed to fetch presets:', err);\r\n    } finally {\r\n      setPresetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      const [healthData, telemetryData] = await Promise.all([\r\n        apiService.getSystemHealth(),\r\n        apiService.getTelemetry(),\r\n      ]);\r\n\r\n      setHealth(healthData || null);\r\n\r\n      const telemetryArray = Array.isArray(telemetryData) ? telemetryData : [];\r\n      setTelemetryData(telemetryArray);\r\n      const latest = telemetryArray.reduce<string | null>((currentLatest, item) => {\r\n        if (!item?.timestamp) return currentLatest;\r\n        const itemDate = new Date(item.timestamp);\r\n        if (Number.isNaN(itemDate.getTime())) return currentLatest;\r\n        if (!currentLatest) return item.timestamp;\r\n        const currentDate = new Date(currentLatest);\r\n        return itemDate > currentDate ? item.timestamp : currentLatest;\r\n      }, null);\r\n\r\n      const deviceCount = new Set(telemetryArray.map((item: TelemetryData) => item.deviceId)).size;\r\n      setTelemetrySummary({\r\n        totalPoints: telemetryArray.length,\r\n        deviceCount,\r\n        latestTimestamp: latest,\r\n      });\r\n    } catch (err) {\r\n      console.error('Failed to fetch dashboard data:', err);\r\n      setDashboardError('Failed to load device dashboards');\r\n    }\r\n  };\r\n\r\n  const fetchDeviceLogs = useCallback(async (deviceId: number) => {\r\n    setLogsLoading(true);\r\n    try {\r\n      const response = await apiService.getDeviceLogs(deviceId, 50, 0);\r\n      setDeviceLogs(response.logs || []);\r\n    } catch (err) {\r\n      console.error('Failed to fetch device logs:', err);\r\n      setDeviceLogs([]);\r\n    } finally {\r\n      setLogsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleViewDevice = useCallback((device: Device) => {\r\n    setSelectedDevice(device);\r\n    setSiteDetails(null);\r\n    setSiteLoading(true);\r\n    setDeviceLogs([]);\r\n    \r\n    // Load preset details if device has config\r\n    if (device.config_version) {\r\n      const preset = presets.find(p => p.config_id === device.config_version);\r\n      setDevicePreset(preset || null);\r\n    } else {\r\n      setDevicePreset(null);\r\n    }\r\n    \r\n    // Fetch site details and logs in parallel\r\n    Promise.all([\r\n      apiService.getDeviceSite(device.id)\r\n        .then(data => setSiteDetails(data))\r\n        .catch((err) => {\r\n          console.error('Failed to fetch site for device', device.id, ':', err);\r\n          setSiteDetails(null);\r\n        }),\r\n      fetchDeviceLogs(device.id)\r\n    ]).finally(() => setSiteLoading(false));\r\n  }, [fetchDeviceLogs, presets]);\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n    fetchPresets();\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const deviceIdParam = searchParams.get('deviceId');\r\n    if (deviceIdParam) {\r\n      const deviceId = parseInt(deviceIdParam, 10);\r\n      if (!isNaN(deviceId)) {\r\n        const foundDevice = devices.find(d => d.id === deviceId);\r\n        if (foundDevice) {\r\n          handleViewDevice(foundDevice);\r\n        }\r\n      }\r\n    }\r\n  }, [searchParams, devices, handleViewDevice]);\r\n  \r\n  useEffect(() => {\r\n    fetchDevices(currentPage, searchTerm);\r\n  }, [currentPage, searchTerm, pageSize, fetchDevices]);\r\n  \r\n  useEffect(() => {\r\n    const handleClickOutside = () => {\r\n      setShowUserDropdown(false);\r\n    };\r\n\r\n    if (showUserDropdown) {\r\n      document.addEventListener('click', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n    };\r\n  }, [showUserDropdown]);\r\n\r\n  useEffect(() => {\r\n    if (userSearchTerm.trim() === '') {\r\n      setFilteredUsers(users);\r\n    } else {\r\n      const searchLower = userSearchTerm.toLowerCase();\r\n      const filtered = users.filter(user => {\r\n        const fullName = `${user.first_name} ${user.last_name}`.toLowerCase();\r\n        return (\r\n          user.username.toLowerCase().includes(searchLower) ||\r\n          user.first_name.toLowerCase().includes(searchLower) ||\r\n          user.last_name.toLowerCase().includes(searchLower) ||\r\n          fullName.includes(searchLower) ||\r\n          user.email.toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n      setFilteredUsers(filtered);\r\n    }\r\n  }, [users, userSearchTerm]);\r\n\r\n  // Debounced search function that runs the actual search after 300ms of inactivity\r\n  const debouncedSearch = useDebouncedCallback(\r\n    (query: string) => {\r\n      // The actual search happens via useEffect that watches currentPage and searchTerm\r\n      // This ensures we don't make too many API calls\r\n    },\r\n    300\r\n  );\r\n\r\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const query = e.target.value;\r\n    setSearchTerm(query);\r\n    setCurrentPage(1);  // Reset to page 1 on new search\r\n    debouncedSearch(query);  // Debounce the search\r\n  };\r\n\r\n  const handleEdit = (device: Device) => {\r\n    setEditingDevice(device);\r\n    setEditForm({\r\n      device_serial: device.device_serial,\r\n      user: device.user || '',\r\n      config_version: device.config_version || '',\r\n    });\r\n    setUserSearchTerm(device.user ? `${users.find(u => u.username === device.user)?.first_name} ${users.find(u => u.username === device.user)?.last_name} (${device.user})` : '');\r\n    setShowUserDropdown(false);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editingDevice) return;\r\n\r\n    try {\r\n      await apiService.updateDevice(editingDevice.id, editForm);\r\n      setEditingDevice(null);\r\n      // Refetch to get the updated device with all fields including audit trail\r\n      await fetchDevices(currentPage, searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update device');\r\n    }\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    try {\r\n      await apiService.createDevice(createForm);\r\n      setCreatingDevice(false);\r\n      setCreateForm({\r\n        device_serial: '',\r\n        user: '',\r\n        config_version: '',\r\n      });\r\n      // Refetch to get the new device with all fields including audit trail\r\n      await fetchDevices(currentPage, searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to create device');\r\n    }\r\n  };\r\n\r\n  const handleDelete = (device: any) => {\r\n    deleteModal.openModal(device);\r\n  };\r\n\r\n  const handleReboot = async (device: any) => {\r\n    rebootModal.openModal(device);\r\n  };\r\n  \r\n  const confirmReboot = async () => {\r\n    if (!rebootModal.data) return;\r\n    try {\r\n      await apiService.rebootDevice(rebootModal.data.id);\r\n      const serial = rebootModal.data.device_serial;\r\n      rebootModal.closeModal();\r\n      setSuccessModal({ show: true, message: `Reboot command queued for ${serial}. Device will reboot on next heartbeat.` });\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to queue reboot command');\r\n      rebootModal.closeModal();\r\n    }\r\n  };\r\n\r\n  const handleHardReset = async (device: any) => {\r\n    setHardResetModal({ show: true, device });\r\n  };\r\n  \r\n  const confirmHardReset = async () => {\r\n    if (!hardResetModal.device) return;\r\n    \r\n    try {\r\n      await apiService.hardResetDevice(hardResetModal.device.id);\r\n      setHardResetModal({ show: false, device: null });\r\n      setSuccessModal({ \r\n        show: true, \r\n        message: `Hard reset command queued for ${hardResetModal.device.device_serial}. Device will reset on next heartbeat.` \r\n      });\r\n    } catch (err) {\r\n      console.error('Hard reset error:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to queue hard reset command');\r\n      setHardResetModal({ show: false, device: null });\r\n    }\r\n  };\r\n\r\n  const handleDeleteDevice = (device: any) => {\r\n    deleteModal.openModal(device);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!deleteModal.data) return;\r\n    try {\r\n      await apiService.deleteDevice(deleteModal.data.id);\r\n      const serial = deleteModal.data.device_serial;\r\n      deleteModal.closeModal();\r\n      setSuccessModal({ show: true, message: `Device ${serial} has been permanently deleted.` });\r\n      setSelectedDevice(null);\r\n      fetchDevices();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to delete device');\r\n      deleteModal.closeModal();\r\n    }\r\n  };\r\n\r\n  const handleToggleLogs = async (device: any, enabled: boolean) => {\r\n    try {\r\n      await apiService.toggleDeviceLogs(device.id, enabled);\r\n      setSelectedDevice({ ...device, logs_enabled: enabled });\r\n      fetchDevices(); // Refresh device list\r\n    } catch (err) {\r\n      console.error('Toggle logs error:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to toggle device logs');\r\n    }\r\n  };\r\n\r\n  const handleSelectDevice = (deviceId: number) => {\r\n    const newSelected = new Set(selectedDevices);\r\n    if (newSelected.has(deviceId)) {\r\n      newSelected.delete(deviceId);\r\n    } else {\r\n      newSelected.add(deviceId);\r\n    }\r\n    setSelectedDevices(newSelected);\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedDevices.size === filteredDevices.length) {\r\n      setSelectedDevices(new Set());\r\n    } else {\r\n      const allIds = new Set(filteredDevices.map(d => d.id));\r\n      setSelectedDevices(allIds);\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = () => {\r\n    if (selectedDevices.size === 0) {\r\n      setError('No devices selected for deletion');\r\n      return;\r\n    }\r\n\r\n    const deviceList = Array.from(selectedDevices)\r\n      .map(id => devices.find(d => d.id === id))\r\n      .filter(Boolean) as Device[];\r\n\r\n    setBulkDeleteModal({ show: true, deviceList });\r\n  };\r\n\r\n  const confirmBulkDelete = async () => {\r\n    try {\r\n      setBulkDeleteLoading(true);\r\n      await apiService.deleteDevicesBulk(Array.from(selectedDevices));\r\n\r\n      const updatedDevices = devices.filter(d => !selectedDevices.has(d.id));\r\n      setDevices(updatedDevices);\r\n      setFilteredDevices(updatedDevices.filter(d =>\r\n        d.device_serial.toLowerCase().includes(searchTerm.toLowerCase())\r\n      ));\r\n      setSelectedDevices(new Set());\r\n      setBulkDeleteModal({ show: false, deviceList: [] });\r\n      setBulkDeleteLoading(false);\r\n    } catch (err) {\r\n      setBulkDeleteLoading(false);\r\n      setBulkDeleteModal({ show: false, deviceList: [] });\r\n      console.error('Bulk delete error:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to delete devices');\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingDevice(null);\r\n    setCreatingDevice(false);\r\n    setUserSearchTerm('');\r\n    setShowUserDropdown(false);\r\n  };\r\n\r\n  const handleBackToList = () => {\r\n    setSelectedDevice(null);\r\n    setSiteDetails(null);\r\n    setEditingSite(false);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div>\r\n        <h1>Device Management</h1>\r\n        <div className=\"card\">\r\n          <div className=\"card-header\"><h2>Devices</h2></div>\r\n          <SkeletonDeviceList count={6} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  const getPresetConfigId = (preset: Preset): string => {\r\n    return preset.gateway_configuration?.general_settings?.config_id || preset.config_id || '';\r\n  };\r\n\r\n  if (selectedDevice) {\r\n    const deviceTelemetry = telemetryData.filter((entry) => entry.deviceId === selectedDevice.device_serial);\r\n    const latestTelemetry = deviceTelemetry.reduce<string | null>((currentLatest, item) => {\r\n      if (!item?.timestamp) return currentLatest;\r\n      const itemDate = new Date(item.timestamp);\r\n      if (Number.isNaN(itemDate.getTime())) return currentLatest;\r\n      if (!currentLatest) return item.timestamp;\r\n      const currentDate = new Date(currentLatest);\r\n      return itemDate > currentDate ? item.timestamp : currentLatest;\r\n    }, null);\r\n\r\n    return (\r\n      <div>\r\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '20px' }}>\r\n          <button\r\n            onClick={handleBackToList}\r\n            className=\"btn btn-secondary\"\r\n            style={{ marginRight: '15px' }}\r\n          >\r\n             Back to Devices\r\n          </button>\r\n          <h1 style={{ margin: 0 }}>{selectedDevice.device_serial} Dashboard</h1>\r\n        </div>\r\n\r\n        <div className=\"card\" style={{ marginBottom: '20px' }}>\r\n          <div className=\"card-header\">\r\n            <h2>Device Details</h2>\r\n            <div style={{ display: 'flex', gap: '10px' }}>\r\n              <button onClick={() => handleEdit(selectedDevice)} className=\"btn\">\r\n                Edit Device\r\n              </button>\r\n              <button \r\n                onClick={() => handleReboot(selectedDevice)} \r\n                className=\"btn\"\r\n                style={{ \r\n                  backgroundColor: '#f59e0b', \r\n                  color: 'white',\r\n                  border: 'none'\r\n                }}\r\n                title=\"Queue reboot command for device\"\r\n              >\r\n                 Reboot\r\n              </button>\r\n              <button \r\n                onClick={() => handleHardReset(selectedDevice)} \r\n                className=\"btn\"\r\n                style={{ \r\n                  backgroundColor: '#dc2626', \r\n                  color: 'white',\r\n                  border: 'none'\r\n                }}\r\n                title=\"Queue hard reset command for device (erases config)\"\r\n              >\r\n                 Hard Reset\r\n              </button>\r\n              <button \r\n                onClick={() => handleDeleteDevice(selectedDevice)} \r\n                className=\"btn\"\r\n                style={{ \r\n                  backgroundColor: '#7f1d1d', \r\n                  color: 'white',\r\n                  border: 'none'\r\n                }}\r\n                title=\"Permanently delete device and all its data\"\r\n              >\r\n                 Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div style={{ padding: '20px' }}>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '15px' }}>\r\n              <div>\r\n                <strong>Status:</strong>\r\n                <p style={{ margin: '5px 0' }}>\r\n                  <span style={{\r\n                    display: 'inline-block',\r\n                    padding: '4px 12px',\r\n                    borderRadius: '12px',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '500',\r\n                    backgroundColor: selectedDevice.is_online ? '#dcfce7' : '#fee2e2',\r\n                    color: selectedDevice.is_online ? '#166534' : '#991b1b'\r\n                  }}>\r\n                    {selectedDevice.is_online ? ' Online' : ' Offline'}\r\n                  </span>\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <strong>Last Heartbeat:</strong>\r\n                <p style={{ margin: '5px 0' }}>\r\n                  {selectedDevice.last_heartbeat\r\n                    ? new Date(selectedDevice.last_heartbeat).toLocaleString()\r\n                    : 'Never'}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <strong>MAC / HW ID:</strong>\r\n                <p style={{ margin: '5px 0', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.9rem' }}>{selectedDevice.hw_id || ''}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Model:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedDevice.model || ''}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Assigned User:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedDevice.user || '-'}</p>\r\n              </div>\r\n              <div style={{ gridColumn: '1 / -1', padding: '15px', backgroundColor: 'transparent', borderRadius: '8px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-sync-card\">\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>\r\n                  <div>\r\n                    <strong style={{ fontSize: '0.95rem', color: 'inherit' }} className=\"config-heading\">Configuration</strong>\r\n                    {devicePreset && (\r\n                      <div style={{ fontSize: '0.875rem', color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginTop: '2px' }} className=\"config-label\">\r\n                        {devicePreset.name || selectedDevice.config_version}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  {!selectedDevice.config_version ? (\r\n                    <span style={{ color: isDark ? '#a0a0a0' : 'rgba(0, 0, 0, 0.5)', fontSize: '0.875rem' }} className=\"config-no-preset\">No preset assigned</span>\r\n                  ) : selectedDevice.pending_config_update ? (\r\n                    <span style={{\r\n                      display: 'inline-flex', alignItems: 'center', gap: '5px',\r\n                      padding: '4px 12px', borderRadius: '12px', fontSize: '0.8rem', fontWeight: '500',\r\n                      backgroundColor: '#fef9c3', color: '#854d0e'\r\n                    }}> Pending update</span>\r\n                  ) : (\r\n                    <span style={{\r\n                      display: 'inline-flex', alignItems: 'center', gap: '5px',\r\n                      padding: '4px 12px', borderRadius: '12px', fontSize: '0.8rem', fontWeight: '500',\r\n                      backgroundColor: '#dcfce7', color: '#166534'\r\n                    }}> Synced</span>\r\n                  )}\r\n                </div>\r\n                {selectedDevice.config_version && (\r\n                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '8px', fontSize: '0.8rem' }}>\r\n                    <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-info-box\">\r\n                      <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Preset ID</div>\r\n                      <div style={{ fontWeight: '500', fontFamily: 'monospace', color: 'inherit' }}>{selectedDevice.config_version}</div>\r\n                    </div>\r\n                    {devicePreset?.slaves_count != null && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Slaves</div>\r\n                        <div style={{ fontWeight: '500', color: 'inherit' }}>{devicePreset.slaves_count} device{devicePreset.slaves_count !== 1 ? 's' : ''}</div>\r\n                      </div>\r\n                    )}\r\n                    {selectedDevice.config_ack_ver != null && devicePreset?.version != null && (\r\n                      <div style={{ \r\n                        padding: '8px', \r\n                        backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', \r\n                        borderRadius: '6px',\r\n                        gridColumn: '1 / -1',\r\n                        border: selectedDevice.config_ack_ver === devicePreset.version ? '2px solid #dcfce7' : '2px solid #fef9c3'\r\n                      }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '4px' }} className=\"config-label\">Version Status</div>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                          <div>\r\n                            <span style={{ fontSize: '0.75rem', color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)' }} className=\"config-label\">Device: </span>\r\n                            <span style={{ fontWeight: '500', fontFamily: 'monospace', color: 'inherit' }}>v{selectedDevice.config_ack_ver}</span>\r\n                            <span style={{ margin: '0 8px', color: isDark ? '#808080' : 'rgba(0, 0, 0, 0.4)' }} className=\"config-arrow\"></span>\r\n                            <span style={{ fontSize: '0.75rem', color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)' }} className=\"config-label\">Latest: </span>\r\n                            <span style={{ fontWeight: '500', fontFamily: 'monospace', color: 'inherit' }}>v{devicePreset.version}</span>\r\n                          </div>\r\n                          {selectedDevice.config_ack_ver === devicePreset.version ? (\r\n                            <span style={{ color: '#166534', fontSize: '0.75rem', fontWeight: '500' }}> Up to date</span>\r\n                          ) : (\r\n                            <span style={{ color: '#854d0e', fontSize: '0.75rem', fontWeight: '500' }}> Update available</span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {selectedDevice.config_ack_ver != null && devicePreset?.version == null && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Device Version</div>\r\n                        <div style={{ fontWeight: '500', fontFamily: 'monospace', color: 'inherit' }}>v{selectedDevice.config_ack_ver}</div>\r\n                      </div>\r\n                    )}\r\n                    {devicePreset?.gateway_configuration?.general_settings?.last_updated && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Last Modified</div>\r\n                        <div style={{ fontWeight: '500', fontSize: '0.75rem', color: 'inherit' }}>\r\n                          {new Date(devicePreset.gateway_configuration.general_settings.last_updated).toLocaleDateString()}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {selectedDevice.config_acked_at && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)', gridColumn: '1 / -1' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Last Synced</div>\r\n                        <div style={{ fontWeight: '500', fontSize: '0.75rem', color: 'inherit' }}>\r\n                          {new Date(selectedDevice.config_acked_at).toLocaleString()}\r\n                          {(() => {\r\n                            const ackTime = new Date(selectedDevice.config_acked_at);\r\n                            const now = new Date();\r\n                            const diffMs = now.getTime() - ackTime.getTime();\r\n                            const diffMins = Math.floor(diffMs / 60000);\r\n                            const diffHours = Math.floor(diffMins / 60);\r\n                            const diffDays = Math.floor(diffHours / 24);\r\n                            if (diffMins < 1) return '  just now';\r\n                            if (diffMins < 60) return `  ${diffMins}m ago`;\r\n                            if (diffHours < 24) return `  ${diffHours}h ago`;\r\n                            return `  ${diffDays}d ago`;\r\n                          })()}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {selectedDevice.config_downloaded_at && selectedDevice.config_acked_at && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)', gridColumn: '1 / -1' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Apply Duration</div>\r\n                        <div style={{ fontWeight: '500', color: 'inherit' }}>\r\n                          {Math.round((new Date(selectedDevice.config_acked_at).getTime() - new Date(selectedDevice.config_downloaded_at).getTime()) / 1000)} seconds\r\n                          <span style={{ color: isDark ? '#a0a0a0' : 'rgba(0, 0, 0, 0.5)', marginLeft: '8px', fontSize: '0.75rem' }} className=\"config-label\">\r\n                            (download  acknowledge)\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <strong>Provisioned At:</strong>\r\n                <p style={{ margin: '5px 0' }}>\r\n                  {selectedDevice.provisioned_at\r\n                    ? new Date(selectedDevice.provisioned_at).toLocaleDateString()\r\n                    : 'N/A'}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <strong>Created By:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedDevice.created_by_username || '-'}</p>\r\n              </div>\r\n              <div style={{ gridColumn: '1 / -1' }}>\r\n                <label style={{ display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer' }}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedDevice.logs_enabled || false}\r\n                    onChange={(e) => handleToggleLogs(selectedDevice, e.target.checked)}\r\n                    style={{ background: isDark ? '#1a1a1a' : 'white', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                  />\r\n                  <strong>Enable Device Logs</strong>\r\n                  <span style={{ fontSize: '0.875rem', color: isDark ? '#b0b0b0' : '#9ca3af' }}>\r\n                    (Device will send logs when enabled)\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2\" style={{ gap: 'var(--space-6, 24px)', marginTop: '32px' }}>\r\n          <div className=\"card\">\r\n            <h2>System Health</h2>\r\n            {dashboardError && <p className=\"error\">{dashboardError}</p>}\r\n            {!dashboardError && !health && <p>Loading system health...</p>}\r\n            {health && (\r\n              <div>\r\n                <p><strong>Overall:</strong> {health.overall_health}</p>\r\n                <p><strong>Devices:</strong> {health.active_devices}/{health.total_devices} active</p>\r\n                <p><strong>Telemetry Points:</strong> {health.total_telemetry_points.toLocaleString()}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <h2>Telemetry Snapshot</h2>\r\n            {dashboardError && <p className=\"error\">{dashboardError}</p>}\r\n            {!dashboardError && !telemetrySummary && <p>Loading telemetry...</p>}\r\n            {telemetrySummary && (\r\n              <div>\r\n                <p><strong>Total Points:</strong> {deviceTelemetry.length.toLocaleString()}</p>\r\n                <p><strong>Data Types:</strong> {new Set(deviceTelemetry.map((entry) => entry.data_type)).size}</p>\r\n                <p><strong>Latest:</strong> {latestTelemetry ? new Date(latestTelemetry).toLocaleString() : 'N/A'}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  Site Configuration  */}\r\n        <div className=\"card\" style={{ marginTop: '48px' }}>\r\n          <div className=\"card-header\">\r\n            <h2>Site Configuration</h2>\r\n            {!siteLoading && (\r\n              <button className=\"btn\" onClick={() => {\r\n                if (siteDetails) {\r\n                  setSiteForm({\r\n                    site_id: siteDetails.site_id,\r\n                    display_name: siteDetails.display_name,\r\n                    latitude: String(siteDetails.latitude),\r\n                    longitude: String(siteDetails.longitude),\r\n                    capacity_kw: String(siteDetails.capacity_kw),\r\n                    tilt_deg: String(siteDetails.tilt_deg),\r\n                    azimuth_deg: String(siteDetails.azimuth_deg),\r\n                    timezone: siteDetails.timezone,\r\n                    is_active: siteDetails.is_active,\r\n                  });\r\n                } else {\r\n                  setSiteForm({ site_id: '', display_name: '', latitude: '', longitude: '', capacity_kw: '', tilt_deg: '18', azimuth_deg: '180', timezone: IST_TIMEZONE, is_active: true });\r\n                }\r\n                setSiteError(null);\r\n                setEditingSite(true);\r\n              }}>\r\n                {siteDetails ? 'Edit Site' : 'Add Site'}\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div style={{ padding: '20px' }}>\r\n            {siteLoading ? (\r\n              <p style={{ color: 'var(--text-muted)' }}>Loading site details</p>\r\n            ) : !siteDetails ? (\r\n              <p style={{ color: 'var(--text-muted)', fontSize: '0.9rem' }}>No site configured for this device yet.</p>\r\n            ) : (\r\n              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '15px' }}>\r\n                <div><strong>Site ID:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.88rem', color: '#00a63e' }}>{siteDetails.site_id}</p></div>\r\n                <div><strong>Display Name:</strong><p style={{ margin: '4px 0' }}>{siteDetails.display_name || ''}</p></div>\r\n                <div><strong>Status:</strong><p style={{ margin: '4px 0' }}><span className={siteDetails.is_active ? 'status-badge status-badge-success' : 'status-badge status-badge-danger'}>{siteDetails.is_active ? 'Active' : 'Inactive'}</span></p></div>\r\n                <div><strong>Latitude:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.88rem' }}>{siteDetails.latitude}</p></div>\r\n                <div><strong>Longitude:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.88rem' }}>{siteDetails.longitude}</p></div>\r\n                <div><strong>Timezone:</strong><p style={{ margin: '4px 0' }}>{siteDetails.timezone}</p></div>\r\n                <div><strong>Capacity:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace' }}>{siteDetails.capacity_kw} kW</p></div>\r\n                <div><strong>Tilt:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace' }}>{siteDetails.tilt_deg}</p></div>\r\n                <div><strong>Azimuth:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace' }}>{siteDetails.azimuth_deg}</p></div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  Live Site Intelligence (DynamoDB)  */}\r\n        {siteDetails && (\r\n          <div style={{ marginTop: '48px' }}>\r\n            <SiteDataPanel siteId={siteDetails.site_id} autoRefresh />\r\n          </div>\r\n        )}\r\n\r\n        {/*  Device Logs  */}\r\n        <div className=\"card\" style={{ marginTop: '48px', marginBottom: '20px' }}>\r\n          <div className=\"card-header\">\r\n            <h2>Device Logs</h2>\r\n            <button onClick={() => fetchDeviceLogs(selectedDevice.id)} className=\"btn\" disabled={logsLoading}>\r\n              {logsLoading ? 'Loading...' : ' Refresh'}\r\n            </button>\r\n          </div>\r\n          <div style={{ padding: '20px' }}>\r\n            {!selectedDevice.logs_enabled && (\r\n              <p style={{ color: 'var(--text-muted, #9ca3af)', fontStyle: 'italic' }}>\r\n                Logging is disabled for this device. Enable it in Device Details to receive logs.\r\n              </p>\r\n            )}\r\n            {deviceLogs.length === 0 && selectedDevice.logs_enabled && !logsLoading && (\r\n              <p style={{ color: 'var(--text-muted, #9ca3af)' }}>\r\n                No logs available yet. Logs will appear when device sends them.\r\n              </p>\r\n            )}\r\n            {logsLoading && (\r\n              <p style={{ color: 'var(--text-muted, #9ca3af)' }}>\r\n                Loading logs...\r\n              </p>\r\n            )}\r\n            {deviceLogs.length > 0 && (\r\n              <div style={{ \r\n                maxHeight: '400px', \r\n                overflowY: 'auto', \r\n                fontFamily: 'JetBrains Mono, monospace', \r\n                fontSize: '0.85rem',\r\n                backgroundColor: '#1e1e1e',\r\n                padding: '10px',\r\n                borderRadius: '4px'\r\n              }}>\r\n                {deviceLogs.map((log) => (\r\n                  <div key={log.id} style={{ \r\n                    marginBottom: '8px', \r\n                    paddingBottom: '8px', \r\n                    borderBottom: '1px solid #333',\r\n                    color: log.level === 'ERROR' ? '#ff6b6b' : \r\n                           log.level === 'WARNING' ? '#ffa500' : \r\n                           log.level === 'INFO' ? '#4dabf7' : '#ced4da'\r\n                  }}>\r\n                    <span style={{ color: '#888' }}>[{new Date(log.timestamp).toLocaleString()}]</span>\r\n                    <span style={{ fontWeight: 'bold', marginLeft: '8px' }}>[{log.level}]</span>\r\n                    <span style={{ marginLeft: '8px' }}>{log.message}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  Site edit modal  */}\r\n        {editingSite && (\r\n          <div className=\"modal\">\r\n            <div className=\"modal-content\">\r\n              <h3>{siteDetails ? `Edit Site: ${siteDetails.site_id}` : 'Add Site Configuration'}</h3>\r\n              <form onSubmit={async (e) => {\r\n                e.preventDefault();\r\n                setSiteSaving(true);\r\n                setSiteError(null);\r\n                try {\r\n                  const payload = {\r\n                    site_id: siteForm.site_id.trim(),\r\n                    display_name: siteForm.display_name.trim(),\r\n                    latitude: parseFloat(siteForm.latitude),\r\n                    longitude: parseFloat(siteForm.longitude),\r\n                    capacity_kw: parseFloat(siteForm.capacity_kw),\r\n                    tilt_deg: parseFloat(siteForm.tilt_deg),\r\n                    azimuth_deg: parseFloat(siteForm.azimuth_deg),\r\n                    timezone: siteForm.timezone.trim(),\r\n                    is_active: siteForm.is_active,\r\n                  };\r\n\r\n                  let updated;\r\n                  if (siteDetails) {\r\n                    updated = await apiService.updateDeviceSite(selectedDevice.id, payload);\r\n                  } else {\r\n                    updated = await apiService.createDeviceSite(selectedDevice.id, payload);\r\n                  }\r\n\r\n                  if (!updated || !updated.site_id) {\r\n                    throw new Error('Invalid response from server  site data missing');\r\n                  }\r\n\r\n                  setSiteDetails(updated);\r\n                  setEditingSite(false);\r\n                  setSiteSaving(false);\r\n\r\n                  // Re-fetch after creation to get server-assigned fields\r\n                  if (!siteDetails) {\r\n                    setTimeout(() => {\r\n                      apiService.getDeviceSite(selectedDevice.id)\r\n                        .then(data => { if (data) setSiteDetails(data); })\r\n                        .catch(err => console.error('Failed to re-fetch site:', err));\r\n                    }, 500);\r\n                  }\r\n                } catch (err: any) {\r\n                  setSiteError(err.message || 'Failed to save site');\r\n                  setSiteSaving(false);\r\n                }\r\n              }}>\r\n                <div className=\"modal-body\">\r\n                  {siteError && (\r\n                    <p style={{ color: isDark ? '#fca5a5' : '#ef4444', fontSize: '0.875rem', marginBottom: '1rem' }}>{siteError}</p>\r\n                  )}\r\n\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Identification</h4>\r\n                    <div className=\"form-grid form-grid-2\">\r\n                      <div className=\"form-group\">\r\n                        <label>Site ID *</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          required\r\n                          value={siteForm.site_id}\r\n                          disabled={!!siteDetails}\r\n                          onChange={e => setSiteForm({ ...siteForm, site_id: e.target.value })}\r\n                          placeholder=\"e.g. site_mumbai_01\"\r\n                          autoComplete=\"off\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                        {!!siteDetails && <small className=\"form-hint\">Site ID cannot be changed after creation.</small>}\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Display Name</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={siteForm.display_name}\r\n                          onChange={e => setSiteForm({ ...siteForm, display_name: e.target.value })}\r\n                          placeholder=\"e.g. Mumbai Rooftop\"\r\n                          autoComplete=\"off\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Location</h4>\r\n                    <div className=\"form-grid form-grid-3\">\r\n                      <div className=\"form-group\">\r\n                        <label>Latitude *</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          required\r\n                          step=\"any\"\r\n                          value={siteForm.latitude}\r\n                          onChange={e => setSiteForm({ ...siteForm, latitude: e.target.value })}\r\n                          placeholder=\"19.0760\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Longitude *</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          required\r\n                          step=\"any\"\r\n                          value={siteForm.longitude}\r\n                          onChange={e => setSiteForm({ ...siteForm, longitude: e.target.value })}\r\n                          placeholder=\"72.8777\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Timezone</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={siteForm.timezone}\r\n                          onChange={e => setSiteForm({ ...siteForm, timezone: e.target.value })}\r\n                          placeholder=\"Asia/Kolkata\"\r\n                          autoComplete=\"off\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Panel Configuration</h4>\r\n                    <div className=\"form-grid form-grid-3\">\r\n                      <div className=\"form-group\">\r\n                        <label>Capacity (kW) *</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          required\r\n                          step=\"any\"\r\n                          value={siteForm.capacity_kw}\r\n                          onChange={e => setSiteForm({ ...siteForm, capacity_kw: e.target.value })}\r\n                          placeholder=\"5.0\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Tilt ()</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          step=\"any\"\r\n                          value={siteForm.tilt_deg}\r\n                          onChange={e => setSiteForm({ ...siteForm, tilt_deg: e.target.value })}\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Azimuth ()</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          step=\"any\"\r\n                          value={siteForm.azimuth_deg}\r\n                          onChange={e => setSiteForm({ ...siteForm, azimuth_deg: e.target.value })}\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer' }}>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id=\"dev-site-active\"\r\n                          checked={siteForm.is_active}\r\n                          onChange={e => setSiteForm({ ...siteForm, is_active: e.target.checked })}\r\n                          style={{ width: '16px', height: '16px', background: isDark ? '#1a1a1a' : 'white', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                        Active\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"form-actions\" style={{ padding: '0 24px 24px 24px' }}>\r\n                  <button type=\"submit\" className=\"btn\" disabled={siteSaving}>\r\n                    {siteSaving ? 'Saving' : siteDetails ? 'Save Changes' : 'Add Site'}\r\n                  </button>\r\n                  <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setEditingSite(false)} disabled={siteSaving}>\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {editingDevice && (\r\n          <div className=\"modal\">\r\n            <div className=\"modal-content\">\r\n              <h3>{editingDevice ? `Edit Device: ${editingDevice.device_serial}` : 'Register New Device'}</h3>\r\n              <form onSubmit={(e) => { e.preventDefault(); editingDevice ? handleSave() : handleCreate(); }}>\r\n                <div className=\"modal-body\">\r\n                  \r\n                  {/* Device Identity */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Device Identity</h4>\r\n                    <div className=\"form-grid\">\r\n                      <div className=\"form-group\">\r\n                        <label>Device Serial Number</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingDevice ? editForm.device_serial : createForm.device_serial}\r\n                          onChange={(e) => editingDevice ? setEditForm({...editForm, device_serial: e.target.value}) : setCreateForm({...createForm, device_serial: e.target.value})}\r\n                          required\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"SN-12345678\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Ownership */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Ownership & Assignment</h4>\r\n                    <div className=\"form-grid\">\r\n                      <div className=\"form-group\">\r\n                        <label>Assigned User</label>\r\n                        <div style={{ position: 'relative' }} onClick={(e) => e.stopPropagation()}>\r\n                          <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search by name, username, or email...\"\r\n                            value={userSearchTerm}\r\n                            onChange={(e) => {\r\n                              setUserSearchTerm(e.target.value);\r\n                              setShowUserDropdown(true);\r\n                            }}\r\n                            onFocus={() => setShowUserDropdown(true)}\r\n                            autoComplete=\"off\"\r\n                            className=\"full-width\"\r\n                            style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                          />\r\n                          {showUserDropdown && (\r\n                            <div style={{\r\n                              position: 'absolute',\r\n                              top: '100%',\r\n                              left: '0',\r\n                              right: '0',\r\n                              background: 'var(--bg-secondary, #1e293b)',\r\n                              border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                              borderRadius: '6px',\r\n                              marginTop: '4px',\r\n                              maxHeight: '200px',\r\n                              overflowY: 'auto',\r\n                              zIndex: 10,\r\n                              boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)'\r\n                            }}>\r\n                              {filteredUsers.length > 0 ? (\r\n                                filteredUsers.map((user) => (\r\n                                  <div\r\n                                    key={user.id}\r\n                                    onClick={() => {\r\n                                      if (editingDevice) {\r\n                                        setEditForm({...editForm, user: user.username});\r\n                                      } else {\r\n                                        setCreateForm({...createForm, user: user.username});\r\n                                      }\r\n                                      setUserSearchTerm(`${user.first_name} ${user.last_name} (${user.username})`);\r\n                                      setShowUserDropdown(false);\r\n                                    }}\r\n                                    style={{\r\n                                      padding: '12px 16px',\r\n                                      cursor: 'pointer',\r\n                                      borderBottom: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n                                      background: (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent',\r\n                                      color: 'var(--text-primary, #f8fafc)',\r\n                                      transition: 'all 0.15s ease',\r\n                                      fontSize: '0.875rem'\r\n                                    }}\r\n                                    onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.06)'}\r\n                                    onMouseLeave={(e) => e.currentTarget.style.background = (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent'}\r\n                                  >\r\n                                    {user.first_name} {user.last_name} ({user.username}) <br/>\r\n                                    <span style={{ fontSize: '0.75rem', color: 'var(--text-secondary, #94a3b8)' }}>{user.email}</span>\r\n                                  </div>\r\n                                ))\r\n                              ) : (\r\n                                <div style={{ padding: '12px 16px', color: 'var(--text-muted, #64748b)', fontSize: '0.875rem' }}>\r\n                                  {userSearchTerm.trim() === '' ? 'Start typing to search users...' : 'No users found'}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Configuration */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Configuration</h4>\r\n                    <div className=\"form-grid form-grid-2\">\r\n                      <div className=\"form-group\">\r\n                        <label>Preset Template</label>\r\n                        <select\r\n                          value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                          onChange={(e) => editingDevice ? setEditForm({ ...editForm, config_version: e.target.value }) : setCreateForm({ ...createForm, config_version: e.target.value })}\r\n                          className=\"full-width\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        >\r\n                          <option value=\"\">-- Manual Configuration --</option>\r\n                          {presetsLoading && <option value=\"\" disabled>Loading presets...</option>}\r\n                          {!presetsLoading && presets.map((preset) => (\r\n                            <option key={preset.id} value={getPresetConfigId(preset)}>\r\n                              {preset.name} ({getPresetConfigId(preset) || 'no ID'})\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                        <small className=\"form-hint\">Selecting a preset sets the Config Version ID below.</small>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Config Version ID</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                          onChange={(e) => editingDevice ? setEditForm({...editForm, config_version: e.target.value}) : setCreateForm({...createForm, config_version: e.target.value})}\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"Manual Config ID\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                {editingDevice && (\r\n                  <div style={{ padding: '0 24px' }}>\r\n                     <AuditTrail\r\n                       createdBy={editingDevice.created_by_username}\r\n                       createdAt={editingDevice.created_at}\r\n                       updatedBy={editingDevice.updated_by_username}\r\n                       updatedAt={editingDevice.updated_at}\r\n                     />\r\n                  </div>\r\n                )}\r\n                <div className=\"form-actions\" style={{ padding: '0 24px 24px 24px' }}>\r\n                  <button type=\"submit\" className=\"btn\">{editingDevice ? 'Save Changes' : 'Create Device'}</button>\r\n                  <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modern Reboot Confirmation Modal */}\r\n        <AccessibleModal\r\n          open={rebootModal.open}\r\n          onClose={rebootModal.closeModal}\r\n          title=\"Confirm Reboot\"\r\n          id=\"reboot-modal-title\"\r\n        >\r\n          {rebootModal.data && (\r\n            <div className=\"modal-reboot-content\">\r\n              <p className=\"modal-reboot-message\">\r\n                Are you sure you want to reboot device <strong>{rebootModal.data.device_serial}</strong>?\r\n              </p>\r\n              <div className=\"modal-warning-box modal-reboot-note\">\r\n                <strong> Note:</strong> The device will restart on its next heartbeat. Any unsaved data may be lost.\r\n              </div>\r\n              <div className=\"modal-actions\">\r\n                <button type=\"button\" className=\"btn-secondary\" onClick={rebootModal.closeModal}>Cancel</button>\r\n                <button type=\"button\" className=\"btn-primary\" onClick={confirmReboot}>Confirm Reboot</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </AccessibleModal>\r\n\r\n        {/* Modern Hard Reset Confirmation Modal */}\r\n        {hardResetModal.show && hardResetModal.device && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.6)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            backdropFilter: 'blur(4px)'\r\n          }}>\r\n            <div style={{\r\n              background: isDark ? '#2d2d2d' : 'white',\r\n              borderRadius: '16px',\r\n              padding: '2rem',\r\n              maxWidth: '500px',\r\n              width: '90%',\r\n              boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n              border: isDark ? '2px solid #dc3545' : '2px solid #dc3545',\r\n              animation: 'slideIn 0.2s ease-out'\r\n            }}>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n                <div style={{\r\n                  width: '48px',\r\n                  height: '48px',\r\n                  borderRadius: '12px',\r\n                  background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  fontSize: '1.5rem',\r\n                  animation: 'pulse 2s infinite'\r\n                }}>\r\n                  \r\n                </div>\r\n                <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: '#dc3545' }}>\r\n                  Hard Reset Warning\r\n                </h3>\r\n              </div>\r\n              \r\n              <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n                <div style={{\r\n                  background: isDark ? 'rgba(220, 53, 69, 0.1)' : '#f8d7da',\r\n                  border: isDark ? '1px solid rgba(220, 53, 69, 0.3)' : '1px solid #f5c6cb',\r\n                  borderRadius: '8px',\r\n                  padding: '1rem',\r\n                  marginBottom: '1rem',\r\n                  color: isDark ? '#ff9999' : '#721c24'\r\n                }}>\r\n                  <strong style={{ fontSize: '1.05rem' }}> CRITICAL WARNING</strong>\r\n                  <p style={{ margin: '0.5rem 0 0 0', fontSize: '0.9rem' }}>\r\n                    This action will <strong>erase all device configuration</strong> and restart the device to factory settings.\r\n                  </p>\r\n                </div>\r\n                \r\n                <p style={{ marginBottom: '0.75rem' }}>\r\n                  Device to reset: <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{hardResetModal.device.device_serial}</strong>\r\n                </p>\r\n                \r\n                <ul style={{ margin: '0.5rem 0', paddingLeft: '1.5rem', fontSize: '0.9rem' }}>\r\n                  <li>All configuration will be lost</li>\r\n                  <li>Device will return to factory defaults</li>\r\n                  <li>Re-provisioning will be required</li>\r\n                </ul>\r\n              </div>\r\n              \r\n              <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n                <button\r\n                  onClick={() => setHardResetModal({ show: false, device: null })}\r\n                  style={{\r\n                    background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                    color: isDark ? '#e0e0e0' : '#495057',\r\n                    border: 'none',\r\n                    padding: '0.75rem 1.5rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n                  onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={confirmHardReset}\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    padding: '0.75rem 1.5rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    boxShadow: '0 4px 12px rgba(220, 53, 69, 0.3)',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                  onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n                >\r\n                  Yes, Hard Reset\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <AccessibleModal\r\n          open={deleteModal.open}\r\n          onClose={deleteModal.closeModal}\r\n          title=\"Delete Device Permanently\"\r\n          id=\"delete-modal-title\"\r\n        >\r\n          {deleteModal.data && (\r\n            <div className=\"modal-delete-content\">\r\n              <div className=\"modal-warning-box\">\r\n                <strong> PERMANENT DELETION</strong>\r\n                <p>This action cannot be undone. All device data will be permanently deleted.</p>\r\n              </div>\r\n              <p>Device to delete: <strong>{deleteModal.data.device_serial}</strong></p>\r\n              <ul className=\"modal-consequences-list\">\r\n                <li>All telemetry data will be lost</li>\r\n                <li>All command history will be deleted</li>\r\n                <li>Device must be re-provisioned to use again</li>\r\n              </ul>\r\n              <div className=\"modal-actions\">\r\n                <button type=\"button\" className=\"btn-secondary\" onClick={deleteModal.closeModal}>Cancel</button>\r\n                <button type=\"button\" className=\"btn-danger\" onClick={confirmDelete}>Yes, Delete Permanently</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </AccessibleModal>\r\n\r\n        {/* Modern Success Notification Modal */}\r\n        {successModal.show && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.4)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            backdropFilter: 'blur(2px)'\r\n          }}>\r\n            <div style={{\r\n              background: isDark ? '#2d2d2d' : 'white',\r\n              borderRadius: '16px',\r\n              padding: '2rem',\r\n              maxWidth: '450px',\r\n              width: '90%',\r\n              boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n              border: isDark ? '1px solid #28a745' : '2px solid #28a745',\r\n              animation: 'slideIn 0.2s ease-out'\r\n            }}>\r\n              <div style={{ textAlign: 'center' }}>\r\n                <div style={{\r\n                  width: '64px',\r\n                  height: '64px',\r\n                  borderRadius: '50%',\r\n                  background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  fontSize: '2rem',\r\n                  margin: '0 auto 1rem',\r\n                  animation: 'scaleIn 0.3s ease-out'\r\n                }}>\r\n                  \r\n                </div>\r\n                \r\n                <h3 style={{ fontSize: '1.5rem', fontWeight: '600', marginBottom: '1rem', color: isDark ? '#e0e0e0' : '#2c3e50' }}>\r\n                  Command Queued\r\n                </h3>\r\n                \r\n                <p style={{ color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6', marginBottom: '1.5rem' }}>\r\n                  {successModal.message}\r\n                </p>\r\n                \r\n                <button\r\n                  onClick={() => setSuccessModal({ show: false, message: '' })}\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    padding: '0.75rem 2rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    boxShadow: '0 4px 12px rgba(40, 167, 69, 0.3)',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                  onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n                >\r\n                  Got it!\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Device Management</h1>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>Devices ({filteredDevices.length})</h2>\r\n          <div className=\"card-actions\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search devices...\"\r\n              value={searchTerm}\r\n              onChange={handleSearch}\r\n              className=\"search-input\"\r\n              style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n            />\r\n            {selectedDevices.size > 0 && (\r\n              <button \r\n                onClick={handleBulkDelete}\r\n                disabled={bulkDeleteLoading}\r\n                style={{ \r\n                  background: 'var(--danger-color, #ef4444)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '8px 16px',\r\n                  borderRadius: '6px',\r\n                  cursor: bulkDeleteLoading ? 'not-allowed' : 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  opacity: bulkDeleteLoading ? '0.6' : '1'\r\n                }}\r\n              >\r\n                {bulkDeleteLoading ? `Deleting ${selectedDevices.size}...` : `Delete Selected (${selectedDevices.size})`}\r\n              </button>\r\n            )}\r\n            <button onClick={() => {\r\n              setCreatingDevice(true);\r\n              setUserSearchTerm('');\r\n              setShowUserDropdown(false);\r\n            }} className=\"btn\">\r\n              Register New Device\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'center', width: '40px' }}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedDevices.size === filteredDevices.length && filteredDevices.length > 0}\r\n                  onChange={handleSelectAll}\r\n                  title=\"Select all displayed devices\"\r\n                  style={{ background: isDark ? '#1a1a1a' : 'white', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                />\r\n              </th>\r\n              <th style={{ textAlign: 'center' }}>Device Serial</th>\r\n              <th style={{ textAlign: 'center' }}>Status</th>\r\n              <th style={{ textAlign: 'center' }}>MAC / HW ID</th>\r\n              <th style={{ textAlign: 'center' }}>Model</th>\r\n              <th style={{ textAlign: 'center' }}>Assigned To</th>\r\n              <th style={{ textAlign: 'center' }}>Config Version</th>\r\n              <th style={{ textAlign: 'center' }}>Provisioned At</th>\r\n              <th style={{ textAlign: 'center' }}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredDevices.length === 0 ? (\r\n              <tr>\r\n                <td colSpan={8} style={{ textAlign: 'center', padding: '2rem' }}>\r\n                  <EmptyState\r\n                    title={searchTerm ? 'No devices match your search' : 'No devices yet'}\r\n                    description={searchTerm ? 'Try a different search term.' : 'Register a device to get started.'}\r\n                    action={!searchTerm ? { label: 'Register New Device', onClick: () => { setCreatingDevice(true); setUserSearchTerm(''); setShowUserDropdown(false); } } : undefined}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            ) : filteredDevices.map((device) => (\r\n              <tr\r\n                key={device.id}\r\n                onClick={() => handleViewDevice(device)}\r\n                style={{\r\n                  background: selectedDevices.has(device.id) ? 'rgba(99, 102, 241, 0.1)' : 'transparent',\r\n                  cursor: 'pointer'\r\n                }}\r\n                className=\"clickable-row\"\r\n              >\r\n                <td style={{ textAlign: 'center' }} onClick={(e) => e.stopPropagation()}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedDevices.has(device.id)}\r\n                    onChange={() => handleSelectDevice(device.id)}\r\n                    onClick={(e) => e.stopPropagation()}\r\n                    style={{ background: isDark ? '#1a1a1a' : 'white', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                  />\r\n                </td>\r\n                <td style={{ textAlign: 'center', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.85rem' }}>{device.device_serial}</td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  <span style={{\r\n                    display: 'inline-block',\r\n                    padding: '4px 8px',\r\n                    borderRadius: '12px',\r\n                    fontSize: '0.75rem',\r\n                    fontWeight: '500',\r\n                    backgroundColor: device.is_online ? '#dcfce7' : '#fee2e2',\r\n                    color: device.is_online ? '#166534' : '#991b1b'\r\n                  }}>\r\n                    {device.is_online ? ' Online' : ' Offline'}\r\n                  </span>\r\n                </td>\r\n                <td style={{ textAlign: 'center', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.82rem', color: device.hw_id ? 'inherit' : 'var(--text-muted, #9ca3af)' }}>{device.hw_id || ''}</td>\r\n                <td style={{ textAlign: 'center', fontSize: '0.875rem' }}>{device.model || <span style={{ color: 'var(--text-muted, #9ca3af)' }}></span>}</td>\r\n                <td style={{ textAlign: 'center' }}>{device.user || '-'}</td>\r\n                <td style={{ textAlign: 'center' }}>{device.config_version || '-'}</td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  {(() => {\r\n                    if (!device.provisioned_at) return 'N/A';\r\n                    const date = new Date(device.provisioned_at);\r\n                    return isNaN(date.getTime()) ? 'Invalid Date' : date.toLocaleDateString();\r\n                  })()}\r\n                </td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleEdit(device);\r\n                    }}\r\n                    style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'var(--text-secondary, #94a3b8)', margin: '0 6px' }}\r\n                    title=\"Edit\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                      <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                    </svg>\r\n                  </button>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleDelete(device);\r\n                    }}\r\n                    style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'var(--danger-color, #ef4444)', margin: '0 6px' }}\r\n                    title=\"Delete\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                      <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                      <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                      <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                    </svg>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        \r\n        {/* Pagination Controls */}\r\n        {totalCount > 0 && (\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            padding: '16px',\r\n            borderTop: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n            gap: '16px'\r\n          }}>\r\n            <div style={{ fontSize: '0.875rem', color: 'var(--text-secondary, #94a3b8)' }}>\r\n              Showing {((currentPage - 1) * pageSize) + 1} - {Math.min(currentPage * pageSize, totalCount)} of {totalCount} devices\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n              <button\r\n                onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\r\n                disabled={currentPage === 1}\r\n                style={{\r\n                  padding: '8px 12px',\r\n                  border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                  borderRadius: '6px',\r\n                  background: currentPage === 1 ? 'rgba(148, 163, 184, 0.1)' : 'transparent',\r\n                  color: 'var(--text-primary, #f8fafc)',\r\n                  cursor: currentPage === 1 ? 'not-allowed' : 'pointer',\r\n                  opacity: currentPage === 1 ? '0.5' : '1'\r\n                }}\r\n              >\r\n                 Previous\r\n              </button>\r\n              \r\n              <div style={{ display: 'flex', gap: '4px', alignItems: 'center' }}>\r\n                {(() => {\r\n                  const pages = [];\r\n                  \r\n                  for (let i = 1; i <= totalPages; i++) {\r\n                    // Always show first page, last page, current page, and adjacent pages\r\n                    const showPage = i === 1 || i === totalPages || Math.abs(i - currentPage) <= 1;\r\n                    \r\n                    if (showPage) {\r\n                      pages.push(\r\n                        <button\r\n                          key={i}\r\n                          onClick={() => setCurrentPage(i)}\r\n                          style={{\r\n                            padding: '6px 10px',\r\n                            border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                            borderRadius: '4px',\r\n                            background: i === currentPage ? 'rgba(99, 102, 241, 0.2)' : 'transparent',\r\n                            color: 'var(--text-primary, #f8fafc)',\r\n                            cursor: 'pointer',\r\n                            fontWeight: i === currentPage ? 'bold' : 'normal',\r\n                            minWidth: '32px'\r\n                          }}\r\n                        >\r\n                          {i}\r\n                        </button>\r\n                      );\r\n                    } else if (pages[pages.length - 1]?.key !== 'ellipsis-' + Math.floor(i / 10)) {\r\n                      // Add ellipsis if we skipped pages and haven't added one recently\r\n                      pages.push(\r\n                        <span key={`ellipsis-${Math.floor(i / 10)}`} style={{ padding: '0 4px', color: 'var(--text-secondary, #94a3b8)' }}>\r\n                          ...\r\n                        </span>\r\n                      );\r\n                    }\r\n                  }\r\n                  \r\n                  return pages;\r\n                })()}\r\n              </div>\r\n              \r\n              <button\r\n                onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\r\n                disabled={currentPage === totalPages}\r\n                style={{\r\n                  padding: '8px 12px',\r\n                  border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                  borderRadius: '6px',\r\n                  background: currentPage === totalPages ? 'rgba(148, 163, 184, 0.1)' : 'transparent',\r\n                  color: 'var(--text-primary, #f8fafc)',\r\n                  cursor: currentPage === totalPages ? 'not-allowed' : 'pointer',\r\n                  opacity: currentPage === totalPages ? '0.5' : '1'\r\n                }}\r\n              >\r\n                Next \r\n              </button>\r\n            </div>\r\n            \r\n            <select\r\n              value={pageSize}\r\n              onChange={(e) => {\r\n                setPageSize(parseInt(e.target.value));\r\n                setCurrentPage(1);\r\n              }}\r\n              style={{\r\n                padding: '8px',\r\n                border: isDark ? '1px solid #404040' : '1px solid rgba(148, 163, 184, 0.2)',\r\n                borderRadius: '6px',\r\n                background: isDark ? '#1a1a1a' : '#0f172a',\r\n                color: isDark ? '#e0e0e0' : '#f8fafc',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <option value={10}>10 per page</option>\r\n              <option value={25}>25 per page</option>\r\n              <option value={50}>50 per page</option>\r\n              <option value={100}>100 per page</option>\r\n            </select>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {(editingDevice || creatingDevice) && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <h3>{editingDevice ? `Edit Device: ${editingDevice.device_serial}` : 'Register New Device'}</h3>\r\n            <form onSubmit={(e) => { e.preventDefault(); editingDevice ? handleSave() : handleCreate(); }}>\r\n              <div className=\"modal-body\">\r\n                \r\n                {/* Device Identity */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Device Identity</h4>\r\n                  <div className=\"form-grid\">\r\n                    <div className=\"form-group\">\r\n                      <label>Device Serial Number</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingDevice ? editForm.device_serial : createForm.device_serial}\r\n                        onChange={(e) => editingDevice ? setEditForm({...editForm, device_serial: e.target.value}) : setCreateForm({...createForm, device_serial: e.target.value})}\r\n                        required\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"SN-12345678\"\r\n                        style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Ownership */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Ownership & Assignment</h4>\r\n                  <div className=\"form-grid\">\r\n                    <div className=\"form-group\">\r\n                      <label>Assigned User</label>\r\n                      <div style={{ position: 'relative' }} onClick={(e) => e.stopPropagation()}>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"Search and select user...\"\r\n                          value={userSearchTerm}\r\n                          onChange={(e) => {\r\n                            setUserSearchTerm(e.target.value);\r\n                            setShowUserDropdown(true);\r\n                          }}\r\n                          onFocus={() => setShowUserDropdown(true)}\r\n                          autoComplete=\"off\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                        {(editingDevice ? editForm.user : createForm.user) && (\r\n                          <div style={{ marginTop: '8px', fontSize: '0.875rem', color: isDark ? '#b0b0b0' : '#94a3b8' }}>\r\n                            <strong>Selected:</strong> {users.find(u => u.username === (editingDevice ? editForm.user : createForm.user))?.first_name} {users.find(u => u.username === (editingDevice ? editForm.user : createForm.user))?.last_name} ({editingDevice ? editForm.user : createForm.user})\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => {\r\n                                if (editingDevice) {\r\n                                  setEditForm({...editForm, user: ''});\r\n                                } else {\r\n                                  setCreateForm({...createForm, user: ''});\r\n                                }\r\n                                setUserSearchTerm('');\r\n                              }}\r\n                              className=\"btn-icon btn-icon-danger\"\r\n                              style={{ marginLeft: '10px' }}\r\n                              title=\"Remove Assignment\"\r\n                            >\r\n                              \r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                        {showUserDropdown && (\r\n                          <div style={{\r\n                            position: 'absolute',\r\n                            top: '100%',\r\n                            left: 0,\r\n                            right: 0,\r\n                            background: 'var(--bg-secondary, #0f172a)',\r\n                            border: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n                            borderRadius: '8px',\r\n                            maxHeight: '200px',\r\n                            overflowY: 'auto',\r\n                            zIndex: 1000,\r\n                            boxShadow: 'var(--shadow-xl)',\r\n                            marginTop: '4px'\r\n                          }}>\r\n                            {filteredUsers.length > 0 ? (\r\n                              filteredUsers.map((user) => (\r\n                                <div\r\n                                  key={user.id}\r\n                                  onClick={() => {\r\n                                    if (editingDevice) {\r\n                                      setEditForm({...editForm, user: user.username});\r\n                                    } else {\r\n                                      setCreateForm({...createForm, user: user.username});\r\n                                    }\r\n                                    setUserSearchTerm(`${user.first_name} ${user.last_name} (${user.username})`);\r\n                                    setShowUserDropdown(false);\r\n                                  }}\r\n                                  style={{\r\n                                    padding: '12px 16px',\r\n                                    cursor: 'pointer',\r\n                                    borderBottom: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n                                    background: (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent',\r\n                                    color: 'var(--text-primary, #f8fafc)',\r\n                                    transition: 'all 0.15s ease',\r\n                                    fontSize: '0.875rem'\r\n                                  }}\r\n                                  onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.06)'}\r\n                                  onMouseLeave={(e) => e.currentTarget.style.background = (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent'}\r\n                                >\r\n                                  {user.first_name} {user.last_name} ({user.username}) <br/>\r\n                                  <span style={{ fontSize: '0.75rem', color: 'var(--text-secondary, #94a3b8)' }}>{user.email}</span>\r\n                                </div>\r\n                              ))\r\n                            ) : (\r\n                              <div style={{ padding: '12px 16px', color: 'var(--text-muted, #64748b)', fontSize: '0.875rem' }}>\r\n                                {userSearchTerm.trim() === '' ? 'Start typing to search users...' : 'No users found'}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Configuration */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Configuration</h4>\r\n                  <div className=\"form-grid form-grid-2\">\r\n                    <div className=\"form-group\">\r\n                      <label>Preset Template</label>\r\n                      <select\r\n                        value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                        onChange={(e) => editingDevice ? setEditForm({ ...editForm, config_version: e.target.value }) : setCreateForm({ ...createForm, config_version: e.target.value })}\r\n                        className=\"full-width\"\r\n                        style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                      >\r\n                        <option value=\"\">-- Manual Configuration --</option>\r\n                        {presetsLoading && <option value=\"\" disabled>Loading presets...</option>}\r\n                        {!presetsLoading && presets.map((preset) => (\r\n                          <option key={preset.id} value={getPresetConfigId(preset)}>\r\n                            {preset.name} ({getPresetConfigId(preset) || 'no ID'})\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                      <small className=\"form-hint\">Selecting a preset sets the Config Version ID below.</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Config Version ID</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                        onChange={(e) => editingDevice ? setEditForm({...editForm, config_version: e.target.value}) : setCreateForm({...createForm, config_version: e.target.value})}\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"Manual Config ID\"\r\n                        style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              {editingDevice && (\r\n                <div style={{ padding: '0 24px' }}>\r\n                   <AuditTrail\r\n                     createdBy={editingDevice.created_by_username}\r\n                     createdAt={editingDevice.created_at}\r\n                     updatedBy={editingDevice.updated_by_username}\r\n                     updatedAt={editingDevice.updated_at}\r\n                   />\r\n                </div>\r\n              )}\r\n              <div className=\"form-actions\" style={{ padding: '24px' }}>\r\n                <button type=\"submit\" className=\"btn\">{editingDevice ? 'Save Changes' : 'Register Device'}</button>\r\n                <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n              </div>\r\n            </form>\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    {/* Modern Reboot Confirmation Modal */}\r\n    <AccessibleModal\r\n      open={rebootModal.open}\r\n      onClose={rebootModal.closeModal}\r\n      title=\"Confirm Reboot\"\r\n      id=\"reboot-modal-title-list\"\r\n    >\r\n      {rebootModal.data && (\r\n        <div className=\"modal-reboot-content\">\r\n          <p className=\"modal-reboot-message\">\r\n            Are you sure you want to reboot device <strong>{rebootModal.data.device_serial}</strong>?\r\n          </p>\r\n          <div className=\"modal-warning-box modal-reboot-note\">\r\n            <strong> Note:</strong> The device will restart on its next heartbeat. Any unsaved data may be lost.\r\n          </div>\r\n          <div className=\"modal-actions\">\r\n            <button type=\"button\" className=\"btn-secondary\" onClick={rebootModal.closeModal}>Cancel</button>\r\n            <button type=\"button\" className=\"btn-primary\" onClick={confirmReboot}>Confirm Reboot</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </AccessibleModal>\r\n\r\n    {/* Modern Hard Reset Confirmation Modal */}\r\n    {hardResetModal.show && hardResetModal.device && (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.6)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 1000,\r\n        backdropFilter: 'blur(4px)'\r\n      }}>\r\n        <div style={{\r\n          background: isDark ? '#2d2d2d' : 'white',\r\n          borderRadius: '16px',\r\n          padding: '2rem',\r\n          maxWidth: '500px',\r\n          width: '90%',\r\n          boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n          border: isDark ? '2px solid #dc3545' : '2px solid #dc3545',\r\n          animation: 'slideIn 0.2s ease-out'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n            <div style={{\r\n              width: '48px',\r\n              height: '48px',\r\n              borderRadius: '12px',\r\n              background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '1.5rem',\r\n              animation: 'pulse 2s infinite'\r\n            }}>\r\n              \r\n            </div>\r\n            <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: '#dc3545' }}>\r\n              Hard Reset Warning\r\n            </h3>\r\n          </div>\r\n          \r\n          <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n            <div style={{\r\n              background: isDark ? 'rgba(220, 53, 69, 0.1)' : '#f8d7da',\r\n              border: isDark ? '1px solid rgba(220, 53, 69, 0.3)' : '1px solid #f5c6cb',\r\n              borderRadius: '8px',\r\n              padding: '1rem',\r\n              marginBottom: '1rem',\r\n              color: isDark ? '#ff9999' : '#721c24'\r\n            }}>\r\n              <strong style={{ fontSize: '1.05rem' }}> CRITICAL WARNING</strong>\r\n              <p style={{ margin: '0.5rem 0 0 0', fontSize: '0.9rem' }}>\r\n                This action will <strong>erase all device configuration</strong> and restart the device to factory settings.\r\n              </p>\r\n            </div>\r\n            \r\n            <p style={{ marginBottom: '0.75rem' }}>\r\n              Device to reset: <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{hardResetModal.device.device_serial}</strong>\r\n            </p>\r\n            \r\n            <ul style={{ margin: '0.5rem 0', paddingLeft: '1.5rem', fontSize: '0.9rem' }}>\r\n              <li>All configuration will be lost</li>\r\n              <li>Device will return to factory defaults</li>\r\n              <li>Re-provisioning will be required</li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n            <button\r\n              onClick={() => setHardResetModal({ show: false, device: null })}\r\n              style={{\r\n                background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                color: isDark ? '#e0e0e0' : '#495057',\r\n                border: 'none',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n              onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={confirmHardReset}\r\n              style={{\r\n                background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                boxShadow: '0 4px 12px rgba(220, 53, 69, 0.3)',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n              onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n            >\r\n              Yes, Hard Reset\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    <AccessibleModal\r\n      open={deleteModal.open}\r\n      onClose={deleteModal.closeModal}\r\n      title=\"Delete Device Permanently\"\r\n      id=\"delete-modal-title-list\"\r\n    >\r\n      {deleteModal.data && (\r\n        <div className=\"modal-delete-content\">\r\n          <div className=\"modal-warning-box\">\r\n            <strong> PERMANENT DELETION</strong>\r\n            <p>This action cannot be undone. All device data will be permanently deleted.</p>\r\n          </div>\r\n          <p>Device to delete: <strong>{deleteModal.data.device_serial}</strong></p>\r\n          <ul className=\"modal-consequences-list\">\r\n            <li>All telemetry data will be lost</li>\r\n            <li>All command history will be deleted</li>\r\n            <li>Device must be re-provisioned to use again</li>\r\n          </ul>\r\n          <div className=\"modal-actions\">\r\n            <button type=\"button\" className=\"btn-secondary\" onClick={deleteModal.closeModal}>Cancel</button>\r\n            <button type=\"button\" className=\"btn-danger\" onClick={confirmDelete}>Yes, Delete Permanently</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </AccessibleModal>\r\n\r\n    {/* Modern Success Notification Modal */}\r\n    {successModal.show && (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.4)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 1000,\r\n        backdropFilter: 'blur(2px)'\r\n      }}>\r\n        <div style={{\r\n          background: isDark ? '#2d2d2d' : 'white',\r\n          borderRadius: '16px',\r\n          padding: '2rem',\r\n          maxWidth: '450px',\r\n          width: '90%',\r\n          boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n          border: isDark ? '1px solid #28a745' : '2px solid #28a745',\r\n          animation: 'slideIn 0.2s ease-out'\r\n        }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <div style={{\r\n              width: '64px',\r\n              height: '64px',\r\n              borderRadius: '50%',\r\n              background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '2rem',\r\n              margin: '0 auto 1rem',\r\n              animation: 'scaleIn 0.3s ease-out'\r\n            }}>\r\n              \r\n            </div>\r\n            \r\n            <h3 style={{ fontSize: '1.5rem', fontWeight: '600', marginBottom: '1rem', color: isDark ? '#e0e0e0' : '#2c3e50' }}>\r\n              Command Queued\r\n            </h3>\r\n            \r\n            <p style={{ color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6', marginBottom: '1.5rem' }}>\r\n              {successModal.message}\r\n            </p>\r\n            \r\n            <button\r\n              onClick={() => setSuccessModal({ show: false, message: '' })}\r\n              style={{\r\n                background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '0.75rem 2rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                boxShadow: '0 4px 12px rgba(40, 167, 69, 0.3)',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n              onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n            >\r\n              Got it!\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    {/* Bulk Delete Confirmation Modal */}\r\n    {bulkDeleteModal.show && (\r\n      <div style={{\r\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\r\n        background: 'rgba(0,0,0,0.6)', display: 'flex', alignItems: 'center',\r\n        justifyContent: 'center', zIndex: 1000, backdropFilter: 'blur(4px)'\r\n      }}>\r\n        <div style={{\r\n          background: isDark ? '#2d2d2d' : 'white', borderRadius: '16px',\r\n          padding: '2rem', maxWidth: '520px', width: '90%',\r\n          boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n          border: '2px solid #7f1d1d', animation: 'slideIn 0.2s ease-out'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n            <div style={{\r\n              width: '48px', height: '48px', borderRadius: '12px',\r\n              background: 'linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%)',\r\n              display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n              fontSize: '1.5rem', animation: 'pulse 2s infinite'\r\n            }}></div>\r\n            <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: '#7f1d1d' }}>\r\n              Delete {bulkDeleteModal.deviceList.length} Device{bulkDeleteModal.deviceList.length !== 1 ? 's' : ''} Permanently\r\n            </h3>\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n            <div style={{\r\n              background: isDark ? 'rgba(127, 29, 29, 0.1)' : '#fee2e2',\r\n              border: isDark ? '1px solid rgba(127, 29, 29, 0.3)' : '1px solid #fecaca',\r\n              borderRadius: '8px', padding: '1rem', marginBottom: '1rem',\r\n              color: isDark ? '#fca5a5' : '#991b1b'\r\n            }}>\r\n              <strong style={{ fontSize: '1.05rem' }}> PERMANENT DELETION</strong>\r\n              <p style={{ margin: '0.5rem 0 0 0', fontSize: '0.9rem' }}>\r\n                This action <strong>cannot be undone</strong>. All data for these devices will be permanently deleted.\r\n              </p>\r\n            </div>\r\n            <p style={{ marginBottom: '0.5rem' }}>Devices to delete:</p>\r\n            <ul style={{ margin: '0', paddingLeft: '1.5rem', fontSize: '0.9rem', maxHeight: '120px', overflowY: 'auto' }}>\r\n              {bulkDeleteModal.deviceList.map(d => (\r\n                <li key={d.id} style={{ color: isDark ? '#e0e0e0' : '#2c3e50', fontWeight: '600' }}>{d.device_serial}</li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n            <button\r\n              onClick={() => setBulkDeleteModal({ show: false, deviceList: [] })}\r\n              style={{\r\n                background: isDark ? '#3a3a3a' : '#e0e0e0', color: isDark ? '#e0e0e0' : '#495057',\r\n                border: 'none', padding: '0.75rem 1.5rem', borderRadius: '8px',\r\n                fontSize: '0.95rem', fontWeight: '600', cursor: 'pointer', transition: 'all 0.2s'\r\n              }}\r\n            >Cancel</button>\r\n            <button\r\n              onClick={confirmBulkDelete}\r\n              disabled={bulkDeleteLoading}\r\n              style={{\r\n                background: 'linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%)', color: 'white',\r\n                border: 'none', padding: '0.75rem 1.5rem', borderRadius: '8px',\r\n                fontSize: '0.95rem', fontWeight: '600', cursor: bulkDeleteLoading ? 'not-allowed' : 'pointer',\r\n                boxShadow: '0 4px 12px rgba(127, 29, 29, 0.3)', transition: 'all 0.2s',\r\n                opacity: bulkDeleteLoading ? 0.7 : 1\r\n              }}\r\n            >{bulkDeleteLoading ? 'Deleting' : 'Yes, Delete All'}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Devices;","import React from 'react';\n\ninterface EmptyStateProps {\n  icon?: React.ReactNode;\n  title: string;\n  description?: string;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n}\n\nconst DefaultIcon = () => (\n  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth={1.5}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\"\n      d=\"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z\"\n    />\n  </svg>\n);\n\nexport const EmptyState: React.FC<EmptyStateProps> = ({\n  icon,\n  title,\n  description,\n  action,\n}) => (\n  <div className=\"empty-state\">\n    <div className=\"empty-state-icon\">{icon ?? <DefaultIcon />}</div>\n    <p className=\"empty-state-title\">{title}</p>\n    {description && <p className=\"empty-state-desc\">{description}</p>}\n    {action && (\n      <button className=\"empty-state-cta\" onClick={action.onClick}>\n        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2.5}>\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\n        </svg>\n        {action.label}\n      </button>\n    )}\n  </div>\n);\n"],"names":["AuditTrail","_ref","createdBy","createdAt","updatedBy","updatedAt","className","formatDate","dateString","Date","toLocaleString","_unused","_jsxs","children","_jsx","React","useDebouncedCallback","callback","delay","arguments","length","undefined","timeoutRef","useRef","callbackRef","useEffect","current","debouncedCallback","useCallback","_len","args","Array","_key","clearTimeout","setTimeout","TABS","id","label","icon","ForecastTooltip","active","payload","isDark","useTheme","style","background","backdropFilter","border","concat","borderRadius","padding","boxShadow","minWidth","fontFamily","fontWeight","color","fontSize","marginBottom","borderBottom","paddingBottom","display","flexDirection","gap","map","entry","_entry$name","_entry$name2","_entry$name3","unit","name","includes","alignItems","justifyContent","width","height","stroke","fill","flexShrink","split","Number","value","toFixed","IST","IST_TIMEZONE","istDate","d","toLocaleDateString","timeZone","istDateOffset","n","IST_MS","nowIST","now","istMidnightMS","Math","floor","fmt","ts","range","toLocaleTimeString","hour","minute","weekday","month","day","IconSun","viewBox","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","x1","y1","x2","y2","IconBattery","x","y","rx","IconLoad","points","IconEnergy","IconCloud","IconGrid","IconThermometer","KpiCard","_ref2","sub","accent","badge","flex","textTransform","letterSpacing","margin","lineHeight","marginLeft","marginTop","WeatherHourlyStrip","_ref3","hourly","overflowX","paddingTop","h","i","_h$cloud_cover_pct","_h$ghi_wm","_h$temperature_c","_h$wind_speed_ms","time","forecast_for","_unused2","cloud","cloud_cover_pct","ghi","ghi_wm2","temp","temperature_c","wind","wind_speed_ms","humidity","humidity_pct","precip","precip_prob_pct","ghiPct","min","humPct","isNow","wi","ghiColor","humColor","precipColor","position","top","title","round","overflow","_Fragment","EnergyBreakdownRow","_ref4","latest","items","pv_today_kwh","bg","grid_buy_today_kwh","grid_sell_today_kwh","batt_charge_today_kwh","batt_discharge_today_kwh","load_today_kwh","filter","e","flexWrap","alignSelf","opacity","InsightsRow","_ref5","_latest$pv_today_kwh","_latest$load_today_kw","_latest$grid_buy_toda","pvKwh","loadKwh","gridBuy","co2Kg","selfSufPct","max","gridDepPct","push","item","REGIME_STYLE","night","ramp","midday","ForecastXAxisTick","_ref6","_payload$value","_val$split$","_val$split$2","forecastWindow","fw","val","isToday","line1","line2","transform","dy","textAnchor","ForecastTable","_ref7","data","theadBg","rowBorder","maxHeight","overflowY","borderCollapse","zIndex","textAlign","row","_REGIME_STYLE$row$reg","_row$timeLabel","_row$p10$toFixed","_row$p","_row$p50$toFixed","_row$p2","_row$p90$toFixed","_row$p3","_row$physics$toFixed","_row$physics","_row$ghi$toFixed","_row$ghi","rc","regime","dateLabel","marginRight","timeLabel","p10","p50","p90","fontStyle","physics","_ref8","_latest$pv1_power_w","_latest$pv2_power_w","_latest$battery_soc_p","_latest$load_power_w","_latest$pv_today_kwh2","_latest$grid_power_w","_latest$battery_power","_latest$inverter_temp","_latest$battery_volta","_latest$grid_frequenc","siteId","autoRefresh","telemetry","setTelemetry","useState","forecast","setForecast","weather","setWeather","loading","setLoading","error","setError","lastUpdated","setLastUpdated","activeTab","setActiveTab","showBands","setShowBands","P10","P50","P90","dateRange","setDateRange","customStartDate","setCustomStartDate","customEndDate","setCustomEndDate","debouncedStart","setDebouncedStart","debouncedEnd","setDebouncedEnd","t","forecastView","setForecastView","setForecastWindow","refAreaLeft","setRefAreaLeft","refAreaRight","setRefAreaRight","isSelecting","setIsSelecting","zoomStart","setZoomStart","zoomEnd","setZoomEnd","tooltipStyle","useMemo","fetchAll","async","forecastStart","toISOString","forecastEnd","getTime","telemetryParams","start_date","end_date","days","historyParams","sevenDaysAgo","thirtyDaysAgo","customStart","customEnd","results","Promise","all","apiService","getSiteTelemetry","getSiteForecast","getSiteWeather","getSiteHistory","resolve","tel","fcst","wth","hist","merged","isArray","tsSet","Set","timestamp","has","sort","a","b","localeCompare","err","Error","message","setInterval","clearInterval","pvKw","pv1_power_w","pv2_power_w","batSoc","battery_soc_percent","loadKw","load_power_w","todayKwh","gridKw","grid_power_w","batPowerKw","battery_power_w","invTemp","inverter_temp_c","batVoltage","battery_voltage_v","runState","run_state","gridImporting","gridExporting","batCharging","runStateBadge","invTempColor","historyData","_","isDay","buckets","Map","forEach","key","getFullYear","getMonth","getDate","getHours","set","get","from","values","bucket","avg","field","reduce","s","_r$field","first","_r$pv_today_kwh","aggregateByPeriod","_row$pv1_power_w","_row$pv2_power_w","_row$load_power_w","_row$grid_power_w","_row$battery_soc_perc","forecastFiltered","forecastData","todayIST","filtered","clean","replace","forecastIST","mapped","_row$regime","rawDate","rawTs","p50_kw","p10_kw","p90_kw","physics_baseline_kw","ghi_input_wm2","zoomedForecastData","li","findIndex","ri","slice","forecastTickObjects","getUTCMinutes","getUTCHours","dayMap","forecastTickValues","forecastGeneratedAt","maxGenAt","generated_at","fcastP10","fcastP50","fcastP90","abs","achievedPct","todayISTStr","todayForecast","todayFcastP50","cardBg","headerGrad","toggleBg","toggleActive","borderClr","noData","onChange","target","cursor","type","onClick","tab","isActive","transition","grid_voltage_v","grid_frequency_hz","p","hourly_forecast","ResponsiveContainer","AreaChart","right","left","bottom","offset","stopColor","stopOpacity","CartesianGrid","strokeDasharray","XAxis","dataKey","interval","ceil","angle","tick","YAxis","yAxisId","tickFormatter","v","orientation","domain","Tooltip","contentStyle","formatter","String","Legend","iconType","iconSize","wrapperStyle","Area","dot","Line","desc","_objectSpread","el","document","getElementById","default","html2canvas","canvas","scale","createElement","download","href","toDataURL","click","onMouseOver","currentTarget","onMouseOut","keys","Object","csv","join","k","_k","JSON","stringify","blob","Blob","url","URL","createObjectURL","body","appendChild","removeChild","revokeObjectURL","userSelect","onMouseDown","activeLabel","onMouseMove","onMouseUp","vertical","tickLine","axisLine","allowDataOverflow","ticks","minTickGap","props","content","animationDuration","pointerEvents","verticalAlign","activeDot","ReferenceLine","dateL","ReferenceArea","fillOpacity","strokeOpacity","year","AccessibleModal","open","onClose","containerRef","_containerRef$current","handleKeyDown","addEventListener","previousActive","activeElement","focus","removeEventListener","role","ref","tabIndex","stopPropagation","useModal","setOpen","setData","openModal","closeModal","Devices","_users$find3","_users$find4","searchParams","useSearchParams","devices","setDevices","filteredDevices","setFilteredDevices","editingDevice","setEditingDevice","creatingDevice","setCreatingDevice","searchTerm","setSearchTerm","userSearchTerm","setUserSearchTerm","filteredUsers","setFilteredUsers","showUserDropdown","setShowUserDropdown","users","setUsers","selectedDevices","setSelectedDevices","bulkDeleteLoading","setBulkDeleteLoading","currentPage","setCurrentPage","pageSize","setPageSize","DEFAULT_PAGE_SIZE","totalCount","setTotalCount","totalPages","setTotalPages","presets","setPresets","presetsLoading","setPresetsLoading","health","setHealth","telemetrySummary","setTelemetrySummary","telemetryData","setTelemetryData","dashboardError","setDashboardError","selectedDevice","setSelectedDevice","deviceLogs","setDeviceLogs","logsLoading","setLogsLoading","editForm","setEditForm","device_serial","user","config_version","createForm","setCreateForm","siteDetails","setSiteDetails","siteLoading","setSiteLoading","editingSite","setEditingSite","siteForm","setSiteForm","site_id","display_name","latitude","longitude","capacity_kw","tilt_deg","azimuth_deg","timezone","is_active","siteSaving","setSiteSaving","siteError","setSiteError","devicePreset","setDevicePreset","rebootModal","deleteModal","hardResetModal","setHardResetModal","show","device","bulkDeleteModal","setBulkDeleteModal","deviceList","successModal","setSuccessModal","fetchDevices","page","search","response","getDevices","count","total_pages","current_page","fetchDeviceLogs","getDeviceLogs","deviceId","logs","console","handleViewDevice","preset","find","config_id","getDeviceSite","then","catch","finally","customers","getUsers","is_staff","is_superuser","fetchUsers","getPresets","fetchPresets","healthData","getSystemHealth","getTelemetry","telemetryArray","currentLatest","itemDate","isNaN","deviceCount","size","totalPoints","latestTimestamp","fetchDashboardData","deviceIdParam","parseInt","foundDevice","handleClickOutside","trim","searchLower","toLowerCase","fullName","first_name","last_name","username","email","debouncedSearch","query","handleEdit","_users$find","_users$find2","u","handleSave","updateDevice","handleCreate","createDevice","confirmReboot","rebootDevice","serial","confirmHardReset","hardResetDevice","confirmDelete","deleteDevice","handleCancel","handleBackToList","SkeletonDeviceList","getPresetConfigId","_preset$gateway_confi","_preset$gateway_confi2","gateway_configuration","general_settings","_devicePreset$gateway","_devicePreset$gateway2","deviceTelemetry","latestTelemetry","handleReboot","backgroundColor","handleHardReset","handleDeleteDevice","gridTemplateColumns","is_online","last_heartbeat","hw_id","model","gridColumn","pending_config_update","slaves_count","config_ack_ver","version","last_updated","config_acked_at","ackTime","diffMs","diffMins","diffHours","diffDays","config_downloaded_at","provisioned_at","created_by_username","checked","logs_enabled","enabled","toggleDeviceLogs","handleToggleLogs","overall_health","active_devices","total_devices","total_telemetry_points","data_type","SiteDataPanel","disabled","log","level","onSubmit","preventDefault","parseFloat","updated","updateDeviceSite","createDeviceSite","required","placeholder","autoComplete","step","onFocus","onMouseEnter","onMouseLeave","created_at","updated_by_username","updated_at","maxWidth","animation","paddingLeft","handleBulkDelete","Boolean","handleSelectAll","allIds","colSpan","EmptyState","description","action","newSelected","delete","add","handleSelectDevice","date","handleDelete","borderTop","pages","_pages","deleteDevicesBulk","updatedDevices","DefaultIcon"],"sourceRoot":""}