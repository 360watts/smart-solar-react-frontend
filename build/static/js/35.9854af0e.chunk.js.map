{"version":3,"file":"static/js/35.9854af0e.chunk.js","mappings":"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","sources":["components/DevicePresets.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface Preset {\r\n  id: number;\r\n  config_id: string;\r\n  name: string;\r\n  description: string;\r\n  gateway_configuration: {\r\n    general_settings: {\r\n      config_id: string;\r\n      schema_version: number;\r\n      last_updated: string;\r\n    };\r\n    uart_configuration: {\r\n      baud_rate: number;\r\n      data_bits: number;\r\n      stop_bits: number;\r\n      parity: string;\r\n    };\r\n  };\r\n  slaves_count: number;\r\n}\r\n\r\ninterface SlaveDevice {\r\n  id: number;\r\n  slaveId: number;\r\n  deviceName: string;\r\n  pollingIntervalMs: number;\r\n  timeoutMs: number;\r\n  enabled: boolean;\r\n  registers: RegisterMapping[];\r\n}\r\n\r\ninterface RegisterMapping {\r\n  id: number;\r\n  label: string;\r\n  address: number;\r\n  numRegisters: number;\r\n  functionCode: number;\r\n  dataType: number;\r\n  scaleFactor: number;\r\n  offset: number;\r\n  enabled: boolean;\r\n}\r\n\r\nconst DevicePresets: React.FC = () => {\r\n  const [presets, setPresets] = useState<Preset[]>([]);\r\n  const [filteredPresets, setFilteredPresets] = useState<Preset[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [editingPreset, setEditingPreset] = useState<Preset | null>(null);\r\n  const [creatingPreset, setCreatingPreset] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedPreset, setSelectedPreset] = useState<Preset | null>(null);\r\n  const [configuringSlaves, setConfiguringSlaves] = useState<Preset | null>(null);\r\n  const [slaves, setSlaves] = useState<SlaveDevice[]>([]);\r\n  const [creatingSlave, setCreatingSlave] = useState(false);\r\n  const [editingSlave, setEditingSlave] = useState<SlaveDevice | null>(null);\r\n  const [createPresetSlaveMode, setCreatePresetSlaveMode] = useState<'none' | 'create' | 'select'>('none');\r\n  const [globalSlaves, setGlobalSlaves] = useState<SlaveDevice[]>([]);\r\n  const [globalSlavesLoading, setGlobalSlavesLoading] = useState(false);\r\n  const [selectedGlobalSlaveId, setSelectedGlobalSlaveId] = useState<number | ''>('');\r\n  const [editForm, setEditForm] = useState({\r\n    config_id: '',\r\n    name: '',\r\n    description: '',\r\n    baud_rate: 9600,\r\n    data_bits: 8,\r\n    stop_bits: 1,\r\n    parity: 0,\r\n  });\r\n  const [createForm, setCreateForm] = useState({\r\n    name: '',\r\n    description: '',\r\n    baud_rate: 9600,\r\n    data_bits: 8,\r\n    stop_bits: 1,\r\n    parity: 0,\r\n  });\r\n  const [slaveForm, setSlaveForm] = useState({\r\n    slave_id: '',\r\n    device_name: '',\r\n    polling_interval_ms: 5000,\r\n    timeout_ms: 1000,\r\n    enabled: true,\r\n    registers: [] as RegisterMapping[]\r\n  });\r\n  const [registerForm, setRegisterForm] = useState({\r\n    label: '',\r\n    address: 0,\r\n    num_registers: 1,\r\n    function_code: 3,\r\n    data_type: 0,\r\n    scale_factor: 1.0,\r\n    offset: 0.0,\r\n    enabled: true\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchPresets();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!creatingPreset || createPresetSlaveMode !== 'select') return;\r\n\r\n    const fetchGlobalSlaves = async () => {\r\n      try {\r\n        setGlobalSlavesLoading(true);\r\n        const data = await apiService.getGlobalSlaves();\r\n        const mapped = data.map((slave: any) => ({\r\n          id: slave.id,\r\n          slaveId: slave.slave_id,\r\n          deviceName: slave.device_name,\r\n          pollingIntervalMs: slave.polling_interval_ms,\r\n          timeoutMs: slave.timeout_ms,\r\n          enabled: slave.enabled,\r\n          registers: slave.registers || [],\r\n        }));\r\n        setGlobalSlaves(mapped);\r\n      } catch (err) {\r\n        console.error('Failed to fetch global slaves:', err);\r\n      } finally {\r\n        setGlobalSlavesLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchGlobalSlaves();\r\n  }, [creatingPreset, createPresetSlaveMode]);\r\n\r\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedSearchTerm(searchTerm);\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [searchTerm]);\r\n\r\n  useEffect(() => {\r\n    fetchPresets(debouncedSearchTerm);\r\n  }, [debouncedSearchTerm]);\r\n\r\n  useEffect(() => {\r\n    if (!creatingPreset) return;\r\n    setSlaveForm({\r\n      slave_id: '',\r\n      device_name: '',\r\n      polling_interval_ms: 5000,\r\n      timeout_ms: 1000,\r\n      enabled: true,\r\n      registers: [] as RegisterMapping[]\r\n    });\r\n    setRegisterForm({\r\n      label: '',\r\n      address: 0,\r\n      num_registers: 1,\r\n      function_code: 3,\r\n      data_type: 0,\r\n      scale_factor: 1.0,\r\n      offset: 0.0,\r\n      enabled: true\r\n    });\r\n  }, [creatingPreset]);\r\n\r\n  const fetchPresets = async (search?: string) => {\r\n    try {\r\n      const data = await apiService.getPresets();\r\n      // Filter presets based on search term\r\n      let filteredData = data;\r\n      if (search) {\r\n        const searchLower = search.toLowerCase();\r\n        filteredData = data.filter((preset: Preset) =>\r\n          preset.name.toLowerCase().includes(searchLower) ||\r\n          preset.config_id.toLowerCase().includes(searchLower) ||\r\n          preset.description.toLowerCase().includes(searchLower)\r\n        );\r\n      }\r\n      setPresets(data);\r\n      setFilteredPresets(filteredData);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  const handleEdit = (preset: Preset) => {\r\n    setEditingPreset(preset);\r\n    setEditForm({\r\n      config_id: preset.gateway_configuration.general_settings.config_id,\r\n      name: preset.name,\r\n      description: preset.description,\r\n      baud_rate: preset.gateway_configuration.uart_configuration.baud_rate,\r\n      data_bits: preset.gateway_configuration.uart_configuration.data_bits,\r\n      stop_bits: preset.gateway_configuration.uart_configuration.stop_bits,\r\n      parity: preset.gateway_configuration.uart_configuration.parity === 'None' ? 0 : \r\n              preset.gateway_configuration.uart_configuration.parity === 'Odd' ? 1 : 2,\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editingPreset) return;\r\n\r\n    try {\r\n      await apiService.updatePreset(editingPreset.id, editForm);\r\n      setEditingPreset(null);\r\n      // Refetch to get the updated preset with all fields\r\n      await fetchPresets(searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update preset');\r\n    }\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    try {\r\n      const result = await apiService.createPreset(createForm);\r\n      const createdConfigId =\r\n        result?.gateway_configuration?.general_settings?.config_id ||\r\n        result?.config_id ||\r\n        result?.configId ||\r\n        '';\r\n\r\n      if (!createdConfigId && createPresetSlaveMode !== 'none') {\r\n        setError('Preset created but config id was not returned. Slave setup skipped.');\r\n      }\r\n\r\n      if (createdConfigId && createPresetSlaveMode === 'create') {\r\n        if (!slaveForm.slave_id || !slaveForm.device_name) {\r\n          setError('Slave ID and Device Name are required to create a slave.');\r\n          return;\r\n        }\r\n        await apiService.createSlave(createdConfigId, {\r\n          slave_id: parseInt(slaveForm.slave_id),\r\n          device_name: slaveForm.device_name,\r\n          polling_interval_ms: slaveForm.polling_interval_ms,\r\n          timeout_ms: slaveForm.timeout_ms,\r\n          enabled: slaveForm.enabled,\r\n          registers: slaveForm.registers,\r\n        });\r\n      }\r\n\r\n      if (createdConfigId && createPresetSlaveMode === 'select' && selectedGlobalSlaveId) {\r\n        await apiService.addSlavesToPreset(createdConfigId, [selectedGlobalSlaveId as number]);\r\n      }\r\n\r\n      setCreatingPreset(false);\r\n      setCreatePresetSlaveMode('none');\r\n      setSelectedGlobalSlaveId('');\r\n      setCreateForm({\r\n        name: '',\r\n        description: '',\r\n        baud_rate: 9600,\r\n        data_bits: 8,\r\n        stop_bits: 1,\r\n        parity: 0,\r\n      });\r\n      // Refetch to get the new preset with all fields\r\n      await fetchPresets(searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to create preset');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (preset: any) => {\r\n    if (window.confirm(`Are you sure you want to delete preset ${preset.name}?`)) {\r\n      try {\r\n        await apiService.deletePreset(preset.id);\r\n        const updatedPresets = presets.filter(p => p.id !== preset.id);\r\n        setPresets(updatedPresets);\r\n        // Also update filtered presets to remove the deleted preset immediately\r\n        const searchLower = searchTerm.toLowerCase();\r\n        const updatedFiltered = updatedPresets.filter((preset: Preset) =>\r\n          preset.name.toLowerCase().includes(searchLower) ||\r\n          preset.config_id.toLowerCase().includes(searchLower) ||\r\n          preset.description.toLowerCase().includes(searchLower)\r\n        );\r\n        setFilteredPresets(updatedFiltered);\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Failed to delete preset');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleViewDetails = (preset: Preset) => {\r\n    setSelectedPreset(preset);\r\n  };\r\n\r\n  const handleCloseDetails = () => {\r\n    setSelectedPreset(null);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingPreset(null);\r\n    setCreatingPreset(false);\r\n    setCreatePresetSlaveMode('none');\r\n    setSelectedGlobalSlaveId('');\r\n  };\r\n\r\n  const getDataTypeName = (dataType: number): string => {\r\n    const types = ['UINT16', 'INT16', 'UINT32', 'INT32', 'FLOAT32', 'FLOAT64'];\r\n    return types[dataType] || 'UNKNOWN';\r\n  };\r\n\r\n  const handleConfigureSlaves = async (preset: Preset) => {\r\n    setConfiguringSlaves(preset);\r\n    await fetchSlavesForPreset(preset.config_id);\r\n  };\r\n\r\n  const fetchSlavesForPreset = async (configId: string) => {\r\n    try {\r\n      const slavesData = await apiService.getSlaves(configId);\r\n      // Map API response to match interface\r\n      const mappedSlaves = slavesData.map((slave: any) => ({\r\n        id: slave.id,\r\n        slaveId: slave.slave_id,\r\n        deviceName: slave.device_name,\r\n        pollingIntervalMs: slave.polling_interval_ms,\r\n        timeoutMs: slave.timeout_ms,\r\n        enabled: slave.enabled,\r\n        registers: slave.registers.map((reg: any) => ({\r\n          id: reg.id,\r\n          label: reg.label,\r\n          address: reg.address,\r\n          numRegisters: reg.num_registers,\r\n          functionCode: reg.function_code,\r\n          dataType: reg.data_type,\r\n          scaleFactor: reg.scale_factor,\r\n          offset: reg.offset,\r\n          enabled: reg.enabled,\r\n        }))\r\n      }));\r\n      setSlaves(mappedSlaves);\r\n    } catch (err) {\r\n      console.error('Failed to fetch slaves:', err);\r\n      setError('Failed to load slaves for this preset');\r\n    }\r\n  };\r\n\r\n  const updatePresetSlaveCount = (configId: string, count: number) => {\r\n    // Update presets state\r\n    const updatedPresets = presets.map(p => \r\n      p.config_id === configId ? { ...p, slaves_count: count } : p\r\n    );\r\n    setPresets(updatedPresets);\r\n    \r\n    // Update filtered presets\r\n    const searchLower = searchTerm.toLowerCase();\r\n    const updatedFiltered = updatedPresets.filter((preset: Preset) =>\r\n      preset.name.toLowerCase().includes(searchLower) ||\r\n      preset.config_id.toLowerCase().includes(searchLower) ||\r\n      preset.description.toLowerCase().includes(searchLower)\r\n    );\r\n    setFilteredPresets(updatedFiltered);\r\n    \r\n    // Update configuringSlaves if it's the same preset\r\n    if (configuringSlaves && configuringSlaves.config_id === configId) {\r\n      setConfiguringSlaves({ ...configuringSlaves, slaves_count: count });\r\n    }\r\n  };\r\n\r\n  const handleCancelSlaveConfig = () => {\r\n    setConfiguringSlaves(null);\r\n    setSlaves([]);\r\n    setCreatingSlave(false);\r\n    setEditingSlave(null);\r\n    setSlaveForm({\r\n      slave_id: '',\r\n      device_name: '',\r\n      polling_interval_ms: 5000,\r\n      timeout_ms: 1000,\r\n      enabled: true,\r\n      registers: []\r\n    });\r\n  };\r\n\r\n  const handleCreateSlave = () => {\r\n    setSlaveForm({\r\n      slave_id: '',\r\n      device_name: '',\r\n      polling_interval_ms: 5000,\r\n      timeout_ms: 1000,\r\n      enabled: true,\r\n      registers: []\r\n    });\r\n    setCreatingSlave(true);\r\n  };\r\n\r\n  const handleEditSlave = (slave: SlaveDevice) => {\r\n    setSlaveForm({\r\n      slave_id: slave.slaveId.toString(),\r\n      device_name: slave.deviceName,\r\n      polling_interval_ms: slave.pollingIntervalMs,\r\n      timeout_ms: slave.timeoutMs,\r\n      enabled: slave.enabled,\r\n      registers: [...slave.registers]\r\n    });\r\n    setEditingSlave(slave);\r\n  };\r\n\r\n  const handleSaveSlave = async () => {\r\n    if (!configuringSlaves) return;\r\n\r\n    // Validate slave ID uniqueness for new slaves\r\n    if (!editingSlave) {\r\n      const slaveId = parseInt(slaveForm.slave_id);\r\n      const existingSlave = slaves.find(s => s.slaveId === slaveId);\r\n      if (existingSlave) {\r\n        setError(`Slave ID ${slaveId} already exists for this configuration. Please choose a different ID.`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const slaveData = {\r\n        slave_id: parseInt(slaveForm.slave_id),\r\n        device_name: slaveForm.device_name,\r\n        polling_interval_ms: slaveForm.polling_interval_ms,\r\n        timeout_ms: slaveForm.timeout_ms,\r\n        enabled: slaveForm.enabled,\r\n        registers: slaveForm.registers\r\n      };\r\n\r\n      if (editingSlave) {\r\n        const updatedSlave = await apiService.updateSlave(configuringSlaves.config_id, editingSlave.slaveId, slaveData);\r\n        // Map response to match interface\r\n        const mappedSlave = {\r\n          id: updatedSlave.id,\r\n          slaveId: updatedSlave.slave_id,\r\n          deviceName: updatedSlave.device_name,\r\n          pollingIntervalMs: updatedSlave.polling_interval_ms,\r\n          timeoutMs: updatedSlave.timeout_ms,\r\n          enabled: updatedSlave.enabled,\r\n          registers: updatedSlave.registers.map((reg: any) => ({\r\n            id: reg.id,\r\n            label: reg.label,\r\n            address: reg.address,\r\n            numRegisters: reg.num_registers,\r\n            functionCode: reg.function_code,\r\n            dataType: reg.data_type,\r\n            scaleFactor: reg.scale_factor,\r\n            offset: reg.offset,\r\n            enabled: reg.enabled,\r\n          }))\r\n        };\r\n        const updatedSlaves = slaves.map(s => s.slaveId === editingSlave.slaveId ? mappedSlave : s);\r\n        setSlaves(updatedSlaves);\r\n        // Update preset count\r\n        updatePresetSlaveCount(configuringSlaves.config_id, updatedSlaves.length);\r\n        setEditingSlave(null);\r\n      } else {\r\n        const newSlave = await apiService.createSlave(configuringSlaves.config_id, slaveData);\r\n        // Map response to match interface\r\n        const mappedSlave = {\r\n          id: newSlave.id,\r\n          slaveId: newSlave.slave_id,\r\n          deviceName: newSlave.device_name,\r\n          pollingIntervalMs: newSlave.polling_interval_ms,\r\n          timeoutMs: newSlave.timeout_ms,\r\n          enabled: newSlave.enabled,\r\n          registers: newSlave.registers.map((reg: any) => ({\r\n            id: reg.id,\r\n            label: reg.label,\r\n            address: reg.address,\r\n            numRegisters: reg.num_registers,\r\n            functionCode: reg.function_code,\r\n            dataType: reg.data_type,\r\n            scaleFactor: reg.scale_factor,\r\n            offset: reg.offset,\r\n            enabled: reg.enabled,\r\n          }))\r\n        };\r\n        const updatedSlaves = [...slaves, mappedSlave];\r\n        setSlaves(updatedSlaves);\r\n        // Update preset count\r\n        updatePresetSlaveCount(configuringSlaves.config_id, updatedSlaves.length);\r\n        setCreatingSlave(false);\r\n      }\r\n\r\n      setSlaveForm({\r\n        slave_id: '',\r\n        device_name: '',\r\n        polling_interval_ms: 5000,\r\n        timeout_ms: 1000,\r\n        enabled: true,\r\n        registers: []\r\n      });\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to save slave');\r\n    }\r\n  };\r\n\r\n  const handleDeleteSlave = async (slave: SlaveDevice) => {\r\n    if (!configuringSlaves) return;\r\n\r\n    if (window.confirm(`Are you sure you want to delete slave ${slave.deviceName}?`)) {\r\n      try {\r\n        await apiService.deleteSlave(configuringSlaves.config_id, slave.slaveId);\r\n        const updatedSlaves = slaves.filter(s => s.id !== slave.id);\r\n        setSlaves(updatedSlaves);\r\n        // Update preset count\r\n        updatePresetSlaveCount(configuringSlaves.config_id, updatedSlaves.length);\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Failed to delete slave');\r\n      }\r\n    }\r\n  };\r\n\r\n  const addRegister = () => {\r\n    const newRegister: RegisterMapping = {\r\n      id: Date.now(), // Temporary ID for form management\r\n      label: registerForm.label,\r\n      address: registerForm.address,\r\n      numRegisters: registerForm.num_registers,\r\n      functionCode: registerForm.function_code,\r\n      dataType: registerForm.data_type,\r\n      scaleFactor: registerForm.scale_factor,\r\n      offset: registerForm.offset,\r\n      enabled: registerForm.enabled\r\n    };\r\n\r\n    setSlaveForm({\r\n      ...slaveForm,\r\n      registers: [...slaveForm.registers, newRegister]\r\n    });\r\n\r\n    // Reset register form\r\n    setRegisterForm({\r\n      label: '',\r\n      address: 0,\r\n      num_registers: 1,\r\n      function_code: 3,\r\n      data_type: 0,\r\n      scale_factor: 1.0,\r\n      offset: 0.0,\r\n      enabled: true\r\n    });\r\n  };\r\n\r\n  const removeRegister = (index: number) => {\r\n    setSlaveForm({\r\n      ...slaveForm,\r\n      registers: slaveForm.registers.filter((_, i) => i !== index)\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading presets...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Device Presets</h1>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>Presets ({filteredPresets.length})</h2>\r\n          <div className=\"card-actions\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search presets...\"\r\n              value={searchTerm}\r\n              onChange={handleSearch}\r\n              className=\"search-input\"\r\n            />\r\n            <button onClick={() => setCreatingPreset(true)} className=\"btn\">\r\n              Create New Preset\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'center' }}>Name</th>\r\n              <th style={{ textAlign: 'center' }}>Config ID</th>\r\n              <th style={{ textAlign: 'center' }}>Description</th>\r\n              <th style={{ textAlign: 'center' }}>Slaves</th>\r\n              <th style={{ textAlign: 'center' }}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredPresets.map((preset) => (\r\n              <tr key={preset.id}>\r\n                <td>{preset.name}</td>\r\n                <td>{preset.config_id}</td>\r\n                <td>{preset.description}</td>\r\n                <td>{preset.slaves_count || 0}</td>\r\n                <td>\r\n                  <button onClick={() => handleViewDetails(preset)} style={{ background: 'none', border: 'none', cursor: 'pointer' }} title=\"View Details\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\r\n                      <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                    </svg>\r\n                  </button>\r\n                  <button onClick={() => handleConfigureSlaves(preset)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#007bff' }} title=\"Configure Slaves\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n                      <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\r\n                      <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\r\n                      <line x1=\"21\" y1=\"3\" x2=\"3\" y2=\"21\"></line>\r\n                    </svg>\r\n                  </button>\r\n                  <button onClick={() => handleEdit(preset)} style={{ background: 'none', border: 'none', cursor: 'pointer' }} title=\"Edit\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                      <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                    </svg>\r\n                  </button>\r\n                  <button onClick={() => handleDelete(preset)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'red' }} title=\"Delete\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                      <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                      <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                      <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                    </svg>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {(editingPreset || creatingPreset) && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <h3>{editingPreset ? `Edit Preset: ${editingPreset.name}` : 'Create New Preset'}</h3>\r\n            <div className=\"modal-body\">\r\n              <form onSubmit={(e) => { e.preventDefault(); editingPreset ? handleSave() : handleCreate(); }}>\r\n                \r\n                {/* Section 1: Preset Information */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Preset Details</h4>\r\n                  <div className=\"form-grid form-grid-2\">\r\n                    {editingPreset && (\r\n                      <div className=\"form-group\">\r\n                        <label>Config ID</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editForm.config_id}\r\n                          onChange={(e) => setEditForm({...editForm, config_id: e.target.value})}\r\n                          required\r\n                          autoComplete=\"off\"\r\n                          readOnly\r\n                          className=\"form-control-readonly\"\r\n                        />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"form-group\" style={editingPreset ? {} : { gridColumn: '1 / -1' }}>\r\n                      <label>Preset Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingPreset ? editForm.name : createForm.name}\r\n                        onChange={(e) => editingPreset ? setEditForm({...editForm, name: e.target.value}) : setCreateForm({...createForm, name: e.target.value})}\r\n                        required\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"e.g., Standard Gateway Config\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"form-group full-width\">\r\n                      <label>Description</label>\r\n                      <textarea\r\n                        value={editingPreset ? editForm.description : createForm.description}\r\n                        onChange={(e) => editingPreset ? setEditForm({...editForm, description: e.target.value}) : setCreateForm({...createForm, description: e.target.value})}\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"Describe the purpose of this preset...\"\r\n                        rows={2}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 2: UART Configuration */}\r\n                <div className=\"form-section compact-inputs\">\r\n                  <h4 className=\"form-section-title\">UART Configuration</h4>\r\n                  <div className=\"form-grid form-grid-4\">\r\n                    <div className=\"form-group\">\r\n                      <label>Baud Rate</label>\r\n                      <select\r\n                        value={editingPreset ? editForm.baud_rate : createForm.baud_rate}\r\n                        onChange={(e) => editingPreset ? setEditForm({...editForm, baud_rate: parseInt(e.target.value)}) : setCreateForm({...createForm, baud_rate: parseInt(e.target.value)})}\r\n                      >\r\n                        <option value={9600}>9600</option>\r\n                        <option value={19200}>19200</option>\r\n                        <option value={38400}>38400</option>\r\n                        <option value={57600}>57600</option>\r\n                        <option value={115200}>115200</option>\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Data Bits</label>\r\n                      <select\r\n                        value={editingPreset ? editForm.data_bits : createForm.data_bits}\r\n                        onChange={(e) => editingPreset ? setEditForm({...editForm, data_bits: parseInt(e.target.value)}) : setCreateForm({...createForm, data_bits: parseInt(e.target.value)})}\r\n                      >\r\n                        <option value={7}>7</option>\r\n                        <option value={8}>8</option>\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Stop Bits</label>\r\n                      <select\r\n                        value={editingPreset ? editForm.stop_bits : createForm.stop_bits}\r\n                        onChange={(e) => editingPreset ? setEditForm({...editForm, stop_bits: parseInt(e.target.value)}) : setCreateForm({...createForm, stop_bits: parseInt(e.target.value)})}\r\n                      >\r\n                        <option value={1}>1</option>\r\n                        <option value={2}>2</option>\r\n                      </select>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Parity</label>\r\n                      <select\r\n                        value={editingPreset ? editForm.parity : createForm.parity}\r\n                        onChange={(e) => editingPreset ? setEditForm({...editForm, parity: parseInt(e.target.value)}) : setCreateForm({...createForm, parity: parseInt(e.target.value)})}\r\n                      >\r\n                        <option value={0}>None</option>\r\n                        <option value={1}>Odd</option>\r\n                        <option value={2}>Even</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 3: Initial Slave Setup (Create Mode Only) */}\r\n                {creatingPreset && (\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Initial Slave Setup</h4>\r\n                    <p className=\"form-section-desc\">Optionally configure a slave device for this preset immediately.</p>\r\n                    \r\n                    <div className=\"slave-options-container\">\r\n                      <div className=\"slave-option-card\">\r\n                        <div className=\"slave-option-header\">\r\n                          <label className=\"radio-card-label\">\r\n                            <input\r\n                              type=\"radio\"\r\n                              name=\"slaveMode\"\r\n                              checked={createPresetSlaveMode === 'create'}\r\n                              onChange={() => setCreatePresetSlaveMode('create')}\r\n                            />\r\n                            <span>Create New Slave</span>\r\n                          </label>\r\n                        </div>\r\n                        <div className={`slave-option-content ${createPresetSlaveMode === 'create' ? 'active' : ''}`}>\r\n                          <p className=\"text-sm text-muted\">Define a new slave device configuration from scratch.</p>\r\n                          {createPresetSlaveMode === 'create' && (\r\n                             <div className=\"nested-form\">\r\n                                <div className=\"form-grid form-grid-2\">\r\n                                  <div className=\"form-group\">\r\n                                    <label>Slave ID</label>\r\n                                    <input\r\n                                      type=\"number\"\r\n                                      value={slaveForm.slave_id}\r\n                                      onChange={(e) => setSlaveForm({ ...slaveForm, slave_id: e.target.value })}\r\n                                      required\r\n                                      placeholder=\"1-247\"\r\n                                    />\r\n                                  </div>\r\n                                  <div className=\"form-group\">\r\n                                    <label>Device Name</label>\r\n                                    <input\r\n                                      type=\"text\"\r\n                                      value={slaveForm.device_name}\r\n                                      onChange={(e) => setSlaveForm({ ...slaveForm, device_name: e.target.value })}\r\n                                      required\r\n                                      placeholder=\"Device Name\"\r\n                                    />\r\n                                  </div>\r\n                                  <div className=\"form-group\">\r\n                                    <label>Polling (ms)</label>\r\n                                    <input\r\n                                      type=\"number\"\r\n                                      value={slaveForm.polling_interval_ms}\r\n                                      onChange={(e) => setSlaveForm({ ...slaveForm, polling_interval_ms: parseInt(e.target.value) })}\r\n                                      placeholder=\"5000\"\r\n                                    />\r\n                                  </div>\r\n                                  <div className=\"form-group\">\r\n                                    <label>Timeout (ms)</label>\r\n                                    <input\r\n                                      type=\"number\"\r\n                                      value={slaveForm.timeout_ms}\r\n                                      onChange={(e) => setSlaveForm({ ...slaveForm, timeout_ms: parseInt(e.target.value) })}\r\n                                      placeholder=\"1000\"\r\n                                    />\r\n                                  </div>\r\n                                </div>\r\n                             </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"slave-option-card\">\r\n                        <div className=\"slave-option-header\">\r\n                          <label className=\"radio-card-label\">\r\n                            <input\r\n                              type=\"radio\"\r\n                              name=\"slaveMode\"\r\n                              checked={createPresetSlaveMode === 'select'}\r\n                              onChange={() => setCreatePresetSlaveMode('select')}\r\n                            />\r\n                            <span>Link Existing Slave</span>\r\n                          </label>\r\n                        </div>\r\n                        <div className={`slave-option-content ${createPresetSlaveMode === 'select' ? 'active' : ''}`}>\r\n                           <p className=\"text-sm text-muted\">Select an existing slave configuration to reuse.</p>\r\n                           {createPresetSlaveMode === 'select' && (\r\n                              <div className=\"form-group\" style={{ marginTop: '10px' }}>\r\n                                <select\r\n                                  value={selectedGlobalSlaveId}\r\n                                  onChange={(e) => setSelectedGlobalSlaveId(e.target.value ? parseInt(e.target.value) : '')}\r\n                                  className=\"full-width\"\r\n                                >\r\n                                  <option value=\"\">Select a slave configuration...</option>\r\n                                  {globalSlavesLoading ? (\r\n                                    <option disabled>Loading...</option>\r\n                                  ) : (\r\n                                    globalSlaves.map((slave) => (\r\n                                      <option key={slave.id} value={slave.id}>\r\n                                        {slave.deviceName} (ID: {slave.slaveId})\r\n                                      </option>\r\n                                    ))\r\n                                  )}\r\n                                </select>\r\n                              </div>\r\n                           )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"slave-option-card\">\r\n                        <div className=\"slave-option-header\">\r\n                          <label className=\"radio-card-label\">\r\n                            <input\r\n                              type=\"radio\"\r\n                              name=\"slaveMode\"\r\n                              checked={createPresetSlaveMode === 'none'}\r\n                              onChange={() => setCreatePresetSlaveMode('none')}\r\n                            />\r\n                            <span>Skip for Now</span>\r\n                          </label>\r\n                        </div>\r\n                        <div className=\"slave-option-content\">\r\n                          <p className=\"text-sm text-muted\">Create preset without any initial slave configuration.</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n              </form>\r\n            </div>\r\n            <div className=\"form-actions\">\r\n              <button type=\"submit\" className=\"btn\" onClick={(e) => { e.preventDefault(); editingPreset ? handleSave() : handleCreate(); }}>{editingPreset ? 'Save' : 'Create'}</button>\r\n              <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {selectedPreset && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\" style={{ maxWidth: '600px' }}>\r\n            <h3>Gateway Configuration: {selectedPreset.name}</h3>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <h4>General Settings</h4>\r\n              <div style={{ marginLeft: '20px' }}>\r\n                <p><strong>Config ID:</strong> {selectedPreset.gateway_configuration.general_settings.config_id}</p>\r\n                <p><strong>Schema Version:</strong> {selectedPreset.gateway_configuration.general_settings.schema_version}</p>\r\n                <p><strong>Last Updated:</strong> {selectedPreset.gateway_configuration.general_settings.last_updated}</p>\r\n              </div>\r\n            </div>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <h4>UART Configuration</h4>\r\n              <div style={{ marginLeft: '20px' }}>\r\n                <p><strong>Baud Rate:</strong> {selectedPreset.gateway_configuration.uart_configuration.baud_rate}</p>\r\n                <p><strong>Data Bits:</strong> {selectedPreset.gateway_configuration.uart_configuration.data_bits}</p>\r\n                <p><strong>Stop Bits:</strong> {selectedPreset.gateway_configuration.uart_configuration.stop_bits}</p>\r\n                <p><strong>Parity:</strong> {selectedPreset.gateway_configuration.uart_configuration.parity}</p>\r\n              </div>\r\n            </div>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <p><strong>Description:</strong> {selectedPreset.description}</p>\r\n              <p><strong>Slave Devices:</strong> {selectedPreset.slaves_count}</p>\r\n            </div>\r\n            <div className=\"form-actions\">\r\n              <button onClick={handleCloseDetails} className=\"btn btn-secondary\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {configuringSlaves && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\" style={{ maxWidth: '1200px', maxHeight: '90vh', overflow: 'auto' }}>\r\n            <h3>Configure Slaves: {configuringSlaves.name}</h3>\r\n\r\n            {error && (\r\n              <div className=\"error\" style={{ marginBottom: '20px', padding: '10px', backgroundColor: '#f8d7da', border: '1px solid #f5c6cb', borderRadius: '4px', color: '#721c24' }}>\r\n                <strong>Error:</strong> {error}\r\n                <button\r\n                  onClick={() => setError(null)}\r\n                  style={{ float: 'right', background: 'none', border: 'none', color: '#721c24', cursor: 'pointer', fontSize: '16px' }}\r\n                  title=\"Close error\"\r\n                >\r\n                  \r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"card\" style={{ marginBottom: '20px' }}>\r\n              <div className=\"card-header\">\r\n                <h4>Slave Devices ({slaves.length})</h4>\r\n                <button onClick={handleCreateSlave} className=\"btn\">Add Slave</button>\r\n              </div>\r\n\r\n              {slaves.length === 0 ? (\r\n                <div style={{ textAlign: 'center', padding: '40px 20px', color: '#666' }}>\r\n                  <p>No slave devices configured yet.</p>\r\n                  <p>Click \"Add Slave\" to configure your first slave device.</p>\r\n                </div>\r\n              ) : (\r\n                <table className=\"table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th style={{ textAlign: 'center' }}>Slave ID</th>\r\n                      <th style={{ textAlign: 'center' }}>Device Name</th>\r\n                      <th style={{ textAlign: 'center' }}>Polling Interval</th>\r\n                      <th style={{ textAlign: 'center' }}>Timeout</th>\r\n                      <th style={{ textAlign: 'center' }}>Status</th>\r\n                      <th style={{ textAlign: 'center' }}>Registers</th>\r\n                      <th style={{ textAlign: 'center' }}>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {slaves.map((slave) => (\r\n                      <tr key={slave.id}>\r\n                        <td style={{ textAlign: 'center' }}>{slave.slaveId}</td>\r\n                        <td>{slave.deviceName}</td>\r\n                        <td style={{ textAlign: 'center' }}>{slave.pollingIntervalMs}ms</td>\r\n                        <td style={{ textAlign: 'center' }}>{slave.timeoutMs}ms</td>\r\n                        <td style={{ textAlign: 'center' }}>\r\n                          <span className={slave.enabled ? 'status-online' : 'status-offline'}>\r\n                            {slave.enabled ? 'Enabled' : 'Disabled'}\r\n                          </span>\r\n                        </td>\r\n                        <td style={{ textAlign: 'center' }}>{slave.registers.length}</td>\r\n                        <td style={{ textAlign: 'center' }}>\r\n                          <button onClick={() => handleEditSlave(slave)} style={{ background: 'none', border: 'none', cursor: 'pointer', marginRight: '10px' }} title=\"Edit\">\r\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                              <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                              <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                            </svg>\r\n                          </button>\r\n                          <button onClick={() => handleDeleteSlave(slave)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'red' }} title=\"Delete\">\r\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                              <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                              <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                              <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                              <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                            </svg>\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-actions\">\r\n              <button onClick={handleCancelSlaveConfig} className=\"btn btn-secondary\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Slave Configuration Modal */}\r\n      {(creatingSlave || editingSlave) && configuringSlaves && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content large-modal\">\r\n            <h3>{editingSlave ? `Edit Slave: ${editingSlave.deviceName}` : 'Configure New Slave'}</h3>\r\n            \r\n            <div className=\"modal-body\">\r\n              <form onSubmit={(e) => { e.preventDefault(); handleSaveSlave(); }}>\r\n                \r\n                {/* Section 1: Basic Information */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Basic Information</h4>\r\n                  <div className=\"form-grid form-grid-2\">\r\n                    <div className=\"form-group\">\r\n                      <label>Slave ID</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.slave_id}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, slave_id: e.target.value})}\r\n                        required\r\n                        min=\"1\"\r\n                        max=\"247\"\r\n                        placeholder=\"1-247\"\r\n                      />\r\n                      <small className=\"form-hint\">\r\n                        Unique identifier (1-247)\r\n                        {slaves.length > 0 && (\r\n                          <span className=\"form-hint-accent\">\r\n                            Existing: {slaves.map(s => s.slaveId).join(', ')}\r\n                          </span>\r\n                        )}\r\n                      </small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Device Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={slaveForm.device_name}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, device_name: e.target.value})}\r\n                        required\r\n                        placeholder=\"e.g., Solar Inverter\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 2: Communication Settings */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Communication Settings</h4>\r\n                  <div className=\"form-grid form-grid-3\">\r\n                    <div className=\"form-group\">\r\n                      <label>Polling Interval (ms)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.polling_interval_ms}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, polling_interval_ms: parseInt(e.target.value)})}\r\n                        min=\"100\"\r\n                        placeholder=\"5000\"\r\n                      />\r\n                      <small className=\"form-hint\">How often to poll</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Timeout (ms)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.timeout_ms}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, timeout_ms: parseInt(e.target.value)})}\r\n                        min=\"100\"\r\n                        placeholder=\"1000\"\r\n                      />\r\n                      <small className=\"form-hint\">Response timeout</small>\r\n                    </div>\r\n                    <div className=\"form-group checkbox-group\">\r\n                      <label>Status</label>\r\n                      <label className=\"checkbox-label checkbox-vertical\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={slaveForm.enabled}\r\n                          onChange={(e) => setSlaveForm({...slaveForm, enabled: e.target.checked})}\r\n                        />\r\n                        <span className={slaveForm.enabled ? 'status-text-enabled' : 'status-text-disabled'}>\r\n                          {slaveForm.enabled ? 'Enabled' : 'Disabled'}\r\n                        </span>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 3: Register Mappings */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Register Mappings</h4>\r\n                  <p className=\"form-section-desc\">Configure the Modbus registers to read from this slave device.</p>\r\n\r\n                  {/* Add Register Sub-form */}\r\n                  <div className=\"form-subsection\">\r\n                    <h5 className=\"form-subsection-title\">Add New Register</h5>\r\n                    <div className=\"form-grid form-grid-auto\">\r\n                      <div className=\"form-group\">\r\n                        <label>Label</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"e.g., voltage\"\r\n                          value={registerForm.label}\r\n                          onChange={(e) => setRegisterForm({...registerForm, label: e.target.value})}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Address</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"0\"\r\n                          value={registerForm.address}\r\n                          onChange={(e) => setRegisterForm({...registerForm, address: parseInt(e.target.value)})}\r\n                          min=\"0\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Data Type</label>\r\n                        <select\r\n                          value={registerForm.data_type}\r\n                          onChange={(e) => setRegisterForm({...registerForm, data_type: parseInt(e.target.value)})}\r\n                        >\r\n                          <option value={0}>UINT16</option>\r\n                          <option value={1}>INT16</option>\r\n                          <option value={2}>UINT32</option>\r\n                          <option value={3}>INT32</option>\r\n                          <option value={4}>FLOAT32</option>\r\n                          <option value={5}>FLOAT64</option>\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Scale</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"1.0\"\r\n                          value={registerForm.scale_factor}\r\n                          onChange={(e) => setRegisterForm({...registerForm, scale_factor: parseFloat(e.target.value)})}\r\n                          step=\"0.01\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Offset</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"0.0\"\r\n                          value={registerForm.offset}\r\n                          onChange={(e) => setRegisterForm({...registerForm, offset: parseFloat(e.target.value)})}\r\n                          step=\"0.01\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group checkbox-group\">\r\n                        <label>Active</label>\r\n                        <label className=\"checkbox-label checkbox-vertical\">\r\n                          <input\r\n                          type=\"checkbox\"\r\n                          checked={registerForm.enabled}\r\n                            onChange={(e) => setRegisterForm({...registerForm, enabled: e.target.checked})}\r\n                          />\r\n                          <span>{registerForm.enabled ? 'Yes' : 'No'}</span>\r\n                        </label>\r\n                      </div>\r\n                      <div className=\"form-group form-group-btn\">\r\n                        <button type=\"button\" onClick={addRegister} className=\"btn btn-sm\">\r\n                          Add Register\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Registers Table */}\r\n                  {slaveForm.registers.length > 0 ? (\r\n                    <div className=\"registers-table-wrapper\">\r\n                      <h5 className=\"form-subsection-title\">Configured Registers ({slaveForm.registers.length})</h5>\r\n                      <table className=\"table registers-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th>Label</th>\r\n                            <th>Address</th>\r\n                            <th>Data Type</th>\r\n                            <th>Scale</th>\r\n                            <th>Offset</th>\r\n                            <th>Status</th>\r\n                            <th>Actions</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {slaveForm.registers.map((reg, index) => (\r\n                            <tr key={index}>\r\n                              <td>{reg.label}</td>\r\n                              <td>{reg.address}</td>\r\n                              <td>{getDataTypeName(reg.dataType)}</td>\r\n                              <td>{reg.scaleFactor}</td>\r\n                              <td>{reg.offset}</td>\r\n                              <td>\r\n                                <span className={`status-badge ${reg.enabled ? 'status-badge-success' : 'status-badge-danger'}`}>\r\n                                  {reg.enabled ? 'Enabled' : 'Disabled'}\r\n                                </span>\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => removeRegister(index)}\r\n                                  className=\"btn-icon btn-icon-danger\"\r\n                                  title=\"Remove\"\r\n                                >\r\n                                  \r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"empty-state\">\r\n                      No registers configured yet. Add registers above to define what data to read from this slave device.\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n              </form>\r\n            </div>\r\n\r\n            {/* Modal Footer */}\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-primary\" onClick={(e) => { e.preventDefault(); handleSaveSlave(); }}>\r\n                {editingSlave ? 'Save Changes' : 'Create Slave'}\r\n              </button>\r\n              <button type=\"button\" onClick={() => { setCreatingSlave(false); setEditingSlave(null); }} className=\"btn btn-secondary\">\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DevicePresets;\r\n","/**\r\n * Simple in-memory cache service for API responses\r\n * Reduces unnecessary API calls and speeds up page loads\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n\r\n  /**\r\n   * Set a cache entry\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' = 'short'): number {\r\n    return type === 'long' ? CacheService.LONG_TTL : CacheService.DEFAULT_TTL;\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend-git-dev0-360watts-projects.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const headers = this.getAuthHeaders();\r\n    delete (headers as any)['Content-Type']; // Let browser set it for FormData\r\n    \r\n    return fetch(`${API_BASE_URL}/ota/firmware/create/`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Authorization': `Bearer ${JSON.parse(localStorage.getItem('authTokens') || '{}').access}`,\r\n      },\r\n      body: formData,\r\n    }).then(res => res.json());\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["DevicePresets","presets","setPresets","useState","filteredPresets","setFilteredPresets","loading","setLoading","error","setError","editingPreset","setEditingPreset","creatingPreset","setCreatingPreset","searchTerm","setSearchTerm","selectedPreset","setSelectedPreset","configuringSlaves","setConfiguringSlaves","slaves","setSlaves","creatingSlave","setCreatingSlave","editingSlave","setEditingSlave","createPresetSlaveMode","setCreatePresetSlaveMode","globalSlaves","setGlobalSlaves","globalSlavesLoading","setGlobalSlavesLoading","selectedGlobalSlaveId","setSelectedGlobalSlaveId","editForm","setEditForm","config_id","name","description","baud_rate","data_bits","stop_bits","parity","createForm","setCreateForm","slaveForm","setSlaveForm","slave_id","device_name","polling_interval_ms","timeout_ms","enabled","registers","registerForm","setRegisterForm","label","address","num_registers","function_code","data_type","scale_factor","offset","useEffect","fetchPresets","async","mapped","apiService","getGlobalSlaves","map","slave","id","slaveId","deviceName","pollingIntervalMs","timeoutMs","err","console","fetchGlobalSlaves","debouncedSearchTerm","setDebouncedSearchTerm","timer","setTimeout","clearTimeout","data","getPresets","filteredData","search","searchLower","toLowerCase","filter","preset","includes","Error","message","handleSave","updatePreset","handleCreate","_result$gateway_confi","_result$gateway_confi2","result","createPreset","createdConfigId","gateway_configuration","general_settings","configId","createSlave","parseInt","addSlavesToPreset","fetchSlavesForPreset","mappedSlaves","getSlaves","reg","numRegisters","functionCode","dataType","scaleFactor","updatePresetSlaveCount","count","updatedPresets","p","_objectSpread","slaves_count","updatedFiltered","handleSaveSlave","find","s","concat","slaveData","updatedSlave","updateSlave","mappedSlave","updatedSlaves","length","newSlave","_jsx","className","children","_jsxs","type","placeholder","value","onChange","e","target","onClick","style","textAlign","handleViewDetails","background","border","cursor","title","width","height","viewBox","fill","stroke","strokeWidth","d","cx","cy","r","handleConfigureSlaves","color","x","y","rx","ry","x1","y1","x2","y2","uart_configuration","handleEdit","window","confirm","deletePreset","handleDelete","points","onSubmit","preventDefault","required","autoComplete","readOnly","gridColumn","rows","checked","marginTop","disabled","handleCancel","maxWidth","marginBottom","marginLeft","schema_version","last_updated","handleCloseDetails","maxHeight","overflow","padding","backgroundColor","borderRadius","float","fontSize","handleCreateSlave","toString","handleEditSlave","marginRight","deleteSlave","handleDeleteSlave","handleCancelSlaveConfig","min","max","join","parseFloat","step","addRegister","newRegister","Date","now","index","_","i","removeRegister","CacheService","constructor","cache","Map","set","key","ttlMs","arguments","undefined","DEFAULT_TTL","this","timestamp","expiresIn","get","entry","delete","has","clear","clearAll","size","getTTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","response","fetch","status","refreshToken","removeItem","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","params","encodeURIComponent","createUser","userData","createEmployee","employeeData","is_staff","getUserDevices","userId","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","createGlobalSlave","updateGlobalSlave","deleteGlobalSlave","getDevices","page","pageSize","URLSearchParams","append","queryString","createDevice","deviceData","updateDevice","deviceId","deleteDevice","deleteDevicesBulk","deviceIds","device_ids","slaveIds","slave_ids","getFirmwareVersions","activeOnly","uploadFirmwareVersion","formData","then","res","updateFirmwareVersion","firmwareId","getDeviceUpdateLogs","getOTAConfig","updateOTAConfig","config","getOTAHealth"],"sourceRoot":""}