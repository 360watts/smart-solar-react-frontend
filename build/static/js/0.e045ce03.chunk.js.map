{"version":3,"file":"static/js/0.e045ce03.chunk.js","mappings":"6LAIIA,EAAsB,CAAC,QAOhBC,GAAyBC,EAAAA,EAAAA,YAAW,CAACC,EAAOC,IACjCC,EAAAA,cAAoBC,EAAAA,EAAgB,CACtDC,UAAW,YACXC,wBAAyB,OACzBC,0BAA2BT,EAC3BU,uBAAwBC,EAAAA,GACxBC,sBAAuBT,EACvBC,IAAKA,K,4ECHT,MAyNA,EAzN4BS,KAC1B,MAAOC,EAAeC,IAAoBC,EAAAA,EAAAA,UAA0B,KAC7DC,EAAcC,IAAmBF,EAAAA,EAAAA,UAA0B,KAC3DG,EAASC,IAAcJ,EAAAA,EAAAA,WAAS,IAChCK,EAAOC,IAAYN,EAAAA,EAAAA,UAAwB,OAC3CO,EAAkBC,IAAuBR,EAAAA,EAAAA,UAAiB,QAC1DS,EAAgBC,IAAqBV,EAAAA,EAAAA,UAAiB,QAE7DW,EAAAA,EAAAA,WAAU,KACRC,KACC,IAEH,MAAMA,EAAqBC,UACzB,IACE,MAAMC,QAAaC,EAAAA,EAAWC,eAC9BjB,EAAiBe,GACjBV,GAAW,EACb,CAAE,MAAOa,GACPX,EAASW,aAAeC,MAAQD,EAAIE,QAAU,qBAC9Cf,GAAW,EACb,IAGFO,EAAAA,EAAAA,WAAU,KACR,IAAIS,EAAWtB,EAEU,QAArBS,IACFa,EAAWA,EAASC,OAAOC,GAAQA,EAAKC,YAAchB,IAGjC,QAAnBE,IACFW,EAAWA,EAASC,OAAOC,GAAQA,EAAKE,WAAaf,IAGvDP,EAAgBkB,IACf,CAACtB,EAAeS,EAAkBE,IA+CrC,GAAIN,EACF,OAAOsB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,UAASC,SAAC,8BAGlC,GAAItB,EACF,OAAOuB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,QAAOC,SAAA,CAAC,UAAQtB,KAGxC,MAAMwB,EA3CmBC,MACvB,MAAMD,EAAoC,CAAC,EAQ3C,OAPA5B,EAAa8B,QAAQT,IACnB,MAAMU,EAAO,IAAIC,KAAKX,EAAKY,WAAWC,qBACjCN,EAAUG,KACbH,EAAUG,GAAQ,CAAEA,SAEtBH,EAAUG,GAAMV,EAAKC,WAAaD,EAAKc,QAElCC,OAAOC,OAAOT,GAAWU,OAAO,KAkCvBT,GACZU,EAhCkBC,MACtB,MAAMC,EAA2C,CAAC,EAOlD,OANAzC,EAAa8B,QAAQT,IACnB,MAAMqB,EAAG,GAAAC,OAAMtB,EAAKE,SAAQ,KAAAoB,OAAItB,EAAKC,aAChCmB,EAAOC,IAAQ,IAAIV,KAAKX,EAAKY,WAAa,IAAID,KAAKS,EAAOC,GAAKT,cAClEQ,EAAOC,GAAOrB,KAGXe,OAAOC,OAAOI,IAwBFD,GACfI,EAtBgBC,MACpB,GAA4B,IAAxB7C,EAAa8C,OAAc,OAAO,KAEtC,MAAMT,EAASrC,EAAa+C,IAAI1B,GAAQA,EAAKc,OAM7C,MAAO,CAAEa,IALGX,EAAOY,OAAO,CAACC,EAAGC,IAAMD,EAAIC,EAAG,GACzBd,EAAOS,OAIXM,IAHFC,KAAKD,OAAOf,GAGLiB,IAFPD,KAAKC,OAAOjB,GAEAkB,MAAOlB,EAAOS,SAarBD,GACbW,EAvDUC,MAAMC,KAAK,IAAIC,IAAI9D,EAAckD,IAAI1B,GAAQA,EAAKC,aAwD5DsC,EAnDYH,MAAMC,KAAK,IAAIC,IAAI9D,EAAckD,IAAI1B,GAAQA,EAAKE,YAqDpE,OACEI,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,oBAEJC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,aACJC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAOoC,MAAO,CAAEC,QAAS,OAAQC,oBAAqB,UAAWC,IAAK,iBAAkBC,WAAY,SAAUvC,SAAA,EAC3HC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,gBACPC,EAAAA,EAAAA,MAAA,UACEQ,MAAO7B,EACP4D,SAAWC,GAAM5D,EAAoB4D,EAAEC,OAAOjC,OAAOT,SAAA,EAErDF,EAAAA,EAAAA,KAAA,UAAQW,MAAM,MAAKT,SAAC,cACnB8B,EAAUT,IAAIsB,IACb7C,EAAAA,EAAAA,KAAA,UAAmBW,MAAOkC,EAAK3C,SAAE2C,GAApBA,WAInB1C,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,aACPC,EAAAA,EAAAA,MAAA,UACEQ,MAAO3B,EACP0D,SAAWC,GAAM1D,EAAkB0D,EAAEC,OAAOjC,OAAOT,SAAA,EAEnDF,EAAAA,EAAAA,KAAA,UAAQW,MAAM,MAAKT,SAAC,gBACnBkC,EAAQb,IAAIuB,IACX9C,EAAAA,EAAAA,KAAA,UAAqBW,MAAOmC,EAAO5C,SAAE4C,GAAxBA,gBAOtB1B,IACCjB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,gBACJC,EAAAA,EAAAA,MAAA,KAAAD,SAAA,EAAGF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,WAAe,IAAEkB,EAAWW,UACvC5B,EAAAA,EAAAA,MAAA,KAAAD,SAAA,EAAGF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,aAAiB,IAAEkB,EAAWI,IAAIuB,QAAQ,OACrD5C,EAAAA,EAAAA,MAAA,KAAAD,SAAA,EAAGF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,SAAa,IAAEkB,EAAWQ,IAAImB,QAAQ,OACjD5C,EAAAA,EAAAA,MAAA,KAAAD,SAAA,EAAGF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,SAAa,IAAEkB,EAAWU,IAAIiB,QAAQ,UAEnD5C,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,kBACHa,EAAaD,MAAM,EAAG,GAAGS,IAAI,CAAC1B,EAAMmD,KACnC7C,EAAAA,EAAAA,MAAA,KAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,UAAAD,SAAA,CAASL,EAAKC,UAAU,OAAU,IAAED,EAAKc,MAAM,IAAEd,EAAKoD,MACtD9C,EAAAA,EAAAA,MAAA,SAAAD,SAAA,CAAO,KAAG,IAAIM,KAAKX,EAAKY,WAAWC,qBAAqB,SAFlDsC,WAShB7C,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,sBACJF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBC,UAC9BF,EAAAA,EAAAA,KAACkD,EAAAA,EAAmB,CAACC,MAAM,OAAOC,OAAO,OAAMlD,UAC7CC,EAAAA,EAAAA,MAAC3C,EAAS,CAAC6B,KAAMe,EAAUF,SAAA,EACzBF,EAAAA,EAAAA,KAACqD,EAAAA,EAAa,CAACC,gBAAgB,MAAMC,OAAO,8BAC5CvD,EAAAA,EAAAA,KAACwD,EAAAA,EAAK,CAACC,QAAQ,OAAOF,OAAO,UAAUG,SAAU,MACjD1D,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACJ,OAAO,UAAUG,SAAU,MAClC1D,EAAAA,EAAAA,KAAC4D,EAAAA,EAAO,CACNC,aAAc,CACZC,gBAAiB,UACjBC,OAAQ,qCACRC,aAAc,MACdC,MAAO,cAGXjE,EAAAA,EAAAA,KAACkE,EAAAA,EAAM,IACNlC,EAAUT,IAAI,CAACsB,EAAMG,KACpBhD,EAAAA,EAAAA,KAACmE,EAAAA,GAAI,CAEHtB,KAAK,WACLY,QAASZ,EACTU,OAAM,OAAApC,OAAiB,GAAR6B,EAAa,IAAG,eAC/BoB,YAAa,GAJRvB,eAYjB1C,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,aAAW1B,EAAa8C,OAAO,gBACnCnB,EAAAA,EAAAA,MAAA,SAAOF,UAAU,QAAOC,SAAA,EACtBF,EAAAA,EAAAA,KAAA,SAAAE,UACEC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAC,YACpCF,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAC,eACpCF,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAC,WACpCF,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAC,UACpCF,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAC,eACpCF,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAC,kBAGxCF,EAAAA,EAAAA,KAAA,SAAAE,SACG1B,EAAasC,OAAO,KAAKwD,UAAU/C,IAAI,CAAC1B,EAAMmD,KAC7C7C,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAEL,EAAKE,YAC1CC,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAEL,EAAKC,aAC1CE,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAEL,EAAKc,SAC1CX,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAEL,EAAKoD,QAC1CjD,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,SAAE,IAAIM,KAAKX,EAAKY,WAAW8D,oBAC9DvE,EAAAA,EAAAA,KAAA,MAAIqC,MAAO,CAAEgC,UAAW,UAAWnE,UACjCF,EAAAA,EAAAA,KAAA,QAAMC,UAA4B,SAAjBJ,EAAK2E,QAAqB,gBAAkB,iBAAiBtE,SAC3EL,EAAK2E,cARHxB,e,6CC/LvB,MAAMyB,EAAaC,WAAAA,GAAA,KACTC,MAAiC,IAAIC,IAAM,KAC3CC,YAAmD,IAAID,GAAM,CASrEE,GAAAA,CAAI5D,EAAa7B,GAAgF,IAArE0F,EAAaC,UAAA1D,OAAA,QAAA2D,IAAAD,UAAA,GAAAA,UAAA,GAAGP,EAAaS,YAAaC,EAAkBH,UAAA1D,OAAA,EAAA0D,UAAA,QAAAC,EACtFG,KAAKT,MAAMG,IAAI5D,EAAK,CAClB7B,OACAoB,UAAWD,KAAK6E,MAChBC,UAAWP,EACXI,UAAoB,OAATA,QAAS,IAATA,EAAAA,EAAatD,KAAKD,IAAImD,EAAQ,EAAGN,EAAac,cAI3DH,KAAKI,kBAAkBtE,EAAK7B,EAC9B,CAKAoG,GAAAA,CAAIvE,GACF,MAAMwE,EAAQN,KAAKT,MAAMc,IAAIvE,GAC7B,IAAKwE,EAAO,OAAO,KAInB,OADYlF,KAAK6E,MACPK,EAAMjF,UAAYiF,EAAMJ,WAChCF,KAAKT,MAAMgB,OAAOzE,GACX,MAGFwE,EAAMrG,IACf,CAMAuG,kBAAAA,CAAmB1E,GAA0E,IAAD2E,EAC1F,MAAMH,EAAQN,KAAKT,MAAMc,IAAIvE,GAC7B,IAAKwE,EAAO,OAAO,KAEnB,MACMI,EADMtF,KAAK6E,MACCK,EAAMjF,UAClBsF,EAAYD,EAAMJ,EAAMJ,UACxBU,EAAUF,GAAsB,QAAnBD,EAAIH,EAAMP,iBAAS,IAAAU,EAAAA,EAAIH,EAAMJ,UAAY,GAG5D,OAAIS,GACFX,KAAKT,MAAMgB,OAAOzE,GACX,MAGF,CACL7B,KAAMqG,EAAMrG,KACZ2G,UACAD,WAAW,EAEf,CAKAE,GAAAA,CAAI/E,GACF,MAAMwE,EAAQN,KAAKT,MAAMc,IAAIvE,GAC7B,IAAKwE,EAAO,OAAO,EAGnB,QADYlF,KAAK6E,MACPK,EAAMjF,UAAYiF,EAAMJ,aAChCF,KAAKT,MAAMgB,OAAOzE,IACX,EAIX,CAKA8E,OAAAA,CAAQ9E,GAAuB,IAADgF,EAC5B,MAAMR,EAAQN,KAAKT,MAAMc,IAAIvE,GAC7B,IAAKwE,EAAO,OAAO,EAInB,OAFYlF,KAAK6E,MACCK,EAAMjF,WACK,QAAnByF,EAAIR,EAAMP,iBAAS,IAAAe,EAAAA,EAAIR,EAAMJ,UAAY,EACrD,CAKAa,KAAAA,CAAMjF,GACJkE,KAAKT,MAAMgB,OAAOzE,EACpB,CAKAkF,YAAAA,CAAaC,GACX,MAAMC,EAA2B,kBAAZD,EAAuB,IAAIE,OAAOF,GAAWA,EAC5DG,EAAyB,GAE/BpB,KAAKT,MAAMrE,QAAQ,CAACmG,EAAGvF,KACjBoF,EAAMI,KAAKxF,IACbsF,EAAaG,KAAKzF,KAItBsF,EAAalG,QAAQY,GAAOkE,KAAKT,MAAMgB,OAAOzE,GAChD,CAKA0F,QAAAA,GACExB,KAAKT,MAAMwB,OACb,CAKAU,IAAAA,GACE,OAAOzB,KAAKT,MAAMkC,IACpB,CAKAC,SAAAA,CAAU5F,EAAa6F,GAChB3B,KAAKP,YAAYoB,IAAI/E,IACxBkE,KAAKP,YAAYC,IAAI5D,EAAK,IAAIiB,KAGhC,MAAM6E,EAAkC,CAAED,YAI1C,OAHA3B,KAAKP,YAAYY,IAAIvE,GAAM+F,IAAID,GAGxB,KACL,MAAME,EAAO9B,KAAKP,YAAYY,IAAIvE,GAC9BgG,IACFA,EAAKvB,OAAOqB,GACM,IAAdE,EAAKL,MACPzB,KAAKP,YAAYc,OAAOzE,IAIhC,CAKAiG,gBAAAA,CAAiBd,EAAiBU,GAChC,MAAM7F,EAAG,cAAAC,OAAiBkF,EAAQe,QAC7BhC,KAAKP,YAAYoB,IAAI/E,IACxBkE,KAAKP,YAAYC,IAAI5D,EAAK,IAAIiB,KAGhC,MAAM6E,EAAkC,CAAED,WAAUV,WAGpD,OAFAjB,KAAKP,YAAYY,IAAIvE,GAAM+F,IAAID,GAExB,KACL,MAAME,EAAO9B,KAAKP,YAAYY,IAAIvE,GAC9BgG,IACFA,EAAKvB,OAAOqB,GACM,IAAdE,EAAKL,MACPzB,KAAKP,YAAYc,OAAOzE,IAIhC,CAKQsE,iBAAAA,CAAkBtE,EAAa7B,GAErC,MAAMgI,EAAajC,KAAKP,YAAYY,IAAIvE,GACpCmG,GACFA,EAAW/G,QAAQgH,IACjB,IACEA,EAAIP,SAAS1H,EACf,CAAE,MAAOT,GACP2I,QAAQ3I,MAAM,kCAADuC,OAAmCD,EAAG,KAAKtC,EAC1D,IAKJwG,KAAKP,YAAYvE,QAAQ,CAAC4G,EAAMM,KAC1BA,EAAOC,WAAW,gBACpBP,EAAK5G,QAAQgH,IACX,GAAIA,EAAIjB,SAAWiB,EAAIjB,QAAQK,KAAKxF,GAClC,IACEoG,EAAIP,SAAS1H,EACf,CAAE,MAAOT,GACP2I,QAAQ3I,MAAM,0CAADuC,OAA2CD,EAAG,KAAKtC,EAClE,KAKV,CAKA8I,IAAAA,GACE,OAAOzF,MAAMC,KAAKkD,KAAKT,MAAM+C,OAC/B,CAKAC,QAAAA,GACE,MAAO,CACLd,KAAMzB,KAAKT,MAAMkC,KACjBa,KAAMtC,KAAKsC,OACX7C,YAAa5C,MAAMC,KAAKkD,KAAKP,YAAYhE,UAAUY,OAAO,CAACmG,EAAK9C,IAAQ8C,EAAM9C,EAAI+B,KAAM,GAE5F,CAKA,aAAOgB,GACL,OAD+C7C,UAAA1D,OAAA,QAAA2D,IAAAD,UAAA,GAAAA,UAAA,GAAG,SAEhD,IAAK,WACH,OAAOP,EAAaqD,aACtB,IAAK,OACH,OAAOrD,EAAasD,SACtB,QACE,OAAOtD,EAAaS,YAE1B,EA/OIT,EAGoBS,YAAc,IAHlCT,EAIoBsD,SAAW,KAJ/BtD,EAKoBqD,aAAe,IALnCrD,EAMoBc,WAAa,IA4OhC,MAAMyC,EAAe,IAAIvD,EACnBS,EAAc,ICtQrB+C,EAAeC,oDAykBd,MAAM5I,EAAa,IAvkB1B,MACU6I,cAAAA,GACN,MAAMC,EAASC,aAAaC,QAAQ,cACpC,GAAIF,EACF,IACE,MAAMG,EAAeC,KAAKC,MAAML,GAChC,MAAO,CACL,cAAgB,UAADjH,OAAYoH,EAAaG,QACxC,eAAgB,mBAEpB,CAAE,MAAO9J,GACP2I,QAAQ3I,MAAM,6BAA8BA,EAC9C,CAEF,MAAO,CACL,eAAgB,mBAEpB,CAEA,aAAc+J,CAAQC,GAA4D,IAA1CC,EAAoB7D,UAAA1D,OAAA,QAAA2D,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC9D,MAAM8D,EAAG,GAAA3H,OAAM8G,GAAY9G,OAAGyH,GAC9B,IAAIG,EAAU3D,KAAK+C,iBAEfa,QAAiBC,MAAMH,GAAGI,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACzBL,GAAO,IACVE,SAAOG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACFH,GACAF,EAAQE,YAIf,GAAwB,MAApBC,EAASG,OAAgB,OAEE/D,KAAKgE,iBAGhCL,EAAU3D,KAAK+C,iBACfa,QAAiBC,MAAMH,GAAGI,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACrBL,GAAO,IACVE,SAAOG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACFH,GACAF,EAAQE,YAInB,CAEA,GAAwB,MAApBC,EAASG,OAKX,MAHAd,aAAagB,WAAW,cACxBhB,aAAagB,WAAW,YACxBC,OAAOC,SAASC,KAAO,SACjB,IAAI/J,MAAM,2BAGlB,IAAKuJ,EAASS,GAAI,CAChB,MAAMC,QAAkBV,EAASW,OACjC,MAAM,IAAIlK,MAAM,uBAAD0B,OAAwB6H,EAASG,OAAM,KAAAhI,OAAI6H,EAASY,WAAU,OAAAzI,OAAMuI,GACrF,CAEA,OAAwB,MAApBV,EAASG,OAAuB,KAC7BH,EAASa,MAClB,CAEA,kBAAcT,GACZ,MAAMhB,EAASC,aAAaC,QAAQ,cACpC,IAAKF,EAAQ,OAAO,EAEpB,IACE,MAAMG,EAAeC,KAAKC,MAAML,GAC1BY,QAAiBC,MAAM,GAAD9H,OAAI8G,EAAY,wBAAwB,CAClE6B,OAAQ,OACRf,QAAS,CACP,eAAgB,oBAElBgB,KAAMvB,KAAKwB,UAAU,CAAEC,QAAS1B,EAAa0B,YAG/C,GAAIjB,EAASS,GAAI,CACf,MACMS,EAAY,CAChBxB,cAFiBM,EAASa,QAEbnB,OACbuB,QAAS1B,EAAa0B,SAGxB,OADA5B,aAAa8B,QAAQ,aAAc3B,KAAKwB,UAAUE,KAC3C,CACT,CACF,CAAE,MAAOtL,GACP2I,QAAQ3I,MAAM,wBAAyBA,EACzC,CACA,OAAO,CACT,CAEA,sBAAMwL,GACJ,OAAOhF,KAAKuD,QAAQ,WACtB,CAEA,kBAAMpJ,GACJ,OAAO6F,KAAKuD,QAAQ,cACtB,CAEA,qBAAM0B,CAAgBhL,GACpB,MAAM2J,QAAiBC,MAAM,GAAD9H,OAAI8G,EAAY,sBAAsB,CAChE6B,OAAQ,OACRf,QAAS,CACP,eAAgB,oBAElBgB,KAAMvB,KAAKwB,UAAU3K,KAEvB,IAAK2J,EAASS,GACZ,MAAM,IAAIhK,MAAM,wBAAD0B,OAAyB6H,EAASY,aAEnD,OAAOZ,EAASa,MAClB,CAEA,eAAMS,GACJ,MAAMC,EAAW,SACXC,EAASxC,EAAavC,IAAI8E,GAChC,GAAIC,EAAQ,OAAOA,EAEnB,MAAMnL,QAAa+F,KAAKuD,QAAQ,YAEhC,OADAX,EAAalD,IAAIyF,EAAUlL,EAAM6F,GAC1B7F,CACT,CAEA,qBAAMoL,GACJ,MAAMF,EAAW,gBACXC,EAASxC,EAAavC,IAAI8E,GAChC,GAAIC,EAAQ,OAAOA,EAEnB,MAAMnL,QAAa+F,KAAKuD,QAAQ,YAEhC,OADAX,EAAalD,IAAIyF,EAAUlL,EAAM6F,GAC1B7F,CACT,CAEA,aAAMqL,GACJ,MAAMH,EAAW,OACXC,EAASxC,EAAavC,IAAI8E,GAChC,GAAIC,EAAQ,OAAOA,EAEnB,MAAMnL,QAAa+F,KAAKuD,QAAQ,UAEhC,OADAX,EAAalD,IAAIyF,EAAUlL,EAAM6F,GAC1B7F,CACT,CAEA,cAAMsL,CAASC,GACb,MAAML,EAAQ,SAAApJ,OAAYyJ,GAAU,OAC9BJ,EAASxC,EAAavC,IAAI8E,GAChC,GAAIC,EAAQ,OAAOA,EAEnB,MAAMK,EAASD,EAAM,WAAAzJ,OAAc2J,mBAAmBF,IAAY,GAC5DvL,QAAa+F,KAAKuD,QAAQ,UAADxH,OAAW0J,IAE1C,OADA7C,EAAalD,IAAIyF,EAAUlL,EAAM6F,GAC1B7F,CACT,CAEA,gBAAM0L,CAAWC,GACf,MAAMC,QAAe7F,KAAKuD,QAAQ,iBAAkB,CAClDmB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAUgB,KAKvB,OAFAhD,EAAa7B,MAAM,aACnB6B,EAAapB,WACNqE,CACT,CAEA,oBAAMC,CAAeC,GACnB,MAAMF,QAAe7F,KAAKuD,QAAQ,iBAAkB,CAClDmB,OAAQ,OACRC,KAAMvB,KAAKwB,WAASd,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIiC,GAAY,IAAEC,UAAU,OAGpD,OADApD,EAAa7B,MAAM,aACZ8E,CACT,CAEA,oBAAMI,CAAeC,GACnB,OAAOlG,KAAKuD,QAAQ,UAADxH,OAAWmK,EAAM,aACtC,CAEA,iBAAMC,CAAYD,GAChB,OAAOlG,KAAKuD,QAAQ,UAADxH,OAAWmK,EAAM,UACtC,CAEA,oBAAME,CAAeF,EAAgBjM,GACnC,OAAO+F,KAAKuD,QAAQ,UAADxH,OAAWmK,EAAM,UAAU,CAC5CxB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU3K,IAEzB,CAEA,oBAAMoM,CAAeH,EAAgBjM,GACnC,OAAO+F,KAAKuD,QAAQ,UAADxH,OAAWmK,EAAM,iBAAiB,CACnDxB,OAAQ,MACRC,KAAMvB,KAAKwB,UAAU3K,IAEzB,CAEA,mBAAMqM,CAAc3L,GAClB,OAAOqF,KAAKuD,QAAQ,YAADxH,OAAapB,EAAQ,UAC1C,CAEA,sBAAM4L,CAAiB5L,EAAkBV,GACvC,OAAO+F,KAAKuD,QAAQ,YAADxH,OAAapB,EAAQ,UAAU,CAChD+J,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU3K,IAEzB,CAEA,sBAAMuM,CAAiB7L,EAAkBV,GACvC,OAAO+F,KAAKuD,QAAQ,YAADxH,OAAapB,EAAQ,iBAAiB,CACvD+J,OAAQ,MACRC,KAAMvB,KAAKwB,UAAU3K,IAEzB,CAGA,sBAAMwM,CAAiBC,EAAgBjB,GACrC,MAAMkB,EAAQ,IAAIC,gBACR,OAANnB,QAAM,IAANA,GAAAA,EAAQoB,YAAYF,EAAMG,OAAO,aAAcrB,EAAOoB,YAChD,OAANpB,QAAM,IAANA,GAAAA,EAAQsB,UAAUJ,EAAMG,OAAO,WAAYrB,EAAOsB,UAC5C,OAANtB,QAAM,IAANA,GAAAA,EAAQuB,MAAML,EAAMG,OAAO,OAAQrB,EAAOuB,KAAKC,YACnD,MAAMvD,EAAG,UAAA3H,OAAa2K,EAAM,eAAA3K,OAAc4K,EAAMM,WAAa,IAAMN,EAAMM,WAAa,IACtF,OAAOjH,KAAKuD,QAAQG,EACtB,CAEA,qBAAMwD,CAAgBR,EAAgBjB,GACpC,MAAMkB,EAAQ,IAAIC,gBACR,OAANnB,QAAM,IAANA,GAAAA,EAAQ0B,MAAMR,EAAMG,OAAO,OAAQrB,EAAO0B,MACpC,OAAN1B,QAAM,IAANA,GAAAA,EAAQoB,YAAYF,EAAMG,OAAO,aAAcrB,EAAOoB,YAChD,OAANpB,QAAM,IAANA,GAAAA,EAAQsB,UAAUJ,EAAMG,OAAO,WAAYrB,EAAOsB,UACtD,MAAMrD,EAAG,UAAA3H,OAAa2K,EAAM,cAAA3K,OAAa4K,EAAMM,WAAa,IAAMN,EAAMM,WAAa,IACrF,OAAOjH,KAAKuD,QAAQG,EACtB,CAEA,oBAAM0D,CAAeV,GACnB,OAAO1G,KAAKuD,QAAQ,UAADxH,OAAW2K,EAAM,aACtC,CAEA,gBAAMW,CAAWnB,EAAgBjM,GAC/B,MAAM4L,QAAe7F,KAAKuD,QAAQ,UAADxH,OAAWmK,EAAM,KAAK,CACrDxB,OAAQ,MACRC,KAAMvB,KAAKwB,UAAU3K,KAGvB,OADA2I,EAAa7B,MAAM,aACZ8E,CACT,CAEA,gBAAMyB,CAAWpB,GACf,MAAML,QAAe7F,KAAKuD,QAAQ,UAADxH,OAAWmK,EAAM,YAAY,CAC5DxB,OAAQ,WAGV,OADA9B,EAAa7B,MAAM,aACZ8E,CACT,CAGA,gBAAM0B,GACJ,OAAOvH,KAAKuD,QAAQ,YACtB,CAEA,mBAAMiE,CAAcvN,GAClB,OAAO+F,KAAKuD,QAAQ,mBAAoB,CACtCmB,OAAQ,MACRC,KAAMvB,KAAKwB,UAAU3K,IAEzB,CAEA,oBAAMwN,CAAexN,GACnB,OAAO+F,KAAKuD,QAAQ,4BAA6B,CAC/CmB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU3K,IAEzB,CAGA,kBAAMyN,CAAalC,GACjB,MAAMC,EAASD,EAAM,WAAAzJ,OAAc2J,mBAAmBF,IAAY,GAClE,OAAOxF,KAAKuD,QAAQ,cAADxH,OAAe0J,GACpC,CAEA,oBAAMkC,CAAeC,GACnB,OAAO5H,KAAKuD,QAAQ,qBAAsB,CACxCmB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAUgD,IAEzB,CAEA,iBAAMC,CAAYC,GAChB,OAAO9H,KAAKuD,QAAQ,cAADxH,OAAe+L,EAAU,KAC9C,CAEA,oBAAMC,CAAeD,EAAoB7N,GACvC,OAAO+F,KAAKuD,QAAQ,cAADxH,OAAe+L,EAAU,YAAY,CACtDpD,OAAQ,MACRC,KAAMvB,KAAKwB,UAAU3K,IAEzB,CAEA,oBAAM+N,CAAeF,GACnB,OAAO9H,KAAKuD,QAAQ,cAADxH,OAAe+L,EAAU,YAAY,CACtDpD,OAAQ,UAEZ,CAEA,gBAAMuD,GACJ,MAAM9C,EAAW,UACXC,EAASxC,EAAavC,IAAI8E,GAChC,GAAIC,EAAQ,OAAOA,EAEnB,MAAMnL,QAAa+F,KAAKuD,QAAQ,aAGhC,OADAX,EAAalD,IAAIyF,EAAUlL,EAAM,MAC1BA,CACT,CAEA,kBAAMiO,CAAajO,GACjB,MAAM4L,QAAe7F,KAAKuD,QAAQ,mBAAoB,CACpDmB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU3K,KAGvB,OADA2I,EAAa7B,MAAM,WACZ8E,CACT,CAEA,kBAAMsC,CAAaC,EAAYnO,GAC7B,MAAM4L,QAAe7F,KAAKuD,QAAQ,YAADxH,OAAaqM,EAAE,KAAK,CACnD1D,OAAQ,MACRC,KAAMvB,KAAKwB,UAAU3K,KAGvB,OADA2I,EAAa7B,MAAM,WACZ8E,CACT,CAEA,kBAAMwC,CAAaD,GACjB,MAAMvC,QAAe7F,KAAKuD,QAAQ,YAADxH,OAAaqM,EAAE,YAAY,CAC1D1D,OAAQ,WAGV,OADA9B,EAAa7B,MAAM,WACZ8E,CACT,CAEA,qBAAMyC,GACJ,OAAOtI,KAAKuD,QAAQ,WACtB,CAEA,uBAAMgF,CAAkBC,GACtB,OAAOxI,KAAKuD,QAAQ,kBAAmB,CACrCmB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU4D,IAEzB,CAEA,uBAAMC,CAAkBC,EAAiBF,GACvC,OAAOxI,KAAKuD,QAAQ,WAADxH,OAAY2M,EAAO,KAAK,CACzChE,OAAQ,MACRC,KAAMvB,KAAKwB,UAAU4D,IAEzB,CAEA,uBAAMG,CAAkBD,GACtB,OAAO1I,KAAKuD,QAAQ,WAADxH,OAAY2M,EAAO,YAAY,CAChDhE,OAAQ,UAEZ,CAEA,gBAAMkE,CAAWpD,GAAyE,IAAxDqD,EAAYjJ,UAAA1D,OAAA,QAAA2D,IAAAD,UAAA,GAAAA,UAAA,GAAG,EAAGkJ,EAAgBlJ,UAAA1D,OAAA,QAAA2D,IAAAD,UAAA,GAAAA,UAAA,GAAG,GACrE,MAAM6F,EAAS,IAAImB,gBACfpB,GAAQC,EAAOqB,OAAO,SAAUtB,GACpCC,EAAOqB,OAAO,OAAQ+B,EAAK5B,YAC3BxB,EAAOqB,OAAO,YAAagC,EAAS7B,YAEpC,MAAM8B,EAActD,EAAOwB,WAC3B,OAAOjH,KAAKuD,QAAQ,aAADxH,OAAcgN,GACnC,CAEA,kBAAMC,CAAaC,GACjB,OAAOjJ,KAAKuD,QAAQ,mBAAoB,CACtCmB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAUqE,IAEzB,CAEA,kBAAMC,CAAavO,EAAkBV,GACnC,OAAO+F,KAAKuD,QAAQ,YAADxH,OAAapB,EAAQ,KAAK,CAC3C+J,OAAQ,MACRC,KAAMvB,KAAKwB,UAAU3K,IAEzB,CAEA,kBAAMkP,CAAaxO,GACjB,OAAOqF,KAAKuD,QAAQ,YAADxH,OAAapB,EAAQ,YAAY,CAClD+J,OAAQ,UAEZ,CAEA,kBAAM0E,CAAazO,GACjB,OAAOqF,KAAKuD,QAAQ,YAADxH,OAAapB,EAAQ,YAAY,CAClD+J,OAAQ,QAEZ,CAEA,qBAAM2E,CAAgB1O,GACpB,OAAOqF,KAAKuD,QAAQ,YAADxH,OAAapB,EAAQ,gBAAgB,CACtD+J,OAAQ,QAEZ,CAEA,mBAAM4E,CAAc3O,GAA0E,IAAxD4O,EAAa3J,UAAA1D,OAAA,QAAA2D,IAAAD,UAAA,GAAAA,UAAA,GAAG,IAAK4J,EAAc5J,UAAA1D,OAAA,QAAA2D,IAAAD,UAAA,GAAAA,UAAA,GAAG,EAC1E,OAAOI,KAAKuD,QAAQ,YAADxH,OAAapB,EAAQ,iBAAAoB,OAAgBwN,EAAK,YAAAxN,OAAWyN,GAC1E,CAEA,sBAAMC,CAAiB9O,EAAkB+O,GACvC,OAAO1J,KAAKuD,QAAQ,YAADxH,OAAapB,EAAQ,iBAAiB,CACvD+J,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU,CAAE8E,aAE3B,CAEA,uBAAMC,CAAkBC,GACtB,OAAO5J,KAAKuD,QAAQ,wBAAyB,CAC3CmB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU,CAAEiF,WAAYD,KAEvC,CAEA,eAAME,CAAUC,GACd,OAAO/J,KAAKuD,QAAQ,YAADxH,OAAagO,EAAQ,YAC1C,CAEA,iBAAMC,CAAYD,EAAkBvB,GAClC,OAAOxI,KAAKuD,QAAQ,YAADxH,OAAagO,EAAQ,mBAAmB,CACzDrF,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU4D,IAEzB,CAEA,iBAAMyB,CAAYF,EAAkBrB,EAAiBF,GACnD,OAAOxI,KAAKuD,QAAQ,YAADxH,OAAagO,EAAQ,YAAAhO,OAAW2M,EAAO,KAAK,CAC7DhE,OAAQ,MACRC,KAAMvB,KAAKwB,UAAU4D,IAEzB,CAEA,iBAAM0B,CAAYH,EAAkBrB,GAClC,OAAO1I,KAAKuD,QAAQ,YAADxH,OAAagO,EAAQ,YAAAhO,OAAW2M,EAAO,YAAY,CACpEhE,OAAQ,UAEZ,CAEA,uBAAMyF,CAAkBJ,EAAkBK,GACxC,OAAOpK,KAAKuD,QAAQ,YAADxH,OAAagO,EAAQ,gBAAgB,CACtDrF,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU,CAAEyF,UAAWD,KAEtC,CAEA,2BAAME,CAAsBP,EAAkBrB,GAC5C,OAAO1I,KAAKuD,QAAQ,YAADxH,OAAagO,EAAQ,YAAAhO,OAAW2M,EAAO,YAAY,CACpEhE,OAAQ,QAEZ,CAGA,yBAAM6F,GAA+D,IAA3CC,IAAmB5K,UAAA1D,OAAA,QAAA2D,IAAAD,UAAA,KAAAA,UAAA,GAC3C,MAAM6F,EAAS,IAAImB,gBAEnB,OADAnB,EAAOqB,OAAO,SAAU0D,EAAWvD,YAC5BjH,KAAKuD,QAAQ,kBAADxH,OAAmB0J,EAAOwB,YAC/C,CAEA,2BAAMwD,CAAsBC,GAC1B,MAAMhH,EAAG,GAAA3H,OAAM8G,EAAY,yBACrBG,EAASC,aAAaC,QAAQ,cAEpC,IAAKF,EACH,MAAM,IAAI3I,MAAM,2BAGlB,MAAM8I,EAAeC,KAAKC,MAAML,GAChC,IAAIW,EAAuB,CACzB,cAAgB,UAAD5H,OAAYoH,EAAaG,SAItCM,QAAiBC,MAAMH,EAAK,CAC9BgB,OAAQ,OACRf,UACAgB,KAAM+F,IAIR,GAAwB,MAApB9G,EAASG,OAAgB,CAE3B,SAD6B/D,KAAKgE,eACd,CAClB,MAAMc,EAAY1B,KAAKC,MAAMJ,aAAaC,QAAQ,eAAiB,MACnES,EAAU,CACR,cAAgB,UAAD5H,OAAY+I,EAAUxB,SAEvCM,QAAiBC,MAAMH,EAAK,CAC1BgB,OAAQ,OACRf,UACAgB,KAAM+F,GAEV,CACF,CAEA,GAAwB,MAApB9G,EAASG,OAIX,MAHAd,aAAagB,WAAW,cACxBhB,aAAagB,WAAW,YACxBC,OAAOC,SAASC,KAAO,SACjB,IAAI/J,MAAM,2BAGlB,IAAKuJ,EAASS,GAAI,CAChB,MAAMC,QAAkBV,EAASW,OACjC,MAAM,IAAIlK,MAAM,kBAAD0B,OAAmB6H,EAASG,OAAM,KAAAhI,OAAI6H,EAASY,WAAU,OAAAzI,OAAMuI,GAChF,CAEA,OAAOV,EAASa,MAClB,CAEA,2BAAMkG,CAAsBC,EAAoB3Q,GAC9C,OAAO+F,KAAKuD,QAAQ,iBAADxH,OAAkB6O,EAAU,KAAK,CAClDlG,OAAQ,QACRC,KAAMvB,KAAKwB,UAAU3K,IAEzB,CAEA,2BAAM4Q,CAAsBD,GAC1B,OAAO5K,KAAKuD,QAAQ,iBAADxH,OAAkB6O,EAAU,YAAY,CACzDlG,OAAQ,UAEZ,CAEA,yBAAMoG,CAAoBnQ,GACxB,OAAOqF,KAAKuD,QAAQ,gBAADxH,OAAiBpB,EAAQ,SAC9C,CAEA,kBAAMoQ,GACJ,OAAO/K,KAAKuD,QAAQ,eACtB,CAEA,qBAAMyH,CAAgBC,GACpB,OAAOjL,KAAKuD,QAAQ,sBAAuB,CACzCmB,OAAQ,QACRC,KAAMvB,KAAKwB,UAAUqG,IAEzB,CAEA,kBAAMC,GACJ,OAAOlL,KAAKuD,QAAQ,eACtB,CAEA,qBAAM4H,CAAgBC,EAAsBC,GAC1C,OAAOrL,KAAKuD,QAAQ,yBAA0B,CAC5CmB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU,CACnB0G,cAAeF,EACfC,MAAOA,GAAS,MAGtB,CAEA,oBAAME,CAAeX,EAAoBY,EAAyBH,GAChE,OAAOrL,KAAKuD,QAAQ,yBAA0B,CAC5CmB,OAAQ,OACRC,KAAMvB,KAAKwB,UAAU,CACnB6G,YAAab,EACbc,eAAgBF,EAChBH,MAAOA,GAAS,MAGtB,CAEA,yBAAMM,GACJ,OAAO3L,KAAKuD,QAAQ,gBACtB,CAEA,uBAAMqI,CAAkBC,GACtB,OAAO7L,KAAKuD,QAAQ,gBAADxH,OAAiB8P,EAAQ,KAC9C,E","sources":["../node_modules/recharts/es6/chart/LineChart.js","components/Telemetry.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import * as React from 'react';\nimport { forwardRef } from 'react';\nimport { arrayTooltipSearcher } from '../state/optionsSlice';\nimport { CartesianChart } from './CartesianChart';\nvar allowedTooltipTypes = ['axis'];\n\n/**\n * @consumes ResponsiveContainerContext\n * @provides CartesianViewBoxContext\n * @provides CartesianChartContext\n */\nexport var LineChart = /*#__PURE__*/forwardRef((props, ref) => {\n  return /*#__PURE__*/React.createElement(CartesianChart, {\n    chartName: \"LineChart\",\n    defaultTooltipEventType: \"axis\",\n    validateTooltipEventTypes: allowedTooltipTypes,\n    tooltipPayloadSearcher: arrayTooltipSearcher,\n    categoricalChartProps: props,\n    ref: ref\n  });\n});","import React, { useState, useEffect } from 'react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface TelemetryData {\r\n  deviceId: string;\r\n  timestamp: string;\r\n  data_type: string;\r\n  value: number;\r\n  unit: string;\r\n  slave_id?: number;\r\n  register_label?: string;\r\n  quality: string;\r\n}\r\n\r\nconst Telemetry: React.FC = () => {\r\n  const [telemetryData, setTelemetryData] = useState<TelemetryData[]>([]);\r\n  const [filteredData, setFilteredData] = useState<TelemetryData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [selectedDataType, setSelectedDataType] = useState<string>('all');\r\n  const [selectedDevice, setSelectedDevice] = useState<string>('all');\r\n\r\n  useEffect(() => {\r\n    fetchTelemetryData();\r\n  }, []);\r\n\r\n  const fetchTelemetryData = async () => {\r\n    try {\r\n      const data = await apiService.getTelemetry();\r\n      setTelemetryData(data);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let filtered = telemetryData;\r\n\r\n    if (selectedDataType !== 'all') {\r\n      filtered = filtered.filter(item => item.data_type === selectedDataType);\r\n    }\r\n\r\n    if (selectedDevice !== 'all') {\r\n      filtered = filtered.filter(item => item.deviceId === selectedDevice);\r\n    }\r\n\r\n    setFilteredData(filtered);\r\n  }, [telemetryData, selectedDataType, selectedDevice]);\r\n\r\n  const getDataTypes = () => {\r\n    const types = Array.from(new Set(telemetryData.map(item => item.data_type)));\r\n    return types;\r\n  };\r\n\r\n  const getDevices = () => {\r\n    const devices = Array.from(new Set(telemetryData.map(item => item.deviceId)));\r\n    return devices;\r\n  };\r\n\r\n  const prepareChartData = () => {\r\n    const chartData: { [key: string]: any } = {};\r\n    filteredData.forEach(item => {\r\n      const time = new Date(item.timestamp).toLocaleTimeString();\r\n      if (!chartData[time]) {\r\n        chartData[time] = { time };\r\n      }\r\n      chartData[time][item.data_type] = item.value;\r\n    });\r\n    return Object.values(chartData).slice(-50); // Last 50 data points\r\n  };\r\n\r\n  const getLatestValues = () => {\r\n    const latest: { [key: string]: TelemetryData } = {};\r\n    filteredData.forEach(item => {\r\n      const key = `${item.deviceId}-${item.data_type}`;\r\n      if (!latest[key] || new Date(item.timestamp) > new Date(latest[key].timestamp)) {\r\n        latest[key] = item;\r\n      }\r\n    });\r\n    return Object.values(latest);\r\n  };\r\n\r\n  const getStatistics = () => {\r\n    if (filteredData.length === 0) return null;\r\n\r\n    const values = filteredData.map(item => item.value);\r\n    const sum = values.reduce((a, b) => a + b, 0);\r\n    const avg = sum / values.length;\r\n    const min = Math.min(...values);\r\n    const max = Math.max(...values);\r\n\r\n    return { avg, min, max, count: values.length };\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading telemetry data...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  const chartData = prepareChartData();\r\n  const latestValues = getLatestValues();\r\n  const statistics = getStatistics();\r\n  const dataTypes = getDataTypes();\r\n  const devices = getDevices();\r\n\r\n  return (\r\n    <div>\r\n      <h1>Telemetry Data</h1>\r\n\r\n      <div className=\"card\">\r\n        <h2>Filters</h2>\r\n        <div className=\"grid\" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-6)', alignItems: 'start' }}>\r\n          <div className=\"form-group\">\r\n            <label>Data Type:</label>\r\n            <select\r\n              value={selectedDataType}\r\n              onChange={(e) => setSelectedDataType(e.target.value)}\r\n            >\r\n              <option value=\"all\">All Types</option>\r\n              {dataTypes.map(type => (\r\n                <option key={type} value={type}>{type}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Device:</label>\r\n            <select\r\n              value={selectedDevice}\r\n              onChange={(e) => setSelectedDevice(e.target.value)}\r\n            >\r\n              <option value=\"all\">All Devices</option>\r\n              {devices.map(device => (\r\n                <option key={device} value={device}>{device}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {statistics && (\r\n        <div className=\"grid\">\r\n          <div className=\"card\">\r\n            <h3>Statistics</h3>\r\n            <p><strong>Count:</strong> {statistics.count}</p>\r\n            <p><strong>Average:</strong> {statistics.avg.toFixed(2)}</p>\r\n            <p><strong>Min:</strong> {statistics.min.toFixed(2)}</p>\r\n            <p><strong>Max:</strong> {statistics.max.toFixed(2)}</p>\r\n          </div>\r\n          <div className=\"card\">\r\n            <h3>Latest Values</h3>\r\n            {latestValues.slice(0, 5).map((item, index) => (\r\n              <p key={index}>\r\n                <strong>{item.data_type}:</strong> {item.value} {item.unit}\r\n                <small> ({new Date(item.timestamp).toLocaleTimeString()})</small>\r\n              </p>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"card\">\r\n        <h2>Telemetry Trends</h2>\r\n        <div className=\"chart-container\">\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <LineChart data={chartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(148, 163, 184, 0.1)\" />\r\n              <XAxis dataKey=\"time\" stroke=\"#64748b\" fontSize={12} />\r\n              <YAxis stroke=\"#64748b\" fontSize={12} />\r\n              <Tooltip \r\n                contentStyle={{ \r\n                  backgroundColor: '#0f172a', \r\n                  border: '1px solid rgba(148, 163, 184, 0.2)',\r\n                  borderRadius: '8px',\r\n                  color: '#f8fafc'\r\n                }}\r\n              />\r\n              <Legend />\r\n              {dataTypes.map((type, index) => (\r\n                <Line\r\n                  key={type}\r\n                  type=\"monotone\"\r\n                  dataKey={type}\r\n                  stroke={`hsl(${index * 60 + 240}, 70%, 60%)`}\r\n                  strokeWidth={2}\r\n                />\r\n              ))}\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <h2>Raw Data ({filteredData.length} records)</h2>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'center' }}>Device</th>\r\n              <th style={{ textAlign: 'center' }}>Data Type</th>\r\n              <th style={{ textAlign: 'center' }}>Value</th>\r\n              <th style={{ textAlign: 'center' }}>Unit</th>\r\n              <th style={{ textAlign: 'center' }}>Timestamp</th>\r\n              <th style={{ textAlign: 'center' }}>Quality</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredData.slice(-100).reverse().map((item, index) => (\r\n              <tr key={index}>\r\n                <td style={{ textAlign: 'center' }}>{item.deviceId}</td>\r\n                <td style={{ textAlign: 'center' }}>{item.data_type}</td>\r\n                <td style={{ textAlign: 'center' }}>{item.value}</td>\r\n                <td style={{ textAlign: 'center' }}>{item.unit}</td>\r\n                <td style={{ textAlign: 'center' }}>{new Date(item.timestamp).toLocaleString()}</td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  <span className={item.quality === 'good' ? 'status-online' : 'status-offline'}>\r\n                    {item.quality}\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Telemetry;","/**\r\n * Enhanced in-memory cache service for API responses\r\n * Features:\r\n * - TTL-based expiration\r\n * - Stale-while-revalidate pattern support\r\n * - Subscription system for real-time updates\r\n * - Pattern-based cache invalidation\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n  staleTime?: number; // Time after which data is considered stale but usable\r\n}\r\n\r\ninterface CacheSubscription {\r\n  callback: (data: any) => void;\r\n  pattern?: RegExp;\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private subscribers: Map<string, Set<CacheSubscription>> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n  private static readonly REALTIME_TTL = 10 * 1000; // 10 seconds for real-time data\r\n  private static readonly STALE_TIME = 30 * 1000; // 30 seconds before data is stale\r\n\r\n  /**\r\n   * Set a cache entry and notify subscribers\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL, staleTime?: number): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n      staleTime: staleTime ?? Math.min(ttlMs / 2, CacheService.STALE_TIME),\r\n    });\r\n    \r\n    // Notify subscribers\r\n    this.notifySubscribers(key, data);\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid (returns null if expired)\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Get cache entry even if stale (for stale-while-revalidate pattern)\r\n   * Returns { data, isStale } or null if no entry exists\r\n   */\r\n  getWithStaleStatus(key: string): { data: any; isStale: boolean; isExpired: boolean } | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    const isExpired = age > entry.expiresIn;\r\n    const isStale = age > (entry.staleTime ?? entry.expiresIn / 2);\r\n\r\n    // Remove if fully expired\r\n    if (isExpired) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      data: entry.data,\r\n      isStale,\r\n      isExpired: false,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if cached data is stale but usable\r\n   */\r\n  isStale(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return true;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    return age > (entry.staleTime ?? entry.expiresIn / 2);\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear cache entries matching a pattern\r\n   */\r\n  clearPattern(pattern: string | RegExp): void {\r\n    const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\r\n    const keysToDelete: string[] = [];\r\n    \r\n    this.cache.forEach((_, key) => {\r\n      if (regex.test(key)) {\r\n        keysToDelete.push(key);\r\n      }\r\n    });\r\n    \r\n    keysToDelete.forEach(key => this.cache.delete(key));\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates for a specific key\r\n   */\r\n  subscribe(key: string, callback: (data: any) => void): () => void {\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates matching a pattern\r\n   */\r\n  subscribePattern(pattern: RegExp, callback: (data: any) => void): () => void {\r\n    const key = `__pattern__${pattern.source}`;\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback, pattern };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Notify all subscribers of a cache update\r\n   */\r\n  private notifySubscribers(key: string, data: any): void {\r\n    // Direct key subscribers\r\n    const directSubs = this.subscribers.get(key);\r\n    if (directSubs) {\r\n      directSubs.forEach(sub => {\r\n        try {\r\n          sub.callback(data);\r\n        } catch (error) {\r\n          console.error(`Cache subscriber error for key ${key}:`, error);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Pattern subscribers\r\n    this.subscribers.forEach((subs, subKey) => {\r\n      if (subKey.startsWith('__pattern__')) {\r\n        subs.forEach(sub => {\r\n          if (sub.pattern && sub.pattern.test(key)) {\r\n            try {\r\n              sub.callback(data);\r\n            } catch (error) {\r\n              console.error(`Cache pattern subscriber error for key ${key}:`, error);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get all keys in cache\r\n   */\r\n  keys(): string[] {\r\n    return Array.from(this.cache.keys());\r\n  }\r\n\r\n  /**\r\n   * Get cache stats for debugging\r\n   */\r\n  getStats(): { size: number; keys: string[]; subscribers: number } {\r\n    return {\r\n      size: this.cache.size,\r\n      keys: this.keys(),\r\n      subscribers: Array.from(this.subscribers.values()).reduce((sum, set) => sum + set.size, 0),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' | 'realtime' = 'short'): number {\r\n    switch (type) {\r\n      case 'realtime':\r\n        return CacheService.REALTIME_TTL;\r\n      case 'long':\r\n        return CacheService.LONG_TTL;\r\n      default:\r\n        return CacheService.DEFAULT_TTL;\r\n    }\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\nexport const REALTIME_TTL = 10 * 1000; // 10 seconds\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    if (response.status === 204) return null;\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async getUserSite(userId: number): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`);\r\n  }\r\n\r\n  async createUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceSite(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`);\r\n  }\r\n\r\n  async createDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // DynamoDB site data\r\n  async getSiteTelemetry(siteId: string, params?: { start_date?: string; end_date?: string; days?: number }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    if (params?.days) query.append('days', params.days.toString());\r\n    const url = `/sites/${siteId}/telemetry/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  async getSiteForecast(siteId: string, params?: { date?: string; start_date?: string; end_date?: string }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.date) query.append('date', params.date);\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    const url = `/sites/${siteId}/forecast/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  async getSiteWeather(siteId: string): Promise<any> {\r\n    return this.request(`/sites/${siteId}/weather/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async rebootDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/reboot/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async hardResetDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/hard-reset/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async getDeviceLogs(deviceId: number, limit: number = 100, offset: number = 0): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/?limit=${limit}&offset=${offset}`);\r\n  }\r\n\r\n  async toggleDeviceLogs(deviceId: number, enabled: boolean): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/toggle/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ enabled }),\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  async detachSlaveFromPreset(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/detach/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const url = `${API_BASE_URL}/ota/firmware/create/`;\r\n    const tokens = localStorage.getItem('authTokens');\r\n    \r\n    if (!tokens) {\r\n      throw new Error('Authentication required');\r\n    }\r\n    \r\n    const parsedTokens = JSON.parse(tokens);\r\n    let headers: HeadersInit = {\r\n      'Authorization': `Bearer ${parsedTokens.access}`,\r\n    };\r\n    // Don't set Content-Type - let browser set it with boundary for multipart/form-data\r\n    \r\n    let response = await fetch(url, {\r\n      method: 'POST',\r\n      headers,\r\n      body: formData,\r\n    });\r\n\r\n    // Handle 401 with token refresh\r\n    if (response.status === 401) {\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        const newTokens = JSON.parse(localStorage.getItem('authTokens') || '{}');\r\n        headers = {\r\n          'Authorization': `Bearer ${newTokens.access}`,\r\n        };\r\n        response = await fetch(url, {\r\n          method: 'POST',\r\n          headers,\r\n          body: formData,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Upload failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteFirmwareVersion(firmwareId: number): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n\r\n  async triggerRollback(deviceSerial: string, notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/rollback/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        device_serial: deviceSerial,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n\r\n  async deployFirmware(firmwareId: number, deviceSerials: string[], notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/multiple/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        firmware_id: firmwareId,\r\n        device_serials: deviceSerials,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n\r\n  async listTargetedUpdates(): Promise<any> {\r\n    return this.request(`/ota/updates/`);\r\n  }\r\n\r\n  async getTargetedUpdate(updateId: number): Promise<any> {\r\n    return this.request(`/ota/updates/${updateId}/`);\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["allowedTooltipTypes","LineChart","forwardRef","props","ref","React","CartesianChart","chartName","defaultTooltipEventType","validateTooltipEventTypes","tooltipPayloadSearcher","arrayTooltipSearcher","categoricalChartProps","Telemetry","telemetryData","setTelemetryData","useState","filteredData","setFilteredData","loading","setLoading","error","setError","selectedDataType","setSelectedDataType","selectedDevice","setSelectedDevice","useEffect","fetchTelemetryData","async","data","apiService","getTelemetry","err","Error","message","filtered","filter","item","data_type","deviceId","_jsx","className","children","_jsxs","chartData","prepareChartData","forEach","time","Date","timestamp","toLocaleTimeString","value","Object","values","slice","latestValues","getLatestValues","latest","key","concat","statistics","getStatistics","length","map","avg","reduce","a","b","min","Math","max","count","dataTypes","Array","from","Set","devices","style","display","gridTemplateColumns","gap","alignItems","onChange","e","target","type","device","toFixed","index","unit","ResponsiveContainer","width","height","CartesianGrid","strokeDasharray","stroke","XAxis","dataKey","fontSize","YAxis","Tooltip","contentStyle","backgroundColor","border","borderRadius","color","Legend","Line","strokeWidth","textAlign","reverse","toLocaleString","quality","CacheService","constructor","cache","Map","subscribers","set","ttlMs","arguments","undefined","DEFAULT_TTL","staleTime","this","now","expiresIn","STALE_TIME","notifySubscribers","get","entry","delete","getWithStaleStatus","_entry$staleTime","age","isExpired","isStale","has","_entry$staleTime2","clear","clearPattern","pattern","regex","RegExp","keysToDelete","_","test","push","clearAll","size","subscribe","callback","subscription","add","subs","subscribePattern","source","directSubs","sub","console","subKey","startsWith","keys","getStats","sum","getTTL","REALTIME_TTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","response","fetch","_objectSpread","status","refreshToken","removeItem","window","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getConfiguration","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","is_staff","getUserDevices","userId","getUserSite","createUserSite","updateUserSite","getDeviceSite","createDeviceSite","updateDeviceSite","getSiteTelemetry","siteId","query","URLSearchParams","start_date","append","end_date","days","toString","getSiteForecast","date","getSiteWeather","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","id","deletePreset","getGlobalSlaves","createGlobalSlave","slaveData","updateGlobalSlave","slaveId","deleteGlobalSlave","getDevices","page","pageSize","queryString","createDevice","deviceData","updateDevice","deleteDevice","rebootDevice","hardResetDevice","getDeviceLogs","limit","offset","toggleDeviceLogs","enabled","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","updateSlave","deleteSlave","addSlavesToPreset","slaveIds","slave_ids","detachSlaveFromPreset","getFirmwareVersions","activeOnly","uploadFirmwareVersion","formData","updateFirmwareVersion","firmwareId","deleteFirmwareVersion","getDeviceUpdateLogs","getOTAConfig","updateOTAConfig","config","getOTAHealth","triggerRollback","deviceSerial","notes","device_serial","deployFirmware","deviceSerials","firmware_id","device_serials","listTargetedUpdates","getTargetedUpdate","updateId"],"sourceRoot":""}