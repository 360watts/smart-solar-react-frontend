{"version":3,"file":"static/js/557.a2fac537.chunk.js","mappings":"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","sources":["components/AuditTrail.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React from 'react';\r\n\r\ninterface AuditTrailProps {\r\n  createdBy?: string | null;\r\n  createdAt?: string;\r\n  updatedBy?: string | null;\r\n  updatedAt?: string;\r\n  className?: string;\r\n}\r\n\r\nconst AuditTrail: React.FC<AuditTrailProps> = ({\r\n  createdBy,\r\n  createdAt,\r\n  updatedBy,\r\n  updatedAt,\r\n  className = 'audit-trail',\r\n}) => {\r\n  const formatDate = (dateString?: string) => {\r\n    if (!dateString) return 'N/A';\r\n    try {\r\n      return new Date(dateString).toLocaleString();\r\n    } catch {\r\n      return dateString;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"audit-row\">\r\n        <span className=\"audit-label\">Created:</span>\r\n        {createdBy ? (\r\n          <span className=\"audit-value\">\r\n            by <strong>{createdBy}</strong> on {formatDate(createdAt)}\r\n          </span>\r\n        ) : (\r\n          <span className=\"audit-value\">System</span>\r\n        )}\r\n      </div>\r\n\r\n      {updatedBy && (\r\n        <div className=\"audit-row\">\r\n          <span className=\"audit-label\">Last Updated:</span>\r\n          <span className=\"audit-value\">\r\n            by <strong>{updatedBy}</strong> on {formatDate(updatedAt)}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(AuditTrail);\r\n","/**\r\n * Enhanced in-memory cache service for API responses\r\n * Features:\r\n * - TTL-based expiration\r\n * - Stale-while-revalidate pattern support\r\n * - Subscription system for real-time updates\r\n * - Pattern-based cache invalidation\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n  staleTime?: number; // Time after which data is considered stale but usable\r\n}\r\n\r\ninterface CacheSubscription {\r\n  callback: (data: any) => void;\r\n  pattern?: RegExp;\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private subscribers: Map<string, Set<CacheSubscription>> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n  private static readonly REALTIME_TTL = 10 * 1000; // 10 seconds for real-time data\r\n  private static readonly STALE_TIME = 30 * 1000; // 30 seconds before data is stale\r\n\r\n  /**\r\n   * Set a cache entry and notify subscribers\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL, staleTime?: number): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n      staleTime: staleTime ?? Math.min(ttlMs / 2, CacheService.STALE_TIME),\r\n    });\r\n    \r\n    // Notify subscribers\r\n    this.notifySubscribers(key, data);\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid (returns null if expired)\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Get cache entry even if stale (for stale-while-revalidate pattern)\r\n   * Returns { data, isStale } or null if no entry exists\r\n   */\r\n  getWithStaleStatus(key: string): { data: any; isStale: boolean; isExpired: boolean } | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    const isExpired = age > entry.expiresIn;\r\n    const isStale = age > (entry.staleTime ?? entry.expiresIn / 2);\r\n\r\n    // Remove if fully expired\r\n    if (isExpired) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      data: entry.data,\r\n      isStale,\r\n      isExpired: false,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if cached data is stale but usable\r\n   */\r\n  isStale(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return true;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    return age > (entry.staleTime ?? entry.expiresIn / 2);\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear cache entries matching a pattern\r\n   */\r\n  clearPattern(pattern: string | RegExp): void {\r\n    const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\r\n    const keysToDelete: string[] = [];\r\n    \r\n    this.cache.forEach((_, key) => {\r\n      if (regex.test(key)) {\r\n        keysToDelete.push(key);\r\n      }\r\n    });\r\n    \r\n    keysToDelete.forEach(key => this.cache.delete(key));\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates for a specific key\r\n   */\r\n  subscribe(key: string, callback: (data: any) => void): () => void {\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates matching a pattern\r\n   */\r\n  subscribePattern(pattern: RegExp, callback: (data: any) => void): () => void {\r\n    const key = `__pattern__${pattern.source}`;\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback, pattern };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Notify all subscribers of a cache update\r\n   */\r\n  private notifySubscribers(key: string, data: any): void {\r\n    // Direct key subscribers\r\n    const directSubs = this.subscribers.get(key);\r\n    if (directSubs) {\r\n      directSubs.forEach(sub => {\r\n        try {\r\n          sub.callback(data);\r\n        } catch (error) {\r\n          console.error(`Cache subscriber error for key ${key}:`, error);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Pattern subscribers\r\n    this.subscribers.forEach((subs, subKey) => {\r\n      if (subKey.startsWith('__pattern__')) {\r\n        subs.forEach(sub => {\r\n          if (sub.pattern && sub.pattern.test(key)) {\r\n            try {\r\n              sub.callback(data);\r\n            } catch (error) {\r\n              console.error(`Cache pattern subscriber error for key ${key}:`, error);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get all keys in cache\r\n   */\r\n  keys(): string[] {\r\n    return Array.from(this.cache.keys());\r\n  }\r\n\r\n  /**\r\n   * Get cache stats for debugging\r\n   */\r\n  getStats(): { size: number; keys: string[]; subscribers: number } {\r\n    return {\r\n      size: this.cache.size,\r\n      keys: this.keys(),\r\n      subscribers: Array.from(this.subscribers.values()).reduce((sum, set) => sum + set.size, 0),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' | 'realtime' = 'short'): number {\r\n    switch (type) {\r\n      case 'realtime':\r\n        return CacheService.REALTIME_TTL;\r\n      case 'long':\r\n        return CacheService.LONG_TTL;\r\n      default:\r\n        return CacheService.DEFAULT_TTL;\r\n    }\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\nexport const REALTIME_TTL = 10 * 1000; // 10 seconds\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    if (response.status === 204) return null;\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async getUserSite(userId: number): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`);\r\n  }\r\n\r\n  async createUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateUserSite(userId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/users/${userId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceSite(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`);\r\n  }\r\n\r\n  async createDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async updateDeviceSite(deviceId: number, data: Record<string, unknown>): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/site/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // DynamoDB site data\r\n  async getSiteTelemetry(siteId: string, params?: { start_date?: string; end_date?: string; days?: number }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    if (params?.days) query.append('days', params.days.toString());\r\n    const url = `/sites/${siteId}/telemetry/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  /**\r\n   * Historical telemetry from S3 (older than DynamoDB's 7-day TTL window).\r\n   * S3 path: telemetry_csv/{site_id}/{YYYY}/{MM}/{DD}/{HH}/data.csv\r\n   * Returns same shape as getSiteTelemetry.\r\n   */\r\n  async getSiteHistory(siteId: string, params: { start_date: string; end_date: string }): Promise<any[]> {\r\n    const query = new URLSearchParams({ start_date: params.start_date, end_date: params.end_date });\r\n    return this.request(`/sites/${siteId}/history/?${query.toString()}`);\r\n  }\r\n\r\n  async getSiteForecast(siteId: string, params?: { date?: string; start_date?: string; end_date?: string }): Promise<any[]> {\r\n    const query = new URLSearchParams();\r\n    if (params?.date) query.append('date', params.date);\r\n    if (params?.start_date) query.append('start_date', params.start_date);\r\n    if (params?.end_date) query.append('end_date', params.end_date);\r\n    const url = `/sites/${siteId}/forecast/${query.toString() ? '?' + query.toString() : ''}`;\r\n    return this.request(url);\r\n  }\r\n\r\n  /**\r\n   * Returns { current: WeatherObs | null, hourly_forecast: WeatherFcst[] }\r\n   *   current.obs_timestamp    — ISO UTC of the observation\r\n   *   current.ghi_wm2          — global horizontal irradiance (W/m²)\r\n   *   current.temperature_c    — air temperature (°C)\r\n   *   current.humidity_pct     — relative humidity (%)\r\n   *   current.wind_speed_ms    — wind speed (m/s)\r\n   *   current.cloud_cover_pct  — cloud cover (%)\r\n   *   hourly_forecast[n].forecast_for — ISO UTC of the forecast slot\r\n   *   hourly_forecast[n].ghi_wm2 …   — same fields as current\r\n   */\r\n  async getSiteWeather(siteId: string): Promise<{ current: any | null; hourly_forecast: any[] } | null> {\r\n    return this.request(`/sites/${siteId}/weather/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async rebootDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/reboot/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async hardResetDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/hard-reset/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  async getDeviceLogs(deviceId: number, limit: number = 100, offset: number = 0): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/?limit=${limit}&offset=${offset}`);\r\n  }\r\n\r\n  async toggleDeviceLogs(deviceId: number, enabled: boolean): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/logs/toggle/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ enabled }),\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  async detachSlaveFromPreset(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/detach/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const url = `${API_BASE_URL}/ota/firmware/create/`;\r\n    const tokens = localStorage.getItem('authTokens');\r\n    \r\n    if (!tokens) {\r\n      throw new Error('Authentication required');\r\n    }\r\n    \r\n    const parsedTokens = JSON.parse(tokens);\r\n    let headers: HeadersInit = {\r\n      'Authorization': `Bearer ${parsedTokens.access}`,\r\n    };\r\n    // Don't set Content-Type - let browser set it with boundary for multipart/form-data\r\n    \r\n    let response = await fetch(url, {\r\n      method: 'POST',\r\n      headers,\r\n      body: formData,\r\n    });\r\n\r\n    // Handle 401 with token refresh\r\n    if (response.status === 401) {\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        const newTokens = JSON.parse(localStorage.getItem('authTokens') || '{}');\r\n        headers = {\r\n          'Authorization': `Bearer ${newTokens.access}`,\r\n        };\r\n        response = await fetch(url, {\r\n          method: 'POST',\r\n          headers,\r\n          body: formData,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Upload failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteFirmwareVersion(firmwareId: number): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n\r\n  async triggerRollback(deviceSerial: string, notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/rollback/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        device_serial: deviceSerial,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n\r\n  async deployFirmware(firmwareId: number, deviceSerials: string[], notes?: string): Promise<any> {\r\n    return this.request(`/ota/updates/multiple/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        firmware_id: firmwareId,\r\n        device_serials: deviceSerials,\r\n        notes: notes || ''\r\n      }),\r\n    });\r\n  }\r\n\r\n  async listTargetedUpdates(): Promise<any> {\r\n    return this.request(`/ota/updates/`);\r\n  }\r\n\r\n  async getTargetedUpdate(updateId: number): Promise<any> {\r\n    return this.request(`/ota/updates/${updateId}/`);\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["AuditTrail","_ref","createdBy","createdAt","updatedBy","updatedAt","className","formatDate","dateString","Date","toLocaleString","_unused","_jsxs","children","_jsx","React","CacheService","constructor","cache","Map","subscribers","set","key","data","ttlMs","arguments","length","undefined","DEFAULT_TTL","staleTime","this","timestamp","now","expiresIn","Math","min","STALE_TIME","notifySubscribers","get","entry","delete","getWithStaleStatus","_entry$staleTime","age","isExpired","isStale","has","_entry$staleTime2","clear","clearPattern","pattern","regex","RegExp","keysToDelete","forEach","_","test","push","clearAll","size","subscribe","callback","Set","subscription","add","subs","subscribePattern","concat","source","directSubs","sub","error","console","subKey","startsWith","keys","Array","from","getStats","values","reduce","sum","getTTL","REALTIME_TTL","LONG_TTL","cacheService","API_BASE_URL","process","apiService","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","response","fetch","_objectSpread","status","refreshToken","removeItem","window","location","href","Error","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","is_staff","getUserDevices","userId","getUserSite","createUserSite","updateUserSite","getDeviceSite","deviceId","createDeviceSite","updateDeviceSite","getSiteTelemetry","siteId","query","URLSearchParams","start_date","append","end_date","days","toString","getSiteHistory","getSiteForecast","date","getSiteWeather","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","id","deletePreset","getGlobalSlaves","createGlobalSlave","slaveData","updateGlobalSlave","slaveId","deleteGlobalSlave","getDevices","page","pageSize","queryString","createDevice","deviceData","updateDevice","deleteDevice","rebootDevice","hardResetDevice","getDeviceLogs","limit","offset","toggleDeviceLogs","enabled","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","updateSlave","deleteSlave","addSlavesToPreset","slaveIds","slave_ids","detachSlaveFromPreset","getFirmwareVersions","activeOnly","uploadFirmwareVersion","formData","updateFirmwareVersion","firmwareId","deleteFirmwareVersion","getDeviceUpdateLogs","getOTAConfig","updateOTAConfig","config","getOTAHealth","triggerRollback","deviceSerial","notes","device_serial","deployFirmware","deviceSerials","firmware_id","device_serials","listTargetedUpdates","getTargetedUpdate","updateId"],"sourceRoot":""}