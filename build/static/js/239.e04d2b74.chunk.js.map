{"version":3,"file":"static/js/239.e04d2b74.chunk.js","mappings":"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","sources":["hooks/useDebounce.ts","components/SiteDataPanel.tsx","components/Devices.tsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\n\r\ninterface UseDebouncedValueOptions {\r\n  delay?: number;\r\n}\r\n\r\n/**\r\n * Custom hook to debounce a value with a delay\r\n * Useful for search inputs and other frequent updates\r\n */\r\nexport function useDebouncedValue<T>(\r\n  value: T,\r\n  options: UseDebouncedValueOptions = {}\r\n): T {\r\n  const { delay = 300 } = options;\r\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n\r\n/**\r\n * Custom hook to debounce a callback function\r\n * Useful for search, filtering, and other expensive operations\r\n */\r\nexport function useDebouncedCallback<T extends (...args: any[]) => any>(\r\n  callback: T,\r\n  delay: number = 300\r\n): (...args: Parameters<T>) => void {\r\n  const [timeoutId, setTimeoutId] = useState<NodeJS.Timeout | null>(null);\r\n\r\n  const debouncedCallback = useCallback(\r\n    (...args: Parameters<T>) => {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n\r\n      const newTimeoutId = setTimeout(() => {\r\n        callback(...args);\r\n      }, delay);\r\n\r\n      setTimeoutId(newTimeoutId);\r\n    },\r\n    [callback, delay, timeoutId]\r\n  );\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n    };\r\n  }, [timeoutId]);\r\n\r\n  return debouncedCallback;\r\n}\r\n\r\n/**\r\n * Custom hook for search input with debouncing\r\n * Returns a hook that handles search input changes with built-in debouncing\r\n */\r\nexport function useDebouncedSearch(\r\n  onSearch: (query: string) => void,\r\n  delay: number = 300\r\n) {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const debouncedCallback = useDebouncedCallback(onSearch, delay);\r\n\r\n  const handleSearch = useCallback(\r\n    (query: string) => {\r\n      setSearchQuery(query);\r\n      debouncedCallback(query);\r\n    },\r\n    [debouncedCallback]\r\n  );\r\n\r\n  return {\r\n    searchQuery,\r\n    setSearchQuery,\r\n    handleSearch,\r\n  };\r\n}\r\n","/**\n * SiteDataPanel  solar site intelligence panel\n *\n * Tabs:\n *  - Overview: 6 live KPI cards + energy breakdown + insights\n *  - Weather:  current conditions + 24 h hourly outlook strip\n *  - History:  power area chart with Battery SOC on secondary axis\n *  - Forecast: P10/P50/P90 + physics baseline, regime tags, % achieved\n */\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  AreaChart, Area, Line,\n  XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend, ReferenceLine,\n} from 'recharts';\nimport html2canvas from 'html2canvas';\nimport { apiService } from '../services/api';\nimport { useTheme } from '../contexts/ThemeContext';\n\n//  Tabs \n\nconst TABS = [\n  { id: 'overview',  label: 'Overview',  icon: '' },\n  { id: 'weather',   label: 'Weather',   icon: '' },\n  { id: 'history',   label: 'History',   icon: '' },\n  { id: 'forecast',  label: 'Forecast',  icon: '' },\n] as const;\ntype TabId = typeof TABS[number]['id'];\n\n//  Custom forecast tooltip \n\nconst ForecastTooltip = ({ active, payload, label }: any) => {\n  const { isDark } = useTheme();\n  if (!active || !payload || !payload.length) return null;\n  return (\n    <div style={{\n      background: isDark ? 'rgba(30,41,59,0.97)' : 'rgba(255,255,255,0.97)',\n      backdropFilter: 'blur(8px)',\n      border: `1px solid ${isDark ? 'rgba(148,163,184,0.12)' : '#f3f4f6'}`,\n      borderRadius: 12,\n      padding: '0.75rem 1rem',\n      boxShadow: '0 10px 15px -3px rgba(0,0,0,0.1)',\n      minWidth: 175,\n    }}>\n      <div style={{ fontFamily: 'Urbanist, sans-serif', fontWeight: 700, color: isDark ? '#f1f5f9' : '#111827', fontSize: '0.85rem', marginBottom: '0.4rem', borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.12)' : '#f3f4f6'}`, paddingBottom: '0.25rem' }}>\n        {label}\n      </div>\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '0.2rem' }}>\n        {payload.map((entry: any) => {\n          const unit = entry.name?.includes('Temp') ? 'C' : entry.name?.includes('GHI') ? 'W/m' : 'kW';\n          return (\n            <div key={entry.name} style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: '1rem', fontSize: '0.78rem', fontFamily: 'Inter, sans-serif', color: isDark ? '#94a3b8' : '#374151' }}>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '0.4rem' }}>\n                <span style={{ width: 7, height: 7, borderRadius: '50%', background: entry.color || entry.stroke || entry.fill, flexShrink: 0 }} />\n                <span style={{ fontWeight: 600 }}>{entry.name?.split(' ')[0]}</span>\n              </div>\n              <span style={{ fontFamily: 'JetBrains Mono, monospace', fontWeight: 600, color: isDark ? '#f1f5f9' : '#111827' }}>\n                {Number(entry.value).toFixed(3)} {unit}\n              </span>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\n//  Helpers \n\nfunction fmt(ts: string, range: string): string {\n  try {\n    const d = new Date(ts);\n    if (range === '24h') return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    if (range === '7d')  return d.toLocaleDateString([], { weekday: 'short' }) + ' ' + d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    return d.toLocaleDateString([], { month: 'short', day: 'numeric' });\n  } catch { return ts; }\n}\n\nfunction fmtForecast(ts: string, forecastFor?: string): string {\n  const clean = forecastFor || ts.replace('FORECAST#', '');\n  try { return new Date(clean).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }); }\n  catch { return clean; }\n}\n\nfunction aggregateByPeriod(data: any[], range: string): any[] {\n  if (!data.length) return [];\n  if (range === '24h') return data.filter((_, i) => i % 2 === 0 || i === data.length - 1);\n\n  const isDay = range !== '7d';\n  const buckets = new Map<string, any[]>();\n  data.forEach(row => {\n    const d = new Date(row.timestamp);\n    const key = isDay\n      ? `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`\n      : `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}-${d.getHours()}`;\n    if (!buckets.has(key)) buckets.set(key, []);\n    buckets.get(key)!.push(row);\n  });\n\n  return Array.from(buckets.values()).map(bucket => {\n    const avg = (field: string) => bucket.reduce((s, r) => s + (r[field] ?? 0), 0) / bucket.length;\n    const first = bucket[0];\n    return {\n      timestamp:            first.timestamp,\n      pv1_power_w:          avg('pv1_power_w'),\n      pv2_power_w:          avg('pv2_power_w'),\n      load_power_w:         avg('load_power_w'),\n      grid_power_w:         avg('grid_power_w'),\n      battery_soc_percent:  avg('battery_soc_percent'),\n      battery_power_w:      avg('battery_power_w'),\n      pv_today_kwh:         isDay ? Math.max(...bucket.map(r => r.pv_today_kwh ?? 0)) : first.pv_today_kwh,\n    };\n  });\n}\n\n//  Icons \n\nconst IconSun = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#F07522\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <circle cx=\"12\" cy=\"12\" r=\"5\" fill=\"#FFD600\" stroke=\"#F07522\" strokeWidth=\"1.5\"/>\n    <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"/><line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"/>\n    <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"/><line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"/>\n    <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"/><line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"/>\n  </svg>\n);\nconst IconBattery = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <rect x=\"1\" y=\"6\" width=\"18\" height=\"12\" rx=\"2\"/>\n    <line x1=\"23\" y1=\"13\" x2=\"23\" y2=\"11\"/>\n    <rect x=\"3\" y=\"8\" width=\"10\" height=\"8\" fill=\"currentColor\" rx=\"1\"/>\n  </svg>\n);\nconst IconLoad = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z\"/>\n    <polyline points=\"9 22 9 12 15 12 15 22\"/>\n  </svg>\n);\nconst IconEnergy = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M13 2L3 14h9l-1 8 10-12h-9l1-8z\"/>\n  </svg>\n);\nconst IconCloud = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z\"/>\n  </svg>\n);\nconst IconGrid = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"/>\n  </svg>\n);\nconst IconThermometer = () => (\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path d=\"M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z\"/>\n  </svg>\n);\n\n//  KPI Card \n\ninterface KpiCardProps {\n  label: string; value: string; unit?: string; sub?: string;\n  accent: string; icon: React.ReactNode; badge?: React.ReactNode;\n}\nconst KpiCard: React.FC<KpiCardProps> = ({ label, value, unit, sub, accent, icon, badge }) => (\n  <div className=\"card\" style={{ padding: '1.1rem', flex: 1, minWidth: 140 }}>\n    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.4rem' }}>\n      <span style={{ fontSize: '0.7rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{label}</span>\n      <span style={{ width: 28, height: 28, borderRadius: '50%', background: `${accent}18`, display: 'flex', alignItems: 'center', justifyContent: 'center', color: accent, flexShrink: 0 }}>{icon}</span>\n    </div>\n    <p style={{ margin: 0, fontFamily: 'JetBrains Mono, monospace', fontSize: '1.5rem', fontWeight: 800, color: 'var(--text-primary)', lineHeight: 1 }}>\n      {value}{unit && <span style={{ fontSize: '0.78rem', fontWeight: 500, color: 'var(--text-muted)', marginLeft: 4 }}>{unit}</span>}\n    </p>\n    {sub   && <p style={{ margin: '0.2rem 0 0', fontSize: '0.7rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{sub}</p>}\n    {badge && <div style={{ marginTop: '0.3rem' }}>{badge}</div>}\n  </div>\n);\n\n//  Weather Hourly Forecast Strip \n\nconst WeatherHourlyStrip = ({ hourly }: { hourly: any[] }) => {\n  if (!hourly || hourly.length === 0) return null;\n  const icon = (cloud: number, ghi: number) =>\n    ghi < 10 ? '' : cloud > 75 ? '' : cloud > 40 ? '' : '';\n\n  return (\n    <div className=\"card\" style={{ padding: '1rem 1.25rem', marginBottom: '1rem' }}>\n      <p style={{ margin: '0 0 0.65rem', fontSize: '0.68rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.07em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>\n        24 h Weather Outlook\n      </p>\n      <div style={{ overflowX: 'auto', paddingTop: 14, paddingBottom: 2 }}>\n        <div style={{ display: 'flex', gap: '0.45rem', minWidth: 'max-content' }}>\n          {hourly.map((h, i) => {\n            const time = (() => { try { return new Date(h.forecast_for).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }); } catch { return ''; } })();\n            const cloud    = h.cloud_cover_pct ?? 0;\n            const ghi      = h.ghi_wm2 ?? 0;\n            const temp     = Number(h.temperature_c ?? 0);\n            const wind     = Number(h.wind_speed_ms ?? 0);\n            const humidity = h.humidity_pct != null ? Number(h.humidity_pct) : null;\n            const ghiPct   = Math.min(100, (ghi / 900) * 100);\n            const humPct   = humidity != null ? Math.min(100, humidity) : null;\n            const isNow    = i === 0;\n            const wi       = icon(cloud, ghi);\n            const ghiColor = ghi > 600 ? '#F07522' : ghi > 200 ? '#f59e0b' : '#d1d5db';\n            const humColor = humidity == null ? '#d1d5db'\n              : humidity > 80 ? '#3b82f6'\n              : humidity > 50 ? '#60a5fa'\n              : '#93c5fd';\n            return (\n              <div key={i} style={{\n                display: 'flex', flexDirection: 'column', alignItems: 'center',\n                background: isNow ? 'rgba(0,166,62,0.09)' : 'rgba(0,0,0,0.025)',\n                border: `1px solid ${isNow ? 'rgba(0,166,62,0.28)' : 'rgba(0,0,0,0.07)'}`,\n                borderRadius: 10, padding: '0.45rem 0.65rem', minWidth: 64, gap: '0.1rem',\n                position: 'relative',\n              }}>\n                {isNow && (\n                  <span style={{ position: 'absolute', top: -9, fontSize: '0.55rem', fontWeight: 700, background: '#00a63e', color: '#fff', padding: '1px 5px', borderRadius: 4, fontFamily: 'Poppins, sans-serif' }}>NOW</span>\n                )}\n                <span style={{ fontSize: '0.65rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}>{time}</span>\n                <span style={{ fontSize: '1.1rem', lineHeight: 1.4 }}>{wi}</span>\n                <span style={{ fontSize: '0.8rem', fontFamily: 'JetBrains Mono, monospace', fontWeight: 700, color: 'var(--text-primary)' }}>{temp.toFixed(1)}</span>\n                {/* GHI mini-bar */}\n                <div title={`GHI ${Math.round(ghi)} W/m`} style={{ width: '100%', height: 3, background: 'rgba(0,0,0,0.08)', borderRadius: 2, overflow: 'hidden', margin: '2px 0' }}>\n                  <div style={{ width: `${ghiPct}%`, height: '100%', background: ghiColor, borderRadius: 2 }} />\n                </div>\n                <span style={{ fontSize: '0.6rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{Math.round(ghi)} W/m</span>\n                {/* Humidity bar */}\n                {humPct != null && (\n                  <>\n                    <div title={`Humidity ${Math.round(humPct)}%`} style={{ width: '100%', height: 3, background: 'rgba(0,0,0,0.06)', borderRadius: 2, overflow: 'hidden', margin: '2px 0' }}>\n                      <div style={{ width: `${humPct}%`, height: '100%', background: humColor, borderRadius: 2 }} />\n                    </div>\n                    <span style={{ fontSize: '0.6rem', color: humColor, fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}>{Math.round(humPct)}%</span>\n                  </>\n                )}\n                <span style={{ fontSize: '0.6rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{wind.toFixed(1)} m/s</span>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n//  Daily Energy Breakdown \n\nconst EnergyBreakdownRow = ({ latest }: { latest: any }) => {\n  if (!latest) return null;\n  const items = [\n    { label: 'PV Yield',    value: latest.pv_today_kwh,              color: '#F07522', bg: '#F0752212', icon: '' },\n    { label: 'Grid In',     value: latest.grid_buy_today_kwh,         color: '#3b82f6', bg: '#3b82f612', icon: '' },\n    { label: 'Grid Out',    value: latest.grid_sell_today_kwh,        color: '#10b981', bg: '#10b98112', icon: '' },\n    { label: 'Batt Chg',    value: latest.batt_charge_today_kwh,      color: '#8b5cf6', bg: '#8b5cf612', icon: '' },\n    { label: 'Batt Dchg',   value: latest.batt_discharge_today_kwh,   color: '#ec4899', bg: '#ec489912', icon: '' },\n    { label: 'Consumption', value: latest.load_today_kwh,             color: '#6b7280', bg: '#6b728012', icon: '' },\n  ].filter(e => e.value != null);\n  if (!items.length) return null;\n\n  return (\n    <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap', marginBottom: '1rem', alignItems: 'center' }}>\n      <span style={{ fontSize: '0.65rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif', alignSelf: 'center', minWidth: 40 }}>Today</span>\n      {items.map(e => (\n        <span key={e.label} style={{\n          fontSize: '0.72rem', fontWeight: 600, fontFamily: 'Poppins, sans-serif',\n          padding: '0.2rem 0.65rem', borderRadius: 99,\n          background: e.bg, border: `1px solid ${e.color}28`,\n          color: e.color, display: 'flex', alignItems: 'center', gap: '0.3rem',\n        }}>\n          <span style={{ opacity: 0.85 }}>{e.icon}</span>\n          {e.label}:&nbsp;\n          <span style={{ fontFamily: 'JetBrains Mono, monospace', color: 'var(--text-primary)' }}>{Number(e.value).toFixed(2)}</span>\n          <span style={{ fontSize: '0.6rem', color: 'var(--text-muted)' }}>kWh</span>\n        </span>\n      ))}\n    </div>\n  );\n};\n\n//  Solar Insights Row \n\nconst InsightsRow = ({ latest }: { latest: any }) => {\n  if (!latest) return null;\n\n  const pvKwh    = Number(latest.pv_today_kwh      ?? 0);\n  const loadKwh  = Number(latest.load_today_kwh    ?? 0);\n  const gridBuy  = Number(latest.grid_buy_today_kwh ?? 0);\n\n  // Only render if we have at least PV data\n  if (pvKwh === 0 && loadKwh === 0) return null;\n\n  const co2Kg       = pvKwh * 0.82;  // India grid factor ~0.82 kg CO/kWh\n  // Self-sufficiency = portion of load met by solar+battery (not from grid)\n  const selfSufPct = loadKwh > 0\n    ? Math.max(0, Math.min(100, Math.round(((loadKwh - gridBuy) / loadKwh) * 100)))\n    : null;\n  const gridDepPct  = loadKwh > 0\n    ? Math.max(0, Math.min(100, Math.round((gridBuy / loadKwh) * 100)))\n    : null;\n\n  const items: { icon: string; label: string; value: string; sub?: string; color: string; bg: string }[] = [];\n\n  if (pvKwh > 0) {\n    items.push({\n      icon: '', label: 'CO Avoided',\n      value: co2Kg >= 1 ? `${co2Kg.toFixed(2)} kg` : `${(co2Kg * 1000).toFixed(0)} g`,\n      sub: 'vs grid (0.82 kg/kWh)',\n      color: '#10b981', bg: '#10b98110',\n    });\n  }\n  if (selfSufPct != null) {\n    const color = selfSufPct >= 70 ? '#00a63e' : selfSufPct >= 40 ? '#f59e0b' : '#ef4444';\n    items.push({\n      icon: '', label: 'Self-Sufficiency',\n      value: `${selfSufPct}%`,\n      sub: 'load met by solar+battery',\n      color, bg: `${color}10`,\n    });\n  }\n  if (gridDepPct != null) {\n    const color = gridDepPct <= 20 ? '#10b981' : gridDepPct <= 50 ? '#f59e0b' : '#ef4444';\n    items.push({\n      icon: '', label: 'Grid Dependency',\n      value: `${gridDepPct}%`,\n      sub: 'portion from grid',\n      color, bg: `${color}10`,\n    });\n  }\n\n  if (!items.length) return null;\n\n  return (\n    <div style={{ display: 'flex', gap: '0.6rem', flexWrap: 'wrap', marginBottom: '1rem' }}>\n      <span style={{ fontSize: '0.65rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif', alignSelf: 'center', minWidth: 40 }}>\n        Insights\n      </span>\n      {items.map(item => (\n        <div key={item.label} style={{\n          display: 'flex', alignItems: 'center', gap: '0.55rem',\n          padding: '0.35rem 0.85rem', borderRadius: 10,\n          background: item.bg, border: `1px solid ${item.color}28`,\n          flexShrink: 0,\n        }}>\n          <span style={{ fontSize: '1rem', lineHeight: 1 }}>{item.icon}</span>\n          <div style={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\n            <span style={{ fontSize: '0.62rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif', fontWeight: 600, textTransform: 'uppercase', letterSpacing: '0.04em' }}>{item.label}</span>\n            <span style={{ fontFamily: 'JetBrains Mono, monospace', fontWeight: 800, color: item.color, fontSize: '0.88rem', lineHeight: 1 }}>{item.value}</span>\n            {item.sub && <span style={{ fontSize: '0.58rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>{item.sub}</span>}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\n//  Forecast Table \n\nconst REGIME_STYLE: Record<string, { bg: string; color: string }> = {\n  night:  { bg: '#1e293b1a', color: '#475569' },\n  ramp:   { bg: '#f59e0b18', color: '#d97706' },\n  midday: { bg: '#F0752218', color: '#c2410c' },\n};\n\nconst ForecastTable = ({ data }: { data: any[] }) => {\n  const { isDark } = useTheme();\n  const theadBg  = isDark ? 'rgba(15,23,42,0.9)'  : '#f9fafb';\n  const rowBorder = isDark ? '1px solid rgba(148,163,184,0.07)' : '1px solid #f3f4f6';\n  return (\n    <div style={{ maxHeight: 300, overflowY: 'auto' }}>\n      <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '0.8rem', fontFamily: 'Inter, sans-serif' }}>\n        <thead style={{ position: 'sticky', top: 0, background: theadBg, zIndex: 1 }}>\n          <tr>\n            <th style={{ padding: '0.7rem 1rem', textAlign: 'left',   fontWeight: 600, color: 'var(--text-secondary)',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>Time</th>\n            <th style={{ padding: '0.7rem 0.6rem', textAlign: 'center', fontWeight: 600, color: 'var(--text-muted)',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>Regime</th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: '#f59e0b',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>P10 </th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: '#00a63e',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>P50</th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: '#3b82f6',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>P90 </th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: 'var(--text-muted)',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>Physics</th>\n            <th style={{ padding: '0.7rem 0.8rem', textAlign: 'right', fontWeight: 600, color: '#eab308',  borderBottom: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb'}` }}>GHI W/m</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data.map((row, i) => {\n            const rc = row.regime ? (REGIME_STYLE[row.regime] ?? { bg: 'transparent', color: 'var(--text-muted)' }) : null;\n            return (\n              <tr key={i} style={{ borderBottom: rowBorder }}>\n                <td style={{ padding: '0.55rem 1rem', color: 'var(--text-primary)', fontFamily: 'JetBrains Mono, monospace' }}>{row.time}</td>\n                <td style={{ padding: '0.4rem 0.6rem', textAlign: 'center' }}>\n                  {row.regime && rc && (\n                    <span style={{ fontSize: '0.62rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.04em', background: rc.bg, color: rc.color, padding: '2px 6px', borderRadius: 4, fontFamily: 'Poppins, sans-serif' }}>\n                      {row.regime}\n                    </span>\n                  )}\n                </td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', color: 'var(--text-secondary)' }}>{row.p10?.toFixed(3) ?? ''}</td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', fontWeight: 600, color: 'var(--text-primary)' }}>{row.p50?.toFixed(3) ?? ''}</td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', color: 'var(--text-secondary)' }}>{row.p90?.toFixed(3) ?? ''}</td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', color: 'var(--text-muted)', fontStyle: 'italic' }}>{row.physics?.toFixed(3) ?? ''}</td>\n                <td style={{ padding: '0.55rem 0.8rem', textAlign: 'right', color: 'var(--text-secondary)' }}>{row.ghi?.toFixed(0) ?? ''}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\n//  Main component \n\ninterface Props {\n  siteId: string;\n  autoRefresh?: boolean;\n}\n\nconst SiteDataPanel: React.FC<Props> = ({ siteId, autoRefresh = false }) => {\n  const { isDark } = useTheme();\n\n  const [telemetry,  setTelemetry]  = useState<any[]>([]);\n  const [forecast,   setForecast]   = useState<any[]>([]);\n  const [weather,    setWeather]    = useState<any>(null);\n  const [loading,    setLoading]    = useState(true);\n  const [error,      setError]      = useState<string | null>(null);\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\n\n  const [activeTab,       setActiveTab]       = useState<TabId>('overview');\n  const [showBands,       setShowBands]       = useState<Record<string, boolean>>({ P10: true, P50: true, P90: true });\n  const [dateRange,       setDateRange]       = useState('24h');\n  const [customStartDate, setCustomStartDate] = useState('');\n  const [customEndDate,   setCustomEndDate]   = useState('');\n  const [forecastView,    setForecastView]    = useState<'chart' | 'table'>('chart');\n\n  // Dark-mode-aware tooltip style for recharts\n  const tooltipStyle = {\n    background: isDark ? 'rgba(30,41,59,0.97)' : 'rgba(255,255,255,0.97)',\n    border: `1px solid ${isDark ? 'rgba(148,163,184,0.1)' : 'rgba(0,166,62,0.15)'}`,\n    borderRadius: 10,\n    color: isDark ? '#f1f5f9' : '#0a0a0a',\n    boxShadow: '0 8px 24px rgba(0,0,0,0.1)',\n    fontSize: 12,\n  };\n\n  const fetchAll = useCallback(async () => {\n    try {\n      let telemetryParams: any = {};\n      if      (dateRange === 'custom' && customStartDate && customEndDate) telemetryParams = { start_date: new Date(customStartDate).toISOString(), end_date: new Date(customEndDate).toISOString() };\n      else if (dateRange === '7d')  telemetryParams = { days: 7 };\n      else if (dateRange === '30d') telemetryParams = { days: 30 };\n\n      let forecastParams: any = {};\n      if (dateRange === 'custom' && customStartDate && customEndDate) {\n        forecastParams = { start_date: new Date(customStartDate).toISOString(), end_date: new Date(customEndDate).toISOString() };\n      } else if (dateRange === '7d' || dateRange === '30d') {\n        const days = dateRange === '7d' ? 6 : 29;\n        const end = new Date(), start = new Date();\n        start.setDate(end.getDate() - days);\n        forecastParams = {\n          start_date: start.toISOString().split('T')[0] + 'T00:00:00Z',\n          end_date:   end.toISOString().split('T')[0]   + 'T23:59:59Z',\n        };\n      }\n\n      const [tel, fcst, wth] = await Promise.all([\n        apiService.getSiteTelemetry(siteId, telemetryParams),\n        apiService.getSiteForecast(siteId, forecastParams),\n        apiService.getSiteWeather(siteId),\n      ]);\n\n      setTelemetry(Array.isArray(tel) ? tel : []);\n      setForecast(Array.isArray(fcst) ? fcst : []);\n      setWeather(wth || null);\n      setLastUpdated(new Date());\n      setError(null);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load site data');\n    } finally {\n      setLoading(false);\n    }\n  }, [siteId, dateRange, customStartDate, customEndDate]);\n\n  useEffect(() => {\n    setLoading(true);\n    fetchAll();\n    if (!autoRefresh) return;\n    const id = setInterval(fetchAll, 60_000);\n    return () => clearInterval(id);\n  }, [fetchAll, autoRefresh]);\n\n  //  Derived values \n  const latest = telemetry.length > 0 ? telemetry[telemetry.length - 1] : null;\n\n  const pvKw       = latest ? ((latest.pv1_power_w ?? 0) + (latest.pv2_power_w ?? 0)) / 1000 : null;\n  const batSoc     = latest?.battery_soc_percent ?? null;\n  const loadKw     = latest ? (latest.load_power_w    ?? 0) / 1000 : null;\n  const todayKwh   = latest?.pv_today_kwh ?? null;\n  const gridKw     = latest ? (latest.grid_power_w    ?? 0) / 1000 : null;\n  const batPowerKw = latest ? (latest.battery_power_w ?? 0) / 1000 : null;\n  const invTemp    = latest?.inverter_temp_c   ?? null;\n  const batVoltage = latest?.battery_voltage_v ?? null;\n  const runState   = latest?.run_state;\n\n  const gridImporting  = gridKw     != null && gridKw     > 0.01;\n  const gridExporting  = gridKw     != null && gridKw     < -0.01;\n  const batCharging    = batPowerKw != null && batPowerKw > 0.01;\n\n  const runStateBadge = runState != null ? (\n    runState === 0 ? { label: 'Standby', color: '#9ca3af' } :\n    runState === 1 ? { label: 'Online',  color: '#00a63e' } :\n    runState === 2 ? { label: 'Warning', color: '#f59e0b' } :\n    runState === 3 ? { label: 'Fault',   color: '#ef4444' } :\n                     { label: `State ${runState}`, color: '#6b7280' }\n  ) : null;\n\n  const invTempColor = invTemp == null ? '#9ca3af'\n    : invTemp > 60 ? '#ef4444'\n    : invTemp > 45 ? '#f59e0b'\n    : '#10b981';\n\n  //  Chart data \n  const aggregated  = aggregateByPeriod(telemetry, dateRange);\n  const historyData = aggregated.map(row => ({\n    time:           fmt(row.timestamp, dateRange),\n    'PV (kW)':      +((( row.pv1_power_w ?? 0) + (row.pv2_power_w ?? 0)) / 1000).toFixed(2),\n    'Load (kW)':    +((row.load_power_w ?? 0) / 1000).toFixed(2),\n    'Grid (kW)':    +((row.grid_power_w ?? 0) / 1000).toFixed(2),\n    'Batt SOC (%)': row.battery_soc_percent ?? null,\n  }));\n\n  const forecastData = forecast.map(row => {\n    let label = '';\n    if (dateRange !== '24h') {\n      const clean = row.forecast_for || row.timestamp.replace('FORECAST#', '');\n      const d = new Date(clean);\n      label = d.toLocaleDateString([], { month: 'short', day: 'numeric' }) + ' ' + d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    } else {\n      label = fmtForecast(row.timestamp, row.forecast_for);\n    }\n    return {\n      time:    label,\n      p50:     row.p50_kw            != null ? +Number(row.p50_kw).toFixed(3)            : null,\n      p10:     row.p10_kw            != null ? +Number(row.p10_kw).toFixed(3)            : null,\n      p90:     row.p90_kw            != null ? +Number(row.p90_kw).toFixed(3)            : null,\n      physics: row.physics_baseline_kw != null ? +Number(row.physics_baseline_kw).toFixed(3) : null,\n      ghi:     row.ghi_input_wm2     != null ? +row.ghi_input_wm2                       : null,\n      temp:    row.temperature_c     != null ? +row.temperature_c                        : null,\n      regime:  row.regime            ?? null,\n    };\n  });\n\n  // Trapezoidal energy integration\n  let fcastP10 = 0, fcastP50 = 0, fcastP90 = 0;\n  let forecastGeneratedAt: Date | null = null;\n  if (forecast.length > 1) {\n    const first = forecast[0];\n    if (first.generated_at) {\n      forecastGeneratedAt = new Date(first.generated_at);\n    } else if (first.timestamp) {\n      forecastGeneratedAt = new Date(first.timestamp.replace('FORECAST#', '').split('T')[0] + 'T00:00:00Z');\n    }\n    for (let i = 0; i < forecast.length - 1; i++) {\n      const h = Math.abs(\n        new Date(forecast[i+1].timestamp.replace('FORECAST#', '')).getTime() -\n        new Date(forecast[i].timestamp.replace('FORECAST#', '')).getTime()\n      ) / 3_600_000;\n      if (forecast[i].p10_kw != null && forecast[i+1].p10_kw != null) fcastP10 += (forecast[i].p10_kw + forecast[i+1].p10_kw) / 2 * h;\n      if (forecast[i].p50_kw != null && forecast[i+1].p50_kw != null) fcastP50 += (forecast[i].p50_kw + forecast[i+1].p50_kw) / 2 * h;\n      if (forecast[i].p90_kw != null && forecast[i+1].p90_kw != null) fcastP90 += (forecast[i].p90_kw + forecast[i+1].p90_kw) / 2 * h;\n    }\n  }\n\n  const achievedPct = todayKwh != null && fcastP50 > 0\n    ? Math.min(999, Math.round((todayKwh / fcastP50) * 100))\n    : null;\n\n  //  Derived dark-mode colours \n  const cardBg     = isDark ? 'rgba(30,41,59,0.85)'   : '#ffffff';\n  const headerGrad = isDark ? 'rgba(30,41,59,0.6)'    : 'linear-gradient(to right,#ffffff,#f9fafb)';\n  const toggleBg   = isDark ? 'rgba(15,23,42,0.6)'    : '#f3f4f6';\n  const toggleActive = isDark ? 'rgba(30,41,59,0.95)' : '#fff';\n  const borderClr  = isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb';\n\n  //  Render \n  if (loading) {\n    return (\n      <div style={{ padding: '1.5rem 0' }}>\n        <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem', flexWrap: 'wrap' }}>\n          {[...Array(6)].map((_, i) => <div key={i} className=\"card skeleton\" style={{ flex: 1, minWidth: 140, height: 100 }} />)}\n        </div>\n        <div className=\"card skeleton\" style={{ height: 52, marginBottom: '0.75rem' }} />\n        <div className=\"card skeleton\" style={{ height: 130, marginBottom: '1rem' }} />\n        <div className=\"card skeleton\" style={{ height: 240, marginBottom: '1rem' }} />\n        <div className=\"card skeleton\" style={{ height: 200 }} />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ padding: '1.5rem', color: '#ef4444', fontSize: '0.85rem', background: 'rgba(239,68,68,0.06)', borderRadius: 10, marginTop: '1rem' }}>\n        Failed to load DynamoDB data for <strong>{siteId}</strong>: {error}\n      </div>\n    );\n  }\n\n  const noData = telemetry.length === 0 && forecast.length === 0 && !weather;\n\n  return (\n    <div style={{ marginTop: '1.5rem' }}>\n\n      {/*  Section header  */}\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.75rem', gap: '1rem', flexWrap: 'wrap' }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', flexWrap: 'wrap' }}>\n          <p className=\"dash-section-label\" style={{ margin: 0 }}>\n            Live Site Intelligence  <span style={{ fontFamily: 'JetBrains Mono, monospace', color: '#00a63e' }}>{siteId}</span>\n          </p>\n          {runStateBadge && (\n            <span style={{\n              fontSize: '0.65rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em',\n              background: `${runStateBadge.color}18`, color: runStateBadge.color,\n              padding: '2px 8px', borderRadius: 99, fontFamily: 'Poppins, sans-serif',\n              border: `1px solid ${runStateBadge.color}30`,\n            }}>\n               {runStateBadge.label}\n            </span>\n          )}\n        </div>\n\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', flexWrap: 'wrap' }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n            <select\n              value={dateRange}\n              onChange={e => setDateRange(e.target.value)}\n              style={{ background: 'var(--bg-card,#fff)', border: '1px solid rgba(0,166,62,0.2)', borderRadius: 8, padding: '0.3rem 0.6rem', fontSize: '0.72rem', color: 'var(--text-primary,#0a0a0a)', cursor: 'pointer', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}\n            >\n              <option value=\"24h\">Today</option>\n              <option value=\"7d\">Last 7 days</option>\n              <option value=\"30d\">Last 30 days</option>\n              <option value=\"custom\">Custom range</option>\n            </select>\n            {dateRange === 'custom' && (<>\n              <input type=\"date\" value={customStartDate} onChange={e => setCustomStartDate(e.target.value)}\n                style={{ background: 'var(--bg-card,#fff)', border: '1px solid rgba(0,166,62,0.2)', borderRadius: 8, padding: '0.3rem 0.6rem', fontSize: '0.72rem', color: 'var(--text-primary,#0a0a0a)', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }} />\n              <span style={{ color: 'var(--text-muted)', fontSize: '0.7rem' }}>to</span>\n              <input type=\"date\" value={customEndDate} onChange={e => setCustomEndDate(e.target.value)}\n                style={{ background: 'var(--bg-card,#fff)', border: '1px solid rgba(0,166,62,0.2)', borderRadius: 8, padding: '0.3rem 0.6rem', fontSize: '0.72rem', color: 'var(--text-primary,#0a0a0a)', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }} />\n            </>)}\n          </div>\n          {lastUpdated && (\n            <span style={{ fontSize: '0.7rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>\n              Updated {lastUpdated.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n            </span>\n          )}\n          <button\n            onClick={() => { setLoading(true); fetchAll(); }}\n            style={{ background: 'none', border: '1px solid rgba(0,166,62,0.2)', borderRadius: 8, padding: '0.2rem 0.6rem', fontSize: '0.72rem', color: '#00a63e', cursor: 'pointer', fontFamily: 'Poppins, sans-serif', fontWeight: 600 }}\n          > Refresh</button>\n        </div>\n      </div>\n\n      {noData ? (\n        <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)', fontSize: '0.875rem', background: 'rgba(0,166,62,0.03)', borderRadius: 12, border: '1px dashed rgba(0,166,62,0.15)' }}>\n          No DynamoDB data found for site <strong style={{ color: '#00a63e' }}>{siteId}</strong> in the {\n            dateRange === '24h' ? 'today' : dateRange === '7d' ? 'last 7 days' : dateRange === '30d' ? 'last 30 days' : 'selected date range'\n          }.<br />\n          <span style={{ fontSize: '0.78rem' }}>Data is written by the ML forecast scheduler when the device is actively posting telemetry.</span>\n        </div>\n      ) : (<>\n\n        {/*  Tab Bar  */}\n        <div style={{ display: 'flex', borderBottom: `2px solid ${isDark ? 'rgba(148,163,184,0.12)' : '#f3f4f6'}`, marginBottom: '1rem', gap: 0 }}>\n          {TABS.map(tab => {\n            const isActive = activeTab === tab.id;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                style={{\n                  border: 'none', background: 'transparent', cursor: 'pointer',\n                  padding: '0.5rem 1rem',\n                  fontSize: '0.78rem', fontWeight: isActive ? 700 : 600,\n                  fontFamily: 'Poppins, sans-serif',\n                  color: isActive ? '#00a63e' : 'var(--text-muted)',\n                  borderBottom: `2px solid ${isActive ? '#00a63e' : 'transparent'}`,\n                  marginBottom: -2,\n                  display: 'flex', alignItems: 'center', gap: '0.35rem',\n                  transition: 'color 0.15s',\n                  letterSpacing: '0.01em',\n                }}\n              >\n                <span>{tab.icon}</span>\n                <span>{tab.label}</span>\n              </button>\n            );\n          })}\n        </div>\n\n        {/*  OVERVIEW TAB  */}\n        {activeTab === 'overview' && (<>\n\n          {/* 6-card KPI strip */}\n          <div style={{ display: 'flex', gap: '0.75rem', flexWrap: 'wrap', marginBottom: '0.75rem' }}>\n            <KpiCard\n              label=\"PV Power\" value={pvKw != null ? pvKw.toFixed(2) : ''} unit=\"kW\"\n              sub={latest?.pv1_power_w != null && latest?.pv2_power_w != null\n                ? `S1: ${(latest.pv1_power_w/1000).toFixed(2)}  S2: ${(latest.pv2_power_w/1000).toFixed(2)} kW`\n                : 'Current generation'}\n              accent=\"#F07522\" icon={<IconSun />}\n            />\n            <KpiCard\n              label=\"Battery\" value={batSoc != null ? batSoc.toFixed(1) : ''} unit=\"%\"\n              sub={batVoltage != null ? `${batVoltage.toFixed(1)} V` : 'State of charge'}\n              accent=\"#00a63e\" icon={<IconBattery />}\n              badge={batPowerKw != null && Math.abs(batPowerKw) > 0.01 ? (\n                <span style={{ fontSize: '0.65rem', fontWeight: 700, color: batCharging ? '#00a63e' : '#ec4899', fontFamily: 'Poppins, sans-serif' }}>\n                  {batCharging ? ' Charging' : ' Discharging'} {Math.abs(batPowerKw).toFixed(2)} kW\n                </span>\n              ) : <span style={{ fontSize: '0.65rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>Idle</span>}\n            />\n            <KpiCard\n              label=\"Load\" value={loadKw != null ? loadKw.toFixed(2) : ''} unit=\"kW\"\n              sub=\"Current consumption\" accent=\"#8b5cf6\" icon={<IconLoad />}\n            />\n            <KpiCard\n              label=\"Energy Today\" value={todayKwh != null ? todayKwh.toFixed(2) : ''} unit=\"kWh\"\n              sub=\"Solar yield today\" accent=\"#10b981\" icon={<IconEnergy />}\n            />\n            <KpiCard\n              label=\"Grid\" value={gridKw != null ? Math.abs(gridKw).toFixed(2) : ''} unit=\"kW\"\n              sub={latest?.grid_voltage_v != null\n                ? `${Number(latest.grid_voltage_v).toFixed(0)} V  ${Number(latest.grid_frequency_hz ?? 0).toFixed(1)} Hz`\n                : 'Grid power'}\n              accent=\"#3b82f6\" icon={<IconGrid />}\n              badge={gridKw != null ? (\n                <span style={{ fontSize: '0.65rem', fontWeight: 700, color: gridImporting ? '#3b82f6' : gridExporting ? '#10b981' : 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>\n                  {gridImporting ? ' Importing' : gridExporting ? ' Exporting' : ' Standby'}\n                </span>\n              ) : undefined}\n            />\n            <KpiCard\n              label=\"Inv. Temp\" value={invTemp != null ? invTemp.toFixed(1) : ''} unit=\"C\"\n              sub={invTemp != null\n                ? invTemp > 60 ? ' Hot  check cooling' : invTemp > 45 ? ' Warm' : ' Normal'\n                : 'No data'}\n              accent={invTempColor} icon={<IconThermometer />}\n            />\n          </div>\n\n          {/* Daily energy breakdown */}\n          <EnergyBreakdownRow latest={latest} />\n          <InsightsRow latest={latest} />\n\n        </>)}\n\n        {/*  WEATHER TAB  */}\n        {activeTab === 'weather' && (<>\n\n          {/* Current weather pills */}\n          {weather?.current ? (\n            <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap', marginBottom: '0.75rem', alignItems: 'center' }}>\n              <span style={{ fontSize: '0.65rem', fontWeight: 700, textTransform: 'uppercase', letterSpacing: '0.06em', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>Now</span>\n              {[\n                { label: 'Temp',     value: weather.current.temperature_c  != null ? `${Number(weather.current.temperature_c).toFixed(1)} C`  : null },\n                { label: 'Humidity', value: weather.current.humidity_pct   != null ? `${weather.current.humidity_pct} %`                        : null },\n                { label: 'Cloud',    value: weather.current.cloud_cover_pct != null ? `${weather.current.cloud_cover_pct} %`                    : null, icon: <IconCloud /> },\n                { label: 'Wind',     value: weather.current.wind_speed_ms  != null ? `${Number(weather.current.wind_speed_ms).toFixed(1)} m/s`  : null },\n                { label: 'GHI',      value: weather.current.ghi_wm2        != null ? `${Math.round(weather.current.ghi_wm2)} W/m`              : null },\n              ].filter(p => p.value).map(p => (\n                <span key={p.label} style={{\n                  fontSize: '0.72rem', fontWeight: 600, fontFamily: 'Poppins, sans-serif',\n                  padding: '0.2rem 0.65rem', borderRadius: 99,\n                  background: 'rgba(0,166,62,0.07)', border: '1px solid rgba(0,166,62,0.12)',\n                  color: '#007a55', display: 'flex', alignItems: 'center', gap: '0.3rem',\n                }}>\n                  {(p as any).icon}{p.label}: <span style={{ fontFamily: 'JetBrains Mono, monospace', color: 'var(--text-primary)' }}>{p.value}</span>\n                </span>\n              ))}\n            </div>\n          ) : (\n            <div style={{ padding: '1.5rem', textAlign: 'center', color: 'var(--text-muted)', fontSize: '0.85rem', background: isDark ? 'rgba(0,0,0,0.15)' : 'rgba(0,166,62,0.03)', borderRadius: 12, border: '1px dashed rgba(0,166,62,0.15)', marginBottom: '1rem' }}>\n              No current weather data available.\n            </div>\n          )}\n\n          {/* 24 h weather outlook */}\n          {weather?.hourly_forecast && weather.hourly_forecast.length > 0\n            ? <WeatherHourlyStrip hourly={weather.hourly_forecast} />\n            : !weather?.current && null\n          }\n\n        </>)}\n\n        {/*  HISTORY TAB  */}\n        {activeTab === 'history' && (\n          historyData.length > 0 ? (\n            <div className=\"card\" style={{ padding: '1.25rem', marginBottom: '1rem' }}>\n              <div style={{ marginBottom: '0.75rem' }}>\n                <h3 style={{ margin: '0 0 0.2rem', fontSize: '0.9rem', fontFamily: 'Urbanist, sans-serif', color: 'var(--text-primary)' }}>\n                  Power History  {\n                    dateRange === '24h'   ? 'Today' :\n                    dateRange === '7d'    ? 'Last 7 days' :\n                    dateRange === '30d'   ? 'Last 30 days' :\n                    customStartDate && customEndDate\n                      ? `${new Date(customStartDate).toLocaleDateString()}  ${new Date(customEndDate).toLocaleDateString()}`\n                      : 'Custom range'\n                  }\n                </h3>\n                <p style={{ margin: 0, fontSize: '0.68rem', color: 'var(--text-muted)', fontFamily: 'Poppins, sans-serif' }}>\n                  {dateRange === '7d' ? 'Hourly aggregates' : dateRange !== '24h' ? 'Daily aggregates' : '30-min samples'}  Battery SOC on right axis\n                </p>\n              </div>\n              <div style={{ height: 240 }}>\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <AreaChart data={historyData} margin={{ top: 4, right: 44, left: 0, bottom: dateRange === '7d' || dateRange === '30d' ? 20 : 0 }}>\n                    <defs>\n                      <linearGradient id=\"pvGrad\"   x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"5%\"  stopColor=\"#F07522\" stopOpacity={0.22}/>\n                        <stop offset=\"95%\" stopColor=\"#F07522\" stopOpacity={0}/>\n                      </linearGradient>\n                      <linearGradient id=\"loadGrad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"5%\"  stopColor=\"#8b5cf6\" stopOpacity={0.18}/>\n                        <stop offset=\"95%\" stopColor=\"#8b5cf6\" stopOpacity={0}/>\n                      </linearGradient>\n                    </defs>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke={isDark ? 'rgba(148,163,184,0.07)' : 'rgba(0,166,62,0.08)'} />\n                    <XAxis\n                      dataKey=\"time\" stroke=\"var(--text-muted)\"\n                      interval={dateRange === '24h' ? 'preserveStartEnd' : Math.ceil(historyData.length / 10)}\n                      angle={dateRange === '7d' || dateRange === '30d' ? -15 : 0}\n                      textAnchor={dateRange === '7d' || dateRange === '30d' ? 'end' : 'middle'}\n                      tick={{ fontSize: dateRange === '30d' ? 9 : 10, fill: 'var(--text-muted)' }}\n                    />\n                    <YAxis yAxisId=\"power\" stroke=\"var(--text-muted)\" tickFormatter={(v: number) => `${v}kW`} tick={{ fontSize: 10, fill: 'var(--text-muted)' }} />\n                    <YAxis yAxisId=\"soc\" orientation=\"right\" stroke=\"var(--text-muted)\" domain={[0, 100]} tickFormatter={(v: number) => `${v}%`} width={36} tick={{ fontSize: 10, fill: 'var(--text-muted)' }} />\n                    <Tooltip contentStyle={tooltipStyle} formatter={(v: any, name: any) => [`${v} ${String(name).includes('%') ? '%' : 'kW'}`, name]} />\n                    <Legend iconType=\"circle\" iconSize={8} wrapperStyle={{ fontSize: 11, fontFamily: 'Poppins, sans-serif', color: 'var(--text-secondary)' }} />\n                    <Area yAxisId=\"power\" type=\"monotone\" dataKey=\"PV (kW)\"   stroke=\"#F07522\" strokeWidth={2} fill=\"url(#pvGrad)\"   dot={false} />\n                    <Area yAxisId=\"power\" type=\"monotone\" dataKey=\"Load (kW)\" stroke=\"#8b5cf6\" strokeWidth={2} fill=\"url(#loadGrad)\" dot={false} />\n                    <Line  yAxisId=\"power\" type=\"monotone\" dataKey=\"Grid (kW)\"     stroke=\"#3b82f6\" strokeWidth={1.5} dot={false} strokeDasharray=\"4 3\" />\n                    <Line  yAxisId=\"soc\"   type=\"monotone\" dataKey=\"Batt SOC (%)\"  stroke=\"#00a63e\" strokeWidth={1.5} dot={false} strokeDasharray=\"2 3\" />\n                  </AreaChart>\n                </ResponsiveContainer>\n              </div>\n            </div>\n          ) : (\n            <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)', fontSize: '0.875rem', background: isDark ? 'rgba(0,0,0,0.15)' : 'rgba(0,166,62,0.03)', borderRadius: 12, border: '1px dashed rgba(0,166,62,0.15)' }}>\n              No telemetry history data available for the selected range.\n            </div>\n          )\n        )}\n\n        {/*  FORECAST TAB  */}\n        {activeTab === 'forecast' && (\n          forecastData.length > 0 ? (\n            <div className=\"card\" style={{ padding: 0, boxShadow: '0 10px 30px -5px rgba(0,0,0,0.1)', border: `1px solid ${borderClr}`, borderRadius: 16, background: cardBg, overflow: 'hidden' }}>\n\n              {/* Header */}\n              <div style={{ padding: '1.25rem 1.5rem', borderBottom: `1px solid ${borderClr}`, display: 'flex', flexWrap: 'wrap', gap: '1rem', alignItems: 'center', justifyContent: 'space-between', background: headerGrad }}>\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '0.25rem' }}>\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                    <div style={{ width: 32, height: 32, borderRadius: 8, background: 'rgba(0,166,62,0.1)', color: '#00a63e', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '1.1rem' }}></div>\n                    <h3 style={{ margin: 0, fontSize: '1.1rem', fontFamily: 'Urbanist, sans-serif', color: 'var(--text-primary)', fontWeight: 700 }}>Solar Forecast</h3>\n                  </div>\n                  {fcastP50 > 0 && (\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.6rem', marginLeft: '2.5rem', flexWrap: 'wrap' }}>\n                      <span style={{ fontSize: '0.82rem', color: 'var(--text-muted)', fontFamily: 'Inter, sans-serif' }}>Est. Yield:</span>\n                      <span style={{ fontFamily: 'JetBrains Mono, monospace', fontSize: '0.82rem', fontWeight: 600, color: 'var(--text-primary)', background: isDark ? 'rgba(148,163,184,0.1)' : '#f3f4f6', padding: '2px 7px', borderRadius: 4 }}>\n                        {fcastP10.toFixed(1)} <span style={{ color: 'var(--text-muted)' }}>/</span> <span style={{ color: '#00a63e' }}>{fcastP50.toFixed(1)}</span> <span style={{ color: 'var(--text-muted)' }}>/</span> {fcastP90.toFixed(1)} kWh\n                      </span>\n                      {achievedPct != null && (\n                        <span style={{\n                          fontSize: '0.72rem', fontWeight: 700, fontFamily: 'Poppins, sans-serif',\n                          padding: '2px 8px', borderRadius: 99,\n                          background: achievedPct >= 80 ? '#10b98118' : achievedPct >= 40 ? '#f59e0b18' : isDark ? 'rgba(148,163,184,0.1)' : '#e5e7eb',\n                          color:      achievedPct >= 80 ? '#059669'  : achievedPct >= 40 ? '#d97706'  : 'var(--text-muted)',\n                          border:     `1px solid ${achievedPct >= 80 ? '#10b98128' : achievedPct >= 40 ? '#f59e0b28' : borderClr}`,\n                        }}>\n                          {achievedPct}% achieved\n                        </span>\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                {/* Controls */}\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', flexWrap: 'wrap' }}>\n                  {/* Chart / Table toggle */}\n                  <div style={{ display: 'flex', background: toggleBg, borderRadius: 8, padding: 3 }}>\n                    {(['chart', 'table'] as const).map(v => (\n                      <button key={v} onClick={() => setForecastView(v)} style={{ border: 'none', background: forecastView === v ? toggleActive : 'transparent', color: forecastView === v ? '#00a63e' : 'var(--text-muted)', borderRadius: 6, padding: '0.35rem 0.75rem', fontSize: '0.75rem', fontWeight: 600, cursor: 'pointer', boxShadow: forecastView === v ? '0 1px 3px rgba(0,0,0,0.1)' : 'none', textTransform: 'capitalize' }}>\n                        {v}\n                      </button>\n                    ))}\n                  </div>\n\n                  {/* Band toggles */}\n                  {forecastView === 'chart' && (\n                    <div style={{ display: 'flex', background: toggleBg, padding: 3, borderRadius: 8 }}>\n                      {[{ label: 'P10', color: '#f59e0b', desc: 'Conservative' }, { label: 'P50', color: '#00a63e', desc: 'Median' }, { label: 'P90', color: '#3b82f6', desc: 'Optimistic' }].map(b => (\n                        <button key={b.label} onClick={() => setShowBands(s => ({ ...s, [b.label]: !s[b.label] }))} style={{ border: 'none', background: showBands[b.label] ? toggleActive : 'transparent', color: showBands[b.label] ? b.color : 'var(--text-muted)', boxShadow: showBands[b.label] ? '0 2px 4px rgba(0,0,0,0.05)' : 'none', borderRadius: 6, padding: '0.35rem 0.75rem', fontSize: '0.75rem', fontWeight: 600, cursor: 'pointer', transition: 'all 0.2s', display: 'flex', alignItems: 'center', gap: 4 }} title={b.desc}>\n                          <span style={{ width: 6, height: 6, borderRadius: '50%', background: showBands[b.label] ? b.color : isDark ? '#475569' : '#d1d5db' }} />\n                          {b.label}\n                        </button>\n                      ))}\n                    </div>\n                  )}\n\n                  {/* Export */}\n                  <button\n                    onClick={async () => {\n                      const el = document.getElementById('forecast-chart-container');\n                      if (el) {\n                        const canvas = await html2canvas(el, { background: '#ffffff', scale: 2 } as any);\n                        const a = document.createElement('a');\n                        a.download = `solar-forecast-${new Date().toISOString().slice(0,10)}.png`;\n                        a.href = canvas.toDataURL(); a.click();\n                      }\n                    }}\n                    style={{ background: 'transparent', border: `1px solid ${borderClr}`, color: 'var(--text-secondary)', borderRadius: 8, padding: '0.4rem 0.8rem', fontSize: '0.8rem', fontWeight: 600, cursor: 'pointer', transition: 'all 0.2s', display: 'flex', alignItems: 'center', gap: 6 }}\n                    onMouseOver={e => e.currentTarget.style.background = isDark ? 'rgba(148,163,184,0.07)' : '#f9fafb'}\n                    onMouseOut={e  => e.currentTarget.style.background = 'transparent'}\n                  >\n                    <span></span><span>Save</span>\n                  </button>\n\n                  {/* CSV Export */}\n                  <button\n                    onClick={() => {\n                      if (!forecastData || forecastData.length === 0) return;\n                      // Get all keys from the first row\n                      const keys = Object.keys(forecastData[0]);\n                      // Build CSV header\n                      const header = keys.join(',');\n                      // Build CSV rows\n                      const rows = forecastData.map(row => keys.map(k => JSON.stringify((row as Record<string, any>)[k] ?? '')).join(','));\n                      const csv = [header, ...rows].join('\\n');\n                      // Download\n                      const blob = new Blob([csv], { type: 'text/csv' });\n                      const url = URL.createObjectURL(blob);\n                      const a = document.createElement('a');\n                      a.href = url;\n                      a.download = `solar-forecast-${new Date().toISOString().slice(0,10)}.csv`;\n                      document.body.appendChild(a);\n                      a.click();\n                      document.body.removeChild(a);\n                      URL.revokeObjectURL(url);\n                    }}\n                    style={{ background: 'transparent', border: `1px solid ${borderClr}`, color: '#00a63e', borderRadius: 8, padding: '0.4rem 0.8rem', fontSize: '0.8rem', fontWeight: 600, cursor: 'pointer', transition: 'all 0.2s', display: 'flex', alignItems: 'center', gap: 6 }}\n                    onMouseOver={e => e.currentTarget.style.background = isDark ? 'rgba(148,163,184,0.07)' : '#f9fafb'}\n                    onMouseOut={e  => e.currentTarget.style.background = 'transparent'}\n                  >\n                    <span></span><span>CSV</span>\n                  </button>\n                </div>\n              </div>\n\n              {/* Chart / Table area */}\n              <div id=\"forecast-chart-container\" style={{ padding: '0 1.5rem 1.5rem 0.5rem', background: cardBg, position: 'relative' }}>\n                {forecastView === 'chart' ? (\n                  <div style={{ height: 300, width: '100%', userSelect: 'none' }}>\n                    <ResponsiveContainer>\n                      <AreaChart data={forecastData} margin={{ top: 20, right: 10, left: 0, bottom: 0 }}>\n                        <defs>\n                          <linearGradient id=\"p50Grad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"5%\"  stopColor=\"#00a63e\" stopOpacity={0.2}/>\n                            <stop offset=\"95%\" stopColor=\"#00a63e\" stopOpacity={0}/>\n                          </linearGradient>\n                          <linearGradient id=\"p90Grad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"5%\"  stopColor=\"#3b82f6\" stopOpacity={0.14}/>\n                            <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0}/>\n                          </linearGradient>\n                          <linearGradient id=\"p10Grad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"5%\"  stopColor=\"#f59e0b\" stopOpacity={0.14}/>\n                            <stop offset=\"95%\" stopColor=\"#f59e0b\" stopOpacity={0}/>\n                          </linearGradient>\n                        </defs>\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke={isDark ? 'rgba(148,163,184,0.07)' : '#f3f4f6'} vertical={false} />\n                        <XAxis\n                          dataKey=\"time\" stroke=\"var(--text-muted)\"\n                          tickLine={false} axisLine={false} minTickGap={30} tickMargin={12}\n                          tick={{ fill: 'var(--text-muted)', fontSize: 11, fontFamily: 'Inter, sans-serif' }} textAnchor=\"middle\"\n                          allowDataOverflow type=\"category\"\n                          tickFormatter={(val: string) => {\n                            if (dateRange === '24h') return val;\n                            const p = val.split(' ');\n                            return p.length >= 3 ? `${p[0]} ${p[1]}` : val;\n                          }}\n                        />\n                        <YAxis\n                          stroke=\"var(--text-muted)\"\n                          tickLine={false} axisLine={false} width={40} allowDataOverflow\n                          tick={{ fontSize: 11, fontFamily: 'Inter, sans-serif', fill: 'var(--text-muted)' }}\n                          label={{ value: 'kW', angle: -90, position: 'insideLeft', fill: 'var(--text-muted)', fontSize: 10 }}\n                        />\n                        <Tooltip content={<ForecastTooltip />} cursor={{ stroke: '#00a63e', strokeWidth: 1, strokeDasharray: '4 4' }} animationDuration={300} wrapperStyle={{ pointerEvents: 'none' }} />\n                        <Legend verticalAlign=\"top\" height={36} iconType=\"circle\" iconSize={8} wrapperStyle={{ right: 0, top: 0, fontSize: 12, color: 'var(--text-muted)', fontFamily: 'Inter, sans-serif' }} />\n\n                        {showBands['P90'] && <Area type=\"monotone\" dataKey=\"p90\" stroke=\"#3b82f6\" strokeWidth={1} strokeDasharray=\"3 3\" fill=\"url(#p90Grad)\" activeDot={false} name=\"P90 (Optimistic)\" animationDuration={500} />}\n                        {showBands['P10'] && <Area type=\"monotone\" dataKey=\"p10\" stroke=\"#f59e0b\" strokeWidth={1} strokeDasharray=\"3 3\" fill=\"url(#p10Grad)\" activeDot={false} name=\"P10 (Conservative)\" animationDuration={500} />}\n                        {showBands['P50'] && <Area type=\"monotone\" dataKey=\"p50\" stroke=\"#00a63e\" strokeWidth={2.5} fill=\"url(#p50Grad)\" activeDot={{ r: 4, strokeWidth: 0 }} name=\"P50 (Median)\" animationDuration={800} />}\n                        <Line type=\"monotone\" dataKey=\"physics\" stroke={isDark ? '#475569' : '#d1d5db'} strokeWidth={1.5} strokeDasharray=\"5 3\" dot={false} name=\"Physics Baseline\" activeDot={false} />\n\n                        <ReferenceLine\n                          x={new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                          stroke=\"#ef4444\" strokeDasharray=\"3 3\"\n                          label={<span style={{ color: '#ef4444', fontSize: 10, fontWeight: 700 }}>NOW</span>}\n                        />\n                      </AreaChart>\n                    </ResponsiveContainer>\n                    <div style={{ position: 'absolute', bottom: 10, left: 24, fontSize: '0.62rem', color: 'var(--text-muted)', background: isDark ? 'rgba(30,41,59,0.85)' : 'rgba(255,255,255,0.85)', padding: '2px 6px', borderRadius: 4, pointerEvents: 'none' }}>\n                      Dashed grey = physics baseline (ideal clear-sky output)\n                    </div>\n                  </div>\n                ) : (\n                  <ForecastTable data={forecastData} />\n                )}\n                {forecastGeneratedAt && (\n                  <div style={{ textAlign: 'right', fontSize: '0.7rem', color: 'var(--text-muted)', marginTop: '0.5rem', fontFamily: 'Inter, sans-serif', padding: '0 1rem 1rem' }}>\n                    Forecast generated: {forecastGeneratedAt.toLocaleDateString()} {forecastGeneratedAt.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                  </div>\n                )}\n              </div>\n            </div>\n          ) : (\n            <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)', fontSize: '0.875rem', background: isDark ? 'rgba(0,0,0,0.15)' : 'rgba(0,166,62,0.03)', borderRadius: 12, border: '1px dashed rgba(0,166,62,0.15)' }}>\n              No forecast data available for the selected range.\n            </div>\n          )\n        )}\n\n      </>)}\n    </div>\n  );\n};\n\nexport default SiteDataPanel;\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { apiService } from '../services/api';\r\nimport { useDebouncedCallback } from '../hooks/useDebounce';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport AuditTrail from './AuditTrail';\r\nimport SiteDataPanel from './SiteDataPanel';\r\n\r\ninterface User {\r\n  id: number;\r\n  username: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  is_staff: boolean;\r\n  is_superuser: boolean;\r\n}\r\n\r\ninterface Device {\r\n  id: number;\r\n  device_serial: string;\r\n  hw_id?: string;\r\n  model?: string;\r\n  user?: string;\r\n  provisioned_at: string;\r\n  config_version?: string;\r\n  is_online?: boolean;\r\n  last_heartbeat?: string;\r\n  logs_enabled?: boolean;\r\n  pending_config_update?: boolean;\r\n  config_ack_ver?: number | null;\r\n  config_downloaded_at?: string | null;\r\n  config_acked_at?: string | null;\r\n  created_by_username?: string;\r\n  created_at?: string;\r\n  updated_by_username?: string;\r\n  updated_at?: string;\r\n}\r\n\r\ninterface Preset {\r\n  id: number;\r\n  config_id?: string;\r\n  name: string;\r\n  description?: string;\r\n  slaves_count?: number;\r\n  version?: number;\r\n  updated_at?: string;\r\n  gateway_configuration?: {\r\n    general_settings?: {\r\n      config_id?: string;\r\n      last_updated?: string;\r\n    };\r\n  };\r\n}\r\n\r\ninterface SystemHealthData {\r\n  total_devices: number;\r\n  active_devices: number;\r\n  total_telemetry_points: number;\r\n  uptime_seconds: number;\r\n  database_status: string;\r\n  mqtt_status: string;\r\n  overall_health: string;\r\n}\r\n\r\ninterface TelemetryData {\r\n  deviceId: string;\r\n  timestamp: string;\r\n  data_type: string;\r\n  value: number;\r\n  unit: string;\r\n}\r\n\r\ninterface TelemetrySummary {\r\n  totalPoints: number;\r\n  deviceCount: number;\r\n  latestTimestamp: string | null;\r\n}\r\n\r\ninterface SolarSite {\r\n  id: number;\r\n  device_id: number;\r\n  site_id: string;\r\n  display_name: string;\r\n  latitude: number;\r\n  longitude: number;\r\n  capacity_kw: number;\r\n  tilt_deg: number;\r\n  azimuth_deg: number;\r\n  timezone: string;\r\n  is_active: boolean;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\ninterface SolarSiteForm {\r\n  site_id: string;\r\n  display_name: string;\r\n  latitude: string;\r\n  longitude: string;\r\n  capacity_kw: string;\r\n  tilt_deg: string;\r\n  azimuth_deg: string;\r\n  timezone: string;\r\n  is_active: boolean;\r\n}\r\n\r\nconst Devices: React.FC = () => {\r\n  const { isDark } = useTheme();\r\n  const [searchParams] = useSearchParams();\r\n  const [devices, setDevices] = useState<Device[]>([]);\r\n  const [filteredDevices, setFilteredDevices] = useState<Device[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [editingDevice, setEditingDevice] = useState<Device | null>(null);\r\n  const [creatingDevice, setCreatingDevice] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [userSearchTerm, setUserSearchTerm] = useState('');\r\n  const [filteredUsers, setFilteredUsers] = useState<User[]>([]);\r\n  const [showUserDropdown, setShowUserDropdown] = useState(false);\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [selectedDevices, setSelectedDevices] = useState<Set<number>>(new Set());\r\n  const [bulkDeleteLoading, setBulkDeleteLoading] = useState(false);\r\n  // Pagination state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(25);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [presets, setPresets] = useState<Preset[]>([]);\r\n  const [presetsLoading, setPresetsLoading] = useState(true);\r\n  const [health, setHealth] = useState<SystemHealthData | null>(null);\r\n  const [telemetrySummary, setTelemetrySummary] = useState<TelemetrySummary | null>(null);\r\n  const [telemetryData, setTelemetryData] = useState<TelemetryData[]>([]);\r\n  const [dashboardError, setDashboardError] = useState<string | null>(null);\r\n  const [selectedDevice, setSelectedDevice] = useState<Device | null>(null);\r\n  const [deviceLogs, setDeviceLogs] = useState<any[]>([]);\r\n  const [logsLoading, setLogsLoading] = useState(false);\r\n  const [editForm, setEditForm] = useState({\r\n    device_serial: '',\r\n    user: '',\r\n    config_version: '',\r\n  });\r\n  const [createForm, setCreateForm] = useState({\r\n    device_serial: '',\r\n    user: '',\r\n    config_version: '',\r\n  });\r\n\r\n  // Site management state\r\n  const [siteDetails, setSiteDetails] = useState<SolarSite | null>(null);\r\n  const [siteLoading, setSiteLoading] = useState(false);\r\n  const [editingSite, setEditingSite] = useState(false);\r\n  const [siteForm, setSiteForm] = useState<SolarSiteForm>({\r\n    site_id: '', display_name: '', latitude: '', longitude: '',\r\n    capacity_kw: '', tilt_deg: '18', azimuth_deg: '180',\r\n    timezone: 'Asia/Kolkata', is_active: true,\r\n  });\r\n  const [siteSaving, setSiteSaving] = useState(false);\r\n  const [siteError, setSiteError] = useState<string | null>(null);\r\n  const [devicePreset, setDevicePreset] = useState<Preset | null>(null);\r\n  \r\n  // Modern modal states\r\n  const [rebootModal, setRebootModal] = useState<{ show: boolean; device: Device | null }>({ show: false, device: null });\r\n  const [hardResetModal, setHardResetModal] = useState<{ show: boolean; device: Device | null }>({ show: false, device: null });\r\n  const [deleteModal, setDeleteModal] = useState<{ show: boolean; device: Device | null }>({ show: false, device: null });\r\n  const [successModal, setSuccessModal] = useState<{ show: boolean; message: string }>({ show: false, message: '' });\r\n\r\n  const fetchDevices = useCallback(async (page: number = 1, search: string = '') => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await apiService.getDevices(search || undefined, page, pageSize);\r\n      \r\n      // Handle paginated response\r\n      if (response.results) {\r\n        setDevices(response.results);\r\n        setFilteredDevices(response.results);\r\n        setTotalCount(response.count);\r\n        setTotalPages(response.total_pages);\r\n        setCurrentPage(response.current_page);\r\n      } else {\r\n        // Fallback for non-paginated response\r\n        setDevices(Array.isArray(response) ? response : []);\r\n        setFilteredDevices(Array.isArray(response) ? response : []);\r\n        setTotalCount(Array.isArray(response) ? response.length : 0);\r\n        setTotalPages(1);\r\n        setCurrentPage(1);\r\n      }\r\n      \r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  }, [pageSize]);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const data: User[] = await apiService.getUsers();\r\n      // Filter out staff and superusers, only showing regular customers\r\n      const customers = data.filter(user => !user.is_staff && !user.is_superuser);\r\n      setUsers(customers);\r\n    } catch (err) {\r\n      console.error('Failed to fetch users:', err);\r\n      setError('Failed to load users for device assignment');\r\n    }\r\n  };\r\n\r\n  const fetchPresets = async () => {\r\n    try {\r\n      const data = await apiService.getPresets();\r\n      setPresets(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      console.error('Failed to fetch presets:', err);\r\n    } finally {\r\n      setPresetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      const [healthData, telemetryData] = await Promise.all([\r\n        apiService.getSystemHealth(),\r\n        apiService.getTelemetry(),\r\n      ]);\r\n\r\n      setHealth(healthData || null);\r\n\r\n      const telemetryArray = Array.isArray(telemetryData) ? telemetryData : [];\r\n      setTelemetryData(telemetryArray);\r\n      const latest = telemetryArray.reduce<string | null>((currentLatest, item) => {\r\n        if (!item?.timestamp) return currentLatest;\r\n        const itemDate = new Date(item.timestamp);\r\n        if (Number.isNaN(itemDate.getTime())) return currentLatest;\r\n        if (!currentLatest) return item.timestamp;\r\n        const currentDate = new Date(currentLatest);\r\n        return itemDate > currentDate ? item.timestamp : currentLatest;\r\n      }, null);\r\n\r\n      const deviceCount = new Set(telemetryArray.map((item: TelemetryData) => item.deviceId)).size;\r\n      setTelemetrySummary({\r\n        totalPoints: telemetryArray.length,\r\n        deviceCount,\r\n        latestTimestamp: latest,\r\n      });\r\n    } catch (err) {\r\n      console.error('Failed to fetch dashboard data:', err);\r\n      setDashboardError('Failed to load device dashboards');\r\n    }\r\n  };\r\n\r\n  const fetchDeviceLogs = useCallback(async (deviceId: number) => {\r\n    setLogsLoading(true);\r\n    try {\r\n      const response = await apiService.getDeviceLogs(deviceId, 50, 0);\r\n      setDeviceLogs(response.logs || []);\r\n    } catch (err) {\r\n      console.error('Failed to fetch device logs:', err);\r\n      setDeviceLogs([]);\r\n    } finally {\r\n      setLogsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleViewDevice = useCallback((device: Device) => {\r\n    setSelectedDevice(device);\r\n    setSiteDetails(null);\r\n    setSiteLoading(true);\r\n    setDeviceLogs([]);\r\n    \r\n    // Load preset details if device has config\r\n    if (device.config_version) {\r\n      const preset = presets.find(p => p.config_id === device.config_version);\r\n      setDevicePreset(preset || null);\r\n    } else {\r\n      setDevicePreset(null);\r\n    }\r\n    \r\n    // Fetch site details and logs in parallel\r\n    Promise.all([\r\n      apiService.getDeviceSite(device.id)\r\n        .then(data => setSiteDetails(data))\r\n        .catch((err) => {\r\n          console.error('Failed to fetch site for device', device.id, ':', err);\r\n          setSiteDetails(null);\r\n        }),\r\n      fetchDeviceLogs(device.id)\r\n    ]).finally(() => setSiteLoading(false));\r\n  }, [fetchDeviceLogs, presets]);\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n    fetchPresets();\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const deviceIdParam = searchParams.get('deviceId');\r\n    if (deviceIdParam) {\r\n      const deviceId = parseInt(deviceIdParam, 10);\r\n      if (!isNaN(deviceId)) {\r\n        const foundDevice = devices.find(d => d.id === deviceId);\r\n        if (foundDevice) {\r\n          handleViewDevice(foundDevice);\r\n        }\r\n      }\r\n    }\r\n  }, [searchParams, devices, handleViewDevice]);\r\n  \r\n  useEffect(() => {\r\n    fetchDevices(currentPage, searchTerm);\r\n  }, [currentPage, searchTerm, pageSize, fetchDevices]);\r\n  \r\n  useEffect(() => {\r\n    const handleClickOutside = () => {\r\n      setShowUserDropdown(false);\r\n    };\r\n\r\n    if (showUserDropdown) {\r\n      document.addEventListener('click', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n    };\r\n  }, [showUserDropdown]);\r\n\r\n  useEffect(() => {\r\n    if (userSearchTerm.trim() === '') {\r\n      setFilteredUsers(users);\r\n    } else {\r\n      const searchLower = userSearchTerm.toLowerCase();\r\n      const filtered = users.filter(user => {\r\n        const fullName = `${user.first_name} ${user.last_name}`.toLowerCase();\r\n        return (\r\n          user.username.toLowerCase().includes(searchLower) ||\r\n          user.first_name.toLowerCase().includes(searchLower) ||\r\n          user.last_name.toLowerCase().includes(searchLower) ||\r\n          fullName.includes(searchLower) ||\r\n          user.email.toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n      setFilteredUsers(filtered);\r\n    }\r\n  }, [users, userSearchTerm]);\r\n\r\n  // Debounced search function that runs the actual search after 300ms of inactivity\r\n  const debouncedSearch = useDebouncedCallback(\r\n    (query: string) => {\r\n      // The actual search happens via useEffect that watches currentPage and searchTerm\r\n      // This ensures we don't make too many API calls\r\n    },\r\n    300\r\n  );\r\n\r\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const query = e.target.value;\r\n    setSearchTerm(query);\r\n    setCurrentPage(1);  // Reset to page 1 on new search\r\n    debouncedSearch(query);  // Debounce the search\r\n  };\r\n\r\n  const handleEdit = (device: Device) => {\r\n    setEditingDevice(device);\r\n    setEditForm({\r\n      device_serial: device.device_serial,\r\n      user: device.user || '',\r\n      config_version: device.config_version || '',\r\n    });\r\n    setUserSearchTerm(device.user ? `${users.find(u => u.username === device.user)?.first_name} ${users.find(u => u.username === device.user)?.last_name} (${device.user})` : '');\r\n    setShowUserDropdown(false);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editingDevice) return;\r\n\r\n    try {\r\n      await apiService.updateDevice(editingDevice.id, editForm);\r\n      setEditingDevice(null);\r\n      // Refetch to get the updated device with all fields including audit trail\r\n      await fetchDevices(currentPage, searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update device');\r\n    }\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    try {\r\n      await apiService.createDevice(createForm);\r\n      setCreatingDevice(false);\r\n      setCreateForm({\r\n        device_serial: '',\r\n        user: '',\r\n        config_version: '',\r\n      });\r\n      // Refetch to get the new device with all fields including audit trail\r\n      await fetchDevices(currentPage, searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to create device');\r\n    }\r\n  };\r\n\r\n  const handleDelete = (device: any) => {\r\n    console.log(' handleDelete called with device:', device.device_serial);\r\n    setDeleteModal({ show: true, device });\r\n  };\r\n\r\n  const handleReboot = async (device: any) => {\r\n    console.log(' handleReboot called with device:', device);\r\n    console.log(' Setting rebootModal to:', { show: true, device });\r\n    setRebootModal({ show: true, device });\r\n  };\r\n  \r\n  const confirmReboot = async () => {\r\n    if (!rebootModal.device) return;\r\n    \r\n    try {\r\n      await apiService.rebootDevice(rebootModal.device.id);\r\n      setRebootModal({ show: false, device: null });\r\n      setSuccessModal({ \r\n        show: true, \r\n        message: `Reboot command queued for ${rebootModal.device.device_serial}. Device will reboot on next heartbeat.` \r\n      });\r\n    } catch (err) {\r\n      console.error('Reboot error:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to queue reboot command');\r\n      setRebootModal({ show: false, device: null });\r\n    }\r\n  };\r\n\r\n  const handleHardReset = async (device: any) => {\r\n    setHardResetModal({ show: true, device });\r\n  };\r\n  \r\n  const confirmHardReset = async () => {\r\n    if (!hardResetModal.device) return;\r\n    \r\n    try {\r\n      await apiService.hardResetDevice(hardResetModal.device.id);\r\n      setHardResetModal({ show: false, device: null });\r\n      setSuccessModal({ \r\n        show: true, \r\n        message: `Hard reset command queued for ${hardResetModal.device.device_serial}. Device will reset on next heartbeat.` \r\n      });\r\n    } catch (err) {\r\n      console.error('Hard reset error:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to queue hard reset command');\r\n      setHardResetModal({ show: false, device: null });\r\n    }\r\n  };\r\n\r\n  const handleDeleteDevice = (device: any) => {\r\n    console.log(' handleDeleteDevice called with device:', device.device_serial);\r\n    setDeleteModal({ show: true, device });\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!deleteModal.device) return;\r\n    \r\n    try {\r\n      await apiService.deleteDevice(deleteModal.device.id);\r\n      setDeleteModal({ show: false, device: null });\r\n      setSuccessModal({ \r\n        show: true, \r\n        message: `Device ${deleteModal.device.device_serial} has been permanently deleted.` \r\n      });\r\n      setSelectedDevice(null);\r\n      fetchDevices(); // Refresh device list\r\n    } catch (err) {\r\n      console.error('Delete device error:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to delete device');\r\n      setDeleteModal({ show: false, device: null });\r\n    }\r\n  };\r\n\r\n  const handleToggleLogs = async (device: any, enabled: boolean) => {\r\n    try {\r\n      await apiService.toggleDeviceLogs(device.id, enabled);\r\n      setSelectedDevice({ ...device, logs_enabled: enabled });\r\n      fetchDevices(); // Refresh device list\r\n    } catch (err) {\r\n      console.error('Toggle logs error:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to toggle device logs');\r\n    }\r\n  };\r\n\r\n  const handleSelectDevice = (deviceId: number) => {\r\n    const newSelected = new Set(selectedDevices);\r\n    if (newSelected.has(deviceId)) {\r\n      newSelected.delete(deviceId);\r\n    } else {\r\n      newSelected.add(deviceId);\r\n    }\r\n    setSelectedDevices(newSelected);\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedDevices.size === filteredDevices.length) {\r\n      setSelectedDevices(new Set());\r\n    } else {\r\n      const allIds = new Set(filteredDevices.map(d => d.id));\r\n      setSelectedDevices(allIds);\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedDevices.size === 0) {\r\n      setError('No devices selected for deletion');\r\n      return;\r\n    }\r\n\r\n    const deviceList = Array.from(selectedDevices)\r\n      .map(id => devices.find(d => d.id === id))\r\n      .filter(Boolean);\r\n\r\n    const confirmMessage = `Are you sure you want to delete ${selectedDevices.size} device(s)?\\n\\n${deviceList.map(d => d?.device_serial).join(', ')}`;\r\n\r\n    if (window.confirm(confirmMessage)) {\r\n      try {\r\n        setBulkDeleteLoading(true);\r\n        await apiService.deleteDevicesBulk(Array.from(selectedDevices));\r\n        \r\n        const updatedDevices = devices.filter(d => !selectedDevices.has(d.id));\r\n        setDevices(updatedDevices);\r\n        setFilteredDevices(updatedDevices.filter(d => \r\n          d.device_serial.toLowerCase().includes(searchTerm.toLowerCase())\r\n        ));\r\n        setSelectedDevices(new Set());\r\n        setBulkDeleteLoading(false);\r\n      } catch (err) {\r\n        setBulkDeleteLoading(false);\r\n        console.error('Bulk delete error:', err);\r\n        setError(err instanceof Error ? err.message : 'Failed to delete devices');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingDevice(null);\r\n    setCreatingDevice(false);\r\n    setUserSearchTerm('');\r\n    setShowUserDropdown(false);\r\n  };\r\n\r\n  const handleBackToList = () => {\r\n    setSelectedDevice(null);\r\n    setSiteDetails(null);\r\n    setEditingSite(false);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading devices...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  const getPresetConfigId = (preset: Preset): string => {\r\n    return preset.gateway_configuration?.general_settings?.config_id || preset.config_id || '';\r\n  };\r\n\r\n  if (selectedDevice) {\r\n    const deviceTelemetry = telemetryData.filter((entry) => entry.deviceId === selectedDevice.device_serial);\r\n    const latestTelemetry = deviceTelemetry.reduce<string | null>((currentLatest, item) => {\r\n      if (!item?.timestamp) return currentLatest;\r\n      const itemDate = new Date(item.timestamp);\r\n      if (Number.isNaN(itemDate.getTime())) return currentLatest;\r\n      if (!currentLatest) return item.timestamp;\r\n      const currentDate = new Date(currentLatest);\r\n      return itemDate > currentDate ? item.timestamp : currentLatest;\r\n    }, null);\r\n\r\n    return (\r\n      <div>\r\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '20px' }}>\r\n          <button\r\n            onClick={handleBackToList}\r\n            className=\"btn btn-secondary\"\r\n            style={{ marginRight: '15px' }}\r\n          >\r\n             Back to Devices\r\n          </button>\r\n          <h1 style={{ margin: 0 }}>{selectedDevice.device_serial} Dashboard</h1>\r\n        </div>\r\n\r\n        <div className=\"card\" style={{ marginBottom: '20px' }}>\r\n          <div className=\"card-header\">\r\n            <h2>Device Details</h2>\r\n            <div style={{ display: 'flex', gap: '10px' }}>\r\n              <button onClick={() => handleEdit(selectedDevice)} className=\"btn\">\r\n                Edit Device\r\n              </button>\r\n              <button \r\n                onClick={() => handleReboot(selectedDevice)} \r\n                className=\"btn\"\r\n                style={{ \r\n                  backgroundColor: '#f59e0b', \r\n                  color: 'white',\r\n                  border: 'none'\r\n                }}\r\n                title=\"Queue reboot command for device\"\r\n              >\r\n                 Reboot\r\n              </button>\r\n              <button \r\n                onClick={() => handleHardReset(selectedDevice)} \r\n                className=\"btn\"\r\n                style={{ \r\n                  backgroundColor: '#dc2626', \r\n                  color: 'white',\r\n                  border: 'none'\r\n                }}\r\n                title=\"Queue hard reset command for device (erases config)\"\r\n              >\r\n                 Hard Reset\r\n              </button>\r\n              <button \r\n                onClick={() => handleDeleteDevice(selectedDevice)} \r\n                className=\"btn\"\r\n                style={{ \r\n                  backgroundColor: '#7f1d1d', \r\n                  color: 'white',\r\n                  border: 'none'\r\n                }}\r\n                title=\"Permanently delete device and all its data\"\r\n              >\r\n                 Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div style={{ padding: '20px' }}>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '15px' }}>\r\n              <div>\r\n                <strong>Status:</strong>\r\n                <p style={{ margin: '5px 0' }}>\r\n                  <span style={{\r\n                    display: 'inline-block',\r\n                    padding: '4px 12px',\r\n                    borderRadius: '12px',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '500',\r\n                    backgroundColor: selectedDevice.is_online ? '#dcfce7' : '#fee2e2',\r\n                    color: selectedDevice.is_online ? '#166534' : '#991b1b'\r\n                  }}>\r\n                    {selectedDevice.is_online ? ' Online' : ' Offline'}\r\n                  </span>\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <strong>Last Heartbeat:</strong>\r\n                <p style={{ margin: '5px 0' }}>\r\n                  {selectedDevice.last_heartbeat\r\n                    ? new Date(selectedDevice.last_heartbeat).toLocaleString()\r\n                    : 'Never'}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <strong>MAC / HW ID:</strong>\r\n                <p style={{ margin: '5px 0', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.9rem' }}>{selectedDevice.hw_id || ''}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Model:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedDevice.model || ''}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Assigned User:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedDevice.user || '-'}</p>\r\n              </div>\r\n              <div style={{ gridColumn: '1 / -1', padding: '15px', backgroundColor: 'transparent', borderRadius: '8px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-sync-card\">\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>\r\n                  <div>\r\n                    <strong style={{ fontSize: '0.95rem', color: 'inherit' }} className=\"config-heading\">Configuration</strong>\r\n                    {devicePreset && (\r\n                      <div style={{ fontSize: '0.875rem', color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginTop: '2px' }} className=\"config-label\">\r\n                        {devicePreset.name || selectedDevice.config_version}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  {!selectedDevice.config_version ? (\r\n                    <span style={{ color: isDark ? '#a0a0a0' : 'rgba(0, 0, 0, 0.5)', fontSize: '0.875rem' }} className=\"config-no-preset\">No preset assigned</span>\r\n                  ) : selectedDevice.pending_config_update ? (\r\n                    <span style={{\r\n                      display: 'inline-flex', alignItems: 'center', gap: '5px',\r\n                      padding: '4px 12px', borderRadius: '12px', fontSize: '0.8rem', fontWeight: '500',\r\n                      backgroundColor: '#fef9c3', color: '#854d0e'\r\n                    }}> Pending update</span>\r\n                  ) : (\r\n                    <span style={{\r\n                      display: 'inline-flex', alignItems: 'center', gap: '5px',\r\n                      padding: '4px 12px', borderRadius: '12px', fontSize: '0.8rem', fontWeight: '500',\r\n                      backgroundColor: '#dcfce7', color: '#166534'\r\n                    }}> Synced</span>\r\n                  )}\r\n                </div>\r\n                {selectedDevice.config_version && (\r\n                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '8px', fontSize: '0.8rem' }}>\r\n                    <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-info-box\">\r\n                      <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Preset ID</div>\r\n                      <div style={{ fontWeight: '500', fontFamily: 'monospace', color: 'inherit' }}>{selectedDevice.config_version}</div>\r\n                    </div>\r\n                    {devicePreset?.slaves_count != null && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Slaves</div>\r\n                        <div style={{ fontWeight: '500', color: 'inherit' }}>{devicePreset.slaves_count} device{devicePreset.slaves_count !== 1 ? 's' : ''}</div>\r\n                      </div>\r\n                    )}\r\n                    {selectedDevice.config_ack_ver != null && devicePreset?.version != null && (\r\n                      <div style={{ \r\n                        padding: '8px', \r\n                        backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', \r\n                        borderRadius: '6px',\r\n                        gridColumn: '1 / -1',\r\n                        border: selectedDevice.config_ack_ver === devicePreset.version ? '2px solid #dcfce7' : '2px solid #fef9c3'\r\n                      }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '4px' }} className=\"config-label\">Version Status</div>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                          <div>\r\n                            <span style={{ fontSize: '0.75rem', color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)' }} className=\"config-label\">Device: </span>\r\n                            <span style={{ fontWeight: '500', fontFamily: 'monospace', color: 'inherit' }}>v{selectedDevice.config_ack_ver}</span>\r\n                            <span style={{ margin: '0 8px', color: isDark ? '#808080' : 'rgba(0, 0, 0, 0.4)' }} className=\"config-arrow\"></span>\r\n                            <span style={{ fontSize: '0.75rem', color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)' }} className=\"config-label\">Latest: </span>\r\n                            <span style={{ fontWeight: '500', fontFamily: 'monospace', color: 'inherit' }}>v{devicePreset.version}</span>\r\n                          </div>\r\n                          {selectedDevice.config_ack_ver === devicePreset.version ? (\r\n                            <span style={{ color: '#166534', fontSize: '0.75rem', fontWeight: '500' }}> Up to date</span>\r\n                          ) : (\r\n                            <span style={{ color: '#854d0e', fontSize: '0.75rem', fontWeight: '500' }}> Update available</span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {selectedDevice.config_ack_ver != null && devicePreset?.version == null && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Device Version</div>\r\n                        <div style={{ fontWeight: '500', fontFamily: 'monospace', color: 'inherit' }}>v{selectedDevice.config_ack_ver}</div>\r\n                      </div>\r\n                    )}\r\n                    {devicePreset?.gateway_configuration?.general_settings?.last_updated && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Last Modified</div>\r\n                        <div style={{ fontWeight: '500', fontSize: '0.75rem', color: 'inherit' }}>\r\n                          {new Date(devicePreset.gateway_configuration.general_settings.last_updated).toLocaleDateString()}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {selectedDevice.config_acked_at && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)', gridColumn: '1 / -1' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Last Synced</div>\r\n                        <div style={{ fontWeight: '500', fontSize: '0.75rem', color: 'inherit' }}>\r\n                          {new Date(selectedDevice.config_acked_at).toLocaleString()}\r\n                          {(() => {\r\n                            const ackTime = new Date(selectedDevice.config_acked_at);\r\n                            const now = new Date();\r\n                            const diffMs = now.getTime() - ackTime.getTime();\r\n                            const diffMins = Math.floor(diffMs / 60000);\r\n                            const diffHours = Math.floor(diffMins / 60);\r\n                            const diffDays = Math.floor(diffHours / 24);\r\n                            if (diffMins < 1) return '  just now';\r\n                            if (diffMins < 60) return `  ${diffMins}m ago`;\r\n                            if (diffHours < 24) return `  ${diffHours}h ago`;\r\n                            return `  ${diffDays}d ago`;\r\n                          })()}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {selectedDevice.config_downloaded_at && selectedDevice.config_acked_at && (\r\n                      <div style={{ padding: '8px', backgroundColor: isDark ? '#242424' : 'rgba(0, 0, 0, 0.05)', borderRadius: '6px', border: isDark ? '1px solid #404040' : '1px solid rgba(0, 0, 0, 0.1)', gridColumn: '1 / -1' }} className=\"config-info-box\">\r\n                        <div style={{ color: isDark ? '#b0b0b0' : 'rgba(0, 0, 0, 0.6)', marginBottom: '2px' }} className=\"config-label\">Apply Duration</div>\r\n                        <div style={{ fontWeight: '500', color: 'inherit' }}>\r\n                          {Math.round((new Date(selectedDevice.config_acked_at).getTime() - new Date(selectedDevice.config_downloaded_at).getTime()) / 1000)} seconds\r\n                          <span style={{ color: isDark ? '#a0a0a0' : 'rgba(0, 0, 0, 0.5)', marginLeft: '8px', fontSize: '0.75rem' }} className=\"config-label\">\r\n                            (download  acknowledge)\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <strong>Provisioned At:</strong>\r\n                <p style={{ margin: '5px 0' }}>\r\n                  {selectedDevice.provisioned_at\r\n                    ? new Date(selectedDevice.provisioned_at).toLocaleDateString()\r\n                    : 'N/A'}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <strong>Created By:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedDevice.created_by_username || '-'}</p>\r\n              </div>\r\n              <div style={{ gridColumn: '1 / -1' }}>\r\n                <label style={{ display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer' }}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedDevice.logs_enabled || false}\r\n                    onChange={(e) => handleToggleLogs(selectedDevice, e.target.checked)}\r\n                    style={{ background: isDark ? '#1a1a1a' : 'white', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                  />\r\n                  <strong>Enable Device Logs</strong>\r\n                  <span style={{ fontSize: '0.875rem', color: isDark ? '#b0b0b0' : '#9ca3af' }}>\r\n                    (Device will send logs when enabled)\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2\" style={{ gap: 'var(--space-6, 24px)', marginTop: '32px' }}>\r\n          <div className=\"card\">\r\n            <h2>System Health</h2>\r\n            {dashboardError && <p className=\"error\">{dashboardError}</p>}\r\n            {!dashboardError && !health && <p>Loading system health...</p>}\r\n            {health && (\r\n              <div>\r\n                <p><strong>Overall:</strong> {health.overall_health}</p>\r\n                <p><strong>Devices:</strong> {health.active_devices}/{health.total_devices} active</p>\r\n                <p><strong>Telemetry Points:</strong> {health.total_telemetry_points.toLocaleString()}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <h2>Telemetry Snapshot</h2>\r\n            {dashboardError && <p className=\"error\">{dashboardError}</p>}\r\n            {!dashboardError && !telemetrySummary && <p>Loading telemetry...</p>}\r\n            {telemetrySummary && (\r\n              <div>\r\n                <p><strong>Total Points:</strong> {deviceTelemetry.length.toLocaleString()}</p>\r\n                <p><strong>Data Types:</strong> {new Set(deviceTelemetry.map((entry) => entry.data_type)).size}</p>\r\n                <p><strong>Latest:</strong> {latestTelemetry ? new Date(latestTelemetry).toLocaleString() : 'N/A'}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  Site Configuration  */}\r\n        <div className=\"card\" style={{ marginTop: '48px' }}>\r\n          <div className=\"card-header\">\r\n            <h2>Site Configuration</h2>\r\n            {!siteLoading && (\r\n              <button className=\"btn\" onClick={() => {\r\n                if (siteDetails) {\r\n                  setSiteForm({\r\n                    site_id: siteDetails.site_id,\r\n                    display_name: siteDetails.display_name,\r\n                    latitude: String(siteDetails.latitude),\r\n                    longitude: String(siteDetails.longitude),\r\n                    capacity_kw: String(siteDetails.capacity_kw),\r\n                    tilt_deg: String(siteDetails.tilt_deg),\r\n                    azimuth_deg: String(siteDetails.azimuth_deg),\r\n                    timezone: siteDetails.timezone,\r\n                    is_active: siteDetails.is_active,\r\n                  });\r\n                } else {\r\n                  setSiteForm({ site_id: '', display_name: '', latitude: '', longitude: '', capacity_kw: '', tilt_deg: '18', azimuth_deg: '180', timezone: 'Asia/Kolkata', is_active: true });\r\n                }\r\n                setSiteError(null);\r\n                setEditingSite(true);\r\n              }}>\r\n                {siteDetails ? 'Edit Site' : 'Add Site'}\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div style={{ padding: '20px' }}>\r\n            {siteLoading ? (\r\n              <p style={{ color: 'var(--text-muted)' }}>Loading site details</p>\r\n            ) : !siteDetails ? (\r\n              <p style={{ color: 'var(--text-muted)', fontSize: '0.9rem' }}>No site configured for this device yet.</p>\r\n            ) : (\r\n              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '15px' }}>\r\n                <div><strong>Site ID:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.88rem', color: '#00a63e' }}>{siteDetails.site_id}</p></div>\r\n                <div><strong>Display Name:</strong><p style={{ margin: '4px 0' }}>{siteDetails.display_name || ''}</p></div>\r\n                <div><strong>Status:</strong><p style={{ margin: '4px 0' }}><span className={siteDetails.is_active ? 'status-badge status-badge-success' : 'status-badge status-badge-danger'}>{siteDetails.is_active ? 'Active' : 'Inactive'}</span></p></div>\r\n                <div><strong>Latitude:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.88rem' }}>{siteDetails.latitude}</p></div>\r\n                <div><strong>Longitude:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.88rem' }}>{siteDetails.longitude}</p></div>\r\n                <div><strong>Timezone:</strong><p style={{ margin: '4px 0' }}>{siteDetails.timezone}</p></div>\r\n                <div><strong>Capacity:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace' }}>{siteDetails.capacity_kw} kW</p></div>\r\n                <div><strong>Tilt:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace' }}>{siteDetails.tilt_deg}</p></div>\r\n                <div><strong>Azimuth:</strong><p style={{ margin: '4px 0', fontFamily: 'JetBrains Mono, monospace' }}>{siteDetails.azimuth_deg}</p></div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  Live Site Intelligence (DynamoDB)  */}\r\n        {siteDetails && (\r\n          <div style={{ marginTop: '48px' }}>\r\n            <SiteDataPanel siteId={siteDetails.site_id} autoRefresh />\r\n          </div>\r\n        )}\r\n\r\n        {/*  Device Logs  */}\r\n        <div className=\"card\" style={{ marginTop: '48px', marginBottom: '20px' }}>\r\n          <div className=\"card-header\">\r\n            <h2>Device Logs</h2>\r\n            <button onClick={() => fetchDeviceLogs(selectedDevice.id)} className=\"btn\" disabled={logsLoading}>\r\n              {logsLoading ? 'Loading...' : ' Refresh'}\r\n            </button>\r\n          </div>\r\n          <div style={{ padding: '20px' }}>\r\n            {!selectedDevice.logs_enabled && (\r\n              <p style={{ color: 'var(--text-muted, #9ca3af)', fontStyle: 'italic' }}>\r\n                Logging is disabled for this device. Enable it in Device Details to receive logs.\r\n              </p>\r\n            )}\r\n            {deviceLogs.length === 0 && selectedDevice.logs_enabled && !logsLoading && (\r\n              <p style={{ color: 'var(--text-muted, #9ca3af)' }}>\r\n                No logs available yet. Logs will appear when device sends them.\r\n              </p>\r\n            )}\r\n            {logsLoading && (\r\n              <p style={{ color: 'var(--text-muted, #9ca3af)' }}>\r\n                Loading logs...\r\n              </p>\r\n            )}\r\n            {deviceLogs.length > 0 && (\r\n              <div style={{ \r\n                maxHeight: '400px', \r\n                overflowY: 'auto', \r\n                fontFamily: 'JetBrains Mono, monospace', \r\n                fontSize: '0.85rem',\r\n                backgroundColor: '#1e1e1e',\r\n                padding: '10px',\r\n                borderRadius: '4px'\r\n              }}>\r\n                {deviceLogs.map((log) => (\r\n                  <div key={log.id} style={{ \r\n                    marginBottom: '8px', \r\n                    paddingBottom: '8px', \r\n                    borderBottom: '1px solid #333',\r\n                    color: log.level === 'ERROR' ? '#ff6b6b' : \r\n                           log.level === 'WARNING' ? '#ffa500' : \r\n                           log.level === 'INFO' ? '#4dabf7' : '#ced4da'\r\n                  }}>\r\n                    <span style={{ color: '#888' }}>[{new Date(log.timestamp).toLocaleString()}]</span>\r\n                    <span style={{ fontWeight: 'bold', marginLeft: '8px' }}>[{log.level}]</span>\r\n                    <span style={{ marginLeft: '8px' }}>{log.message}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/*  Site edit modal  */}\r\n        {editingSite && (\r\n          <div className=\"modal\">\r\n            <div className=\"modal-content\">\r\n              <h3>{siteDetails ? `Edit Site: ${siteDetails.site_id}` : 'Add Site Configuration'}</h3>\r\n              <form onSubmit={async (e) => {\r\n                e.preventDefault();\r\n                setSiteSaving(true);\r\n                setSiteError(null);\r\n                try {\r\n                  const payload = {\r\n                    site_id: siteForm.site_id.trim(),\r\n                    display_name: siteForm.display_name.trim(),\r\n                    latitude: parseFloat(siteForm.latitude),\r\n                    longitude: parseFloat(siteForm.longitude),\r\n                    capacity_kw: parseFloat(siteForm.capacity_kw),\r\n                    tilt_deg: parseFloat(siteForm.tilt_deg),\r\n                    azimuth_deg: parseFloat(siteForm.azimuth_deg),\r\n                    timezone: siteForm.timezone.trim(),\r\n                    is_active: siteForm.is_active,\r\n                  };\r\n\r\n                  let updated;\r\n                  if (siteDetails) {\r\n                    updated = await apiService.updateDeviceSite(selectedDevice.id, payload);\r\n                  } else {\r\n                    updated = await apiService.createDeviceSite(selectedDevice.id, payload);\r\n                  }\r\n\r\n                  if (!updated || !updated.site_id) {\r\n                    throw new Error('Invalid response from server  site data missing');\r\n                  }\r\n\r\n                  setSiteDetails(updated);\r\n                  setEditingSite(false);\r\n                  setSiteSaving(false);\r\n\r\n                  // Re-fetch after creation to get server-assigned fields\r\n                  if (!siteDetails) {\r\n                    setTimeout(() => {\r\n                      apiService.getDeviceSite(selectedDevice.id)\r\n                        .then(data => { if (data) setSiteDetails(data); })\r\n                        .catch(err => console.error('Failed to re-fetch site:', err));\r\n                    }, 500);\r\n                  }\r\n                } catch (err: any) {\r\n                  setSiteError(err.message || 'Failed to save site');\r\n                  setSiteSaving(false);\r\n                }\r\n              }}>\r\n                <div className=\"modal-body\">\r\n                  {siteError && (\r\n                    <p style={{ color: isDark ? '#fca5a5' : '#ef4444', fontSize: '0.875rem', marginBottom: '1rem' }}>{siteError}</p>\r\n                  )}\r\n\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Identification</h4>\r\n                    <div className=\"form-grid form-grid-2\">\r\n                      <div className=\"form-group\">\r\n                        <label>Site ID *</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          required\r\n                          value={siteForm.site_id}\r\n                          disabled={!!siteDetails}\r\n                          onChange={e => setSiteForm({ ...siteForm, site_id: e.target.value })}\r\n                          placeholder=\"e.g. site_mumbai_01\"\r\n                          autoComplete=\"off\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                        {!!siteDetails && <small className=\"form-hint\">Site ID cannot be changed after creation.</small>}\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Display Name</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={siteForm.display_name}\r\n                          onChange={e => setSiteForm({ ...siteForm, display_name: e.target.value })}\r\n                          placeholder=\"e.g. Mumbai Rooftop\"\r\n                          autoComplete=\"off\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Location</h4>\r\n                    <div className=\"form-grid form-grid-3\">\r\n                      <div className=\"form-group\">\r\n                        <label>Latitude *</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          required\r\n                          step=\"any\"\r\n                          value={siteForm.latitude}\r\n                          onChange={e => setSiteForm({ ...siteForm, latitude: e.target.value })}\r\n                          placeholder=\"19.0760\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Longitude *</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          required\r\n                          step=\"any\"\r\n                          value={siteForm.longitude}\r\n                          onChange={e => setSiteForm({ ...siteForm, longitude: e.target.value })}\r\n                          placeholder=\"72.8777\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Timezone</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={siteForm.timezone}\r\n                          onChange={e => setSiteForm({ ...siteForm, timezone: e.target.value })}\r\n                          placeholder=\"Asia/Kolkata\"\r\n                          autoComplete=\"off\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Panel Configuration</h4>\r\n                    <div className=\"form-grid form-grid-3\">\r\n                      <div className=\"form-group\">\r\n                        <label>Capacity (kW) *</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          required\r\n                          step=\"any\"\r\n                          value={siteForm.capacity_kw}\r\n                          onChange={e => setSiteForm({ ...siteForm, capacity_kw: e.target.value })}\r\n                          placeholder=\"5.0\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Tilt ()</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          step=\"any\"\r\n                          value={siteForm.tilt_deg}\r\n                          onChange={e => setSiteForm({ ...siteForm, tilt_deg: e.target.value })}\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Azimuth ()</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          step=\"any\"\r\n                          value={siteForm.azimuth_deg}\r\n                          onChange={e => setSiteForm({ ...siteForm, azimuth_deg: e.target.value })}\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: 'pointer' }}>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          id=\"dev-site-active\"\r\n                          checked={siteForm.is_active}\r\n                          onChange={e => setSiteForm({ ...siteForm, is_active: e.target.checked })}\r\n                          style={{ width: '16px', height: '16px', background: isDark ? '#1a1a1a' : 'white', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                        Active\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"form-actions\" style={{ padding: '0 24px 24px 24px' }}>\r\n                  <button type=\"submit\" className=\"btn\" disabled={siteSaving}>\r\n                    {siteSaving ? 'Saving' : siteDetails ? 'Save Changes' : 'Add Site'}\r\n                  </button>\r\n                  <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setEditingSite(false)} disabled={siteSaving}>\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {editingDevice && (\r\n          <div className=\"modal\">\r\n            <div className=\"modal-content\">\r\n              <h3>{editingDevice ? `Edit Device: ${editingDevice.device_serial}` : 'Register New Device'}</h3>\r\n              <form onSubmit={(e) => { e.preventDefault(); editingDevice ? handleSave() : handleCreate(); }}>\r\n                <div className=\"modal-body\">\r\n                  \r\n                  {/* Device Identity */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Device Identity</h4>\r\n                    <div className=\"form-grid\">\r\n                      <div className=\"form-group\">\r\n                        <label>Device Serial Number</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingDevice ? editForm.device_serial : createForm.device_serial}\r\n                          onChange={(e) => editingDevice ? setEditForm({...editForm, device_serial: e.target.value}) : setCreateForm({...createForm, device_serial: e.target.value})}\r\n                          required\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"SN-12345678\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Ownership */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Ownership & Assignment</h4>\r\n                    <div className=\"form-grid\">\r\n                      <div className=\"form-group\">\r\n                        <label>Assigned User</label>\r\n                        <div style={{ position: 'relative' }} onClick={(e) => e.stopPropagation()}>\r\n                          <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search by name, username, or email...\"\r\n                            value={userSearchTerm}\r\n                            onChange={(e) => {\r\n                              setUserSearchTerm(e.target.value);\r\n                              setShowUserDropdown(true);\r\n                            }}\r\n                            onFocus={() => setShowUserDropdown(true)}\r\n                            autoComplete=\"off\"\r\n                            className=\"full-width\"\r\n                            style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                          />\r\n                          {showUserDropdown && (\r\n                            <div style={{\r\n                              position: 'absolute',\r\n                              top: '100%',\r\n                              left: '0',\r\n                              right: '0',\r\n                              background: 'var(--bg-secondary, #1e293b)',\r\n                              border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                              borderRadius: '6px',\r\n                              marginTop: '4px',\r\n                              maxHeight: '200px',\r\n                              overflowY: 'auto',\r\n                              zIndex: 10,\r\n                              boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)'\r\n                            }}>\r\n                              {filteredUsers.length > 0 ? (\r\n                                filteredUsers.map((user) => (\r\n                                  <div\r\n                                    key={user.id}\r\n                                    onClick={() => {\r\n                                      if (editingDevice) {\r\n                                        setEditForm({...editForm, user: user.username});\r\n                                      } else {\r\n                                        setCreateForm({...createForm, user: user.username});\r\n                                      }\r\n                                      setUserSearchTerm(`${user.first_name} ${user.last_name} (${user.username})`);\r\n                                      setShowUserDropdown(false);\r\n                                    }}\r\n                                    style={{\r\n                                      padding: '12px 16px',\r\n                                      cursor: 'pointer',\r\n                                      borderBottom: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n                                      background: (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent',\r\n                                      color: 'var(--text-primary, #f8fafc)',\r\n                                      transition: 'all 0.15s ease',\r\n                                      fontSize: '0.875rem'\r\n                                    }}\r\n                                    onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.06)'}\r\n                                    onMouseLeave={(e) => e.currentTarget.style.background = (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent'}\r\n                                  >\r\n                                    {user.first_name} {user.last_name} ({user.username}) <br/>\r\n                                    <span style={{ fontSize: '0.75rem', color: 'var(--text-secondary, #94a3b8)' }}>{user.email}</span>\r\n                                  </div>\r\n                                ))\r\n                              ) : (\r\n                                <div style={{ padding: '12px 16px', color: 'var(--text-muted, #64748b)', fontSize: '0.875rem' }}>\r\n                                  {userSearchTerm.trim() === '' ? 'Start typing to search users...' : 'No users found'}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Configuration */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Configuration</h4>\r\n                    <div className=\"form-grid form-grid-2\">\r\n                      <div className=\"form-group\">\r\n                        <label>Preset Template</label>\r\n                        <select\r\n                          value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                          onChange={(e) => editingDevice ? setEditForm({ ...editForm, config_version: e.target.value }) : setCreateForm({ ...createForm, config_version: e.target.value })}\r\n                          className=\"full-width\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        >\r\n                          <option value=\"\">-- Manual Configuration --</option>\r\n                          {presetsLoading && <option value=\"\" disabled>Loading presets...</option>}\r\n                          {!presetsLoading && presets.map((preset) => (\r\n                            <option key={preset.id} value={getPresetConfigId(preset)}>\r\n                              {preset.name} ({getPresetConfigId(preset) || 'no ID'})\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                        <small className=\"form-hint\">Selecting a preset sets the Config Version ID below.</small>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Config Version ID</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                          onChange={(e) => editingDevice ? setEditForm({...editForm, config_version: e.target.value}) : setCreateForm({...createForm, config_version: e.target.value})}\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"Manual Config ID\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                {editingDevice && (\r\n                  <div style={{ padding: '0 24px' }}>\r\n                     <AuditTrail\r\n                       createdBy={editingDevice.created_by_username}\r\n                       createdAt={editingDevice.created_at}\r\n                       updatedBy={editingDevice.updated_by_username}\r\n                       updatedAt={editingDevice.updated_at}\r\n                     />\r\n                  </div>\r\n                )}\r\n                <div className=\"form-actions\" style={{ padding: '0 24px 24px 24px' }}>\r\n                  <button type=\"submit\" className=\"btn\">{editingDevice ? 'Save Changes' : 'Create Device'}</button>\r\n                  <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modern Reboot Confirmation Modal */}\r\n        {rebootModal.show && rebootModal.device && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.6)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            backdropFilter: 'blur(4px)'\r\n          }}>\r\n            <div style={{\r\n              background: isDark ? '#2d2d2d' : 'white',\r\n              borderRadius: '16px',\r\n              padding: '2rem',\r\n              maxWidth: '500px',\r\n              width: '90%',\r\n              boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n              border: isDark ? '1px solid #404040' : 'none',\r\n              animation: 'slideIn 0.2s ease-out'\r\n            }}>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n                <div style={{\r\n                  width: '48px',\r\n                  height: '48px',\r\n                  borderRadius: '12px',\r\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  fontSize: '1.5rem'\r\n                }}>\r\n                  \r\n                </div>\r\n                <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: isDark ? '#e0e0e0' : '#2c3e50' }}>\r\n                  Confirm Reboot\r\n                </h3>\r\n              </div>\r\n              \r\n              <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n                <p style={{ marginBottom: '1rem' }}>\r\n                  Are you sure you want to reboot device <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{rebootModal.device.device_serial}</strong>?\r\n                </p>\r\n                <div style={{\r\n                  background: isDark ? 'rgba(102,126,234,0.1)' : '#e7f3ff',\r\n                  border: isDark ? '1px solid rgba(102,126,234,0.3)' : '1px solid #b3d9ff',\r\n                  borderRadius: '8px',\r\n                  padding: '0.75rem 1rem',\r\n                  fontSize: '0.9rem',\r\n                  color: isDark ? '#88a6ff' : '#004085'\r\n                }}>\r\n                  <strong> Note:</strong> The device will restart on its next heartbeat. Any unsaved data may be lost.\r\n                </div>\r\n              </div>\r\n              \r\n              <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n                <button\r\n                  onClick={() => setRebootModal({ show: false, device: null })}\r\n                  style={{\r\n                    background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                    color: isDark ? '#e0e0e0' : '#495057',\r\n                    border: 'none',\r\n                    padding: '0.75rem 1.5rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n                  onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={confirmReboot}\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    padding: '0.75rem 1.5rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    boxShadow: '0 4px 12px rgba(102, 126, 234, 0.3)',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                  onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n                >\r\n                  Confirm Reboot\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modern Hard Reset Confirmation Modal */}\r\n        {hardResetModal.show && hardResetModal.device && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.6)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            backdropFilter: 'blur(4px)'\r\n          }}>\r\n            <div style={{\r\n              background: isDark ? '#2d2d2d' : 'white',\r\n              borderRadius: '16px',\r\n              padding: '2rem',\r\n              maxWidth: '500px',\r\n              width: '90%',\r\n              boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n              border: isDark ? '2px solid #dc3545' : '2px solid #dc3545',\r\n              animation: 'slideIn 0.2s ease-out'\r\n            }}>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n                <div style={{\r\n                  width: '48px',\r\n                  height: '48px',\r\n                  borderRadius: '12px',\r\n                  background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  fontSize: '1.5rem',\r\n                  animation: 'pulse 2s infinite'\r\n                }}>\r\n                  \r\n                </div>\r\n                <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: '#dc3545' }}>\r\n                  Hard Reset Warning\r\n                </h3>\r\n              </div>\r\n              \r\n              <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n                <div style={{\r\n                  background: isDark ? 'rgba(220, 53, 69, 0.1)' : '#f8d7da',\r\n                  border: isDark ? '1px solid rgba(220, 53, 69, 0.3)' : '1px solid #f5c6cb',\r\n                  borderRadius: '8px',\r\n                  padding: '1rem',\r\n                  marginBottom: '1rem',\r\n                  color: isDark ? '#ff9999' : '#721c24'\r\n                }}>\r\n                  <strong style={{ fontSize: '1.05rem' }}> CRITICAL WARNING</strong>\r\n                  <p style={{ margin: '0.5rem 0 0 0', fontSize: '0.9rem' }}>\r\n                    This action will <strong>erase all device configuration</strong> and restart the device to factory settings.\r\n                  </p>\r\n                </div>\r\n                \r\n                <p style={{ marginBottom: '0.75rem' }}>\r\n                  Device to reset: <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{hardResetModal.device.device_serial}</strong>\r\n                </p>\r\n                \r\n                <ul style={{ margin: '0.5rem 0', paddingLeft: '1.5rem', fontSize: '0.9rem' }}>\r\n                  <li>All configuration will be lost</li>\r\n                  <li>Device will return to factory defaults</li>\r\n                  <li>Re-provisioning will be required</li>\r\n                </ul>\r\n              </div>\r\n              \r\n              <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n                <button\r\n                  onClick={() => setHardResetModal({ show: false, device: null })}\r\n                  style={{\r\n                    background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                    color: isDark ? '#e0e0e0' : '#495057',\r\n                    border: 'none',\r\n                    padding: '0.75rem 1.5rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n                  onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={confirmHardReset}\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    padding: '0.75rem 1.5rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    boxShadow: '0 4px 12px rgba(220, 53, 69, 0.3)',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                  onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n                >\r\n                  Yes, Hard Reset\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modern Delete Confirmation Modal */}\r\n        {deleteModal.show && deleteModal.device && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.6)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            backdropFilter: 'blur(4px)'\r\n          }}>\r\n            <div style={{\r\n              background: isDark ? '#2d2d2d' : 'white',\r\n              borderRadius: '16px',\r\n              padding: '2rem',\r\n              maxWidth: '500px',\r\n              width: '90%',\r\n              boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n              border: isDark ? '2px solid #7f1d1d' : '2px solid #7f1d1d',\r\n              animation: 'slideIn 0.2s ease-out'\r\n            }}>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n                <div style={{\r\n                  width: '48px',\r\n                  height: '48px',\r\n                  borderRadius: '12px',\r\n                  background: 'linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  fontSize: '1.5rem',\r\n                  animation: 'pulse 2s infinite'\r\n                }}>\r\n                  \r\n                </div>\r\n                <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: '#7f1d1d' }}>\r\n                  Delete Device Permanently\r\n                </h3>\r\n              </div>\r\n              \r\n              <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n                <div style={{\r\n                  background: isDark ? 'rgba(127, 29, 29, 0.1)' : '#fee2e2',\r\n                  border: isDark ? '1px solid rgba(127, 29, 29, 0.3)' : '1px solid #fecaca',\r\n                  borderRadius: '8px',\r\n                  padding: '1rem',\r\n                  marginBottom: '1rem',\r\n                  color: isDark ? '#fca5a5' : '#991b1b'\r\n                }}>\r\n                  <strong style={{ fontSize: '1.05rem' }}> PERMANENT DELETION</strong>\r\n                  <p style={{ margin: '0.5rem 0 0 0', fontSize: '0.9rem' }}>\r\n                    This action <strong>cannot be undone</strong>. All device data will be permanently deleted.\r\n                  </p>\r\n                </div>\r\n                \r\n                <p style={{ marginBottom: '0.75rem' }}>\r\n                  Device to delete: <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{deleteModal.device.device_serial}</strong>\r\n                </p>\r\n                \r\n                <ul style={{ margin: '0.5rem 0', paddingLeft: '1.5rem', fontSize: '0.9rem' }}>\r\n                  <li>All telemetry data will be lost</li>\r\n                  <li>All command history will be deleted</li>\r\n                  <li>Device must be re-provisioned to use again</li>\r\n                </ul>\r\n              </div>\r\n              \r\n              <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n                <button\r\n                  onClick={() => setDeleteModal({ show: false, device: null })}\r\n                  style={{\r\n                    background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                    color: isDark ? '#e0e0e0' : '#495057',\r\n                    border: 'none',\r\n                    padding: '0.75rem 1.5rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n                  onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={confirmDelete}\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    padding: '0.75rem 1.5rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    boxShadow: '0 4px 12px rgba(127, 29, 29, 0.3)',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                  onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n                >\r\n                  Yes, Delete Permanently\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Modern Success Notification Modal */}\r\n        {successModal.show && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0,0,0,0.4)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000,\r\n            backdropFilter: 'blur(2px)'\r\n          }}>\r\n            <div style={{\r\n              background: isDark ? '#2d2d2d' : 'white',\r\n              borderRadius: '16px',\r\n              padding: '2rem',\r\n              maxWidth: '450px',\r\n              width: '90%',\r\n              boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n              border: isDark ? '1px solid #28a745' : '2px solid #28a745',\r\n              animation: 'slideIn 0.2s ease-out'\r\n            }}>\r\n              <div style={{ textAlign: 'center' }}>\r\n                <div style={{\r\n                  width: '64px',\r\n                  height: '64px',\r\n                  borderRadius: '50%',\r\n                  background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  fontSize: '2rem',\r\n                  margin: '0 auto 1rem',\r\n                  animation: 'scaleIn 0.3s ease-out'\r\n                }}>\r\n                  \r\n                </div>\r\n                \r\n                <h3 style={{ fontSize: '1.5rem', fontWeight: '600', marginBottom: '1rem', color: isDark ? '#e0e0e0' : '#2c3e50' }}>\r\n                  Command Queued\r\n                </h3>\r\n                \r\n                <p style={{ color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6', marginBottom: '1.5rem' }}>\r\n                  {successModal.message}\r\n                </p>\r\n                \r\n                <button\r\n                  onClick={() => setSuccessModal({ show: false, message: '' })}\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    padding: '0.75rem 2rem',\r\n                    borderRadius: '8px',\r\n                    fontSize: '0.95rem',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    boxShadow: '0 4px 12px rgba(40, 167, 69, 0.3)',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n                  onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n                >\r\n                  Got it!\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Device Management</h1>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>Devices ({filteredDevices.length})</h2>\r\n          <div className=\"card-actions\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search devices...\"\r\n              value={searchTerm}\r\n              onChange={handleSearch}\r\n              className=\"search-input\"\r\n              style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n            />\r\n            {selectedDevices.size > 0 && (\r\n              <button \r\n                onClick={handleBulkDelete}\r\n                disabled={bulkDeleteLoading}\r\n                style={{ \r\n                  background: 'var(--danger-color, #ef4444)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '8px 16px',\r\n                  borderRadius: '6px',\r\n                  cursor: bulkDeleteLoading ? 'not-allowed' : 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  opacity: bulkDeleteLoading ? '0.6' : '1'\r\n                }}\r\n              >\r\n                {bulkDeleteLoading ? `Deleting ${selectedDevices.size}...` : `Delete Selected (${selectedDevices.size})`}\r\n              </button>\r\n            )}\r\n            <button onClick={() => {\r\n              setCreatingDevice(true);\r\n              setUserSearchTerm('');\r\n              setShowUserDropdown(false);\r\n            }} className=\"btn\">\r\n              Register New Device\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'center', width: '40px' }}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedDevices.size === filteredDevices.length && filteredDevices.length > 0}\r\n                  onChange={handleSelectAll}\r\n                  title=\"Select all displayed devices\"\r\n                  style={{ background: isDark ? '#1a1a1a' : 'white', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                />\r\n              </th>\r\n              <th style={{ textAlign: 'center' }}>Device Serial</th>\r\n              <th style={{ textAlign: 'center' }}>Status</th>\r\n              <th style={{ textAlign: 'center' }}>MAC / HW ID</th>\r\n              <th style={{ textAlign: 'center' }}>Model</th>\r\n              <th style={{ textAlign: 'center' }}>Assigned To</th>\r\n              <th style={{ textAlign: 'center' }}>Config Version</th>\r\n              <th style={{ textAlign: 'center' }}>Provisioned At</th>\r\n              <th style={{ textAlign: 'center' }}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredDevices.map((device) => (\r\n              <tr\r\n                key={device.id}\r\n                onClick={() => handleViewDevice(device)}\r\n                style={{\r\n                  background: selectedDevices.has(device.id) ? 'rgba(99, 102, 241, 0.1)' : 'transparent',\r\n                  cursor: 'pointer'\r\n                }}\r\n                className=\"clickable-row\"\r\n              >\r\n                <td style={{ textAlign: 'center' }}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedDevices.has(device.id)}\r\n                    onChange={() => handleSelectDevice(device.id)}\r\n                    style={{ background: isDark ? '#1a1a1a' : 'white', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                  />\r\n                </td>\r\n                <td style={{ textAlign: 'center', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.85rem' }}>{device.device_serial}</td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  <span style={{\r\n                    display: 'inline-block',\r\n                    padding: '4px 8px',\r\n                    borderRadius: '12px',\r\n                    fontSize: '0.75rem',\r\n                    fontWeight: '500',\r\n                    backgroundColor: device.is_online ? '#dcfce7' : '#fee2e2',\r\n                    color: device.is_online ? '#166534' : '#991b1b'\r\n                  }}>\r\n                    {device.is_online ? ' Online' : ' Offline'}\r\n                  </span>\r\n                </td>\r\n                <td style={{ textAlign: 'center', fontFamily: 'JetBrains Mono, monospace', fontSize: '0.82rem', color: device.hw_id ? 'inherit' : 'var(--text-muted, #9ca3af)' }}>{device.hw_id || ''}</td>\r\n                <td style={{ textAlign: 'center', fontSize: '0.875rem' }}>{device.model || <span style={{ color: 'var(--text-muted, #9ca3af)' }}></span>}</td>\r\n                <td style={{ textAlign: 'center' }}>{device.user || '-'}</td>\r\n                <td style={{ textAlign: 'center' }}>{device.config_version || '-'}</td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  {(() => {\r\n                    if (!device.provisioned_at) return 'N/A';\r\n                    const date = new Date(device.provisioned_at);\r\n                    return isNaN(date.getTime()) ? 'Invalid Date' : date.toLocaleDateString();\r\n                  })()}\r\n                </td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleEdit(device);\r\n                    }}\r\n                    style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'var(--text-secondary, #94a3b8)', margin: '0 6px' }}\r\n                    title=\"Edit\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                      <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                    </svg>\r\n                  </button>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleDelete(device);\r\n                    }}\r\n                    style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'var(--danger-color, #ef4444)', margin: '0 6px' }}\r\n                    title=\"Delete\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                      <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                      <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                      <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                    </svg>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        \r\n        {/* Pagination Controls */}\r\n        {totalCount > 0 && (\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            padding: '16px',\r\n            borderTop: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n            gap: '16px'\r\n          }}>\r\n            <div style={{ fontSize: '0.875rem', color: 'var(--text-secondary, #94a3b8)' }}>\r\n              Showing {((currentPage - 1) * pageSize) + 1} - {Math.min(currentPage * pageSize, totalCount)} of {totalCount} devices\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n              <button\r\n                onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\r\n                disabled={currentPage === 1}\r\n                style={{\r\n                  padding: '8px 12px',\r\n                  border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                  borderRadius: '6px',\r\n                  background: currentPage === 1 ? 'rgba(148, 163, 184, 0.1)' : 'transparent',\r\n                  color: 'var(--text-primary, #f8fafc)',\r\n                  cursor: currentPage === 1 ? 'not-allowed' : 'pointer',\r\n                  opacity: currentPage === 1 ? '0.5' : '1'\r\n                }}\r\n              >\r\n                 Previous\r\n              </button>\r\n              \r\n              <div style={{ display: 'flex', gap: '4px', alignItems: 'center' }}>\r\n                {(() => {\r\n                  const pages = [];\r\n                  \r\n                  for (let i = 1; i <= totalPages; i++) {\r\n                    // Always show first page, last page, current page, and adjacent pages\r\n                    const showPage = i === 1 || i === totalPages || Math.abs(i - currentPage) <= 1;\r\n                    \r\n                    if (showPage) {\r\n                      pages.push(\r\n                        <button\r\n                          key={i}\r\n                          onClick={() => setCurrentPage(i)}\r\n                          style={{\r\n                            padding: '6px 10px',\r\n                            border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                            borderRadius: '4px',\r\n                            background: i === currentPage ? 'rgba(99, 102, 241, 0.2)' : 'transparent',\r\n                            color: 'var(--text-primary, #f8fafc)',\r\n                            cursor: 'pointer',\r\n                            fontWeight: i === currentPage ? 'bold' : 'normal',\r\n                            minWidth: '32px'\r\n                          }}\r\n                        >\r\n                          {i}\r\n                        </button>\r\n                      );\r\n                    } else if (pages[pages.length - 1]?.key !== 'ellipsis-' + Math.floor(i / 10)) {\r\n                      // Add ellipsis if we skipped pages and haven't added one recently\r\n                      pages.push(\r\n                        <span key={`ellipsis-${Math.floor(i / 10)}`} style={{ padding: '0 4px', color: 'var(--text-secondary, #94a3b8)' }}>\r\n                          ...\r\n                        </span>\r\n                      );\r\n                    }\r\n                  }\r\n                  \r\n                  return pages;\r\n                })()}\r\n              </div>\r\n              \r\n              <button\r\n                onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\r\n                disabled={currentPage === totalPages}\r\n                style={{\r\n                  padding: '8px 12px',\r\n                  border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                  borderRadius: '6px',\r\n                  background: currentPage === totalPages ? 'rgba(148, 163, 184, 0.1)' : 'transparent',\r\n                  color: 'var(--text-primary, #f8fafc)',\r\n                  cursor: currentPage === totalPages ? 'not-allowed' : 'pointer',\r\n                  opacity: currentPage === totalPages ? '0.5' : '1'\r\n                }}\r\n              >\r\n                Next \r\n              </button>\r\n            </div>\r\n            \r\n            <select\r\n              value={pageSize}\r\n              onChange={(e) => {\r\n                setPageSize(parseInt(e.target.value));\r\n                setCurrentPage(1);\r\n              }}\r\n              style={{\r\n                padding: '8px',\r\n                border: isDark ? '1px solid #404040' : '1px solid rgba(148, 163, 184, 0.2)',\r\n                borderRadius: '6px',\r\n                background: isDark ? '#1a1a1a' : '#0f172a',\r\n                color: isDark ? '#e0e0e0' : '#f8fafc',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <option value={10}>10 per page</option>\r\n              <option value={25}>25 per page</option>\r\n              <option value={50}>50 per page</option>\r\n              <option value={100}>100 per page</option>\r\n            </select>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {(editingDevice || creatingDevice) && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <h3>{editingDevice ? `Edit Device: ${editingDevice.device_serial}` : 'Register New Device'}</h3>\r\n            <form onSubmit={(e) => { e.preventDefault(); editingDevice ? handleSave() : handleCreate(); }}>\r\n              <div className=\"modal-body\">\r\n                \r\n                {/* Device Identity */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Device Identity</h4>\r\n                  <div className=\"form-grid\">\r\n                    <div className=\"form-group\">\r\n                      <label>Device Serial Number</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingDevice ? editForm.device_serial : createForm.device_serial}\r\n                        onChange={(e) => editingDevice ? setEditForm({...editForm, device_serial: e.target.value}) : setCreateForm({...createForm, device_serial: e.target.value})}\r\n                        required\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"SN-12345678\"\r\n                        style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Ownership */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Ownership & Assignment</h4>\r\n                  <div className=\"form-grid\">\r\n                    <div className=\"form-group\">\r\n                      <label>Assigned User</label>\r\n                      <div style={{ position: 'relative' }} onClick={(e) => e.stopPropagation()}>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"Search and select user...\"\r\n                          value={userSearchTerm}\r\n                          onChange={(e) => {\r\n                            setUserSearchTerm(e.target.value);\r\n                            setShowUserDropdown(true);\r\n                          }}\r\n                          onFocus={() => setShowUserDropdown(true)}\r\n                          autoComplete=\"off\"\r\n                          style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                        />\r\n                        {(editingDevice ? editForm.user : createForm.user) && (\r\n                          <div style={{ marginTop: '8px', fontSize: '0.875rem', color: isDark ? '#b0b0b0' : '#94a3b8' }}>\r\n                            <strong>Selected:</strong> {users.find(u => u.username === (editingDevice ? editForm.user : createForm.user))?.first_name} {users.find(u => u.username === (editingDevice ? editForm.user : createForm.user))?.last_name} ({editingDevice ? editForm.user : createForm.user})\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => {\r\n                                if (editingDevice) {\r\n                                  setEditForm({...editForm, user: ''});\r\n                                } else {\r\n                                  setCreateForm({...createForm, user: ''});\r\n                                }\r\n                                setUserSearchTerm('');\r\n                              }}\r\n                              className=\"btn-icon btn-icon-danger\"\r\n                              style={{ marginLeft: '10px' }}\r\n                              title=\"Remove Assignment\"\r\n                            >\r\n                              \r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                        {showUserDropdown && (\r\n                          <div style={{\r\n                            position: 'absolute',\r\n                            top: '100%',\r\n                            left: 0,\r\n                            right: 0,\r\n                            background: 'var(--bg-secondary, #0f172a)',\r\n                            border: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n                            borderRadius: '8px',\r\n                            maxHeight: '200px',\r\n                            overflowY: 'auto',\r\n                            zIndex: 1000,\r\n                            boxShadow: 'var(--shadow-xl)',\r\n                            marginTop: '4px'\r\n                          }}>\r\n                            {filteredUsers.length > 0 ? (\r\n                              filteredUsers.map((user) => (\r\n                                <div\r\n                                  key={user.id}\r\n                                  onClick={() => {\r\n                                    if (editingDevice) {\r\n                                      setEditForm({...editForm, user: user.username});\r\n                                    } else {\r\n                                      setCreateForm({...createForm, user: user.username});\r\n                                    }\r\n                                    setUserSearchTerm(`${user.first_name} ${user.last_name} (${user.username})`);\r\n                                    setShowUserDropdown(false);\r\n                                  }}\r\n                                  style={{\r\n                                    padding: '12px 16px',\r\n                                    cursor: 'pointer',\r\n                                    borderBottom: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n                                    background: (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent',\r\n                                    color: 'var(--text-primary, #f8fafc)',\r\n                                    transition: 'all 0.15s ease',\r\n                                    fontSize: '0.875rem'\r\n                                  }}\r\n                                  onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.06)'}\r\n                                  onMouseLeave={(e) => e.currentTarget.style.background = (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent'}\r\n                                >\r\n                                  {user.first_name} {user.last_name} ({user.username}) <br/>\r\n                                  <span style={{ fontSize: '0.75rem', color: 'var(--text-secondary, #94a3b8)' }}>{user.email}</span>\r\n                                </div>\r\n                              ))\r\n                            ) : (\r\n                              <div style={{ padding: '12px 16px', color: 'var(--text-muted, #64748b)', fontSize: '0.875rem' }}>\r\n                                {userSearchTerm.trim() === '' ? 'Start typing to search users...' : 'No users found'}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Configuration */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Configuration</h4>\r\n                  <div className=\"form-grid form-grid-2\">\r\n                    <div className=\"form-group\">\r\n                      <label>Preset Template</label>\r\n                      <select\r\n                        value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                        onChange={(e) => editingDevice ? setEditForm({ ...editForm, config_version: e.target.value }) : setCreateForm({ ...createForm, config_version: e.target.value })}\r\n                        className=\"full-width\"\r\n                        style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                      >\r\n                        <option value=\"\">-- Manual Configuration --</option>\r\n                        {presetsLoading && <option value=\"\" disabled>Loading presets...</option>}\r\n                        {!presetsLoading && presets.map((preset) => (\r\n                          <option key={preset.id} value={getPresetConfigId(preset)}>\r\n                            {preset.name} ({getPresetConfigId(preset) || 'no ID'})\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                      <small className=\"form-hint\">Selecting a preset sets the Config Version ID below.</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Config Version ID</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                        onChange={(e) => editingDevice ? setEditForm({...editForm, config_version: e.target.value}) : setCreateForm({...createForm, config_version: e.target.value})}\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"Manual Config ID\"\r\n                        style={{ background: isDark ? '#1a1a1a' : 'white', color: isDark ? '#e0e0e0' : 'inherit', border: isDark ? '1px solid #404040' : '1px solid #ced4da' }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              {editingDevice && (\r\n                <div style={{ padding: '0 24px' }}>\r\n                   <AuditTrail\r\n                     createdBy={editingDevice.created_by_username}\r\n                     createdAt={editingDevice.created_at}\r\n                     updatedBy={editingDevice.updated_by_username}\r\n                     updatedAt={editingDevice.updated_at}\r\n                   />\r\n                </div>\r\n              )}\r\n              <div className=\"form-actions\" style={{ padding: '24px' }}>\r\n                <button type=\"submit\" className=\"btn\">{editingDevice ? 'Save Changes' : 'Register Device'}</button>\r\n                <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n              </div>\r\n            </form>\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    {/* Modern Reboot Confirmation Modal */}\r\n    {rebootModal.show && rebootModal.device && (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.6)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 1000,\r\n        backdropFilter: 'blur(4px)'\r\n      }}>\r\n        <div style={{\r\n          background: isDark ? '#2d2d2d' : 'white',\r\n          borderRadius: '16px',\r\n          padding: '2rem',\r\n          maxWidth: '500px',\r\n          width: '90%',\r\n          boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n          border: isDark ? '1px solid #404040' : 'none',\r\n          animation: 'slideIn 0.2s ease-out'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n            <div style={{\r\n              width: '48px',\r\n              height: '48px',\r\n              borderRadius: '12px',\r\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '1.5rem'\r\n            }}>\r\n              \r\n            </div>\r\n            <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: isDark ? '#e0e0e0' : '#2c3e50' }}>\r\n              Confirm Reboot\r\n            </h3>\r\n          </div>\r\n          \r\n          <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n            <p style={{ marginBottom: '1rem' }}>\r\n              Are you sure you want to reboot device <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{rebootModal.device.device_serial}</strong>?\r\n            </p>\r\n            <div style={{\r\n              background: isDark ? 'rgba(102,126,234,0.1)' : '#e7f3ff',\r\n              border: isDark ? '1px solid rgba(102,126,234,0.3)' : '1px solid #b3d9ff',\r\n              borderRadius: '8px',\r\n              padding: '0.75rem 1rem',\r\n              fontSize: '0.9rem',\r\n              color: isDark ? '#88a6ff' : '#004085'\r\n            }}>\r\n              <strong> Note:</strong> The device will restart on its next heartbeat. Any unsaved data may be lost.\r\n            </div>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n            <button\r\n              onClick={() => setRebootModal({ show: false, device: null })}\r\n              style={{\r\n                background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                color: isDark ? '#e0e0e0' : '#495057',\r\n                border: 'none',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n              onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={confirmReboot}\r\n              style={{\r\n                background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                boxShadow: '0 4px 12px rgba(102, 126, 234, 0.3)',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n              onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n            >\r\n              Confirm Reboot\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    {/* Modern Hard Reset Confirmation Modal */}\r\n    {hardResetModal.show && hardResetModal.device && (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.6)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 1000,\r\n        backdropFilter: 'blur(4px)'\r\n      }}>\r\n        <div style={{\r\n          background: isDark ? '#2d2d2d' : 'white',\r\n          borderRadius: '16px',\r\n          padding: '2rem',\r\n          maxWidth: '500px',\r\n          width: '90%',\r\n          boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n          border: isDark ? '2px solid #dc3545' : '2px solid #dc3545',\r\n          animation: 'slideIn 0.2s ease-out'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n            <div style={{\r\n              width: '48px',\r\n              height: '48px',\r\n              borderRadius: '12px',\r\n              background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '1.5rem',\r\n              animation: 'pulse 2s infinite'\r\n            }}>\r\n              \r\n            </div>\r\n            <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: '#dc3545' }}>\r\n              Hard Reset Warning\r\n            </h3>\r\n          </div>\r\n          \r\n          <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n            <div style={{\r\n              background: isDark ? 'rgba(220, 53, 69, 0.1)' : '#f8d7da',\r\n              border: isDark ? '1px solid rgba(220, 53, 69, 0.3)' : '1px solid #f5c6cb',\r\n              borderRadius: '8px',\r\n              padding: '1rem',\r\n              marginBottom: '1rem',\r\n              color: isDark ? '#ff9999' : '#721c24'\r\n            }}>\r\n              <strong style={{ fontSize: '1.05rem' }}> CRITICAL WARNING</strong>\r\n              <p style={{ margin: '0.5rem 0 0 0', fontSize: '0.9rem' }}>\r\n                This action will <strong>erase all device configuration</strong> and restart the device to factory settings.\r\n              </p>\r\n            </div>\r\n            \r\n            <p style={{ marginBottom: '0.75rem' }}>\r\n              Device to reset: <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{hardResetModal.device.device_serial}</strong>\r\n            </p>\r\n            \r\n            <ul style={{ margin: '0.5rem 0', paddingLeft: '1.5rem', fontSize: '0.9rem' }}>\r\n              <li>All configuration will be lost</li>\r\n              <li>Device will return to factory defaults</li>\r\n              <li>Re-provisioning will be required</li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n            <button\r\n              onClick={() => setHardResetModal({ show: false, device: null })}\r\n              style={{\r\n                background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                color: isDark ? '#e0e0e0' : '#495057',\r\n                border: 'none',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n              onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={confirmHardReset}\r\n              style={{\r\n                background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                boxShadow: '0 4px 12px rgba(220, 53, 69, 0.3)',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n              onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n            >\r\n              Yes, Hard Reset\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    {/* Modern Delete Confirmation Modal */}\r\n    {deleteModal.show && deleteModal.device && (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.6)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 1000,\r\n        backdropFilter: 'blur(4px)'\r\n      }}>\r\n        <div style={{\r\n          background: isDark ? '#2d2d2d' : 'white',\r\n          borderRadius: '16px',\r\n          padding: '2rem',\r\n          maxWidth: '500px',\r\n          width: '90%',\r\n          boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n          border: isDark ? '2px solid #7f1d1d' : '2px solid #7f1d1d',\r\n          animation: 'slideIn 0.2s ease-out'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1.5rem' }}>\r\n            <div style={{\r\n              width: '48px',\r\n              height: '48px',\r\n              borderRadius: '12px',\r\n              background: 'linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '1.5rem',\r\n              animation: 'pulse 2s infinite'\r\n            }}>\r\n              \r\n            </div>\r\n            <h3 style={{ fontSize: '1.5rem', fontWeight: '600', margin: 0, color: '#7f1d1d' }}>\r\n              Delete Device Permanently\r\n            </h3>\r\n          </div>\r\n          \r\n          <div style={{ marginBottom: '1.5rem', color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6' }}>\r\n            <div style={{\r\n              background: isDark ? 'rgba(127, 29, 29, 0.1)' : '#fee2e2',\r\n              border: isDark ? '1px solid rgba(127, 29, 29, 0.3)' : '1px solid #fecaca',\r\n              borderRadius: '8px',\r\n              padding: '1rem',\r\n              marginBottom: '1rem',\r\n              color: isDark ? '#fca5a5' : '#991b1b'\r\n            }}>\r\n              <strong style={{ fontSize: '1.05rem' }}> PERMANENT DELETION</strong>\r\n              <p style={{ margin: '0.5rem 0 0 0', fontSize: '0.9rem' }}>\r\n                This action <strong>cannot be undone</strong>. All device data will be permanently deleted.\r\n              </p>\r\n            </div>\r\n            \r\n            <p style={{ marginBottom: '0.75rem' }}>\r\n              Device to delete: <strong style={{ color: isDark ? '#e0e0e0' : '#2c3e50' }}>{deleteModal.device.device_serial}</strong>\r\n            </p>\r\n            \r\n            <ul style={{ margin: '0.5rem 0', paddingLeft: '1.5rem', fontSize: '0.9rem' }}>\r\n              <li>All telemetry data will be lost</li>\r\n              <li>All command history will be deleted</li>\r\n              <li>Device must be re-provisioned to use again</li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', gap: '0.75rem', justifyContent: 'flex-end' }}>\r\n            <button\r\n              onClick={() => setDeleteModal({ show: false, device: null })}\r\n              style={{\r\n                background: isDark ? '#3a3a3a' : '#e0e0e0',\r\n                color: isDark ? '#e0e0e0' : '#495057',\r\n                border: 'none',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.background = isDark ? '#4a4a4a' : '#d0d0d0'}\r\n              onMouseOut={e => e.currentTarget.style.background = isDark ? '#3a3a3a' : '#e0e0e0'}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={confirmDelete}\r\n              style={{\r\n                background: 'linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                boxShadow: '0 4px 12px rgba(127, 29, 29, 0.3)',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n              onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n            >\r\n              Yes, Delete Permanently\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n\r\n    {/* Modern Success Notification Modal */}\r\n    {successModal.show && (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.4)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 1000,\r\n        backdropFilter: 'blur(2px)'\r\n      }}>\r\n        <div style={{\r\n          background: isDark ? '#2d2d2d' : 'white',\r\n          borderRadius: '16px',\r\n          padding: '2rem',\r\n          maxWidth: '450px',\r\n          width: '90%',\r\n          boxShadow: isDark ? '0 20px 60px rgba(0,0,0,0.6)' : '0 20px 60px rgba(0,0,0,0.3)',\r\n          border: isDark ? '1px solid #28a745' : '2px solid #28a745',\r\n          animation: 'slideIn 0.2s ease-out'\r\n        }}>\r\n          <div style={{ textAlign: 'center' }}>\r\n            <div style={{\r\n              width: '64px',\r\n              height: '64px',\r\n              borderRadius: '50%',\r\n              background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '2rem',\r\n              margin: '0 auto 1rem',\r\n              animation: 'scaleIn 0.3s ease-out'\r\n            }}>\r\n              \r\n            </div>\r\n            \r\n            <h3 style={{ fontSize: '1.5rem', fontWeight: '600', marginBottom: '1rem', color: isDark ? '#e0e0e0' : '#2c3e50' }}>\r\n              Command Queued\r\n            </h3>\r\n            \r\n            <p style={{ color: isDark ? '#b0b0b0' : '#495057', lineHeight: '1.6', marginBottom: '1.5rem' }}>\r\n              {successModal.message}\r\n            </p>\r\n            \r\n            <button\r\n              onClick={() => setSuccessModal({ show: false, message: '' })}\r\n              style={{\r\n                background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '0.75rem 2rem',\r\n                borderRadius: '8px',\r\n                fontSize: '0.95rem',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                boxShadow: '0 4px 12px rgba(40, 167, 69, 0.3)',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={e => e.currentTarget.style.transform = 'translateY(-1px)'}\r\n              onMouseOut={e => e.currentTarget.style.transform = 'translateY(0)'}\r\n            >\r\n              Got it!\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Devices;"],"names":["useDebouncedCallback","callback","delay","arguments","length","undefined","timeoutId","setTimeoutId","useState","debouncedCallback","useCallback","_len","args","Array","_key","clearTimeout","newTimeoutId","setTimeout","useEffect","TABS","id","label","icon","ForecastTooltip","_ref","active","payload","isDark","useTheme","_jsxs","style","background","backdropFilter","border","concat","borderRadius","padding","boxShadow","minWidth","children","_jsx","fontFamily","fontWeight","color","fontSize","marginBottom","borderBottom","paddingBottom","display","flexDirection","gap","map","entry","_entry$name","_entry$name2","_entry$name3","unit","name","includes","alignItems","justifyContent","width","height","stroke","fill","flexShrink","split","Number","value","toFixed","fmt","ts","range","d","Date","toLocaleTimeString","hour","minute","toLocaleDateString","weekday","month","day","_unused","IconSun","viewBox","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","x1","y1","x2","y2","IconBattery","x","y","rx","IconLoad","points","IconEnergy","IconCloud","IconGrid","IconThermometer","KpiCard","_ref2","sub","accent","badge","className","flex","textTransform","letterSpacing","margin","lineHeight","marginLeft","marginTop","WeatherHourlyStrip","_ref3","hourly","overflowX","paddingTop","h","i","_h$cloud_cover_pct","_h$ghi_wm","_h$temperature_c","_h$wind_speed_ms","time","forecast_for","_unused3","cloud","cloud_cover_pct","ghi","ghi_wm2","temp","temperature_c","wind","wind_speed_ms","humidity","humidity_pct","ghiPct","Math","min","humPct","isNow","wi","ghiColor","humColor","position","top","title","round","overflow","_Fragment","EnergyBreakdownRow","_ref4","latest","items","pv_today_kwh","bg","grid_buy_today_kwh","grid_sell_today_kwh","batt_charge_today_kwh","batt_discharge_today_kwh","load_today_kwh","filter","e","flexWrap","alignSelf","opacity","InsightsRow","_ref5","_latest$pv_today_kwh","_latest$load_today_kw","_latest$grid_buy_toda","pvKwh","loadKwh","gridBuy","co2Kg","selfSufPct","max","gridDepPct","push","item","REGIME_STYLE","night","ramp","midday","ForecastTable","_ref6","data","theadBg","rowBorder","maxHeight","overflowY","borderCollapse","zIndex","textAlign","row","_REGIME_STYLE$row$reg","_row$p10$toFixed","_row$p","_row$p50$toFixed","_row$p2","_row$p90$toFixed","_row$p3","_row$physics$toFixed","_row$physics","_row$ghi$toFixed","_row$ghi","rc","regime","p10","p50","p90","fontStyle","physics","_ref7","_latest$pv1_power_w","_latest$pv2_power_w","_latest$battery_soc_p","_latest$load_power_w","_latest$pv_today_kwh2","_latest$grid_power_w","_latest$battery_power","_latest$inverter_temp","_latest$battery_volta","_latest$grid_frequenc","siteId","autoRefresh","telemetry","setTelemetry","forecast","setForecast","weather","setWeather","loading","setLoading","error","setError","lastUpdated","setLastUpdated","activeTab","setActiveTab","showBands","setShowBands","P10","P50","P90","dateRange","setDateRange","customStartDate","setCustomStartDate","customEndDate","setCustomEndDate","forecastView","setForecastView","tooltipStyle","fetchAll","async","telemetryParams","start_date","toISOString","end_date","days","forecastParams","end","start","setDate","getDate","tel","fcst","wth","Promise","all","apiService","getSiteTelemetry","getSiteForecast","getSiteWeather","isArray","err","Error","message","setInterval","clearInterval","pvKw","pv1_power_w","pv2_power_w","batSoc","battery_soc_percent","loadKw","load_power_w","todayKwh","gridKw","grid_power_w","batPowerKw","battery_power_w","invTemp","inverter_temp_c","batVoltage","battery_voltage_v","runState","run_state","gridImporting","gridExporting","batCharging","runStateBadge","invTempColor","historyData","_","isDay","buckets","Map","forEach","timestamp","key","getFullYear","getMonth","getHours","has","set","get","from","values","bucket","avg","field","reduce","s","_r$field","first","_r$pv_today_kwh","aggregateByPeriod","_row$pv1_power_w","_row$pv2_power_w","_row$load_power_w","_row$grid_power_w","_row$battery_soc_perc","forecastData","_row$regime","clean","replace","forecastFor","_unused2","fmtForecast","p50_kw","p10_kw","p90_kw","physics_baseline_kw","ghi_input_wm2","fcastP10","fcastP50","fcastP90","forecastGeneratedAt","generated_at","abs","getTime","achievedPct","cardBg","headerGrad","toggleBg","toggleActive","borderClr","noData","onChange","target","cursor","type","onClick","tab","isActive","transition","grid_voltage_v","grid_frequency_hz","current","p","hourly_forecast","ResponsiveContainer","AreaChart","right","left","bottom","offset","stopColor","stopOpacity","CartesianGrid","strokeDasharray","XAxis","dataKey","interval","ceil","angle","textAnchor","tick","YAxis","yAxisId","tickFormatter","v","orientation","domain","Tooltip","contentStyle","formatter","String","Legend","iconType","iconSize","wrapperStyle","Area","dot","Line","desc","b","_objectSpread","el","document","getElementById","canvas","html2canvas","scale","a","createElement","download","slice","href","toDataURL","click","onMouseOver","currentTarget","onMouseOut","keys","Object","csv","join","k","_k","JSON","stringify","blob","Blob","url","URL","createObjectURL","body","appendChild","removeChild","revokeObjectURL","userSelect","vertical","tickLine","axisLine","minTickGap","tickMargin","allowDataOverflow","val","content","animationDuration","pointerEvents","verticalAlign","activeDot","ReferenceLine","Devices","_users$find3","_users$find4","searchParams","useSearchParams","devices","setDevices","filteredDevices","setFilteredDevices","editingDevice","setEditingDevice","creatingDevice","setCreatingDevice","searchTerm","setSearchTerm","userSearchTerm","setUserSearchTerm","filteredUsers","setFilteredUsers","showUserDropdown","setShowUserDropdown","users","setUsers","selectedDevices","setSelectedDevices","Set","bulkDeleteLoading","setBulkDeleteLoading","currentPage","setCurrentPage","pageSize","setPageSize","totalCount","setTotalCount","totalPages","setTotalPages","presets","setPresets","presetsLoading","setPresetsLoading","health","setHealth","telemetrySummary","setTelemetrySummary","telemetryData","setTelemetryData","dashboardError","setDashboardError","selectedDevice","setSelectedDevice","deviceLogs","setDeviceLogs","logsLoading","setLogsLoading","editForm","setEditForm","device_serial","user","config_version","createForm","setCreateForm","siteDetails","setSiteDetails","siteLoading","setSiteLoading","editingSite","setEditingSite","siteForm","setSiteForm","site_id","display_name","latitude","longitude","capacity_kw","tilt_deg","azimuth_deg","timezone","is_active","siteSaving","setSiteSaving","siteError","setSiteError","devicePreset","setDevicePreset","rebootModal","setRebootModal","show","device","hardResetModal","setHardResetModal","deleteModal","setDeleteModal","successModal","setSuccessModal","fetchDevices","page","search","response","getDevices","results","count","total_pages","current_page","fetchDeviceLogs","getDeviceLogs","deviceId","logs","console","handleViewDevice","preset","find","config_id","getDeviceSite","then","catch","finally","customers","getUsers","is_staff","is_superuser","fetchUsers","getPresets","fetchPresets","healthData","getSystemHealth","getTelemetry","telemetryArray","currentLatest","itemDate","isNaN","deviceCount","size","totalPoints","latestTimestamp","fetchDashboardData","deviceIdParam","parseInt","foundDevice","handleClickOutside","addEventListener","removeEventListener","trim","searchLower","toLowerCase","filtered","fullName","first_name","last_name","username","email","debouncedSearch","query","handleEdit","_users$find","_users$find2","u","handleSave","updateDevice","handleCreate","createDevice","confirmReboot","rebootDevice","confirmHardReset","hardResetDevice","confirmDelete","deleteDevice","handleCancel","handleBackToList","getPresetConfigId","_preset$gateway_confi","_preset$gateway_confi2","gateway_configuration","general_settings","_devicePreset$gateway","_devicePreset$gateway2","deviceTelemetry","latestTelemetry","marginRight","log","handleReboot","backgroundColor","handleHardReset","handleDeleteDevice","gridTemplateColumns","is_online","last_heartbeat","toLocaleString","hw_id","model","gridColumn","pending_config_update","slaves_count","config_ack_ver","version","last_updated","config_acked_at","ackTime","diffMs","diffMins","floor","diffHours","diffDays","config_downloaded_at","provisioned_at","created_by_username","checked","logs_enabled","enabled","toggleDeviceLogs","handleToggleLogs","overall_health","active_devices","total_devices","total_telemetry_points","data_type","SiteDataPanel","disabled","level","onSubmit","preventDefault","parseFloat","updated","updateDeviceSite","createDeviceSite","required","placeholder","autoComplete","step","stopPropagation","onFocus","onMouseEnter","onMouseLeave","AuditTrail","createdBy","createdAt","created_at","updatedBy","updated_by_username","updatedAt","updated_at","maxWidth","animation","transform","paddingLeft","deviceList","Boolean","confirmMessage","window","confirm","deleteDevicesBulk","updatedDevices","handleSelectAll","allIds","newSelected","delete","add","handleSelectDevice","date","handleDelete","borderTop","pages","_pages"],"sourceRoot":""}