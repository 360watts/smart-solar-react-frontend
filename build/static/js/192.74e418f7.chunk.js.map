{"version":3,"file":"static/js/192.74e418f7.chunk.js","mappings":"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","sources":["components/Alerts.tsx","components/AuditTrail.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api';\r\nimport AuditTrail from './AuditTrail';\r\n\r\ninterface Alert {\r\n  id: string;\r\n  type: string;\r\n  severity: 'critical' | 'warning' | 'info';\r\n  message: string;\r\n  device_id: string;\r\n  timestamp: string;\r\n  resolved: boolean;\r\n  created_by_username?: string;\r\n  created_at?: string;\r\n}\r\n\r\nconst Alerts: React.FC = () => {\r\n  const [alerts, setAlerts] = useState<Alert[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [filterSeverity, setFilterSeverity] = useState<string>('all');\r\n\r\n  useEffect(() => {\r\n    fetchAlerts();\r\n    // Set up polling for real-time alerts\r\n    const interval = setInterval(fetchAlerts, 30000); // Refresh every 30 seconds\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchAlerts = async () => {\r\n    try {\r\n      const data = await apiService.getAlerts();\r\n      setAlerts(data);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getSeverityColor = (severity: string) => {\r\n    switch (severity) {\r\n      case 'critical': return 'status-critical';\r\n      case 'warning': return 'status-warning';\r\n      case 'info': return 'status-info';\r\n      default: return 'status-offline';\r\n    }\r\n  };\r\n\r\n  const getSeverityIcon = (severity: string) => {\r\n    switch (severity) {\r\n      case 'critical': return 'ðŸš¨';\r\n      case 'warning': return 'âš ï¸';\r\n      case 'info': return 'â„¹ï¸';\r\n      default: return 'â“';\r\n    }\r\n  };\r\n\r\n  const filteredAlerts = alerts.filter(alert =>\r\n    filterSeverity === 'all' || alert.severity === filterSeverity\r\n  );\r\n\r\n  const unresolvedAlerts = alerts.filter(alert => !alert.resolved);\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading alerts...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>System Alerts</h1>\r\n\r\n      <div className=\"grid-cols-2\">\r\n        <div className=\"card\">\r\n          <h3>Alert Summary</h3>\r\n          <p><strong>Total Alerts:</strong> {alerts.length}</p>\r\n          <p><strong>Unresolved:</strong> {unresolvedAlerts.length}</p>\r\n          <p><strong>Critical:</strong> {alerts.filter(a => a.severity === 'critical').length}</p>\r\n          <p><strong>Warnings:</strong> {alerts.filter(a => a.severity === 'warning').length}</p>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <h3>Filter by Severity</h3>\r\n          <div className=\"form-group\">\r\n            <select\r\n              value={filterSeverity}\r\n              onChange={(e) => setFilterSeverity(e.target.value)}\r\n            >\r\n              <option value=\"all\">All Severities</option>\r\n              <option value=\"critical\">Critical</option>\r\n              <option value=\"warning\">Warning</option>\r\n              <option value=\"info\">Info</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <h2>Active Alerts ({filteredAlerts.length})</h2>\r\n        {filteredAlerts.length === 0 ? (\r\n          <p>No alerts found.</p>\r\n        ) : (\r\n          <div className=\"alerts-list\">\r\n            {filteredAlerts.map((alert) => (\r\n              <div key={alert.id} className={`alert-item ${getSeverityColor(alert.severity)}`}>\r\n                <div className=\"alert-header\">\r\n                  <span className=\"alert-icon\">{getSeverityIcon(alert.severity)}</span>\r\n                  <span className=\"alert-type\">{alert.type.replace('_', ' ').toUpperCase()}</span>\r\n                  <span className=\"alert-device\">Device: {alert.device_id}</span>\r\n                  <span className=\"alert-time\">{new Date(alert.timestamp).toLocaleString()}</span>\r\n                </div>\r\n                <div className=\"alert-message\">{alert.message}</div>\r\n                <div className=\"alert-status\">\r\n                  Status: {alert.resolved ? 'Resolved' : 'Active'}\r\n                </div>\r\n                <AuditTrail \r\n                  createdBy={alert.created_by_username}\r\n                  createdAt={alert.created_at}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Alerts;","import React from 'react';\r\n\r\ninterface AuditTrailProps {\r\n  createdBy?: string | null;\r\n  createdAt?: string;\r\n  updatedBy?: string | null;\r\n  updatedAt?: string;\r\n  className?: string;\r\n}\r\n\r\nconst AuditTrail: React.FC<AuditTrailProps> = ({\r\n  createdBy,\r\n  createdAt,\r\n  updatedBy,\r\n  updatedAt,\r\n  className = 'audit-trail',\r\n}) => {\r\n  const formatDate = (dateString?: string) => {\r\n    if (!dateString) return 'N/A';\r\n    try {\r\n      return new Date(dateString).toLocaleString();\r\n    } catch {\r\n      return dateString;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"audit-row\">\r\n        <span className=\"audit-label\">Created:</span>\r\n        {createdBy ? (\r\n          <span className=\"audit-value\">\r\n            by <strong>{createdBy}</strong> on {formatDate(createdAt)}\r\n          </span>\r\n        ) : (\r\n          <span className=\"audit-value\">System</span>\r\n        )}\r\n      </div>\r\n\r\n      {updatedBy && (\r\n        <div className=\"audit-row\">\r\n          <span className=\"audit-label\">Last Updated:</span>\r\n          <span className=\"audit-value\">\r\n            by <strong>{updatedBy}</strong> on {formatDate(updatedAt)}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(AuditTrail);\r\n","/**\r\n * Enhanced in-memory cache service for API responses\r\n * Features:\r\n * - TTL-based expiration\r\n * - Stale-while-revalidate pattern support\r\n * - Subscription system for real-time updates\r\n * - Pattern-based cache invalidation\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n  staleTime?: number; // Time after which data is considered stale but usable\r\n}\r\n\r\ninterface CacheSubscription {\r\n  callback: (data: any) => void;\r\n  pattern?: RegExp;\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private subscribers: Map<string, Set<CacheSubscription>> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n  private static readonly REALTIME_TTL = 10 * 1000; // 10 seconds for real-time data\r\n  private static readonly STALE_TIME = 30 * 1000; // 30 seconds before data is stale\r\n\r\n  /**\r\n   * Set a cache entry and notify subscribers\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL, staleTime?: number): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n      staleTime: staleTime ?? Math.min(ttlMs / 2, CacheService.STALE_TIME),\r\n    });\r\n    \r\n    // Notify subscribers\r\n    this.notifySubscribers(key, data);\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid (returns null if expired)\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Get cache entry even if stale (for stale-while-revalidate pattern)\r\n   * Returns { data, isStale } or null if no entry exists\r\n   */\r\n  getWithStaleStatus(key: string): { data: any; isStale: boolean; isExpired: boolean } | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    const isExpired = age > entry.expiresIn;\r\n    const isStale = age > (entry.staleTime ?? entry.expiresIn / 2);\r\n\r\n    // Remove if fully expired\r\n    if (isExpired) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      data: entry.data,\r\n      isStale,\r\n      isExpired: false,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if cached data is stale but usable\r\n   */\r\n  isStale(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return true;\r\n\r\n    const now = Date.now();\r\n    const age = now - entry.timestamp;\r\n    return age > (entry.staleTime ?? entry.expiresIn / 2);\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear cache entries matching a pattern\r\n   */\r\n  clearPattern(pattern: string | RegExp): void {\r\n    const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\r\n    const keysToDelete: string[] = [];\r\n    \r\n    this.cache.forEach((_, key) => {\r\n      if (regex.test(key)) {\r\n        keysToDelete.push(key);\r\n      }\r\n    });\r\n    \r\n    keysToDelete.forEach(key => this.cache.delete(key));\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates for a specific key\r\n   */\r\n  subscribe(key: string, callback: (data: any) => void): () => void {\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache updates matching a pattern\r\n   */\r\n  subscribePattern(pattern: RegExp, callback: (data: any) => void): () => void {\r\n    const key = `__pattern__${pattern.source}`;\r\n    if (!this.subscribers.has(key)) {\r\n      this.subscribers.set(key, new Set());\r\n    }\r\n    \r\n    const subscription: CacheSubscription = { callback, pattern };\r\n    this.subscribers.get(key)!.add(subscription);\r\n\r\n    return () => {\r\n      const subs = this.subscribers.get(key);\r\n      if (subs) {\r\n        subs.delete(subscription);\r\n        if (subs.size === 0) {\r\n          this.subscribers.delete(key);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Notify all subscribers of a cache update\r\n   */\r\n  private notifySubscribers(key: string, data: any): void {\r\n    // Direct key subscribers\r\n    const directSubs = this.subscribers.get(key);\r\n    if (directSubs) {\r\n      directSubs.forEach(sub => {\r\n        try {\r\n          sub.callback(data);\r\n        } catch (error) {\r\n          console.error(`Cache subscriber error for key ${key}:`, error);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Pattern subscribers\r\n    this.subscribers.forEach((subs, subKey) => {\r\n      if (subKey.startsWith('__pattern__')) {\r\n        subs.forEach(sub => {\r\n          if (sub.pattern && sub.pattern.test(key)) {\r\n            try {\r\n              sub.callback(data);\r\n            } catch (error) {\r\n              console.error(`Cache pattern subscriber error for key ${key}:`, error);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get all keys in cache\r\n   */\r\n  keys(): string[] {\r\n    return Array.from(this.cache.keys());\r\n  }\r\n\r\n  /**\r\n   * Get cache stats for debugging\r\n   */\r\n  getStats(): { size: number; keys: string[]; subscribers: number } {\r\n    return {\r\n      size: this.cache.size,\r\n      keys: this.keys(),\r\n      subscribers: Array.from(this.subscribers.values()).reduce((sum, set) => sum + set.size, 0),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' | 'realtime' = 'short'): number {\r\n    switch (type) {\r\n      case 'realtime':\r\n        return CacheService.REALTIME_TTL;\r\n      case 'long':\r\n        return CacheService.LONG_TTL;\r\n      default:\r\n        return CacheService.DEFAULT_TTL;\r\n    }\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\nexport const REALTIME_TTL = 10 * 1000; // 10 seconds\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  async detachSlaveFromPreset(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/detach/`, {\r\n      method: 'POST',\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const url = `${API_BASE_URL}/ota/firmware/create/`;\r\n    const tokens = localStorage.getItem('authTokens');\r\n    \r\n    if (!tokens) {\r\n      throw new Error('Authentication required');\r\n    }\r\n    \r\n    const parsedTokens = JSON.parse(tokens);\r\n    let headers: HeadersInit = {\r\n      'Authorization': `Bearer ${parsedTokens.access}`,\r\n    };\r\n    // Don't set Content-Type - let browser set it with boundary for multipart/form-data\r\n    \r\n    let response = await fetch(url, {\r\n      method: 'POST',\r\n      headers,\r\n      body: formData,\r\n    });\r\n\r\n    // Handle 401 with token refresh\r\n    if (response.status === 401) {\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        const newTokens = JSON.parse(localStorage.getItem('authTokens') || '{}');\r\n        headers = {\r\n          'Authorization': `Bearer ${newTokens.access}`,\r\n        };\r\n        response = await fetch(url, {\r\n          method: 'POST',\r\n          headers,\r\n          body: formData,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`Upload failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteFirmwareVersion(firmwareId: number): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["Alerts","alerts","setAlerts","useState","loading","setLoading","error","setError","filterSeverity","setFilterSeverity","useEffect","fetchAlerts","interval","setInterval","clearInterval","async","data","apiService","getAlerts","err","Error","message","getSeverityColor","severity","getSeverityIcon","filteredAlerts","filter","alert","unresolvedAlerts","resolved","_jsx","className","children","_jsxs","length","a","value","onChange","e","target","map","concat","type","replace","toUpperCase","device_id","Date","timestamp","toLocaleString","AuditTrail","createdBy","created_by_username","createdAt","created_at","id","_ref","updatedBy","updatedAt","formatDate","dateString","_unused","React","CacheService","constructor","cache","Map","subscribers","set","key","ttlMs","arguments","undefined","DEFAULT_TTL","staleTime","this","now","expiresIn","Math","min","STALE_TIME","notifySubscribers","get","entry","delete","getWithStaleStatus","_entry$staleTime","age","isExpired","isStale","has","_entry$staleTime2","clear","clearPattern","pattern","regex","RegExp","keysToDelete","forEach","_","test","push","clearAll","size","subscribe","callback","Set","subscription","add","subs","subscribePattern","source","directSubs","sub","console","subKey","startsWith","keys","Array","from","getStats","values","reduce","sum","getTTL","REALTIME_TTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","response","fetch","_objectSpread","status","refreshToken","removeItem","window","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getConfiguration","getTelemetry","provisionDevice","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","is_staff","getUserDevices","userId","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","deletePreset","getGlobalSlaves","createGlobalSlave","slaveData","updateGlobalSlave","slaveId","deleteGlobalSlave","getDevices","page","pageSize","URLSearchParams","append","toString","queryString","createDevice","deviceData","updateDevice","deviceId","deleteDevice","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","updateSlave","deleteSlave","addSlavesToPreset","slaveIds","slave_ids","detachSlaveFromPreset","getFirmwareVersions","activeOnly","uploadFirmwareVersion","formData","updateFirmwareVersion","firmwareId","deleteFirmwareVersion","getDeviceUpdateLogs","getOTAConfig","updateOTAConfig","config","getOTAHealth"],"sourceRoot":""}