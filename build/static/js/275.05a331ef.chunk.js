"use strict";(self.webpackChunksmart_solar_frontend=self.webpackChunksmart_solar_frontend||[]).push([[275],{3275(e,l,s){s.r(l),s.d(l,{default:()=>d});var t=s(9379),r=s(5043),a=s(5560),n=s(8421),i=s(579);const o=e=>({0:"UINT16",1:"INT16",2:"UINT32",3:"INT32",4:"FLOAT32",5:"UINT64",6:"INT64",7:"FLOAT64",8:"BOOL",9:"STRING"}[e]||"Unknown (".concat(e,")")),d=()=>{const{isDark:e}=(0,n.D)(),[l,s]=(0,r.useState)(null),[d,c]=(0,r.useState)([]),[h,x]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),[g,p]=(0,r.useState)(!1),[v,j]=(0,r.useState)(null),[b,f]=(0,r.useState)(!1),[y,_]=(0,r.useState)(""),[A,N]=(0,r.useState)({slave_id:"",device_name:"",polling_interval_ms:5e3,timeout_ms:1e3,priority:1,enabled:!0,registers:[]}),[C,S]=(0,r.useState)({label:"",address:0,num_registers:1,function_code:3,register_type:3,data_type:0,byte_order:0,word_order:0,access_mode:0,scale_factor:1,offset:0,unit:"",decimal_places:2,category:"Electrical",high_alarm_threshold:null,low_alarm_threshold:null,description:"",enabled:!0}),[w,I]=(0,r.useState)({show:!1,slave:null}),[k,T]=(0,r.useState)({show:!1,message:""}),D=e=>{var l,s;return{id:e.id,slaveId:e.slave_id,deviceName:e.device_name,pollingIntervalMs:e.polling_interval_ms,timeoutMs:e.timeout_ms,priority:e.priority,enabled:e.enabled,configId:null!==(l=e.config_id)&&void 0!==l?l:null,configName:null!==(s=e.config_name)&&void 0!==s?s:"global",registers:(e.registers||[]).map(e=>({id:e.id,label:e.label,address:e.address,numRegisters:e.num_registers,functionCode:e.function_code,dataType:e.data_type,scaleFactor:e.scale_factor,offset:e.offset,enabled:e.enabled}))}};(0,r.useEffect)(()=>{(async()=>{try{const e=await a.K.getGlobalSlaves();c(e.map(D)),s(null),f(!0)}catch(e){m(e instanceof Error?e.message:"An error occurred")}finally{x(!1)}})()},[]);const R=async()=>{const e=b||!l||!v&&!y;if(!v){const e=parseInt(A.slave_id);if(d.find(l=>l.slaveId===e))return void m("Slave ID ".concat(e," already exists for this configuration. Please choose a different ID."))}try{const s={slave_id:parseInt(A.slave_id),device_name:A.device_name,polling_interval_ms:A.polling_interval_ms,timeout_ms:A.timeout_ms,enabled:A.enabled,registers:A.registers};if(v){const t=e?await a.K.updateGlobalSlave(v.id,s):await a.K.updateSlave(l.configId,v.slaveId,s),r=D(t);c(d.map(e=>e.id===v.id?r:e)),j(null)}else{const r=e?await a.K.createGlobalSlave(y?(0,t.A)((0,t.A)({},s),{},{config_id:y}):s):await a.K.createSlave(l.configId,s),n=D(r);c([...d,n])}p(!1),_(""),N({slave_id:"",device_name:"",polling_interval_ms:5e3,timeout_ms:1e3,priority:1,enabled:!0,registers:[]})}catch(s){m(s instanceof Error?s.message:"Failed to save slave")}};return h?(0,i.jsx)("div",{className:"loading",children:"Loading configuration..."}):(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"Slave Configuration"}),!g&&!v&&u&&(0,i.jsxs)("div",{className:"error",style:{marginBottom:"20px",padding:"10px",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",color:"#721c24"},children:[(0,i.jsx)("strong",{children:"Error:"})," ",u,(0,i.jsx)("button",{onClick:()=>m(null),style:{float:"right",background:"none",border:"none",color:"#721c24",cursor:"pointer",fontSize:"16px"},title:"Close error",children:"\xd7"})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsxs)("div",{className:"card-header",children:[(0,i.jsxs)("h2",{children:["All Slave Devices (",d.length,")"]}),(0,i.jsx)("button",{onClick:()=>{N({slave_id:"",device_name:"",polling_interval_ms:5e3,timeout_ms:1e3,priority:1,enabled:!0,registers:[]}),p(!0)},className:"btn",children:"Configure New Slave"})]}),0===d.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:[(0,i.jsx)("p",{children:"No slave devices configured yet."}),(0,i.jsx)("p",{children:'Click "Configure New Slave" to add your first slave device.'})]}):(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{textAlign:"center"},children:"Slave ID"}),(0,i.jsx)("th",{style:{textAlign:"center"},children:"Device Name"}),(0,i.jsx)("th",{style:{textAlign:"center"},children:"Config"}),(0,i.jsx)("th",{style:{textAlign:"center"},children:"Polling Interval"}),(0,i.jsx)("th",{style:{textAlign:"center"},children:"Timeout"}),(0,i.jsx)("th",{style:{textAlign:"center"},children:"Status"}),(0,i.jsx)("th",{style:{textAlign:"center"},children:"Registers"}),(0,i.jsx)("th",{style:{textAlign:"center"},children:"Actions"})]})}),(0,i.jsx)("tbody",{children:d.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{textAlign:"center"},children:e.slaveId}),(0,i.jsx)("td",{style:{textAlign:"center"},children:e.deviceName}),(0,i.jsx)("td",{style:{textAlign:"center"},children:e.configName||"global"}),(0,i.jsxs)("td",{style:{textAlign:"center"},children:[e.pollingIntervalMs,"ms"]}),(0,i.jsxs)("td",{style:{textAlign:"center"},children:[e.timeoutMs,"ms"]}),(0,i.jsx)("td",{style:{textAlign:"center"},children:(0,i.jsx)("span",{className:e.enabled?"status-online":"status-offline",children:e.enabled?"Enabled":"Disabled"})}),(0,i.jsx)("td",{style:{textAlign:"center"},children:e.registers.length}),(0,i.jsxs)("td",{style:{textAlign:"center"},children:[(0,i.jsx)("button",{onClick:()=>(e=>{N({slave_id:e.slaveId.toString(),device_name:e.deviceName,polling_interval_ms:e.pollingIntervalMs,timeout_ms:e.timeoutMs,priority:e.priority||1,enabled:e.enabled,registers:[...e.registers]}),j(e)})(e),style:{background:"none",border:"none",cursor:"pointer",margin:"0 6px",color:"#6366f1"},title:"Edit",children:(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,i.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,i.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,i.jsx)("button",{onClick:()=>(e=>{console.log("\ud83d\uddd1\ufe0f handleDeleteSlave called with slave:",e.deviceName),I({show:!0,slave:e})})(e),style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",margin:"0 6px"},title:"Delete",children:(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,i.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,i.jsx)("path",{d:"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2"}),(0,i.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,i.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})]},e.id))})]})]}),(g||v)&&(0,i.jsx)("div",{className:"modal",children:(0,i.jsxs)("div",{className:"modal-content large-modal slave-config-modal",children:[(0,i.jsx)("h3",{children:v?"Edit Slave: ".concat(v.deviceName):"Configure New Slave"}),(0,i.jsxs)("div",{className:"modal-body",children:[u&&(0,i.jsxs)("div",{className:"error",style:{marginBottom:"12px",padding:"8px",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",color:"#721c24"},children:[(0,i.jsx)("strong",{children:"Error:"})," ",u,(0,i.jsx)("button",{onClick:()=>m(null),style:{float:"right",background:"none",border:"none",color:"#721c24",cursor:"pointer",fontSize:"14px"},title:"Close error",children:"\xd7"})]}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),R()},children:[(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("h4",{className:"form-section-title",children:"Basic Information"}),(0,i.jsxs)("div",{className:"form-grid form-grid-2",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Slave ID"}),(0,i.jsx)("input",{type:"number",value:A.slave_id,onChange:e=>N((0,t.A)((0,t.A)({},A),{},{slave_id:e.target.value})),required:!0,min:"1",max:"247",placeholder:"1-247"}),(0,i.jsxs)("small",{className:"form-hint",children:["Unique identifier (1-247)",d.length>0&&(0,i.jsxs)("span",{className:"form-hint-accent",children:["Existing: ",d.map(e=>e.slaveId).join(", ")]})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Device Name"}),(0,i.jsx)("input",{type:"text",value:A.device_name,onChange:e=>N((0,t.A)((0,t.A)({},A),{},{device_name:e.target.value})),required:!0,placeholder:"e.g., Solar Inverter"})]})]})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("h4",{className:"form-section-title",children:"Communication Settings"}),(0,i.jsxs)("div",{className:"form-grid form-grid-4",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Polling Interval (ms)"}),(0,i.jsx)("input",{type:"number",value:A.polling_interval_ms,onChange:e=>N((0,t.A)((0,t.A)({},A),{},{polling_interval_ms:parseInt(e.target.value)})),min:"100",placeholder:"10000"}),(0,i.jsx)("small",{className:"form-hint",children:"How often to poll this device"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Response Timeout (ms)"}),(0,i.jsx)("input",{type:"number",value:A.timeout_ms,onChange:e=>N((0,t.A)((0,t.A)({},A),{},{timeout_ms:parseInt(e.target.value)})),min:"100",placeholder:"1000"}),(0,i.jsx)("small",{className:"form-hint",children:"Max wait for response"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Priority"}),(0,i.jsx)("input",{type:"number",value:A.priority||1,onChange:e=>N((0,t.A)((0,t.A)({},A),{},{priority:parseInt(e.target.value)})),min:"1",max:"10",placeholder:"1"}),(0,i.jsx)("small",{className:"form-hint",children:"1=Highest, 10=Lowest"})]}),(0,i.jsxs)("div",{className:"form-group checkbox-group",children:[(0,i.jsx)("label",{children:"Status"}),(0,i.jsxs)("label",{className:"checkbox-label checkbox-vertical",children:[(0,i.jsx)("input",{type:"checkbox",checked:A.enabled,onChange:e=>N((0,t.A)((0,t.A)({},A),{},{enabled:e.target.checked}))}),(0,i.jsx)("span",{className:A.enabled?"status-text-enabled":"status-text-disabled",children:A.enabled?"Enabled":"Disabled"})]})]})]})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("h4",{className:"form-section-title",children:"Register Mappings"}),(0,i.jsx)("p",{className:"form-section-desc",children:"Configure the Modbus registers to read from this slave device."}),(0,i.jsxs)("div",{className:"form-subsection",children:[(0,i.jsx)("h5",{className:"form-subsection-title",children:"Add New Register"}),(0,i.jsxs)("div",{className:"form-grid form-grid-auto",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Label *"}),(0,i.jsx)("input",{type:"text",placeholder:"e.g., Battery_Voltage",value:C.label,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{label:e.target.value})),required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Address *"}),(0,i.jsx)("input",{type:"number",placeholder:"40001",value:C.address,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{address:parseInt(e.target.value)})),min:"1",required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Num Registers"}),(0,i.jsx)("input",{type:"number",placeholder:"1",value:C.num_registers||1,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{num_registers:parseInt(e.target.value)})),min:"1",max:"125"}),(0,i.jsx)("small",{className:"form-hint",children:"Count (1-125)"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Function Code *"}),(0,i.jsxs)("select",{value:C.function_code||3,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{function_code:parseInt(e.target.value)})),children:[(0,i.jsx)("option",{value:1,children:"0x01 - Read Coils"}),(0,i.jsx)("option",{value:2,children:"0x02 - Read Discrete Inputs"}),(0,i.jsx)("option",{value:3,children:"0x03 - Read Holding Registers"}),(0,i.jsx)("option",{value:4,children:"0x04 - Read Input Registers"}),(0,i.jsx)("option",{value:5,children:"0x05 - Write Single Coil"}),(0,i.jsx)("option",{value:6,children:"0x06 - Write Single Register"}),(0,i.jsx)("option",{value:15,children:"0x0F - Write Multiple Coils"}),(0,i.jsx)("option",{value:16,children:"0x10 - Write Multiple Registers"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Data Type *"}),(0,i.jsxs)("select",{value:C.data_type,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{data_type:parseInt(e.target.value)})),children:[(0,i.jsx)("option",{value:0,children:"UINT16 (16-bit Unsigned)"}),(0,i.jsx)("option",{value:1,children:"INT16 (16-bit Signed)"}),(0,i.jsx)("option",{value:2,children:"UINT32 (32-bit Unsigned)"}),(0,i.jsx)("option",{value:3,children:"INT32 (32-bit Signed)"}),(0,i.jsx)("option",{value:4,children:"FLOAT32 (32-bit Float)"}),(0,i.jsx)("option",{value:5,children:"UINT64 (64-bit Unsigned)"}),(0,i.jsx)("option",{value:6,children:"INT64 (64-bit Signed)"}),(0,i.jsx)("option",{value:7,children:"FLOAT64 (64-bit Float)"}),(0,i.jsx)("option",{value:8,children:"BOOL (Single Bit)"}),(0,i.jsx)("option",{value:9,children:"STRING (ASCII)"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Byte Order"}),(0,i.jsxs)("select",{value:C.byte_order||0,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{byte_order:parseInt(e.target.value)})),children:[(0,i.jsx)("option",{value:0,children:"Big Endian (ABCD)"}),(0,i.jsx)("option",{value:1,children:"Little Endian (DCBA)"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Word Order"}),(0,i.jsxs)("select",{value:C.word_order||0,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{word_order:parseInt(e.target.value)})),children:[(0,i.jsx)("option",{value:0,children:"Big Endian (AB CD)"}),(0,i.jsx)("option",{value:1,children:"Little Endian (CD AB)"}),(0,i.jsx)("option",{value:2,children:"Mid-Big Endian (BA DC)"}),(0,i.jsx)("option",{value:3,children:"Mid-Little Endian (DC BA)"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Decimal Places"}),(0,i.jsx)("input",{type:"number",placeholder:"2",value:C.decimal_places||2,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{decimal_places:parseInt(e.target.value)})),min:"0",max:"6"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Access Mode"}),(0,i.jsxs)("select",{value:C.access_mode||0,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{access_mode:parseInt(e.target.value)})),children:[(0,i.jsx)("option",{value:0,children:"Read Only"}),(0,i.jsx)("option",{value:1,children:"Read/Write"}),(0,i.jsx)("option",{value:2,children:"Write Only"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Scale Factor"}),(0,i.jsx)("input",{type:"number",placeholder:"1.0",value:C.scale_factor,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{scale_factor:parseFloat(e.target.value)})),step:"0.001"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Offset"}),(0,i.jsx)("input",{type:"number",placeholder:"0.0",value:C.offset,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{offset:parseFloat(e.target.value)})),step:"0.01"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Unit"}),(0,i.jsx)("input",{type:"text",placeholder:"V, A, W, \xb0C, etc.",value:C.unit||"",onChange:e=>S((0,t.A)((0,t.A)({},C),{},{unit:e.target.value}))})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Category"}),(0,i.jsxs)("select",{value:C.category||"Grid",onChange:e=>S((0,t.A)((0,t.A)({},C),{},{category:e.target.value})),children:[(0,i.jsx)("option",{value:"Grid",children:"Grid"}),(0,i.jsx)("option",{value:"BMS",children:"BMS"}),(0,i.jsx)("option",{value:"Status",children:"Status"}),(0,i.jsx)("option",{value:"Energy",children:"Energy"}),(0,i.jsx)("option",{value:"Temperature",children:"Temperature"}),(0,i.jsx)("option",{value:"Battery",children:"Battery"}),(0,i.jsx)("option",{value:"Load",children:"Load"}),(0,i.jsx)("option",{value:"PV",children:"PV"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"High Alarm"}),(0,i.jsx)("input",{type:"number",placeholder:"Optional",value:C.high_alarm_threshold||"",onChange:e=>S((0,t.A)((0,t.A)({},C),{},{high_alarm_threshold:parseFloat(e.target.value)||null})),step:"0.01"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Low Alarm"}),(0,i.jsx)("input",{type:"number",placeholder:"Optional",value:C.low_alarm_threshold||"",onChange:e=>S((0,t.A)((0,t.A)({},C),{},{low_alarm_threshold:parseFloat(e.target.value)||null})),step:"0.01"})]}),(0,i.jsxs)("div",{className:"form-group checkbox-group",children:[(0,i.jsx)("label",{children:"Enabled"}),(0,i.jsxs)("label",{className:"checkbox-label checkbox-vertical",children:[(0,i.jsx)("input",{type:"checkbox",checked:C.enabled,onChange:e=>S((0,t.A)((0,t.A)({},C),{},{enabled:e.target.checked}))}),(0,i.jsx)("span",{children:C.enabled?"Yes":"No"})]})]}),(0,i.jsx)("div",{className:"form-group form-group-btn",children:(0,i.jsx)("button",{type:"button",onClick:()=>{const e={id:Date.now(),label:C.label,address:C.address,numRegisters:C.num_registers,functionCode:C.function_code,registerType:C.register_type,dataType:C.data_type,byteOrder:C.byte_order,wordOrder:C.word_order,accessMode:C.access_mode,scaleFactor:C.scale_factor,offset:C.offset,unit:C.unit,decimalPlaces:C.decimal_places,category:C.category,highAlarmThreshold:C.high_alarm_threshold,lowAlarmThreshold:C.low_alarm_threshold,description:C.description,enabled:C.enabled};N((0,t.A)((0,t.A)({},A),{},{registers:[...A.registers,e]})),S({label:"",address:0,num_registers:1,function_code:3,register_type:3,data_type:0,byte_order:0,word_order:0,access_mode:0,scale_factor:1,offset:0,unit:"",decimal_places:2,category:"Electrical",high_alarm_threshold:null,low_alarm_threshold:null,description:"",enabled:!0})},className:"btn btn-sm",children:"Add Register"})})]}),(0,i.jsxs)("div",{className:"form-group",style:{marginTop:"10px"},children:[(0,i.jsx)("label",{children:"Description"}),(0,i.jsx)("input",{type:"text",placeholder:"e.g., 0=Off, 1=On, 2=Standby",value:C.description||"",onChange:e=>S((0,t.A)((0,t.A)({},C),{},{description:e.target.value})),style:{width:"100%"}})]})]}),A.registers.length>0?(0,i.jsxs)("div",{className:"registers-table-wrapper",children:[(0,i.jsxs)("h5",{className:"form-subsection-title",children:["Configured Registers (",A.registers.length,")"]}),(0,i.jsxs)("table",{className:"table registers-table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Label"}),(0,i.jsx)("th",{children:"Address"}),(0,i.jsx)("th",{children:"Function"}),(0,i.jsx)("th",{children:"Data Type"}),(0,i.jsx)("th",{children:"Unit"}),(0,i.jsx)("th",{children:"Scale"}),(0,i.jsx)("th",{children:"Offset"}),(0,i.jsx)("th",{children:"Category"}),(0,i.jsx)("th",{children:"Alarms"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Actions"})]})}),(0,i.jsx)("tbody",{children:A.registers.map((e,l)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.label}),(0,i.jsx)("td",{children:e.address}),(0,i.jsx)("td",{children:e.functionCode||3}),(0,i.jsx)("td",{children:o(e.dataType)}),(0,i.jsx)("td",{children:e.unit||"-"}),(0,i.jsx)("td",{children:e.scaleFactor}),(0,i.jsx)("td",{children:e.offset}),(0,i.jsx)("td",{children:e.category||"-"}),(0,i.jsx)("td",{children:e.highAlarmThreshold||e.lowAlarmThreshold?(0,i.jsxs)("small",{children:[e.highAlarmThreshold&&"H:".concat(e.highAlarmThreshold),e.highAlarmThreshold&&e.lowAlarmThreshold&&" / ",e.lowAlarmThreshold&&"L:".concat(e.lowAlarmThreshold)]}):"-"}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:"status-badge ".concat(e.enabled?"status-badge-success":"status-badge-danger"),children:e.enabled?"Enabled":"Disabled"})}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{type:"button",onClick:()=>(e=>{N((0,t.A)((0,t.A)({},A),{},{registers:A.registers.filter((l,s)=>s!==e)}))})(l),className:"btn-icon btn-icon-danger",title:"Remove",children:"\u2715"})})]},l))})]})]}):(0,i.jsx)("div",{className:"empty-state",children:"No registers configured yet. Add registers above to define what data to read from this slave device."})]})]})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e=>{e.preventDefault(),R()},children:v?"Save Changes":"Create Slave"}),(0,i.jsx)("button",{type:"button",onClick:()=>{p(!1),j(null),_(""),N({slave_id:"",device_name:"",polling_interval_ms:5e3,timeout_ms:1e3,priority:1,enabled:!0,registers:[]})},className:"btn btn-secondary",children:"Cancel"})]})]})}),w.show&&w.slave&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},children:(0,i.jsxs)("div",{style:{background:e?"#2d2d2d":"white",borderRadius:"16px",padding:"2rem",maxWidth:"500px",width:"90%",boxShadow:e?"0 20px 60px rgba(0,0,0,0.6)":"0 20px 60px rgba(0,0,0,0.3)",border:"2px solid #dc3545",animation:"slideIn 0.2s ease-out"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[(0,i.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #dc3545 0%, #c82333 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",animation:"pulse 2s infinite"},children:"\u26a0\ufe0f"}),(0,i.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"600",margin:0,color:"#dc3545"},children:"Delete Slave Device"})]}),(0,i.jsxs)("div",{style:{marginBottom:"1.5rem",color:e?"#b0b0b0":"#495057",lineHeight:"1.6"},children:[(0,i.jsxs)("p",{style:{marginBottom:"1rem"},children:["Are you sure you want to delete slave device ",(0,i.jsx)("strong",{style:{color:e?"#e0e0e0":"#2c3e50"},children:w.slave.deviceName})," (ID: ",w.slave.slaveId,")?"]}),(0,i.jsxs)("div",{style:{background:e?"rgba(220, 53, 69, 0.1)":"#f8d7da",border:e?"1px solid rgba(220, 53, 69, 0.3)":"1px solid #f5c6cb",borderRadius:"8px",padding:"0.75rem 1rem",fontSize:"0.9rem",color:e?"#ff9999":"#721c24"},children:[(0,i.jsx)("strong",{children:"\u26a0\ufe0f Warning:"})," This will permanently delete the slave device configuration and all its register mappings."]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[(0,i.jsx)("button",{onClick:()=>I({show:!1,slave:null}),style:{background:e?"#3a3a3a":"#e0e0e0",color:e?"#e0e0e0":"#495057",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:l=>l.currentTarget.style.background=e?"#4a4a4a":"#d0d0d0",onMouseOut:l=>l.currentTarget.style.background=e?"#3a3a3a":"#e0e0e0",children:"Cancel"}),(0,i.jsx)("button",{onClick:async()=>{if(!w.slave)return;const e=b||!l;try{e?await a.K.deleteGlobalSlave(w.slave.id):await a.K.deleteSlave(l.configId,w.slave.slaveId),c(d.filter(e=>e.id!==w.slave.id)),I({show:!1,slave:null}),T({show:!0,message:'Slave device "'.concat(w.slave.deviceName,'" has been deleted successfully.')})}catch(s){m(s instanceof Error?s.message:"Failed to delete slave"),I({show:!1,slave:null})}},style:{background:"linear-gradient(135deg, #dc3545 0%, #c82333 100%)",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 12px rgba(220, 53, 69, 0.3)",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.transform="translateY(-1px)",onMouseOut:e=>e.currentTarget.style.transform="translateY(0)",children:"Yes, Delete"})]})]})}),k.show&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:(0,i.jsx)("div",{style:{background:e?"#2d2d2d":"white",borderRadius:"16px",padding:"2rem",maxWidth:"450px",width:"90%",boxShadow:e?"0 20px 60px rgba(0,0,0,0.6)":"0 20px 60px rgba(0,0,0,0.3)",border:e?"1px solid #28a745":"2px solid #28a745",animation:"slideIn 0.2s ease-out"},children:(0,i.jsxs)("div",{style:{textAlign:"center"},children:[(0,i.jsx)("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"linear-gradient(135deg, #28a745 0%, #20c997 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",margin:"0 auto 1rem",animation:"scaleIn 0.3s ease-out"},children:"\u2713"}),(0,i.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem",color:e?"#e0e0e0":"#2c3e50"},children:"Success"}),(0,i.jsx)("p",{style:{color:e?"#b0b0b0":"#495057",lineHeight:"1.6",marginBottom:"1.5rem"},children:k.message}),(0,i.jsx)("button",{onClick:()=>T({show:!1,message:""}),style:{background:"linear-gradient(135deg, #28a745 0%, #20c997 100%)",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"8px",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 12px rgba(40, 167, 69, 0.3)",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.transform="translateY(-1px)",onMouseOut:e=>e.currentTarget.style.transform="translateY(0)",children:"Got it!"})]})})})]})}}}]);
//# sourceMappingURL=275.05a331ef.chunk.js.map