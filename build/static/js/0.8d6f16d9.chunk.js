"use strict";(self.webpackChunksmart_solar_frontend=self.webpackChunksmart_solar_frontend||[]).push([[0],[(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(5043),l=s(1180),r=s(1603),n=s(9535),i=["axis"],c=(0,a.forwardRef)((e,t)=>a.createElement(n.P,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:i,tooltipPayloadSearcher:r.uN,categoricalChartProps:e,ref:t})),d=s(7734),o=s(2185),h=s(6026),x=s(379),j=s(95),m=s(5344),u=s(5560),p=s(579);const g=()=>{const[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),[g,v]=(0,a.useState)(null),[y,f]=(0,a.useState)("all"),[A,N]=(0,a.useState)("all");(0,a.useEffect)(()=>{b()},[]);const b=async()=>{try{const e=await u.K.getTelemetry();t(e),i(!1)}catch(e){v(e instanceof Error?e.message:"An error occurred"),i(!1)}};(0,a.useEffect)(()=>{let t=e;"all"!==y&&(t=t.filter(e=>e.data_type===y)),"all"!==A&&(t=t.filter(e=>e.deviceId===A)),r(t)},[e,y,A]);if(n)return(0,p.jsx)("div",{className:"loading",children:"Loading telemetry data..."});if(g)return(0,p.jsxs)("div",{className:"error",children:["Error: ",g]});const S=(()=>{const e={};return s.forEach(t=>{const s=new Date(t.timestamp).toLocaleTimeString();e[s]||(e[s]={time:s}),e[s][t.data_type]=t.value}),Object.values(e).slice(-50)})(),T=(()=>{const e={};return s.forEach(t=>{const s="".concat(t.deviceId,"-").concat(t.data_type);(!e[s]||new Date(t.timestamp)>new Date(e[s].timestamp))&&(e[s]=t)}),Object.values(e)})(),w=(()=>{if(0===s.length)return null;const e=s.map(e=>e.value);return{avg:e.reduce((e,t)=>e+t,0)/e.length,min:Math.min(...e),max:Math.max(...e),count:e.length}})(),D=Array.from(new Set(e.map(e=>e.data_type))),k=Array.from(new Set(e.map(e=>e.deviceId)));return(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{children:"Telemetry Data"}),(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("h2",{children:"Filters"}),(0,p.jsxs)("div",{className:"grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",alignItems:"start"},children:[(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Data Type:"}),(0,p.jsxs)("select",{value:y,onChange:e=>f(e.target.value),children:[(0,p.jsx)("option",{value:"all",children:"All Types"}),D.map(e=>(0,p.jsx)("option",{value:e,children:e},e))]})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"Device:"}),(0,p.jsxs)("select",{value:A,onChange:e=>N(e.target.value),children:[(0,p.jsx)("option",{value:"all",children:"All Devices"}),k.map(e=>(0,p.jsx)("option",{value:e,children:e},e))]})]})]})]}),w&&(0,p.jsxs)("div",{className:"grid",children:[(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("h3",{children:"Statistics"}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Count:"})," ",w.count]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Average:"})," ",w.avg.toFixed(2)]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Min:"})," ",w.min.toFixed(2)]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Max:"})," ",w.max.toFixed(2)]})]}),(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("h3",{children:"Latest Values"}),T.slice(0,5).map((e,t)=>(0,p.jsxs)("p",{children:[(0,p.jsxs)("strong",{children:[e.data_type,":"]})," ",e.value," ",e.unit,(0,p.jsxs)("small",{children:[" (",new Date(e.timestamp).toLocaleTimeString(),")"]})]},t))]})]}),(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("h2",{children:"Telemetry Trends"}),(0,p.jsx)("div",{className:"chart-container",children:(0,p.jsx)(l.u,{width:"100%",height:"100%",children:(0,p.jsxs)(c,{data:S,children:[(0,p.jsx)(d.d,{strokeDasharray:"3 3",stroke:"rgba(148, 163, 184, 0.1)"}),(0,p.jsx)(o.W,{dataKey:"time",stroke:"#64748b",fontSize:12}),(0,p.jsx)(h.h,{stroke:"#64748b",fontSize:12}),(0,p.jsx)(x.m,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"8px",color:"#f8fafc"}}),(0,p.jsx)(j.s,{}),D.map((e,t)=>(0,p.jsx)(m.N1,{type:"monotone",dataKey:e,stroke:"hsl(".concat(60*t+240,", 70%, 60%)"),strokeWidth:2},e))]})})})]}),(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("h2",{children:["Raw Data (",s.length," records)"]}),(0,p.jsxs)("table",{className:"table",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{style:{textAlign:"center"},children:"Device"}),(0,p.jsx)("th",{style:{textAlign:"center"},children:"Data Type"}),(0,p.jsx)("th",{style:{textAlign:"center"},children:"Value"}),(0,p.jsx)("th",{style:{textAlign:"center"},children:"Unit"}),(0,p.jsx)("th",{style:{textAlign:"center"},children:"Timestamp"}),(0,p.jsx)("th",{style:{textAlign:"center"},children:"Quality"})]})}),(0,p.jsx)("tbody",{children:s.slice(-100).reverse().map((e,t)=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{textAlign:"center"},children:e.deviceId}),(0,p.jsx)("td",{style:{textAlign:"center"},children:e.data_type}),(0,p.jsx)("td",{style:{textAlign:"center"},children:e.value}),(0,p.jsx)("td",{style:{textAlign:"center"},children:e.unit}),(0,p.jsx)("td",{style:{textAlign:"center"},children:new Date(e.timestamp).toLocaleString()}),(0,p.jsx)("td",{style:{textAlign:"center"},children:(0,p.jsx)("span",{className:"good"===e.quality?"status-online":"status-offline",children:e.quality})})]},t))})]})]})]})}}]]);
//# sourceMappingURL=0.8d6f16d9.chunk.js.map