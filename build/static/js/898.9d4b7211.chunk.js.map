{"version":3,"file":"static/js/898.9d4b7211.chunk.js","mappings":"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","sources":["components/Employees.tsx","services/cacheService.ts","services/api.ts","components/AuditTrail.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { apiService } from '../services/api';\r\nimport AuditTrail from './AuditTrail';\r\n\r\ninterface Employee {\r\n  id: number;\r\n  username: string;\r\n  email: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  mobile_number?: string;\r\n  address?: string;\r\n  is_staff: boolean;\r\n  is_superuser: boolean;\r\n  date_joined: string;\r\n  created_by_username?: string;\r\n  created_at?: string;\r\n  updated_by_username?: string;\r\n  updated_at?: string;\r\n}\r\n\r\nconst Employees: React.FC = () => {\r\n  const [employees, setEmployees] = useState<Employee[]>([]);\r\n  const [filteredEmployees, setFilteredEmployees] = useState<Employee[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [editingEmployee, setEditingEmployee] = useState<Employee | null>(null);\r\n  const [creatingEmployee, setCreatingEmployee] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [editForm, setEditForm] = useState({\r\n    first_name: '',\r\n    last_name: '',\r\n    email: '',\r\n    mobile_number: '',\r\n    address: '',\r\n  });\r\n  const [createForm, setCreateForm] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    first_name: '',\r\n    last_name: '',\r\n    mobile_number: '',\r\n    address: '',\r\n    is_staff: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchEmployees();\r\n  }, []);\r\n\r\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedSearchTerm(searchTerm);\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [searchTerm]);\r\n\r\n  useEffect(() => {\r\n    fetchEmployees(debouncedSearchTerm);\r\n  }, [debouncedSearchTerm]);\r\n\r\n  const fetchEmployees = async (search?: string) => {\r\n    try {\r\n      const data = await apiService.getUsers(search);\r\n      // Filter only staff users (employees) but exclude superusers/admins\r\n      const staffData = data.filter((user: any) => user.is_staff && !user.is_superuser);\r\n      setEmployees(staffData);\r\n      setFilteredEmployees(staffData);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  const handleEdit = (employee: Employee) => {\r\n    setEditingEmployee(employee);\r\n    setEditForm({\r\n      first_name: employee.first_name,\r\n      last_name: employee.last_name,\r\n      email: employee.email,\r\n      mobile_number: employee.mobile_number || '',\r\n      address: employee.address || '',\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editingEmployee) return;\r\n\r\n    try {\r\n      await apiService.updateUser(editingEmployee.id, editForm);\r\n      setEditingEmployee(null);\r\n      // Refetch to get the updated employee with audit trail fields\r\n      await fetchEmployees(searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update employee');\r\n    }\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    try {\r\n      await apiService.createEmployee(createForm);\r\n      setCreatingEmployee(false);\r\n      setCreateForm({\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        first_name: '',\r\n        last_name: '',\r\n        mobile_number: '',\r\n        address: '',\r\n        is_staff: true,\r\n      });\r\n      // Refetch to get the new employee with all fields including audit trail\r\n      await fetchEmployees(searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to create employee');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (employee: Employee) => {\r\n    if (window.confirm(`Are you sure you want to delete employee ${employee.username}?`)) {\r\n      try {\r\n        await apiService.deleteUser(employee.id);\r\n        // Refetch to update the list\r\n        await fetchEmployees(searchTerm);\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Failed to delete employee');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingEmployee(null);\r\n    setCreatingEmployee(false);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading employees...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Employee Management</h1>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>Employees ({filteredEmployees.length})</h2>\r\n          <div className=\"card-actions\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search employees...\"\r\n              value={searchTerm}\r\n              onChange={handleSearch}\r\n              className=\"search-input\"\r\n            />\r\n            <button onClick={() => setCreatingEmployee(true)} className=\"btn\">\r\n              Add New Employee\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'center' }}>Name</th>\r\n              <th style={{ textAlign: 'center' }}>Username</th>\r\n              <th style={{ textAlign: 'center' }}>Email</th>\r\n              <th style={{ textAlign: 'center' }}>Mobile</th>\r\n              <th style={{ textAlign: 'center' }}>Joined</th>\r\n              <th style={{ textAlign: 'center' }}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredEmployees.map((employee) => (\r\n              <tr key={employee.id}>\r\n                <td>{employee.first_name} {employee.last_name}</td>\r\n                <td>{employee.username}</td>\r\n                <td>{employee.email}</td>\r\n                <td>{employee.mobile_number || '-'}</td>\r\n                <td>\r\n                  {(() => {\r\n                    if (!employee.date_joined) return 'N/A';\r\n                    const date = new Date(employee.date_joined);\r\n                    return isNaN(date.getTime()) ? 'Invalid Date' : date.toLocaleDateString();\r\n                  })()}\r\n                </td>\r\n                <td>\r\n                  <button onClick={() => handleEdit(employee)} style={{ background: 'none', border: 'none', cursor: 'pointer' }} title=\"Edit\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                      <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                    </svg>\r\n                  </button>\r\n                  <button onClick={() => handleDelete(employee)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'red' }} title=\"Delete\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                      <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                      <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                      <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                    </svg>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {(editingEmployee || creatingEmployee) && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <h3>{editingEmployee ? `Edit Employee: ${editingEmployee.username}` : 'Add New Employee'}</h3>\r\n            <form onSubmit={(e) => { e.preventDefault(); editingEmployee ? handleSave() : handleCreate(); }}>\r\n              <div className=\"modal-body\">\r\n                {creatingEmployee && (\r\n                  <>\r\n                    <input type=\"text\" autoComplete=\"username\" style={{display: 'none'}} />\r\n                    <input type=\"password\" autoComplete=\"current-password\" style={{display: 'none'}} />\r\n                    <div className=\"form-group\">\r\n                      <label>Username:</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={createForm.username}\r\n                        onChange={(e) => setCreateForm({...createForm, username: e.target.value})}\r\n                        required\r\n                        autoComplete=\"off\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Password:</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        value={createForm.password}\r\n                        onChange={(e) => setCreateForm({...createForm, password: e.target.value})}\r\n                        required\r\n                        autoComplete=\"new-password\"\r\n                      />\r\n                    </div>\r\n                  </>\r\n                )}\r\n                <div className=\"form-group\">\r\n                  <label>First Name:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editingEmployee ? editForm.first_name : createForm.first_name}\r\n                    onChange={(e) => editingEmployee ? setEditForm({...editForm, first_name: e.target.value}) : setCreateForm({...createForm, first_name: e.target.value})}\r\n                    required\r\n                    autoComplete=\"off\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Last Name:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editingEmployee ? editForm.last_name : createForm.last_name}\r\n                    onChange={(e) => editingEmployee ? setEditForm({...editForm, last_name: e.target.value}) : setCreateForm({...createForm, last_name: e.target.value})}\r\n                    required\r\n                    autoComplete=\"off\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Email:</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={editingEmployee ? editForm.email : createForm.email}\r\n                    onChange={(e) => editingEmployee ? setEditForm({...editForm, email: e.target.value}) : setCreateForm({...createForm, email: e.target.value})}\r\n                    required\r\n                    autoComplete=\"off\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Mobile Number:</label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    value={editingEmployee ? editForm.mobile_number : createForm.mobile_number}\r\n                    onChange={(e) => editingEmployee ? setEditForm({...editForm, mobile_number: e.target.value}) : setCreateForm({...createForm, mobile_number: e.target.value})}\r\n                    autoComplete=\"off\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Address:</label>\r\n                  <textarea\r\n                    value={editingEmployee ? editForm.address : createForm.address}\r\n                    onChange={(e) => editingEmployee ? setEditForm({...editForm, address: e.target.value}) : setCreateForm({...createForm, address: e.target.value})}\r\n                    autoComplete=\"off\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              {editingEmployee && (\r\n                <AuditTrail\r\n                  createdBy={editingEmployee.created_by_username}\r\n                  createdAt={editingEmployee.created_at}\r\n                  updatedBy={editingEmployee.updated_by_username}\r\n                  updatedAt={editingEmployee.updated_at}\r\n                />\r\n              )}\r\n              <div className=\"form-actions\">\r\n                <button type=\"submit\" className=\"btn\">{editingEmployee ? 'Save' : 'Create'}</button>\r\n                <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Employees;\r\n","/**\r\n * Simple in-memory cache service for API responses\r\n * Reduces unnecessary API calls and speeds up page loads\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n\r\n  /**\r\n   * Set a cache entry\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' = 'short'): number {\r\n    return type === 'long' ? CacheService.LONG_TTL : CacheService.DEFAULT_TTL;\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Generic HTTP methods\r\n  async get(endpoint: string): Promise<any> {\r\n    const response = await this.request(endpoint, {\r\n      method: 'GET',\r\n    });\r\n    return response;\r\n  }\r\n\r\n  async post(endpoint: string, data?: any, options: RequestInit = {}): Promise<any> {\r\n    const requestOptions: RequestInit = {\r\n      method: 'POST',\r\n      ...options,\r\n    };\r\n\r\n    if (data && !(data instanceof FormData)) {\r\n      requestOptions.body = JSON.stringify(data);\r\n    } else if (data instanceof FormData) {\r\n      requestOptions.body = data;\r\n      // Remove Content-Type header for FormData to let browser set it with boundary\r\n      const headers = { ...this.getAuthHeaders() };\r\n      delete (headers as any)['Content-Type'];\r\n      requestOptions.headers = {\r\n        ...headers,\r\n        ...options.headers,\r\n      };\r\n    }\r\n\r\n    return this.request(endpoint, requestOptions);\r\n  }\r\n\r\n  async put(endpoint: string, data?: any): Promise<any> {\r\n    return this.request(endpoint, {\r\n      method: 'PUT',\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  }\r\n\r\n  async delete(endpoint: string): Promise<any> {\r\n    return this.request(endpoint, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();","import React from 'react';\r\n\r\ninterface AuditTrailProps {\r\n  createdBy?: string | null;\r\n  createdAt?: string;\r\n  updatedBy?: string | null;\r\n  updatedAt?: string;\r\n  className?: string;\r\n}\r\n\r\nconst AuditTrail: React.FC<AuditTrailProps> = ({\r\n  createdBy,\r\n  createdAt,\r\n  updatedBy,\r\n  updatedAt,\r\n  className = 'audit-trail',\r\n}) => {\r\n  const formatDate = (dateString?: string) => {\r\n    if (!dateString) return 'N/A';\r\n    try {\r\n      return new Date(dateString).toLocaleString();\r\n    } catch {\r\n      return dateString;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"audit-row\">\r\n        <span className=\"audit-label\">Created:</span>\r\n        {createdBy ? (\r\n          <span className=\"audit-value\">\r\n            by <strong>{createdBy}</strong> on {formatDate(createdAt)}\r\n          </span>\r\n        ) : (\r\n          <span className=\"audit-value\">System</span>\r\n        )}\r\n      </div>\r\n\r\n      {updatedBy && (\r\n        <div className=\"audit-row\">\r\n          <span className=\"audit-label\">Last Updated:</span>\r\n          <span className=\"audit-value\">\r\n            by <strong>{updatedBy}</strong> on {formatDate(updatedAt)}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuditTrail;\r\n"],"names":["Employees","employees","setEmployees","useState","filteredEmployees","setFilteredEmployees","loading","setLoading","error","setError","editingEmployee","setEditingEmployee","creatingEmployee","setCreatingEmployee","searchTerm","setSearchTerm","editForm","setEditForm","first_name","last_name","email","mobile_number","address","createForm","setCreateForm","username","password","is_staff","useEffect","fetchEmployees","debouncedSearchTerm","setDebouncedSearchTerm","timer","setTimeout","clearTimeout","async","staffData","apiService","getUsers","search","filter","user","is_superuser","err","Error","message","_jsx","className","children","_jsxs","length","type","placeholder","value","onChange","e","target","onClick","style","textAlign","map","employee","date_joined","date","Date","isNaN","getTime","toLocaleDateString","handleEdit","background","border","cursor","title","width","height","viewBox","fill","stroke","strokeWidth","d","window","confirm","concat","deleteUser","id","handleDelete","color","points","x1","y1","x2","y2","onSubmit","preventDefault","updateUser","handleSave","createEmployee","handleCreate","_Fragment","autoComplete","display","_objectSpread","required","AuditTrail","createdBy","created_by_username","createdAt","created_at","updatedBy","updated_by_username","updatedAt","updated_at","handleCancel","CacheService","constructor","cache","Map","set","key","data","ttlMs","arguments","undefined","DEFAULT_TTL","this","timestamp","now","expiresIn","get","entry","delete","has","clear","clearAll","size","getTTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","console","request","endpoint","options","url","headers","response","fetch","status","refreshToken","removeItem","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","post","requestOptions","FormData","put","getConfiguration","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","params","encodeURIComponent","createUser","userData","result","employeeData","getUserDevices","userId","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","deletePreset","getDevices","page","pageSize","URLSearchParams","append","toString","queryString","createDevice","deviceData","updateDevice","deviceId","deleteDevice","deleteDevicesBulk","deviceIds","device_ids","getSlaves","configId","createSlave","slaveData","updateSlave","slaveId","deleteSlave","_ref","formatDate","dateString","toLocaleString","_unused"],"ignoreList":[],"sourceRoot":""}