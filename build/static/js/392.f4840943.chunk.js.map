{"version":3,"file":"static/js/392.f4840943.chunk.js","mappings":"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","sources":["components/AuditTrail.tsx","hooks/useDebounce.ts","components/Devices.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React from 'react';\r\n\r\ninterface AuditTrailProps {\r\n  createdBy?: string | null;\r\n  createdAt?: string;\r\n  updatedBy?: string | null;\r\n  updatedAt?: string;\r\n  className?: string;\r\n}\r\n\r\nconst AuditTrail: React.FC<AuditTrailProps> = ({\r\n  createdBy,\r\n  createdAt,\r\n  updatedBy,\r\n  updatedAt,\r\n  className = 'audit-trail',\r\n}) => {\r\n  const formatDate = (dateString?: string) => {\r\n    if (!dateString) return 'N/A';\r\n    try {\r\n      return new Date(dateString).toLocaleString();\r\n    } catch {\r\n      return dateString;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"audit-row\">\r\n        <span className=\"audit-label\">Created:</span>\r\n        {createdBy ? (\r\n          <span className=\"audit-value\">\r\n            by <strong>{createdBy}</strong> on {formatDate(createdAt)}\r\n          </span>\r\n        ) : (\r\n          <span className=\"audit-value\">System</span>\r\n        )}\r\n      </div>\r\n\r\n      {updatedBy && (\r\n        <div className=\"audit-row\">\r\n          <span className=\"audit-label\">Last Updated:</span>\r\n          <span className=\"audit-value\">\r\n            by <strong>{updatedBy}</strong> on {formatDate(updatedAt)}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(AuditTrail);\r\n","import { useState, useEffect, useCallback } from 'react';\r\n\r\ninterface UseDebouncedValueOptions {\r\n  delay?: number;\r\n}\r\n\r\n/**\r\n * Custom hook to debounce a value with a delay\r\n * Useful for search inputs and other frequent updates\r\n */\r\nexport function useDebouncedValue<T>(\r\n  value: T,\r\n  options: UseDebouncedValueOptions = {}\r\n): T {\r\n  const { delay = 300 } = options;\r\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n}\r\n\r\n/**\r\n * Custom hook to debounce a callback function\r\n * Useful for search, filtering, and other expensive operations\r\n */\r\nexport function useDebouncedCallback<T extends (...args: any[]) => any>(\r\n  callback: T,\r\n  delay: number = 300\r\n): (...args: Parameters<T>) => void {\r\n  const [timeoutId, setTimeoutId] = useState<NodeJS.Timeout | null>(null);\r\n\r\n  const debouncedCallback = useCallback(\r\n    (...args: Parameters<T>) => {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n\r\n      const newTimeoutId = setTimeout(() => {\r\n        callback(...args);\r\n      }, delay);\r\n\r\n      setTimeoutId(newTimeoutId);\r\n    },\r\n    [callback, delay, timeoutId]\r\n  );\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n    };\r\n  }, [timeoutId]);\r\n\r\n  return debouncedCallback;\r\n}\r\n\r\n/**\r\n * Custom hook for search input with debouncing\r\n * Returns a hook that handles search input changes with built-in debouncing\r\n */\r\nexport function useDebouncedSearch(\r\n  onSearch: (query: string) => void,\r\n  delay: number = 300\r\n) {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const debouncedCallback = useDebouncedCallback(onSearch, delay);\r\n\r\n  const handleSearch = useCallback(\r\n    (query: string) => {\r\n      setSearchQuery(query);\r\n      debouncedCallback(query);\r\n    },\r\n    [debouncedCallback]\r\n  );\r\n\r\n  return {\r\n    searchQuery,\r\n    setSearchQuery,\r\n    handleSearch,\r\n  };\r\n}\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { apiService } from '../services/api';\r\nimport { useDebouncedCallback } from '../hooks/useDebounce';\r\nimport AuditTrail from './AuditTrail';\r\n\r\ninterface User {\r\n  id: number;\r\n  username: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  is_staff: boolean;\r\n  is_superuser: boolean;\r\n}\r\n\r\ninterface Device {\r\n  id: number;\r\n  device_serial: string;\r\n  user?: string;\r\n  provisioned_at: string;\r\n  config_version?: string;\r\n  created_by_username?: string;\r\n  created_at?: string;\r\n  updated_by_username?: string;\r\n  updated_at?: string;\r\n}\r\n\r\ninterface Preset {\r\n  id: number;\r\n  config_id?: string;\r\n  name: string;\r\n  gateway_configuration?: {\r\n    general_settings?: {\r\n      config_id?: string;\r\n    };\r\n  };\r\n}\r\n\r\ninterface SystemHealthData {\r\n  total_devices: number;\r\n  active_devices: number;\r\n  total_telemetry_points: number;\r\n  uptime_seconds: number;\r\n  database_status: string;\r\n  mqtt_status: string;\r\n  overall_health: string;\r\n}\r\n\r\ninterface TelemetryData {\r\n  deviceId: string;\r\n  timestamp: string;\r\n  data_type: string;\r\n  value: number;\r\n  unit: string;\r\n}\r\n\r\ninterface TelemetrySummary {\r\n  totalPoints: number;\r\n  deviceCount: number;\r\n  latestTimestamp: string | null;\r\n}\r\n\r\nconst Devices: React.FC = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const [devices, setDevices] = useState<Device[]>([]);\r\n  const [filteredDevices, setFilteredDevices] = useState<Device[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [editingDevice, setEditingDevice] = useState<Device | null>(null);\r\n  const [creatingDevice, setCreatingDevice] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [userSearchTerm, setUserSearchTerm] = useState('');\r\n  const [filteredUsers, setFilteredUsers] = useState<User[]>([]);\r\n  const [showUserDropdown, setShowUserDropdown] = useState(false);\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [selectedDevices, setSelectedDevices] = useState<Set<number>>(new Set());\r\n  const [bulkDeleteLoading, setBulkDeleteLoading] = useState(false);\r\n  // Pagination state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(25);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [presets, setPresets] = useState<Preset[]>([]);\r\n  const [presetsLoading, setPresetsLoading] = useState(true);\r\n  const [health, setHealth] = useState<SystemHealthData | null>(null);\r\n  const [telemetrySummary, setTelemetrySummary] = useState<TelemetrySummary | null>(null);\r\n  const [telemetryData, setTelemetryData] = useState<TelemetryData[]>([]);\r\n  const [dashboardError, setDashboardError] = useState<string | null>(null);\r\n  const [selectedDevice, setSelectedDevice] = useState<Device | null>(null);\r\n  const [editForm, setEditForm] = useState({\r\n    device_serial: '',\r\n    user: '',\r\n    config_version: '',\r\n  });\r\n  const [createForm, setCreateForm] = useState({\r\n    device_serial: '',\r\n    user: '',\r\n    config_version: '',\r\n  });\r\n\r\n  const fetchDevices = useCallback(async (page: number = 1, search: string = '') => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await apiService.getDevices(search || undefined, page, pageSize);\r\n      \r\n      // Handle paginated response\r\n      if (response.results) {\r\n        setDevices(response.results);\r\n        setFilteredDevices(response.results);\r\n        setTotalCount(response.count);\r\n        setTotalPages(response.total_pages);\r\n        setCurrentPage(response.current_page);\r\n      } else {\r\n        // Fallback for non-paginated response\r\n        setDevices(Array.isArray(response) ? response : []);\r\n        setFilteredDevices(Array.isArray(response) ? response : []);\r\n        setTotalCount(Array.isArray(response) ? response.length : 0);\r\n        setTotalPages(1);\r\n        setCurrentPage(1);\r\n      }\r\n      \r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  }, [pageSize]);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const data: User[] = await apiService.getUsers();\r\n      // Filter out staff and superusers, only showing regular customers\r\n      const customers = data.filter(user => !user.is_staff && !user.is_superuser);\r\n      setUsers(customers);\r\n    } catch (err) {\r\n      console.error('Failed to fetch users:', err);\r\n      setError('Failed to load users for device assignment');\r\n    }\r\n  };\r\n\r\n  const fetchPresets = async () => {\r\n    try {\r\n      const data = await apiService.getPresets();\r\n      setPresets(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      console.error('Failed to fetch presets:', err);\r\n    } finally {\r\n      setPresetsLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      const [healthData, telemetryData] = await Promise.all([\r\n        apiService.getSystemHealth(),\r\n        apiService.getTelemetry(),\r\n      ]);\r\n\r\n      setHealth(healthData || null);\r\n\r\n      const telemetryArray = Array.isArray(telemetryData) ? telemetryData : [];\r\n      setTelemetryData(telemetryArray);\r\n      const latest = telemetryArray.reduce<string | null>((currentLatest, item) => {\r\n        if (!item?.timestamp) return currentLatest;\r\n        const itemDate = new Date(item.timestamp);\r\n        if (Number.isNaN(itemDate.getTime())) return currentLatest;\r\n        if (!currentLatest) return item.timestamp;\r\n        const currentDate = new Date(currentLatest);\r\n        return itemDate > currentDate ? item.timestamp : currentLatest;\r\n      }, null);\r\n\r\n      const deviceCount = new Set(telemetryArray.map((item: TelemetryData) => item.deviceId)).size;\r\n      setTelemetrySummary({\r\n        totalPoints: telemetryArray.length,\r\n        deviceCount,\r\n        latestTimestamp: latest,\r\n      });\r\n    } catch (err) {\r\n      console.error('Failed to fetch dashboard data:', err);\r\n      setDashboardError('Failed to load device dashboards');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n    fetchPresets();\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const deviceIdParam = searchParams.get('deviceId');\r\n    if (deviceIdParam) {\r\n      const deviceId = parseInt(deviceIdParam, 10);\r\n      if (!isNaN(deviceId)) {\r\n        const foundDevice = devices.find(d => d.id === deviceId);\r\n        if (foundDevice) {\r\n          setSelectedDevice(foundDevice);\r\n        }\r\n      }\r\n    }\r\n  }, [searchParams, devices]);\r\n  \r\n  useEffect(() => {\r\n    fetchDevices(currentPage, searchTerm);\r\n  }, [currentPage, searchTerm, pageSize, fetchDevices]);\r\n  \r\n  useEffect(() => {\r\n    const handleClickOutside = () => {\r\n      setShowUserDropdown(false);\r\n    };\r\n\r\n    if (showUserDropdown) {\r\n      document.addEventListener('click', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n    };\r\n  }, [showUserDropdown]);\r\n\r\n  useEffect(() => {\r\n    if (userSearchTerm.trim() === '') {\r\n      setFilteredUsers(users);\r\n    } else {\r\n      const searchLower = userSearchTerm.toLowerCase();\r\n      const filtered = users.filter(user => {\r\n        const fullName = `${user.first_name} ${user.last_name}`.toLowerCase();\r\n        return (\r\n          user.username.toLowerCase().includes(searchLower) ||\r\n          user.first_name.toLowerCase().includes(searchLower) ||\r\n          user.last_name.toLowerCase().includes(searchLower) ||\r\n          fullName.includes(searchLower) ||\r\n          user.email.toLowerCase().includes(searchLower)\r\n        );\r\n      });\r\n      setFilteredUsers(filtered);\r\n    }\r\n  }, [users, userSearchTerm]);\r\n\r\n  // Debounced search function that runs the actual search after 300ms of inactivity\r\n  const debouncedSearch = useDebouncedCallback(\r\n    (query: string) => {\r\n      // The actual search happens via useEffect that watches currentPage and searchTerm\r\n      // This ensures we don't make too many API calls\r\n    },\r\n    300\r\n  );\r\n\r\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const query = e.target.value;\r\n    setSearchTerm(query);\r\n    setCurrentPage(1);  // Reset to page 1 on new search\r\n    debouncedSearch(query);  // Debounce the search\r\n  };\r\n\r\n  const handleEdit = (device: Device) => {\r\n    setEditingDevice(device);\r\n    setEditForm({\r\n      device_serial: device.device_serial,\r\n      user: device.user || '',\r\n      config_version: device.config_version || '',\r\n    });\r\n    setUserSearchTerm(device.user ? `${users.find(u => u.username === device.user)?.first_name} ${users.find(u => u.username === device.user)?.last_name} (${device.user})` : '');\r\n    setShowUserDropdown(false);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!editingDevice) return;\r\n\r\n    try {\r\n      await apiService.updateDevice(editingDevice.id, editForm);\r\n      setEditingDevice(null);\r\n      // Refetch to get the updated device with all fields including audit trail\r\n      await fetchDevices(currentPage, searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update device');\r\n    }\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    try {\r\n      await apiService.createDevice(createForm);\r\n      setCreatingDevice(false);\r\n      setCreateForm({\r\n        device_serial: '',\r\n        user: '',\r\n        config_version: '',\r\n      });\r\n      // Refetch to get the new device with all fields including audit trail\r\n      await fetchDevices(currentPage, searchTerm);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to create device');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (device: any) => {\r\n    if (window.confirm(`Are you sure you want to delete device ${device.device_serial}?`)) {\r\n      try {\r\n        await apiService.deleteDevice(device.id);\r\n        const updatedDevices = devices.filter(d => d.id !== device.id);\r\n        setDevices(updatedDevices);\r\n        setFilteredDevices(updatedDevices);\r\n      } catch (err) {\r\n        console.error('Delete error:', err);\r\n        setError(err instanceof Error ? err.message : 'Failed to delete device');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSelectDevice = (deviceId: number) => {\r\n    const newSelected = new Set(selectedDevices);\r\n    if (newSelected.has(deviceId)) {\r\n      newSelected.delete(deviceId);\r\n    } else {\r\n      newSelected.add(deviceId);\r\n    }\r\n    setSelectedDevices(newSelected);\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedDevices.size === filteredDevices.length) {\r\n      setSelectedDevices(new Set());\r\n    } else {\r\n      const allIds = new Set(filteredDevices.map(d => d.id));\r\n      setSelectedDevices(allIds);\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedDevices.size === 0) {\r\n      setError('No devices selected for deletion');\r\n      return;\r\n    }\r\n\r\n    const deviceList = Array.from(selectedDevices)\r\n      .map(id => devices.find(d => d.id === id))\r\n      .filter(Boolean);\r\n\r\n    const confirmMessage = `Are you sure you want to delete ${selectedDevices.size} device(s)?\\n\\n${deviceList.map(d => d?.device_serial).join(', ')}`;\r\n\r\n    if (window.confirm(confirmMessage)) {\r\n      try {\r\n        setBulkDeleteLoading(true);\r\n        await apiService.deleteDevicesBulk(Array.from(selectedDevices));\r\n        \r\n        const updatedDevices = devices.filter(d => !selectedDevices.has(d.id));\r\n        setDevices(updatedDevices);\r\n        setFilteredDevices(updatedDevices.filter(d => \r\n          d.device_serial.toLowerCase().includes(searchTerm.toLowerCase())\r\n        ));\r\n        setSelectedDevices(new Set());\r\n        setBulkDeleteLoading(false);\r\n      } catch (err) {\r\n        setBulkDeleteLoading(false);\r\n        console.error('Bulk delete error:', err);\r\n        setError(err instanceof Error ? err.message : 'Failed to delete devices');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditingDevice(null);\r\n    setCreatingDevice(false);\r\n    setUserSearchTerm('');\r\n    setShowUserDropdown(false);\r\n  };\r\n\r\n  const handleViewDevice = (device: Device) => {\r\n    setSelectedDevice(device);\r\n  };\r\n\r\n  const handleBackToList = () => {\r\n    setSelectedDevice(null);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading devices...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  const getPresetConfigId = (preset: Preset): string => {\r\n    return preset.gateway_configuration?.general_settings?.config_id || preset.config_id || '';\r\n  };\r\n\r\n  if (selectedDevice) {\r\n    const deviceTelemetry = telemetryData.filter((entry) => entry.deviceId === selectedDevice.device_serial);\r\n    const latestTelemetry = deviceTelemetry.reduce<string | null>((currentLatest, item) => {\r\n      if (!item?.timestamp) return currentLatest;\r\n      const itemDate = new Date(item.timestamp);\r\n      if (Number.isNaN(itemDate.getTime())) return currentLatest;\r\n      if (!currentLatest) return item.timestamp;\r\n      const currentDate = new Date(currentLatest);\r\n      return itemDate > currentDate ? item.timestamp : currentLatest;\r\n    }, null);\r\n\r\n    return (\r\n      <div>\r\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '20px' }}>\r\n          <button\r\n            onClick={handleBackToList}\r\n            className=\"btn btn-secondary\"\r\n            style={{ marginRight: '15px' }}\r\n          >\r\n             Back to Devices\r\n          </button>\r\n          <h1 style={{ margin: 0 }}>{selectedDevice.device_serial} Dashboard</h1>\r\n        </div>\r\n\r\n        <div className=\"card\" style={{ marginBottom: '20px' }}>\r\n          <div className=\"card-header\">\r\n            <h2>Device Details</h2>\r\n            <button onClick={() => handleEdit(selectedDevice)} className=\"btn\">\r\n              Edit Device\r\n            </button>\r\n          </div>\r\n          <div style={{ padding: '20px' }}>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '15px' }}>\r\n              <div>\r\n                <strong>Assigned User:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedDevice.user || '-'}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Config Version:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedDevice.config_version || '-'}</p>\r\n              </div>\r\n              <div>\r\n                <strong>Provisioned At:</strong>\r\n                <p style={{ margin: '5px 0' }}>\r\n                  {selectedDevice.provisioned_at\r\n                    ? new Date(selectedDevice.provisioned_at).toLocaleDateString()\r\n                    : 'N/A'}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <strong>Created By:</strong>\r\n                <p style={{ margin: '5px 0' }}>{selectedDevice.created_by_username || '-'}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2\" style={{ gap: 'var(--space-6, 24px)' }}>\r\n          <div className=\"card\">\r\n            <h2>System Health</h2>\r\n            {dashboardError && <p className=\"error\">{dashboardError}</p>}\r\n            {!dashboardError && !health && <p>Loading system health...</p>}\r\n            {health && (\r\n              <div>\r\n                <p><strong>Overall:</strong> {health.overall_health}</p>\r\n                <p><strong>Devices:</strong> {health.active_devices}/{health.total_devices} active</p>\r\n                <p><strong>Telemetry Points:</strong> {health.total_telemetry_points.toLocaleString()}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"card\">\r\n            <h2>Telemetry Snapshot</h2>\r\n            {dashboardError && <p className=\"error\">{dashboardError}</p>}\r\n            {!dashboardError && !telemetrySummary && <p>Loading telemetry...</p>}\r\n            {telemetrySummary && (\r\n              <div>\r\n                <p><strong>Total Points:</strong> {deviceTelemetry.length.toLocaleString()}</p>\r\n                <p><strong>Data Types:</strong> {new Set(deviceTelemetry.map((entry) => entry.data_type)).size}</p>\r\n                <p><strong>Latest:</strong> {latestTelemetry ? new Date(latestTelemetry).toLocaleString() : 'N/A'}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {editingDevice && (\r\n          <div className=\"modal\">\r\n            <div className=\"modal-content\">\r\n              <h3>{editingDevice ? `Edit Device: ${editingDevice.device_serial}` : 'Register New Device'}</h3>\r\n              <form onSubmit={(e) => { e.preventDefault(); editingDevice ? handleSave() : handleCreate(); }}>\r\n                <div className=\"modal-body\">\r\n                  \r\n                  {/* Device Identity */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Device Identity</h4>\r\n                    <div className=\"form-grid\">\r\n                      <div className=\"form-group\">\r\n                        <label>Device Serial Number</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingDevice ? editForm.device_serial : createForm.device_serial}\r\n                          onChange={(e) => editingDevice ? setEditForm({...editForm, device_serial: e.target.value}) : setCreateForm({...createForm, device_serial: e.target.value})}\r\n                          required\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"SN-12345678\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Ownership */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Ownership & Assignment</h4>\r\n                    <div className=\"form-grid\">\r\n                      <div className=\"form-group\">\r\n                        <label>Assigned User</label>\r\n                        <div style={{ position: 'relative' }} onClick={(e) => e.stopPropagation()}>\r\n                          <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search by name, username, or email...\"\r\n                            value={userSearchTerm}\r\n                            onChange={(e) => {\r\n                              setUserSearchTerm(e.target.value);\r\n                              setShowUserDropdown(true);\r\n                            }}\r\n                            onFocus={() => setShowUserDropdown(true)}\r\n                            autoComplete=\"off\"\r\n                            className=\"full-width\"\r\n                          />\r\n                          {showUserDropdown && (\r\n                            <div style={{\r\n                              position: 'absolute',\r\n                              top: '100%',\r\n                              left: '0',\r\n                              right: '0',\r\n                              background: 'var(--bg-secondary, #1e293b)',\r\n                              border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                              borderRadius: '6px',\r\n                              marginTop: '4px',\r\n                              maxHeight: '200px',\r\n                              overflowY: 'auto',\r\n                              zIndex: 10,\r\n                              boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)'\r\n                            }}>\r\n                              {filteredUsers.length > 0 ? (\r\n                                filteredUsers.map((user) => (\r\n                                  <div\r\n                                    key={user.id}\r\n                                    onClick={() => {\r\n                                      if (editingDevice) {\r\n                                        setEditForm({...editForm, user: user.username});\r\n                                      } else {\r\n                                        setCreateForm({...createForm, user: user.username});\r\n                                      }\r\n                                      setUserSearchTerm(`${user.first_name} ${user.last_name} (${user.username})`);\r\n                                      setShowUserDropdown(false);\r\n                                    }}\r\n                                    style={{\r\n                                      padding: '12px 16px',\r\n                                      cursor: 'pointer',\r\n                                      borderBottom: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n                                      background: (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent',\r\n                                      color: 'var(--text-primary, #f8fafc)',\r\n                                      transition: 'all 0.15s ease',\r\n                                      fontSize: '0.875rem'\r\n                                    }}\r\n                                    onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.06)'}\r\n                                    onMouseLeave={(e) => e.currentTarget.style.background = (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent'}\r\n                                  >\r\n                                    {user.first_name} {user.last_name} ({user.username}) <br/>\r\n                                    <span style={{ fontSize: '0.75rem', color: 'var(--text-secondary, #94a3b8)' }}>{user.email}</span>\r\n                                  </div>\r\n                                ))\r\n                              ) : (\r\n                                <div style={{ padding: '12px 16px', color: 'var(--text-muted, #64748b)', fontSize: '0.875rem' }}>\r\n                                  {userSearchTerm.trim() === '' ? 'Start typing to search users...' : 'No users found'}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Configuration */}\r\n                  <div className=\"form-section\">\r\n                    <h4 className=\"form-section-title\">Configuration</h4>\r\n                    <div className=\"form-grid form-grid-2\">\r\n                      <div className=\"form-group\">\r\n                        <label>Preset Template</label>\r\n                        <select\r\n                          value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                          onChange={(e) => editingDevice ? setEditForm({ ...editForm, config_version: e.target.value }) : setCreateForm({ ...createForm, config_version: e.target.value })}\r\n                          className=\"full-width\"\r\n                        >\r\n                          <option value=\"\">-- Manual Configuration --</option>\r\n                          {presetsLoading && <option value=\"\" disabled>Loading presets...</option>}\r\n                          {!presetsLoading && presets.map((preset) => (\r\n                            <option key={preset.id} value={getPresetConfigId(preset)}>\r\n                              {preset.name} ({getPresetConfigId(preset) || 'no ID'})\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                        <small className=\"form-hint\">Selecting a preset sets the Config Version ID below.</small>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Config Version ID</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                          onChange={(e) => editingDevice ? setEditForm({...editForm, config_version: e.target.value}) : setCreateForm({...createForm, config_version: e.target.value})}\r\n                          autoComplete=\"off\"\r\n                          placeholder=\"Manual Config ID\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n                {editingDevice && (\r\n                  <div style={{ padding: '0 24px' }}>\r\n                     <AuditTrail\r\n                       createdBy={editingDevice.created_by_username}\r\n                       createdAt={editingDevice.created_at}\r\n                       updatedBy={editingDevice.updated_by_username}\r\n                       updatedAt={editingDevice.updated_at}\r\n                     />\r\n                  </div>\r\n                )}\r\n                <div className=\"form-actions\" style={{ padding: '0 24px 24px 24px' }}>\r\n                  <button type=\"submit\" className=\"btn\">{editingDevice ? 'Save Changes' : 'Create Device'}</button>\r\n                  <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Device Management</h1>\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>Devices ({filteredDevices.length})</h2>\r\n          <div className=\"card-actions\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search devices...\"\r\n              value={searchTerm}\r\n              onChange={handleSearch}\r\n              className=\"search-input\"\r\n            />\r\n            {selectedDevices.size > 0 && (\r\n              <button \r\n                onClick={handleBulkDelete}\r\n                disabled={bulkDeleteLoading}\r\n                style={{ \r\n                  background: 'var(--danger-color, #ef4444)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '8px 16px',\r\n                  borderRadius: '6px',\r\n                  cursor: bulkDeleteLoading ? 'not-allowed' : 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  opacity: bulkDeleteLoading ? '0.6' : '1'\r\n                }}\r\n              >\r\n                {bulkDeleteLoading ? `Deleting ${selectedDevices.size}...` : `Delete Selected (${selectedDevices.size})`}\r\n              </button>\r\n            )}\r\n            <button onClick={() => {\r\n              setCreatingDevice(true);\r\n              setUserSearchTerm('');\r\n              setShowUserDropdown(false);\r\n            }} className=\"btn\">\r\n              Register New Device\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'center', width: '40px' }}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedDevices.size === filteredDevices.length && filteredDevices.length > 0}\r\n                  onChange={handleSelectAll}\r\n                  title=\"Select all displayed devices\"\r\n                />\r\n              </th>\r\n              <th style={{ textAlign: 'center' }}>Device Serial</th>\r\n              <th style={{ textAlign: 'center' }}>Assigned To</th>\r\n              <th style={{ textAlign: 'center' }}>Created By</th>\r\n              <th style={{ textAlign: 'center' }}>Config Version</th>\r\n              <th style={{ textAlign: 'center' }}>Provisioned At</th>\r\n              <th style={{ textAlign: 'center' }}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredDevices.map((device) => (\r\n              <tr\r\n                key={device.id}\r\n                onClick={() => handleViewDevice(device)}\r\n                style={{\r\n                  background: selectedDevices.has(device.id) ? 'rgba(99, 102, 241, 0.1)' : 'transparent',\r\n                  cursor: 'pointer'\r\n                }}\r\n                className=\"clickable-row\"\r\n              >\r\n                <td style={{ textAlign: 'center' }}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedDevices.has(device.id)}\r\n                    onChange={() => handleSelectDevice(device.id)}\r\n                  />\r\n                </td>\r\n                <td style={{ textAlign: 'center' }}>{device.device_serial}</td>\r\n                <td style={{ textAlign: 'center' }}>{device.user || '-'}</td>\r\n                <td style={{ textAlign: 'center', fontSize: '0.875rem', color: 'var(--text-secondary, #94a3b8)' }}>\r\n                  {device.created_by_username || '-'}\r\n                </td>\r\n                <td style={{ textAlign: 'center' }}>{device.config_version || '-'}</td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  {(() => {\r\n                    if (!device.provisioned_at) return 'N/A';\r\n                    const date = new Date(device.provisioned_at);\r\n                    return isNaN(date.getTime()) ? 'Invalid Date' : date.toLocaleDateString();\r\n                  })()}\r\n                </td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleEdit(device);\r\n                    }}\r\n                    style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'var(--text-secondary, #94a3b8)' }}\r\n                    title=\"Edit\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                      <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                    </svg>\r\n                  </button>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleDelete(device);\r\n                    }}\r\n                    style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'var(--danger-color, #ef4444)' }}\r\n                    title=\"Delete\"\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                      <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                      <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                      <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                    </svg>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        \r\n        {/* Pagination Controls */}\r\n        {totalCount > 0 && (\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            padding: '16px',\r\n            borderTop: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n            gap: '16px'\r\n          }}>\r\n            <div style={{ fontSize: '0.875rem', color: 'var(--text-secondary, #94a3b8)' }}>\r\n              Showing {((currentPage - 1) * pageSize) + 1} - {Math.min(currentPage * pageSize, totalCount)} of {totalCount} devices\r\n            </div>\r\n            \r\n            <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n              <button\r\n                onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\r\n                disabled={currentPage === 1}\r\n                style={{\r\n                  padding: '8px 12px',\r\n                  border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                  borderRadius: '6px',\r\n                  background: currentPage === 1 ? 'rgba(148, 163, 184, 0.1)' : 'transparent',\r\n                  color: 'var(--text-primary, #f8fafc)',\r\n                  cursor: currentPage === 1 ? 'not-allowed' : 'pointer',\r\n                  opacity: currentPage === 1 ? '0.5' : '1'\r\n                }}\r\n              >\r\n                 Previous\r\n              </button>\r\n              \r\n              <div style={{ display: 'flex', gap: '4px', alignItems: 'center' }}>\r\n                {(() => {\r\n                  const pages = [];\r\n                  \r\n                  for (let i = 1; i <= totalPages; i++) {\r\n                    // Always show first page, last page, current page, and adjacent pages\r\n                    const showPage = i === 1 || i === totalPages || Math.abs(i - currentPage) <= 1;\r\n                    \r\n                    if (showPage) {\r\n                      pages.push(\r\n                        <button\r\n                          key={i}\r\n                          onClick={() => setCurrentPage(i)}\r\n                          style={{\r\n                            padding: '6px 10px',\r\n                            border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                            borderRadius: '4px',\r\n                            background: i === currentPage ? 'rgba(99, 102, 241, 0.2)' : 'transparent',\r\n                            color: 'var(--text-primary, #f8fafc)',\r\n                            cursor: 'pointer',\r\n                            fontWeight: i === currentPage ? 'bold' : 'normal',\r\n                            minWidth: '32px'\r\n                          }}\r\n                        >\r\n                          {i}\r\n                        </button>\r\n                      );\r\n                    } else if (pages[pages.length - 1]?.key !== 'ellipsis-' + Math.floor(i / 10)) {\r\n                      // Add ellipsis if we skipped pages and haven't added one recently\r\n                      pages.push(\r\n                        <span key={`ellipsis-${Math.floor(i / 10)}`} style={{ padding: '0 4px', color: 'var(--text-secondary, #94a3b8)' }}>\r\n                          ...\r\n                        </span>\r\n                      );\r\n                    }\r\n                  }\r\n                  \r\n                  return pages;\r\n                })()}\r\n              </div>\r\n              \r\n              <button\r\n                onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\r\n                disabled={currentPage === totalPages}\r\n                style={{\r\n                  padding: '8px 12px',\r\n                  border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                  borderRadius: '6px',\r\n                  background: currentPage === totalPages ? 'rgba(148, 163, 184, 0.1)' : 'transparent',\r\n                  color: 'var(--text-primary, #f8fafc)',\r\n                  cursor: currentPage === totalPages ? 'not-allowed' : 'pointer',\r\n                  opacity: currentPage === totalPages ? '0.5' : '1'\r\n                }}\r\n              >\r\n                Next \r\n              </button>\r\n            </div>\r\n            \r\n            <select\r\n              value={pageSize}\r\n              onChange={(e) => {\r\n                setPageSize(parseInt(e.target.value));\r\n                setCurrentPage(1);\r\n              }}\r\n              style={{\r\n                padding: '8px',\r\n                border: '1px solid var(--border-color, rgba(148, 163, 184, 0.2))',\r\n                borderRadius: '6px',\r\n                background: 'var(--bg-primary, #0f172a)',\r\n                color: 'var(--text-primary, #f8fafc)',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <option value={10}>10 per page</option>\r\n              <option value={25}>25 per page</option>\r\n              <option value={50}>50 per page</option>\r\n              <option value={100}>100 per page</option>\r\n            </select>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {(editingDevice || creatingDevice) && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <h3>{editingDevice ? `Edit Device: ${editingDevice.device_serial}` : 'Register New Device'}</h3>\r\n            <form onSubmit={(e) => { e.preventDefault(); editingDevice ? handleSave() : handleCreate(); }}>\r\n              <div className=\"modal-body\">\r\n                \r\n                {/* Device Identity */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Device Identity</h4>\r\n                  <div className=\"form-grid\">\r\n                    <div className=\"form-group\">\r\n                      <label>Device Serial Number</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingDevice ? editForm.device_serial : createForm.device_serial}\r\n                        onChange={(e) => editingDevice ? setEditForm({...editForm, device_serial: e.target.value}) : setCreateForm({...createForm, device_serial: e.target.value})}\r\n                        required\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"SN-12345678\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Ownership */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Ownership & Assignment</h4>\r\n                  <div className=\"form-grid\">\r\n                    <div className=\"form-group\">\r\n                      <label>Assigned User</label>\r\n                      <div style={{ position: 'relative' }} onClick={(e) => e.stopPropagation()}>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"Search and select user...\"\r\n                          value={userSearchTerm}\r\n                          onChange={(e) => {\r\n                            setUserSearchTerm(e.target.value);\r\n                            setShowUserDropdown(true);\r\n                          }}\r\n                          onFocus={() => setShowUserDropdown(true)}\r\n                          autoComplete=\"off\"\r\n                        />\r\n                        {(editingDevice ? editForm.user : createForm.user) && (\r\n                          <div style={{ marginTop: '8px', fontSize: '0.875rem', color: 'var(--text-secondary, #94a3b8)' }}>\r\n                            <strong>Selected:</strong> {users.find(u => u.username === (editingDevice ? editForm.user : createForm.user))?.first_name} {users.find(u => u.username === (editingDevice ? editForm.user : createForm.user))?.last_name} ({editingDevice ? editForm.user : createForm.user})\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => {\r\n                                if (editingDevice) {\r\n                                  setEditForm({...editForm, user: ''});\r\n                                } else {\r\n                                  setCreateForm({...createForm, user: ''});\r\n                                }\r\n                                setUserSearchTerm('');\r\n                              }}\r\n                              className=\"btn-icon btn-icon-danger\"\r\n                              style={{ marginLeft: '10px' }}\r\n                              title=\"Remove Assignment\"\r\n                            >\r\n                              \r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                        {showUserDropdown && (\r\n                          <div style={{\r\n                            position: 'absolute',\r\n                            top: '100%',\r\n                            left: 0,\r\n                            right: 0,\r\n                            background: 'var(--bg-secondary, #0f172a)',\r\n                            border: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n                            borderRadius: '8px',\r\n                            maxHeight: '200px',\r\n                            overflowY: 'auto',\r\n                            zIndex: 1000,\r\n                            boxShadow: 'var(--shadow-xl)',\r\n                            marginTop: '4px'\r\n                          }}>\r\n                            {filteredUsers.length > 0 ? (\r\n                              filteredUsers.map((user) => (\r\n                                <div\r\n                                  key={user.id}\r\n                                  onClick={() => {\r\n                                    if (editingDevice) {\r\n                                      setEditForm({...editForm, user: user.username});\r\n                                    } else {\r\n                                      setCreateForm({...createForm, user: user.username});\r\n                                    }\r\n                                    setUserSearchTerm(`${user.first_name} ${user.last_name} (${user.username})`);\r\n                                    setShowUserDropdown(false);\r\n                                  }}\r\n                                  style={{\r\n                                    padding: '12px 16px',\r\n                                    cursor: 'pointer',\r\n                                    borderBottom: '1px solid var(--border-color, rgba(148, 163, 184, 0.1))',\r\n                                    background: (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent',\r\n                                    color: 'var(--text-primary, #f8fafc)',\r\n                                    transition: 'all 0.15s ease',\r\n                                    fontSize: '0.875rem'\r\n                                  }}\r\n                                  onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(255, 255, 255, 0.06)'}\r\n                                  onMouseLeave={(e) => e.currentTarget.style.background = (editingDevice ? editForm.user : createForm.user) === user.username ? 'rgba(99, 102, 241, 0.15)' : 'transparent'}\r\n                                >\r\n                                  {user.first_name} {user.last_name} ({user.username}) <br/>\r\n                                  <span style={{ fontSize: '0.75rem', color: 'var(--text-secondary, #94a3b8)' }}>{user.email}</span>\r\n                                </div>\r\n                              ))\r\n                            ) : (\r\n                              <div style={{ padding: '12px 16px', color: 'var(--text-muted, #64748b)', fontSize: '0.875rem' }}>\r\n                                {userSearchTerm.trim() === '' ? 'Start typing to search users...' : 'No users found'}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Configuration */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Configuration</h4>\r\n                  <div className=\"form-grid form-grid-2\">\r\n                    <div className=\"form-group\">\r\n                      <label>Preset Template</label>\r\n                      <select\r\n                        value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                        onChange={(e) => editingDevice ? setEditForm({ ...editForm, config_version: e.target.value }) : setCreateForm({ ...createForm, config_version: e.target.value })}\r\n                        className=\"full-width\"\r\n                      >\r\n                        <option value=\"\">-- Manual Configuration --</option>\r\n                        {presetsLoading && <option value=\"\" disabled>Loading presets...</option>}\r\n                        {!presetsLoading && presets.map((preset) => (\r\n                          <option key={preset.id} value={getPresetConfigId(preset)}>\r\n                            {preset.name} ({getPresetConfigId(preset) || 'no ID'})\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                      <small className=\"form-hint\">Selecting a preset sets the Config Version ID below.</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Config Version ID</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingDevice ? editForm.config_version : createForm.config_version}\r\n                        onChange={(e) => editingDevice ? setEditForm({...editForm, config_version: e.target.value}) : setCreateForm({...createForm, config_version: e.target.value})}\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"Manual Config ID\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n              {editingDevice && (\r\n                <div style={{ padding: '0 24px' }}>\r\n                   <AuditTrail\r\n                     createdBy={editingDevice.created_by_username}\r\n                     createdAt={editingDevice.created_at}\r\n                     updatedBy={editingDevice.updated_by_username}\r\n                     updatedAt={editingDevice.updated_at}\r\n                   />\r\n                </div>\r\n              )}\r\n              <div className=\"form-actions\" style={{ padding: '24px' }}>\r\n                <button type=\"submit\" className=\"btn\">{editingDevice ? 'Save Changes' : 'Register Device'}</button>\r\n                <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">Cancel</button>\r\n              </div>\r\n            </form>\r\n        </div>\r\n      </div>\r\n    )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Devices;","/**\r\n * Simple in-memory cache service for API responses\r\n * Reduces unnecessary API calls and speeds up page loads\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n\r\n  /**\r\n   * Set a cache entry\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' = 'short'): number {\r\n    return type === 'long' ? CacheService.LONG_TTL : CacheService.DEFAULT_TTL;\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend-git-dev0-360watts-projects.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const headers = this.getAuthHeaders();\r\n    delete (headers as any)['Content-Type']; // Let browser set it for FormData\r\n    \r\n    return fetch(`${API_BASE_URL}/ota/firmware/create/`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Authorization': `Bearer ${JSON.parse(localStorage.getItem('authTokens') || '{}').access}`,\r\n      },\r\n      body: formData,\r\n    }).then(res => res.json());\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["AuditTrail","_ref","createdBy","createdAt","updatedBy","updatedAt","className","formatDate","dateString","Date","toLocaleString","_unused","_jsxs","children","_jsx","React","useDebouncedCallback","callback","delay","arguments","length","undefined","timeoutId","setTimeoutId","useState","debouncedCallback","useCallback","_len","args","Array","_key","clearTimeout","newTimeoutId","setTimeout","useEffect","Devices","_users$find3","_users$find4","searchParams","useSearchParams","devices","setDevices","filteredDevices","setFilteredDevices","loading","setLoading","error","setError","editingDevice","setEditingDevice","creatingDevice","setCreatingDevice","searchTerm","setSearchTerm","userSearchTerm","setUserSearchTerm","filteredUsers","setFilteredUsers","showUserDropdown","setShowUserDropdown","users","setUsers","selectedDevices","setSelectedDevices","Set","bulkDeleteLoading","setBulkDeleteLoading","currentPage","setCurrentPage","pageSize","setPageSize","totalCount","setTotalCount","totalPages","setTotalPages","presets","setPresets","presetsLoading","setPresetsLoading","health","setHealth","telemetrySummary","setTelemetrySummary","telemetryData","setTelemetryData","dashboardError","setDashboardError","selectedDevice","setSelectedDevice","editForm","setEditForm","device_serial","user","config_version","createForm","setCreateForm","fetchDevices","async","page","search","response","apiService","getDevices","results","count","total_pages","current_page","isArray","err","Error","message","customers","getUsers","filter","is_staff","is_superuser","console","fetchUsers","data","getPresets","fetchPresets","healthData","Promise","all","getSystemHealth","getTelemetry","telemetryArray","latest","reduce","currentLatest","item","timestamp","itemDate","Number","isNaN","getTime","deviceCount","map","deviceId","size","totalPoints","latestTimestamp","fetchDashboardData","deviceIdParam","get","parseInt","foundDevice","find","d","id","handleClickOutside","document","addEventListener","removeEventListener","trim","searchLower","toLowerCase","filtered","fullName","concat","first_name","last_name","username","includes","email","debouncedSearch","query","handleEdit","device","_users$find","_users$find2","u","handleSave","updateDevice","handleCreate","createDevice","handleCancel","handleBackToList","getPresetConfigId","preset","_preset$gateway_confi","_preset$gateway_confi2","gateway_configuration","general_settings","config_id","deviceTelemetry","entry","latestTelemetry","style","display","alignItems","marginBottom","onClick","marginRight","margin","padding","gridTemplateColumns","gap","provisioned_at","toLocaleDateString","created_by_username","overall_health","active_devices","total_devices","total_telemetry_points","data_type","onSubmit","e","preventDefault","type","value","onChange","_objectSpread","target","required","autoComplete","placeholder","position","stopPropagation","onFocus","top","left","right","background","border","borderRadius","marginTop","maxHeight","overflowY","zIndex","boxShadow","cursor","borderBottom","color","transition","fontSize","onMouseEnter","currentTarget","onMouseLeave","disabled","name","created_at","updated_by_username","updated_at","deviceList","from","Boolean","confirmMessage","join","window","confirm","deleteDevicesBulk","updatedDevices","has","fontWeight","opacity","textAlign","width","checked","handleSelectAll","allIds","title","handleViewDevice","newSelected","delete","add","handleSelectDevice","date","height","viewBox","fill","stroke","strokeWidth","deleteDevice","handleDelete","points","x1","y1","x2","y2","justifyContent","borderTop","Math","min","max","pages","i","_pages","abs","push","minWidth","key","floor","marginLeft","CacheService","constructor","cache","Map","set","ttlMs","DEFAULT_TTL","this","now","expiresIn","clear","clearAll","getTTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","fetch","status","refreshToken","removeItem","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getConfiguration","provisionDevice","getAlerts","cacheKey","cached","getKPIs","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","getUserDevices","userId","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","createPreset","updatePreset","deletePreset","getGlobalSlaves","createGlobalSlave","slaveData","updateGlobalSlave","slaveId","deleteGlobalSlave","URLSearchParams","append","toString","queryString","deviceData","deviceIds","device_ids","getSlaves","configId","createSlave","updateSlave","deleteSlave","addSlavesToPreset","slaveIds","slave_ids","getFirmwareVersions","activeOnly","uploadFirmwareVersion","formData","then","res","updateFirmwareVersion","firmwareId","getDeviceUpdateLogs","getOTAConfig","updateOTAConfig","config","getOTAHealth"],"sourceRoot":""}