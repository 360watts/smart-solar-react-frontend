{"version":3,"file":"static/js/0.8d6f16d9.chunk.js","mappings":"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","sources":["../node_modules/recharts/es6/chart/LineChart.js","components/Telemetry.tsx"],"sourcesContent":["import * as React from 'react';\nimport { forwardRef } from 'react';\nimport { arrayTooltipSearcher } from '../state/optionsSlice';\nimport { CartesianChart } from './CartesianChart';\nvar allowedTooltipTypes = ['axis'];\n\n/**\n * @consumes ResponsiveContainerContext\n * @provides CartesianViewBoxContext\n * @provides CartesianChartContext\n */\nexport var LineChart = /*#__PURE__*/forwardRef((props, ref) => {\n  return /*#__PURE__*/React.createElement(CartesianChart, {\n    chartName: \"LineChart\",\n    defaultTooltipEventType: \"axis\",\n    validateTooltipEventTypes: allowedTooltipTypes,\n    tooltipPayloadSearcher: arrayTooltipSearcher,\n    categoricalChartProps: props,\n    ref: ref\n  });\n});","import React, { useState, useEffect } from 'react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface TelemetryData {\r\n  deviceId: string;\r\n  timestamp: string;\r\n  data_type: string;\r\n  value: number;\r\n  unit: string;\r\n  slave_id?: number;\r\n  register_label?: string;\r\n  quality: string;\r\n}\r\n\r\nconst Telemetry: React.FC = () => {\r\n  const [telemetryData, setTelemetryData] = useState<TelemetryData[]>([]);\r\n  const [filteredData, setFilteredData] = useState<TelemetryData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [selectedDataType, setSelectedDataType] = useState<string>('all');\r\n  const [selectedDevice, setSelectedDevice] = useState<string>('all');\r\n\r\n  useEffect(() => {\r\n    fetchTelemetryData();\r\n  }, []);\r\n\r\n  const fetchTelemetryData = async () => {\r\n    try {\r\n      const data = await apiService.getTelemetry();\r\n      setTelemetryData(data);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let filtered = telemetryData;\r\n\r\n    if (selectedDataType !== 'all') {\r\n      filtered = filtered.filter(item => item.data_type === selectedDataType);\r\n    }\r\n\r\n    if (selectedDevice !== 'all') {\r\n      filtered = filtered.filter(item => item.deviceId === selectedDevice);\r\n    }\r\n\r\n    setFilteredData(filtered);\r\n  }, [telemetryData, selectedDataType, selectedDevice]);\r\n\r\n  const getDataTypes = () => {\r\n    const types = Array.from(new Set(telemetryData.map(item => item.data_type)));\r\n    return types;\r\n  };\r\n\r\n  const getDevices = () => {\r\n    const devices = Array.from(new Set(telemetryData.map(item => item.deviceId)));\r\n    return devices;\r\n  };\r\n\r\n  const prepareChartData = () => {\r\n    const chartData: { [key: string]: any } = {};\r\n    filteredData.forEach(item => {\r\n      const time = new Date(item.timestamp).toLocaleTimeString();\r\n      if (!chartData[time]) {\r\n        chartData[time] = { time };\r\n      }\r\n      chartData[time][item.data_type] = item.value;\r\n    });\r\n    return Object.values(chartData).slice(-50); // Last 50 data points\r\n  };\r\n\r\n  const getLatestValues = () => {\r\n    const latest: { [key: string]: TelemetryData } = {};\r\n    filteredData.forEach(item => {\r\n      const key = `${item.deviceId}-${item.data_type}`;\r\n      if (!latest[key] || new Date(item.timestamp) > new Date(latest[key].timestamp)) {\r\n        latest[key] = item;\r\n      }\r\n    });\r\n    return Object.values(latest);\r\n  };\r\n\r\n  const getStatistics = () => {\r\n    if (filteredData.length === 0) return null;\r\n\r\n    const values = filteredData.map(item => item.value);\r\n    const sum = values.reduce((a, b) => a + b, 0);\r\n    const avg = sum / values.length;\r\n    const min = Math.min(...values);\r\n    const max = Math.max(...values);\r\n\r\n    return { avg, min, max, count: values.length };\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading telemetry data...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  const chartData = prepareChartData();\r\n  const latestValues = getLatestValues();\r\n  const statistics = getStatistics();\r\n  const dataTypes = getDataTypes();\r\n  const devices = getDevices();\r\n\r\n  return (\r\n    <div>\r\n      <h1>Telemetry Data</h1>\r\n\r\n      <div className=\"card\">\r\n        <h2>Filters</h2>\r\n        <div className=\"grid\" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 'var(--space-6)', alignItems: 'start' }}>\r\n          <div className=\"form-group\">\r\n            <label>Data Type:</label>\r\n            <select\r\n              value={selectedDataType}\r\n              onChange={(e) => setSelectedDataType(e.target.value)}\r\n            >\r\n              <option value=\"all\">All Types</option>\r\n              {dataTypes.map(type => (\r\n                <option key={type} value={type}>{type}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Device:</label>\r\n            <select\r\n              value={selectedDevice}\r\n              onChange={(e) => setSelectedDevice(e.target.value)}\r\n            >\r\n              <option value=\"all\">All Devices</option>\r\n              {devices.map(device => (\r\n                <option key={device} value={device}>{device}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {statistics && (\r\n        <div className=\"grid\">\r\n          <div className=\"card\">\r\n            <h3>Statistics</h3>\r\n            <p><strong>Count:</strong> {statistics.count}</p>\r\n            <p><strong>Average:</strong> {statistics.avg.toFixed(2)}</p>\r\n            <p><strong>Min:</strong> {statistics.min.toFixed(2)}</p>\r\n            <p><strong>Max:</strong> {statistics.max.toFixed(2)}</p>\r\n          </div>\r\n          <div className=\"card\">\r\n            <h3>Latest Values</h3>\r\n            {latestValues.slice(0, 5).map((item, index) => (\r\n              <p key={index}>\r\n                <strong>{item.data_type}:</strong> {item.value} {item.unit}\r\n                <small> ({new Date(item.timestamp).toLocaleTimeString()})</small>\r\n              </p>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"card\">\r\n        <h2>Telemetry Trends</h2>\r\n        <div className=\"chart-container\">\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <LineChart data={chartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(148, 163, 184, 0.1)\" />\r\n              <XAxis dataKey=\"time\" stroke=\"#64748b\" fontSize={12} />\r\n              <YAxis stroke=\"#64748b\" fontSize={12} />\r\n              <Tooltip \r\n                contentStyle={{ \r\n                  backgroundColor: '#0f172a', \r\n                  border: '1px solid rgba(148, 163, 184, 0.2)',\r\n                  borderRadius: '8px',\r\n                  color: '#f8fafc'\r\n                }}\r\n              />\r\n              <Legend />\r\n              {dataTypes.map((type, index) => (\r\n                <Line\r\n                  key={type}\r\n                  type=\"monotone\"\r\n                  dataKey={type}\r\n                  stroke={`hsl(${index * 60 + 240}, 70%, 60%)`}\r\n                  strokeWidth={2}\r\n                />\r\n              ))}\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <h2>Raw Data ({filteredData.length} records)</h2>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'center' }}>Device</th>\r\n              <th style={{ textAlign: 'center' }}>Data Type</th>\r\n              <th style={{ textAlign: 'center' }}>Value</th>\r\n              <th style={{ textAlign: 'center' }}>Unit</th>\r\n              <th style={{ textAlign: 'center' }}>Timestamp</th>\r\n              <th style={{ textAlign: 'center' }}>Quality</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredData.slice(-100).reverse().map((item, index) => (\r\n              <tr key={index}>\r\n                <td style={{ textAlign: 'center' }}>{item.deviceId}</td>\r\n                <td style={{ textAlign: 'center' }}>{item.data_type}</td>\r\n                <td style={{ textAlign: 'center' }}>{item.value}</td>\r\n                <td style={{ textAlign: 'center' }}>{item.unit}</td>\r\n                <td style={{ textAlign: 'center' }}>{new Date(item.timestamp).toLocaleString()}</td>\r\n                <td style={{ textAlign: 'center' }}>\r\n                  <span className={item.quality === 'good' ? 'status-online' : 'status-offline'}>\r\n                    {item.quality}\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Telemetry;"],"names":["allowedTooltipTypes","LineChart","forwardRef","props","ref","React","CartesianChart","chartName","defaultTooltipEventType","validateTooltipEventTypes","tooltipPayloadSearcher","arrayTooltipSearcher","categoricalChartProps","Telemetry","telemetryData","setTelemetryData","useState","filteredData","setFilteredData","loading","setLoading","error","setError","selectedDataType","setSelectedDataType","selectedDevice","setSelectedDevice","useEffect","fetchTelemetryData","async","data","apiService","getTelemetry","err","Error","message","filtered","filter","item","data_type","deviceId","_jsx","className","children","_jsxs","chartData","prepareChartData","forEach","time","Date","timestamp","toLocaleTimeString","value","Object","values","slice","latestValues","getLatestValues","latest","key","concat","statistics","getStatistics","length","map","avg","reduce","a","b","min","Math","max","count","dataTypes","Array","from","Set","devices","style","display","gridTemplateColumns","gap","alignItems","onChange","e","target","type","device","toFixed","index","unit","ResponsiveContainer","width","height","CartesianGrid","strokeDasharray","stroke","XAxis","dataKey","fontSize","YAxis","Tooltip","contentStyle","backgroundColor","border","borderRadius","color","Legend","Line","strokeWidth","textAlign","reverse","toLocaleString","quality"],"sourceRoot":""}