{"version":3,"file":"static/js/275.1cb0aae5.chunk.js","mappings":"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","sources":["components/Configuration.tsx","services/cacheService.ts","services/api.ts"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface GatewayConfig {\r\n  configId: string;\r\n  updatedAt: string;\r\n  configSchemaVer: number;\r\n  uartConfig: {\r\n    baudRate: number;\r\n    dataBits: number;\r\n    stopBits: number;\r\n    parity: number;\r\n  };\r\n  slaves: SlaveDevice[];\r\n}\r\n\r\ninterface SlaveDevice {\r\n  id: number;\r\n  slaveId: number;\r\n  deviceName: string;\r\n  pollingIntervalMs: number;\r\n  timeoutMs: number;\r\n  enabled: boolean;\r\n  registers: RegisterMapping[];\r\n}\r\n\r\ninterface RegisterMapping {\r\n  id: number;\r\n  label: string;\r\n  address: number;\r\n  numRegisters: number;\r\n  functionCode: number;\r\n  dataType: number;\r\n  scaleFactor: number;\r\n  offset: number;\r\n  enabled: boolean;\r\n}\r\n\r\nconst Configuration: React.FC = () => {\r\n  const [config, setConfig] = useState<GatewayConfig | null>(null);\r\n  const [slaves, setSlaves] = useState<SlaveDevice[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [creatingSlave, setCreatingSlave] = useState(false);\r\n  const [editingSlave, setEditingSlave] = useState<SlaveDevice | null>(null);\r\n  const [globalMode, setGlobalMode] = useState(false);\r\n  const [slaveForm, setSlaveForm] = useState({\r\n    slave_id: '',\r\n    device_name: '',\r\n    polling_interval_ms: 5000,\r\n    timeout_ms: 1000,\r\n    enabled: true,\r\n    registers: [] as RegisterMapping[]\r\n  });\r\n  const [registerForm, setRegisterForm] = useState({\r\n    label: '',\r\n    address: 0,\r\n    num_registers: 1,\r\n    function_code: 3,\r\n    data_type: 0,\r\n    scale_factor: 1.0,\r\n    offset: 0.0,\r\n    enabled: true\r\n  });\r\n\r\n  const mapSlave = (slave: any): SlaveDevice => ({\r\n    id: slave.id,\r\n    slaveId: slave.slave_id,\r\n    deviceName: slave.device_name,\r\n    pollingIntervalMs: slave.polling_interval_ms,\r\n    timeoutMs: slave.timeout_ms,\r\n    enabled: slave.enabled,\r\n    registers: (slave.registers || []).map((reg: any) => ({\r\n      id: reg.id,\r\n      label: reg.label,\r\n      address: reg.address,\r\n      numRegisters: reg.num_registers,\r\n      functionCode: reg.function_code,\r\n      dataType: reg.data_type,\r\n      scaleFactor: reg.scale_factor,\r\n      offset: reg.offset,\r\n      enabled: reg.enabled,\r\n    }))\r\n  });\r\n\r\n  const fetchSlaves = useCallback(async (configId: string) => {\r\n    try {\r\n      const slavesData = await apiService.getSlaves(configId);\r\n      setSlaves(slavesData.map(mapSlave));\r\n    } catch (err) {\r\n      console.error('Failed to fetch slaves:', err);\r\n    }\r\n  }, []);\r\n\r\n  const fetchGlobalSlaves = useCallback(async () => {\r\n    try {\r\n      const slavesData = await apiService.getGlobalSlaves();\r\n      setSlaves(slavesData.map(mapSlave));\r\n    } catch (err) {\r\n      console.error('Failed to fetch global slaves:', err);\r\n    }\r\n  }, []);\r\n\r\n  const fetchConfiguration = useCallback(async () => {\r\n    try {\r\n      const data = await apiService.getConfiguration();\r\n      setConfig(data);\r\n      if (data?.configId) {\r\n        setGlobalMode(false);\r\n        await fetchSlaves(data.configId);\r\n      } else {\r\n        setConfig(null);\r\n        setGlobalMode(true);\r\n        await fetchGlobalSlaves();\r\n      }\r\n      setLoading(false);\r\n    } catch (err) {\r\n      // If no configuration exists, set config to null\r\n      if (err instanceof Error && err.message.includes('No configuration available')) {\r\n        setConfig(null);\r\n        setGlobalMode(true);\r\n        await fetchGlobalSlaves();\r\n      } else {\r\n        setError(err instanceof Error ? err.message : 'An error occurred');\r\n      }\r\n      setLoading(false);\r\n    }\r\n  }, [fetchSlaves, fetchGlobalSlaves]);\r\n\r\n  useEffect(() => {\r\n    fetchConfiguration();\r\n  }, [fetchConfiguration]);\r\n\r\n  const handleCreateSlave = () => {\r\n    setSlaveForm({\r\n      slave_id: '',\r\n      device_name: '',\r\n      polling_interval_ms: 5000,\r\n      timeout_ms: 1000,\r\n      enabled: true,\r\n      registers: []\r\n    });\r\n    setCreatingSlave(true);\r\n  };\r\n\r\n  const handleEditSlave = (slave: SlaveDevice) => {\r\n    setSlaveForm({\r\n      slave_id: slave.slaveId.toString(),\r\n      device_name: slave.deviceName,\r\n      polling_interval_ms: slave.pollingIntervalMs,\r\n      timeout_ms: slave.timeoutMs,\r\n      enabled: slave.enabled,\r\n      registers: [...slave.registers]\r\n    });\r\n    setEditingSlave(slave);\r\n  };\r\n\r\n  const handleSaveSlave = async () => {\r\n    const isGlobal = globalMode || !config;\r\n\r\n    // Validate slave ID uniqueness for new slaves\r\n    if (!editingSlave) {\r\n      const slaveId = parseInt(slaveForm.slave_id);\r\n      const existingSlave = slaves.find(s => s.slaveId === slaveId);\r\n      if (existingSlave) {\r\n        setError(`Slave ID ${slaveId} already exists for this configuration. Please choose a different ID.`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const slaveData = {\r\n        slave_id: parseInt(slaveForm.slave_id),\r\n        device_name: slaveForm.device_name,\r\n        polling_interval_ms: slaveForm.polling_interval_ms,\r\n        timeout_ms: slaveForm.timeout_ms,\r\n        enabled: slaveForm.enabled,\r\n        registers: slaveForm.registers\r\n      };\r\n\r\n      if (editingSlave) {\r\n        const updatedSlave = isGlobal\r\n          ? await apiService.updateGlobalSlave(editingSlave.id, slaveData)\r\n          : await apiService.updateSlave(config.configId, editingSlave.slaveId, slaveData);\r\n        const mappedSlave = mapSlave(updatedSlave);\r\n        setSlaves(slaves.map(s => s.id === editingSlave.id ? mappedSlave : s));\r\n        setEditingSlave(null);\r\n      } else {\r\n        const newSlave = isGlobal\r\n          ? await apiService.createGlobalSlave(slaveData)\r\n          : await apiService.createSlave(config.configId, slaveData);\r\n        const mappedSlave = mapSlave(newSlave);\r\n        setSlaves([...slaves, mappedSlave]);\r\n      }\r\n\r\n      setCreatingSlave(false);\r\n      setSlaveForm({\r\n        slave_id: '',\r\n        device_name: '',\r\n        polling_interval_ms: 5000,\r\n        timeout_ms: 1000,\r\n        enabled: true,\r\n        registers: []\r\n      });\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to save slave');\r\n    }\r\n  };\r\n\r\n  const handleDeleteSlave = async (slave: SlaveDevice) => {\r\n    const isGlobal = globalMode || !config;\r\n\r\n    if (window.confirm(`Are you sure you want to delete slave ${slave.deviceName}?`)) {\r\n      try {\r\n        if (isGlobal) {\r\n          await apiService.deleteGlobalSlave(slave.id);\r\n        } else {\r\n          await apiService.deleteSlave(config.configId, slave.slaveId);\r\n        }\r\n        setSlaves(slaves.filter(s => s.id !== slave.id));\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Failed to delete slave');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setCreatingSlave(false);\r\n    setEditingSlave(null);\r\n    setSlaveForm({\r\n      slave_id: '',\r\n      device_name: '',\r\n      polling_interval_ms: 5000,\r\n      timeout_ms: 1000,\r\n      enabled: true,\r\n      registers: []\r\n    });\r\n  };\r\n\r\n  const addRegister = () => {\r\n    const newRegister: RegisterMapping = {\r\n      id: Date.now(), // Temporary ID for form management\r\n      label: registerForm.label,\r\n      address: registerForm.address,\r\n      numRegisters: registerForm.num_registers,\r\n      functionCode: registerForm.function_code,\r\n      dataType: registerForm.data_type,\r\n      scaleFactor: registerForm.scale_factor,\r\n      offset: registerForm.offset,\r\n      enabled: registerForm.enabled\r\n    };\r\n\r\n    setSlaveForm({\r\n      ...slaveForm,\r\n      registers: [...slaveForm.registers, newRegister]\r\n    });\r\n\r\n    // Reset register form\r\n    setRegisterForm({\r\n      label: '',\r\n      address: 0,\r\n      num_registers: 1,\r\n      function_code: 3,\r\n      data_type: 0,\r\n      scale_factor: 1.0,\r\n      offset: 0.0,\r\n      enabled: true\r\n    });\r\n  };\r\n\r\n  const removeRegister = (index: number) => {\r\n    setSlaveForm({\r\n      ...slaveForm,\r\n      registers: slaveForm.registers.filter((_, i) => i !== index)\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading configuration...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Slave Configuration</h1>\r\n\r\n      {error && (\r\n        <div className=\"error\" style={{ marginBottom: '20px', padding: '10px', backgroundColor: '#f8d7da', border: '1px solid #f5c6cb', borderRadius: '4px', color: '#721c24' }}>\r\n          <strong>Error:</strong> {error}\r\n          <button\r\n            onClick={() => setError(null)}\r\n            style={{ float: 'right', background: 'none', border: 'none', color: '#721c24', cursor: 'pointer', fontSize: '16px' }}\r\n            title=\"Close error\"\r\n          >\r\n            ×\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2>{globalMode || !config ? 'Global Slave Devices' : 'Preset Slave Devices'} ({slaves.length})</h2>\r\n          <button onClick={handleCreateSlave} className=\"btn\">Configure New Slave</button>\r\n        </div>\r\n\r\n        {slaves.length === 0 ? (\r\n          <div style={{ textAlign: 'center', padding: '40px 20px', color: '#666' }}>\r\n            <p>No slave devices configured yet.</p>\r\n            <p>Click \"Configure New Slave\" to add your first slave device.</p>\r\n          </div>\r\n        ) : (\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th style={{ textAlign: 'center' }}>Slave ID</th>\r\n                <th style={{ textAlign: 'center' }}>Device Name</th>\r\n                <th style={{ textAlign: 'center' }}>Polling Interval</th>\r\n                <th style={{ textAlign: 'center' }}>Timeout</th>\r\n                <th style={{ textAlign: 'center' }}>Status</th>\r\n                <th style={{ textAlign: 'center' }}>Registers</th>\r\n                <th style={{ textAlign: 'center' }}>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {slaves.map((slave) => (\r\n                <tr key={slave.id}>\r\n                  <td style={{ textAlign: 'center' }}>{slave.slaveId}</td>\r\n                  <td>{slave.deviceName}</td>\r\n                  <td style={{ textAlign: 'center' }}>{slave.pollingIntervalMs}ms</td>\r\n                  <td style={{ textAlign: 'center' }}>{slave.timeoutMs}ms</td>\r\n                  <td style={{ textAlign: 'center' }}>\r\n                    <span className={slave.enabled ? 'status-online' : 'status-offline'}>\r\n                      {slave.enabled ? 'Enabled' : 'Disabled'}\r\n                    </span>\r\n                  </td>\r\n                  <td style={{ textAlign: 'center' }}>{slave.registers.length}</td>\r\n                  <td style={{ textAlign: 'center' }}>\r\n                    <button onClick={() => handleEditSlave(slave)} style={{ background: 'none', border: 'none', cursor: 'pointer', marginRight: '10px' }} title=\"Edit\">\r\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path>\r\n                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path>\r\n                      </svg>\r\n                    </button>\r\n                    <button onClick={() => handleDeleteSlave(slave)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: 'red' }} title=\"Delete\">\r\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                        <polyline points=\"3,6 5,6 21,6\"></polyline>\r\n                        <path d=\"M19,6v14a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6m3,0V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2v2\"></path>\r\n                        <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n                        <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n                      </svg>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n\r\n      {/* Slave Configuration Modal */}\r\n      {(creatingSlave || editingSlave) && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content large-modal slave-config-modal\">\r\n            <h3>{editingSlave ? `Edit Slave: ${editingSlave.deviceName}` : 'Configure New Slave'}</h3>\r\n            \r\n            <div className=\"modal-body\">\r\n              <form onSubmit={(e) => { e.preventDefault(); handleSaveSlave(); }}>\r\n                \r\n                {/* Section 1: Basic Information */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Basic Information</h4>\r\n                  <div className=\"form-grid form-grid-2\">\r\n                    <div className=\"form-group\">\r\n                      <label>Slave ID</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.slave_id}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, slave_id: e.target.value})}\r\n                        required\r\n                        min=\"1\"\r\n                        max=\"247\"\r\n                        placeholder=\"1-247\"\r\n                      />\r\n                      <small className=\"form-hint\">\r\n                        Unique identifier (1-247)\r\n                        {slaves.length > 0 && (\r\n                          <span className=\"form-hint-accent\">\r\n                            Existing: {slaves.map(s => s.slaveId).join(', ')}\r\n                          </span>\r\n                        )}\r\n                      </small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Device Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={slaveForm.device_name}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, device_name: e.target.value})}\r\n                        required\r\n                        placeholder=\"e.g., Solar Inverter\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 2: Communication Settings */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Communication Settings</h4>\r\n                  <div className=\"form-grid form-grid-3\">\r\n                    <div className=\"form-group\">\r\n                      <label>Polling Interval (ms)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.polling_interval_ms}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, polling_interval_ms: parseInt(e.target.value)})}\r\n                        min=\"100\"\r\n                        placeholder=\"5000\"\r\n                      />\r\n                      <small className=\"form-hint\">How often to poll</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Timeout (ms)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={slaveForm.timeout_ms}\r\n                        onChange={(e) => setSlaveForm({...slaveForm, timeout_ms: parseInt(e.target.value)})}\r\n                        min=\"100\"\r\n                        placeholder=\"1000\"\r\n                      />\r\n                      <small className=\"form-hint\">Response timeout</small>\r\n                    </div>\r\n                    <div className=\"form-group checkbox-group\">\r\n                      <label>Status</label>\r\n                      <label className=\"checkbox-label checkbox-vertical\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={slaveForm.enabled}\r\n                          onChange={(e) => setSlaveForm({...slaveForm, enabled: e.target.checked})}\r\n                        />\r\n                        <span className={slaveForm.enabled ? 'status-text-enabled' : 'status-text-disabled'}>\r\n                          {slaveForm.enabled ? 'Enabled' : 'Disabled'}\r\n                        </span>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Section 3: Register Mappings */}\r\n                <div className=\"form-section\">\r\n                  <h4 className=\"form-section-title\">Register Mappings</h4>\r\n                  <p className=\"form-section-desc\">Configure the Modbus registers to read from this slave device.</p>\r\n\r\n                  {/* Add Register Sub-form */}\r\n                  <div className=\"form-subsection\">\r\n                    <h5 className=\"form-subsection-title\">Add New Register</h5>\r\n                    <div className=\"form-grid form-grid-auto\">\r\n                      <div className=\"form-group\">\r\n                        <label>Label</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"e.g., voltage\"\r\n                          value={registerForm.label}\r\n                          onChange={(e) => setRegisterForm({...registerForm, label: e.target.value})}\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Address</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"0\"\r\n                          value={registerForm.address}\r\n                          onChange={(e) => setRegisterForm({...registerForm, address: parseInt(e.target.value)})}\r\n                          min=\"0\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Data Type</label>\r\n                        <select\r\n                          value={registerForm.data_type}\r\n                          onChange={(e) => setRegisterForm({...registerForm, data_type: parseInt(e.target.value)})}\r\n                        >\r\n                          <option value={0}>UINT16</option>\r\n                          <option value={1}>INT16</option>\r\n                          <option value={2}>UINT32</option>\r\n                          <option value={3}>INT32</option>\r\n                          <option value={4}>FLOAT32</option>\r\n                          <option value={5}>FLOAT64</option>\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Scale</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"1.0\"\r\n                          value={registerForm.scale_factor}\r\n                          onChange={(e) => setRegisterForm({...registerForm, scale_factor: parseFloat(e.target.value)})}\r\n                          step=\"0.01\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label>Offset</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          placeholder=\"0.0\"\r\n                          value={registerForm.offset}\r\n                          onChange={(e) => setRegisterForm({...registerForm, offset: parseFloat(e.target.value)})}\r\n                          step=\"0.01\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group checkbox-group\">\r\n                        <label>Active</label>\r\n                        <label className=\"checkbox-label checkbox-vertical\">\r\n                          <input\r\n                          type=\"checkbox\"\r\n                          checked={registerForm.enabled}\r\n                            onChange={(e) => setRegisterForm({...registerForm, enabled: e.target.checked})}\r\n                          />\r\n                          <span>{registerForm.enabled ? 'Yes' : 'No'}</span>\r\n                        </label>\r\n                      </div>\r\n                      <div className=\"form-group form-group-btn\">\r\n                        <button type=\"button\" onClick={addRegister} className=\"btn btn-sm\">\r\n                          Add Register\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Registers Table */}\r\n                  {slaveForm.registers.length > 0 ? (\r\n                    <div className=\"registers-table-wrapper\">\r\n                      <h5 className=\"form-subsection-title\">Configured Registers ({slaveForm.registers.length})</h5>\r\n                      <table className=\"table registers-table\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th>Label</th>\r\n                            <th>Address</th>\r\n                            <th>Data Type</th>\r\n                            <th>Scale</th>\r\n                            <th>Offset</th>\r\n                            <th>Status</th>\r\n                            <th>Actions</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {slaveForm.registers.map((reg, index) => (\r\n                            <tr key={index}>\r\n                              <td>{reg.label}</td>\r\n                              <td>{reg.address}</td>\r\n                              <td>{getDataTypeName(reg.dataType)}</td>\r\n                              <td>{reg.scaleFactor}</td>\r\n                              <td>{reg.offset}</td>\r\n                              <td>\r\n                                <span className={`status-badge ${reg.enabled ? 'status-badge-success' : 'status-badge-danger'}`}>\r\n                                  {reg.enabled ? 'Enabled' : 'Disabled'}\r\n                                </span>\r\n                              </td>\r\n                              <td>\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => removeRegister(index)}\r\n                                  className=\"btn-icon btn-icon-danger\"\r\n                                  title=\"Remove\"\r\n                                >\r\n                                  ✕\r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"empty-state\">\r\n                      No registers configured yet. Add registers above to define what data to read from this slave device.\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n              </form>\r\n            </div>\r\n\r\n            {/* Modal Footer */}\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-primary\" onClick={(e) => { e.preventDefault(); handleSaveSlave(); }}>\r\n                {editingSlave ? 'Save Changes' : 'Create Slave'}\r\n              </button>\r\n              <button type=\"button\" onClick={handleCancel} className=\"btn btn-secondary\">\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst getDataTypeName = (dataType: number): string => {\r\n  const types = {\r\n    0: 'UINT16',\r\n    1: 'INT16',\r\n    2: 'UINT32',\r\n    3: 'INT32',\r\n    4: 'FLOAT32',\r\n    5: 'FLOAT64'\r\n  };\r\n  return types[dataType as keyof typeof types] || `Unknown (${dataType})`;\r\n};\r\n\r\nexport default Configuration;\r\n","/**\r\n * Simple in-memory cache service for API responses\r\n * Reduces unnecessary API calls and speeds up page loads\r\n */\r\n\r\ninterface CacheEntry {\r\n  data: any;\r\n  timestamp: number;\r\n  expiresIn: number; // milliseconds\r\n}\r\n\r\nclass CacheService {\r\n  private cache: Map<string, CacheEntry> = new Map();\r\n  private static readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes default\r\n  private static readonly LONG_TTL = 30 * 60 * 1000; // 30 minutes for static data\r\n\r\n  /**\r\n   * Set a cache entry\r\n   */\r\n  set(key: string, data: any, ttlMs: number = CacheService.DEFAULT_TTL): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      expiresIn: ttlMs,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a cache entry if valid\r\n   */\r\n  get(key: string): any | null {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return null;\r\n\r\n    // Check if expired\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return null;\r\n    }\r\n\r\n    return entry.data;\r\n  }\r\n\r\n  /**\r\n   * Check if key exists and is not expired\r\n   */\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    if (!entry) return false;\r\n\r\n    const now = Date.now();\r\n    if (now - entry.timestamp > entry.expiresIn) {\r\n      this.cache.delete(key);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Clear a specific cache entry\r\n   */\r\n  clear(key: string): void {\r\n    this.cache.delete(key);\r\n  }\r\n\r\n  /**\r\n   * Clear all cache entries\r\n   */\r\n  clearAll(): void {\r\n    this.cache.clear();\r\n  }\r\n\r\n  /**\r\n   * Get cache size\r\n   */\r\n  size(): number {\r\n    return this.cache.size;\r\n  }\r\n\r\n  /**\r\n   * Get TTL constants\r\n   */\r\n  static getTTL(type: 'short' | 'long' = 'short'): number {\r\n    return type === 'long' ? CacheService.LONG_TTL : CacheService.DEFAULT_TTL;\r\n  }\r\n}\r\n\r\nexport const cacheService = new CacheService();\r\nexport const DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes\r\nexport const LONG_TTL = 30 * 60 * 1000; // 30 minutes\r\n","import { cacheService, DEFAULT_TTL } from './cacheService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https://smart-solar-django-backend-git-dev0-360watts-projects.vercel.app/api';\r\n\r\nclass ApiService {\r\n  private getAuthHeaders(): HeadersInit {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (tokens) {\r\n      try {\r\n        const parsedTokens = JSON.parse(tokens);\r\n        return {\r\n          'Authorization': `Bearer ${parsedTokens.access}`,\r\n          'Content-Type': 'application/json',\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing auth tokens:', error);\r\n      }\r\n    }\r\n    return {\r\n      'Content-Type': 'application/json',\r\n    };\r\n  }\r\n\r\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    let headers = this.getAuthHeaders();\r\n\r\n    let response = await fetch(url, {\r\n      ...options,\r\n      headers: {\r\n        ...headers,\r\n        ...options.headers,\r\n      },\r\n    });\r\n\r\n    if (response.status === 401) {\r\n      // Try to refresh token\r\n      const refreshSuccess = await this.refreshToken();\r\n      if (refreshSuccess) {\r\n        // Retry with new token\r\n        headers = this.getAuthHeaders();\r\n        response = await fetch(url, {\r\n          ...options,\r\n          headers: {\r\n            ...headers,\r\n            ...options.headers,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      // Token refresh failed or not attempted, logout\r\n      localStorage.removeItem('authTokens');\r\n      localStorage.removeItem('authUser');\r\n      window.location.href = '/login';\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      throw new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  private async refreshToken(): Promise<boolean> {\r\n    const tokens = localStorage.getItem('authTokens');\r\n    if (!tokens) return false;\r\n\r\n    try {\r\n      const parsedTokens = JSON.parse(tokens);\r\n      const response = await fetch(`${API_BASE_URL}/auth/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: parsedTokens.refresh }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const newTokens = {\r\n          access: data.access,\r\n          refresh: parsedTokens.refresh, // Keep the same refresh token\r\n        };\r\n        localStorage.setItem('authTokens', JSON.stringify(newTokens));\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('Token refresh failed:', error);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async getConfiguration(): Promise<any> {\r\n    return this.request('/config/');\r\n  }\r\n\r\n  async getTelemetry(): Promise<any[]> {\r\n    return this.request('/telemetry/');\r\n  }\r\n\r\n  async provisionDevice(data: any): Promise<any> {\r\n    const response = await fetch(`${API_BASE_URL}/devices/provision`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`Provisioning failed: ${response.statusText}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  async getAlerts(): Promise<any[]> {\r\n    const cacheKey = 'alerts';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/alerts/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getSystemHealth(): Promise<any> {\r\n    const cacheKey = 'system_health';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/health/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getKPIs(): Promise<any> {\r\n    const cacheKey = 'kpis';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/kpis/');\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async getUsers(search?: string): Promise<any[]> {\r\n    const cacheKey = `users_${search || 'all'}`;\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    const data = await this.request(`/users/${params}`);\r\n    cacheService.set(cacheKey, data, DEFAULT_TTL);\r\n    return data;\r\n  }\r\n\r\n  async createUser(userData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    });\r\n    // Invalidate users cache\r\n    cacheService.clear('users_all');\r\n    cacheService.clearAll(); // Clear all cache for safety\r\n    return result;\r\n  }\r\n\r\n  async createEmployee(employeeData: any): Promise<any> {\r\n    const result = await this.request('/users/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ ...employeeData, is_staff: true }),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async getUserDevices(userId: number): Promise<any[]> {\r\n    return this.request(`/users/${userId}/devices/`);\r\n  }\r\n\r\n  async updateUser(userId: number, data: any): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  async deleteUser(userId: number): Promise<any> {\r\n    const result = await this.request(`/users/${userId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('users_all');\r\n    return result;\r\n  }\r\n\r\n  // Profile Management (for current logged-in user)\r\n  async getProfile(): Promise<any> {\r\n    return this.request('/profile/');\r\n  }\r\n\r\n  async updateProfile(data: any): Promise<any> {\r\n    return this.request('/profile/update/', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async changePassword(data: { current_password: string; new_password: string }): Promise<any> {\r\n    return this.request('/profile/change-password/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  // Customer Management (separate from staff users/employees)\r\n  async getCustomers(search?: string): Promise<any[]> {\r\n    const params = search ? `?search=${encodeURIComponent(search)}` : '';\r\n    return this.request(`/customers/${params}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any): Promise<any> {\r\n    return this.request('/customers/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/`);\r\n  }\r\n\r\n  async updateCustomer(customerId: number, data: any): Promise<any> {\r\n    return this.request(`/customers/${customerId}/update/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteCustomer(customerId: number): Promise<any> {\r\n    return this.request(`/customers/${customerId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getPresets(): Promise<any[]> {\r\n    const cacheKey = 'presets';\r\n    const cached = cacheService.get(cacheKey);\r\n    if (cached) return cached;\r\n\r\n    const data = await this.request('/presets/');\r\n    // Use longer TTL for presets as they change less frequently\r\n    cacheService.set(cacheKey, data, 30 * 60 * 1000); // 30 minutes\r\n    return data;\r\n  }\r\n\r\n  async createPreset(data: any): Promise<any> {\r\n    const result = await this.request('/presets/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async updatePreset(id: number, data: any): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async deletePreset(id: number): Promise<any> {\r\n    const result = await this.request(`/presets/${id}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n    cacheService.clear('presets');\r\n    return result;\r\n  }\r\n\r\n  async getGlobalSlaves(): Promise<any[]> {\r\n    return this.request('/slaves/');\r\n  }\r\n\r\n  async createGlobalSlave(slaveData: any): Promise<any> {\r\n    return this.request('/slaves/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateGlobalSlave(slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteGlobalSlave(slaveId: number): Promise<any> {\r\n    return this.request(`/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async getDevices(search?: string, page: number = 1, pageSize: number = 25): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (search) params.append('search', search);\r\n    params.append('page', page.toString());\r\n    params.append('page_size', pageSize.toString());\r\n    \r\n    const queryString = params.toString();\r\n    return this.request(`/devices/?${queryString}`);\r\n  }\r\n\r\n  async createDevice(deviceData: any): Promise<any> {\r\n    return this.request('/devices/create/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(deviceData),\r\n    });\r\n  }\r\n\r\n  async updateDevice(deviceId: number, data: any): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async deleteDevice(deviceId: number): Promise<any> {\r\n    return this.request(`/devices/${deviceId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async deleteDevicesBulk(deviceIds: number[]): Promise<any> {\r\n    return this.request(`/devices/delete-bulk/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ device_ids: deviceIds }),\r\n    });\r\n  }\r\n\r\n  async getSlaves(configId: string): Promise<any[]> {\r\n    return this.request(`/presets/${configId}/slaves/`);\r\n  }\r\n\r\n  async createSlave(configId: string, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/create/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async updateSlave(configId: string, slaveId: number, slaveData: any): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(slaveData),\r\n    });\r\n  }\r\n\r\n  async deleteSlave(configId: string, slaveId: number): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/${slaveId}/delete/`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async addSlavesToPreset(configId: string, slaveIds: number[]): Promise<any> {\r\n    return this.request(`/presets/${configId}/slaves/add/`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ slave_ids: slaveIds }),\r\n    });\r\n  }\r\n\r\n  // OTA (Over-The-Air) Update Endpoints\r\n  async getFirmwareVersions(activeOnly: boolean = true): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    params.append('active', activeOnly.toString());\r\n    return this.request(`/ota/firmware/?${params.toString()}`);\r\n  }\r\n\r\n  async uploadFirmwareVersion(formData: FormData): Promise<any> {\r\n    const headers = this.getAuthHeaders();\r\n    delete (headers as any)['Content-Type']; // Let browser set it for FormData\r\n    \r\n    return fetch(`${API_BASE_URL}/ota/firmware/create/`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Authorization': `Bearer ${JSON.parse(localStorage.getItem('authTokens') || '{}').access}`,\r\n      },\r\n      body: formData,\r\n    }).then(res => res.json());\r\n  }\r\n\r\n  async updateFirmwareVersion(firmwareId: number, data: any): Promise<any> {\r\n    return this.request(`/ota/firmware/${firmwareId}/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  async getDeviceUpdateLogs(deviceId: string): Promise<any> {\r\n    return this.request(`/ota/devices/${deviceId}/logs`);\r\n  }\r\n\r\n  async getOTAConfig(): Promise<any> {\r\n    return this.request(`/ota/config/`);\r\n  }\r\n\r\n  async updateOTAConfig(config: any): Promise<any> {\r\n    return this.request(`/ota/config/update/`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(config),\r\n    });\r\n  }\r\n\r\n  async getOTAHealth(): Promise<any> {\r\n    return this.request(`/ota/health/`);\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"names":["getDataTypeName","dataType","concat","Configuration","config","setConfig","useState","slaves","setSlaves","loading","setLoading","error","setError","creatingSlave","setCreatingSlave","editingSlave","setEditingSlave","globalMode","setGlobalMode","slaveForm","setSlaveForm","slave_id","device_name","polling_interval_ms","timeout_ms","enabled","registers","registerForm","setRegisterForm","label","address","num_registers","function_code","data_type","scale_factor","offset","mapSlave","slave","id","slaveId","deviceName","pollingIntervalMs","timeoutMs","map","reg","numRegisters","functionCode","scaleFactor","fetchSlaves","useCallback","async","slavesData","apiService","getSlaves","configId","err","console","fetchGlobalSlaves","getGlobalSlaves","fetchConfiguration","data","getConfiguration","Error","message","includes","useEffect","handleSaveSlave","isGlobal","parseInt","find","s","slaveData","updatedSlave","updateGlobalSlave","updateSlave","mappedSlave","newSlave","createGlobalSlave","createSlave","_jsx","className","children","_jsxs","style","marginBottom","padding","backgroundColor","border","borderRadius","color","onClick","float","background","cursor","fontSize","title","length","handleCreateSlave","textAlign","toString","handleEditSlave","marginRight","width","height","viewBox","fill","stroke","strokeWidth","d","window","confirm","deleteGlobalSlave","deleteSlave","filter","handleDeleteSlave","points","x1","y1","x2","y2","onSubmit","e","preventDefault","type","value","onChange","_objectSpread","target","required","min","max","placeholder","join","checked","parseFloat","step","addRegister","newRegister","Date","now","index","_","i","removeRegister","handleCancel","CacheService","constructor","cache","Map","set","key","ttlMs","arguments","undefined","DEFAULT_TTL","this","timestamp","expiresIn","get","entry","delete","has","clear","clearAll","size","getTTL","LONG_TTL","cacheService","API_BASE_URL","process","getAuthHeaders","tokens","localStorage","getItem","parsedTokens","JSON","parse","access","request","endpoint","options","url","headers","response","fetch","status","refreshToken","removeItem","location","href","ok","errorText","text","statusText","json","method","body","stringify","refresh","newTokens","setItem","getTelemetry","provisionDevice","getAlerts","cacheKey","cached","getSystemHealth","getKPIs","getUsers","search","params","encodeURIComponent","createUser","userData","result","createEmployee","employeeData","is_staff","getUserDevices","userId","updateUser","deleteUser","getProfile","updateProfile","changePassword","getCustomers","createCustomer","customerData","getCustomer","customerId","updateCustomer","deleteCustomer","getPresets","createPreset","updatePreset","deletePreset","getDevices","page","pageSize","URLSearchParams","append","queryString","createDevice","deviceData","updateDevice","deviceId","deleteDevice","deleteDevicesBulk","deviceIds","device_ids","addSlavesToPreset","slaveIds","slave_ids","getFirmwareVersions","activeOnly","uploadFirmwareVersion","formData","then","res","updateFirmwareVersion","firmwareId","getDeviceUpdateLogs","getOTAConfig","updateOTAConfig","getOTAHealth"],"sourceRoot":""}