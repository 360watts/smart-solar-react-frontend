"use strict";(self.webpackChunksmart_solar_frontend=self.webpackChunksmart_solar_frontend||[]).push([[524],{9524(s,e,a){a.r(e),a.d(e,{default:()=>i});var t=a(5043),c=a(5560),r=a(579);const i=()=>{const[s,e]=(0,t.useState)(null),[a,i]=(0,t.useState)(!0),[l,n]=(0,t.useState)(null);(0,t.useEffect)(()=>{d();const s=setInterval(d,6e4);return()=>clearInterval(s)},[]);const d=async()=>{try{const s=await c.K.getSystemHealth();e(s),i(!1)}catch(s){n(s instanceof Error?s.message:"An error occurred"),i(!1)}},o=s=>{switch(s.toLowerCase()){case"healthy":return"status-online";case"warning":return"status-warning";case"critical":return"status-critical";default:return"status-offline"}},h=s=>{switch(s.toLowerCase()){case"healthy":return"\u2705";case"warning":return"\u26a0\ufe0f";case"critical":return"\ud83d\udea8";default:return"\u2753"}};if(a)return(0,r.jsx)("div",{className:"loading",children:"Loading system health..."});if(l)return(0,r.jsxs)("div",{className:"error",children:["Error: ",l]});if(!s)return(0,r.jsx)("div",{className:"error",children:"No health data available"});const m=s.active_devices/s.total_devices*100;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"System Health Dashboard"}),(0,r.jsxs)("div",{className:"grid grid-cols-2",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Overall System Status"}),(0,r.jsxs)("div",{className:"status-indicator ".concat(o(s.overall_health)),children:[h(s.overall_health)," ",s.overall_health.toUpperCase()]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"System Uptime"}),(0,r.jsx)("p",{className:"metric-large",children:(s=>{const e=Math.floor(s/86400),a=Math.floor(s%86400/3600),t=Math.floor(s%3600/60);return"".concat(e,"d ").concat(a,"h ").concat(t,"m")})(s.uptime_seconds)}),(0,r.jsx)("p",{className:"metric-label",children:"Since first telemetry"})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Device Connectivity"}),(0,r.jsxs)("p",{className:"metric-large",children:[s.active_devices,"/",s.total_devices]}),(0,r.jsx)("p",{className:"metric-label",children:"Active/Total Devices"}),(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{className:"progress-fill",style:{width:"".concat(m,"%")}})}),(0,r.jsxs)("p",{className:"metric-small",children:[m.toFixed(1),"% uptime"]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Data Collection"}),(0,r.jsx)("p",{className:"metric-large",children:s.total_telemetry_points.toLocaleString()}),(0,r.jsx)("p",{className:"metric-label",children:"Total Data Points"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Service Status"}),(0,r.jsxs)("div",{className:"service-status",children:[(0,r.jsxs)("div",{className:"service-item",children:[(0,r.jsx)("span",{className:"service-name",children:"Database"}),(0,r.jsxs)("span",{className:"service-status ".concat(o(s.database_status)),children:[h(s.database_status)," ",s.database_status]})]}),(0,r.jsxs)("div",{className:"service-item",children:[(0,r.jsx)("span",{className:"service-name",children:"MQTT Broker"}),(0,r.jsxs)("span",{className:"service-status ".concat(o(s.mqtt_status)),children:[h(s.mqtt_status)," ",s.mqtt_status]})]})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"Performance Metrics"}),(0,r.jsxs)("div",{className:"metrics-list",children:[(0,r.jsxs)("div",{className:"metric-item",children:[(0,r.jsx)("span",{children:"Data Points/Hour:"}),(0,r.jsx)("span",{children:(s.total_telemetry_points/(s.uptime_seconds/3600)).toFixed(1)})]}),(0,r.jsxs)("div",{className:"metric-item",children:[(0,r.jsx)("span",{children:"Avg Data/Device:"}),(0,r.jsx)("span",{children:s.total_devices>0?(s.total_telemetry_points/s.total_devices).toFixed(0):"0"})]}),(0,r.jsxs)("div",{className:"metric-item",children:[(0,r.jsx)("span",{children:"Active Device Ratio:"}),(0,r.jsxs)("span",{children:[m.toFixed(1),"%"]})]})]})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{children:"System Information"}),(0,r.jsxs)("div",{className:"system-info",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Last Updated:"})," ",(new Date).toLocaleString()]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Monitoring Since:"})," ",new Date(Date.now()-1e3*s.uptime_seconds).toLocaleString()]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"API Status:"})," ",(0,r.jsx)("span",{className:"status-online",children:"Connected"})]})]})]})]})}}}]);
//# sourceMappingURL=524.0491e023.chunk.js.map